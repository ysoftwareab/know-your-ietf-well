<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>IPPM standard compliance testing</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="IPPM standard compliance testing">
<meta name="keywords" content="IPPM, measurement, compliance, metric">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Internet Engineering Task Force</td><td class="header">R. Geib, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Deutsche Telekom</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">A. Morton</td></tr>
<tr><td class="header">Expires: April 29, 2010</td><td class="header">AT&T Labs</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">R. Fardid</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Covad Communications</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 26, 2009</td></tr>
</table></td></tr></table>
<h1><br />IPPM standard compliance testing<br />draft-geib-ippm-metrictest-01</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 29, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>  This document specifies tests to determine if multiple, independent,
      and interoperable implementations of a metrics specification document 
      are at hand so that the metrics specification can be advanced to an Internet 
      standard. Results of different IPPM implementations can be compared if they 
      measure under the same underlying network conditions. Results are compared 
      using state of the art statistical methods. 
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Requirements Language<br />
<a href="#anchor3">2.</a>&nbsp;
Basic idea<br />
<a href="#anchor4">3.</a>&nbsp;
Verification of conformance to a metric specification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.1.</a>&nbsp;
Tests of an individual implementation against a metric specification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.2.</a>&nbsp;
Test set up resulting in identical live network testing conditions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.3.</a>&nbsp;
Tests two or more different implementations against a metric specification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.4.</a>&nbsp;
Clock synchronisation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.5.</a>&nbsp;
Recommended Metric Verification Measurement Process<br />
<a href="#Acknowledgements">4.</a>&nbsp;
Acknowledgements<br />
<a href="#Contributors">5.</a>&nbsp;
Contributors<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">7.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#Appendix A">Appendix&nbsp;A.</a>&nbsp;
Further ideas on statistical tests<br />
<a href="#Appendix B">Appendix&nbsp;B.</a>&nbsp;
Verification of measurement precision by statistical methods<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p><a class='info' href='#bradner-metrictest'>Draft bradner-metrictest<span> (</span><span class='info'>Bradner, S., Mankin, A., and V. Paxson, &ldquo;Advancement of metrics specifications on the IETF Standards Track,&rdquo; July&nbsp;2007.</span><span>)</span></a> [bradner&#8209;metrictest] 
      states:
</p>
<p>The Internet Standards Process <a class='info' href='#RFC2026'>RFC2026<span> (</span><span class='info'>Bradner, S., &ldquo;The Internet Standards Process -- Revision 3,&rdquo; October&nbsp;1996.</span><span>)</span></a> [RFC2026]
      requires that for a IETF
      specification to advance beyond the Proposed Standard level, at least
      two genetically  unrelated implementations must be shown to
      interoperate correctly  with all features and options. There are two
      distinct reasons for this requirement.
</p>
<p>In the case of a protocol specification, the notion of "interoperability" 
      is reasonably intuitive - the implementations must successfully "talk to each 
      other", while exercising all features and options.
</p>
<p>In the case of a specification for a performance metric, network
      latency for example, exactly what constitutes "interoperation" is
      less obvious.  The IESG didn't yet decide how to judge "metric specification 
      interoperability" in the context of the IETF Standards Process and this new 
      draft suggests a methodology which (hopefully) is suitable for IPPM metrics. 
      General applicability of the methods proposed in the following should however
      not be excluded.
</p>
<p>A metric specification describes a method of testing and a way to report 
      the results of this testing. One example of such a metric would be a way to 
      test and report the latency that data packets would incur while being sent 
      from one network location to another.
</p>
<p>Since implementations of testing metrics are by their nature stand-
      alone and do not interact with each other, the level of the
      interoperability called for in the IETF standards process cannot be
      simply determined by seeing that the implementations interact
      properly. Instead, verifying equivalence by proofing that different 
      implementations verifiably give statistically equivalent results
      Verifiable equivalence may take the place of interoperability.
</p>
<p>This document defines the process of verifying equivalence by using 
      a specified test set up to create the required separate data sets (which 
      may be seen as samples taken from the same underlying distribution) and 
      then apply state of the art statistical methods to verify equivalence of 
      the results. To illustrate application of the process defined her, validating 
      compliance with <a class='info' href='#RFC2679'>RFC2679<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a> [RFC2679] is picked as an example. 
      While test set ups may vary with the metrics to be validated, the statistical 
      methods will not. Documents defining test setups to validate other metrics 
      should be created by the IPPM WG, once the process proposed here has been 
      agreed upon. 
</p>
<p>This document defines the process of verifying equivalence by using 
      a specified test set up to create the required separate data sets (which 
      may be seen as samples taken from the same underlying distribution) and 
      then apply state of the art statistical methods to verify equivalence of 
      the results. To illustrate application of the process defined her, validating 
      compliance with <a class='info' href='#RFC2679'>RFC2679<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a> [RFC2679] is picked as an example. 
      While test set ups may vary with the metrics to be validated, the statistical 
      methods will not. Documents defining test setups to validate other metrics 
      should be created by the IPPM WG, once the process proposed here has been 
      agreed upon. 
</p>
<p>Changes from -00 to -01 version
</p>
<p></p>
<ul class="text">
<li>Addition of a comparison of individual metric implementations against the metric 
          specification (trying to pick up <a class='info' href='#morton-advance-metrics'>problems and 
          solutions for metric advancement<span> (</span><span class='info'>Morton, A., &ldquo;Problems and Possible Solutions for Advancing Metrics on the Standards Track,&rdquo; July&nbsp;2009.</span><span>)</span></a> [morton&#8209;advance&#8209;metrics]).
</li>
<li>More emphasis on the requirement to carefully design and document the measurement
          set up of the metric comparison.
</li>
<li>Proposal of testing conditions under identical WAN netwrok conditions using IP 
          in IP tunneling or Pseudo Wires and parallel measurement streams.
</li>
<li>Proposing the requirement to document the smallest resolution at which an ADK 
          test was passed by 95%. As no minimum resolution is specified, IPPM metric compliance 
          is not linked to a particular performance of an implementation.
</li>
<li>Reference to RFC 2330 and RFC 2679 for the 95% confidence interval as preferred 
          criterion to decide on statistical equivalence 
</li>
<li>Reducing the proposed statistical test to ADK with 95% confidence.
</li>
</ul>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Basic idea</h3>

<p>The Framework for IP Performance Metrics (<a class='info' href='#RFC2330'>RFC 2330,<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a> [RFC2330]) 
     expects that a "methodology for a metric should have the property that it is repeatable: if 
     the methodology is used multiple times under identical conditions, it should result in 
     consistent measurements." This means, an IPPM implementation is expected to measure a 
     metric with high precision. The metric compliance test specified in the following 
     emphasises precision over accuracy. Further the methodology and test methods proposed 
     by RFC 2330 are used by this document too.
</p>
<p>The implementation of a standard compliant metric is expected to meet the requrirements
     of the related a metric specification. So before comparing two metrice implementations, 
     each metric implementation is individually compared against the metric specification. As 
     an example, an implementation of the OWD metric must be calibrated. Calibration results 
     of a standard conformant metric implementation must be published then.
</p>
<p>Most metric specificatios leave freedom to implementors on those aspects, which aren't 
     fundamental for an individual metric implementation. Calibration of individual metric 
     implementations and comparing different ones requires a careful design and documentation 
     of the metric implementation and of the testing conditions.
</p>
<p>The IPPM framework expects repeating measurements to lead to the same results, if the 
     conditions under which these measurements have been collected are identical. Small deviations 
     are expected to lead to small deviations in results only. To charaterise statistical 
     equivalence in the case of small deviations, RFC 2330 and RFC 2679 suggest to apply a 95% 
     confidence interval. Quoting RFC 2679, "95 percent was chosen because ... a particular 
     confidence level should be specified so that the results of independent implementations 
     can be compared."
</p>
<p>Two different IPPM implementations are expected to measure statistically equivalent
     results, if they both measure a metric under the same networking conditions. Formulating 
     the measurement in statistical terms: separate samples are collected (by separate metric 
     implementations) from the same underlying statistical process (the same network conditions). 
     The "statistical hypothesis" to be tested is the expectation, that both samples do not expose 
     statistically different properties. This requires careful test design:
</p>
<p></p>
<ul class="text">
<li>The error induced by the sample size must be small enough to minimize its influence 
          on the test result. This may have to be respected, especially if two implementations 
          measure with different average probing rates.
</li>
<li>If statistics of time series are compared, the implementation with the lowest probing
          frequency determines the smallest temporal interval for which results can be compared.
</li>
<li>Every comparison must be repeated several times based on different measurement data 
          to avoid random indications of compatibility (or the lack of it).
</li>
<li>The measurement test set up must be self-consistent to the largest possible extent. This 
          means, network conditions, paths and IPPM metric implementations SHOULD be identical for the
          compared implementations to the largest possible degree to minimize the influence of the test 
          and measurement set up on the result. This includes e.g. aspects of the stability and 
          non-ambiguity of routes taken by the measurement packets. See RFC 2330 for a discussion on 
          self-consistency <a class='info' href='#RFC2330'>RFC 2330<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a> [RFC2330].
          
</li>
</ul>

<p>As addressed by <a class='info' href='#morton-advance-metrics'>"problems and solutions for metric 
     advancement"<span> (</span><span class='info'>Morton, A., &ldquo;Problems and Possible Solutions for Advancing Metrics on the Standards Track,&rdquo; July&nbsp;2009.</span><span>)</span></a> [morton&#8209;advance&#8209;metrics], documentation of the metric test will indicate which requirements and 
     options of a metric specification are specified clear enough for an implementation or uncover 
     gaps in the metric specification. The final step in advancing a metric specification to 
     standard is by improving unclear specifications and by cleaning it from not supported options.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Verification of conformance to a metric specification</h3>

<p>This section specifies how to verify compliance of two or more IPPM implementations against a metric 
      specification. This document only proposes a general methodology. Compliance criteria to a specific 
      metric implementation are expected to be drafted for each individual metric specification. The only 
      exception is the statistical test comparing two metric implementations which are simultaneously 
      tested. This test is applicable without metric specific decision criteria.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Tests of an individual implementation against a metric specification</h3>

<p>A metric implementation MUST support the requirements classified as "MUST" and "REQUIRED" of the 
        related metric specification to be compliant to the latter.
</p>
<p>Further, supported options of a metric implementation SHOULD be documented in sufficient detail 
        to validate and improve the underlying metric specification option or remove options which saw no 
        implementation or which are badly specified from the metric specification to be promoted to a
        standard.
</p>
<p>RFC2330 and RFC2679 emphasise precision as an aim of IPPM metric implementations. A single IPPM 
        conformant implementation MUST under otherwise identical network conditions produce precise results 
        for repeated measurements of the same metric.
</p>
<p>RFC 2330 prefers the "empirical distribution function" EDF to describe collections of measurements. 
        RFC 2330 determines, that "unless otherwise stated, IPPM goodness-of-fit tests are done using 5% 
        significance." The goodness of fit test required to determine the preciusion of a metric implementation 
        consists of testing, whether two or more samples belong to the same underlying distribution (of measured 
        network performance events). The goodness of fit test to be applied is the Anderson-Darling K sample 
        test (ADK test, K stands for the number of samples to be compared). Please note that RFC 2330 and 
        RFC 2679 apply an Anderson Darling goodness of fit test too.
</p>
<p>The results of a repeated tests with a single implementation MUST pass an ADK sample test with 
        confidence level of 95%. The resolution for which the ADK test has been passed with the specified 
        confidence level MUST be documented. To formulate different: The requirement is to document the 
        smalles resolution, at which the results of the tested metric implementation pass an ADK test with 
        a confidence level of 95%.
</p>
<p>As an example, a one way delay measurement may pass an ADK test with a timestamp resultion of 1 ms. The 
        same test may fail, if timestamps with a resolution of 100 microseconds are eavluated. The implementation 
        then is then conforming to the metric specification up to a timestamp resolution of 1 ms.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Test set up resulting in identical live network testing conditions</h3>

<p>Two major issues complicate tests for metric compliance across live 
        networks under identical testing conditions. One of these is the general posit, "metric definition 
        implementations cannot be conveniently examined in field measurement scenarios". The other is more
        more specificcally addressing "parallelism in devices and networks", by which mechanisms like load 
        balancing are meant. As a reference for the latter, [RFC 4814] is given.
</p>
<p>This section proposes two measures how to deal with both. Tunneling mechanisms can be used to 
        avoid pallalel processing of different flows in the network. Measuring by separate parallel probe 
        flows results in repeated collection of data. In both cases, WAN network conditions are identical, 
        no matter what they are in detail.
</p>
<p>Any measurement set up MUST be made to avoid the probing traffic itself to impede the metric 
        measurement. The created measurement load MUST NOT result in congestion at the access link connecting 
        the measurement implementation to the WAN. The created measurement load MUST NOT overload the 
        measurement implementation itself, eg. by causing a high CPU load or by creating imprecisions 
        due to internal send/receive probe packet collisions.
</p>
<p>IP in IP tunnels can be used to avoid ECMP routing of different measurement streams if they allow 
        to carry inner IP packets from different senders in a single tunnel with the same outer origin and 
        destination address as well as the same port numbers. The author is not an expert on tunneling and 
        appreciates guidance on the applicability of one or more of the following protocols: <a class='info' href='#RFC2003'>IP in IP<span> (</span><span class='info'>Perkins, C., &ldquo;IP Encapsulation within IP,&rdquo; October&nbsp;1996.</span><span>)</span></a> [RFC2003],
        <a class='info' href='#RFC2784'>GRE<span> (</span><span class='info'>Farinacci, D., Li, T., Hanks, S., Meyer, D., and P. Traina, &ldquo;Generic Routing Encapsulation (GRE),&rdquo; March&nbsp;2000.</span><span>)</span></a> [RFC2784] or <a class='info' href='#RFC2661'>L2TP<span> (</span><span class='info'>Townsley, W., Valencia, A., Rubens, A., Pall, G., Zorn, G., and B. Palter, &ldquo;Layer Two Tunneling Protocol &quot;L2TP&quot;,&rdquo; August&nbsp;1999.</span><span>)</span></a> [RFC2661] or <a class='info' href='#RFC3931'>[RFC3931]<span> (</span><span class='info'>Lau, J., Townsley, M., and I. Goyret, &ldquo;Layer Two Tunneling Protocol - Version 3 (L2TPv3),&rdquo; March&nbsp;2005.</span><span>)</span></a>. 
        <a class='info' href='#RFC4928'>RFC 4928<span> (</span><span class='info'>Swallow, G., Bryant, S., and L. Andersson, &ldquo;Avoiding Equal Cost Multipath Treatment in MPLS Networks,&rdquo; June&nbsp;2007.</span><span>)</span></a> [RFC4928] proposes measures how to avoid ECMP treatment 
        in MPLS networks. Applying Pseudo-Wires for a metric implementation test is one way to avoid MPLS 
        based ECMP treatment. If tuneling is applied, a single tunnel MUST carry all test traffic in one 
        direction. If eg. Ethernet Pseudo Wires are applied and the measurement streams are carried in 
        different VLANs, the Pseudo Wires MUST be set up in physical port mode to avoid set up of Pseudo 
        Wires per VLAN (which may see different paths due to ECMP routing), see <a class='info' href='#RFC4448'>RFC 4448<span> (</span><span class='info'>Martini, L., Rosen, E., El-Aawar, N., and G. Heron, &ldquo;Encapsulation Methods for Transport of Ethernet over MPLS Networks,&rdquo; April&nbsp;2006.</span><span>)</span></a> [RFC4448].
</p>
<p>To have statsitical significance, a test MUST be repeated 5 times at least (see below). WAN 
        conditions may change over time. Sequential testing is no useful metric test option. However tests 
        can be carried out by applying 5 or more different parallel measuremet flows. The author takes no 
        position, whether such a test is carried out by sending eg a single CBR flow and defining avery 
        n-th (n = 1..5) packet to belong to a specific measurement flow, or whether multiple network cards
        are applied to create several distinct flows of a single implementation. In the latter case, three 
        different cards of one implementation at a single test site will do, if tunneling set ups like the 
        one proposed by <a class='info' href='#GU&Duffield'>GRE encapsulated multicast probing<span> (</span><span class='info'>Gu, Y., Duffield, N., Breslau, L., and S. Sen, &ldquo;GRE Encapsulated Multicast Probing: A Scalable Technique for Measuring One-Way Loss,&rdquo; June&nbsp;2007.</span><span>)</span></a> [GU&Duffield] are applied 
        (note that one or more remote tunnel end points and the same number of routers are required).
</p>
<p>Some additional rules to calculate and compare samples have to be respected. The following 
        rules are of importance for the IPPM metric test:
</p>
<p></p>
<ul class="text">
<li>To compare different probes of a common underlying distribution in terms of metrics 
          characterising a communication network requires to respect the temporal nature for which 
          the assumption of common underlying distribution may hold. Any singletons or samples to be 
          compared MUST be captured within the same time interval.
</li>
<li>Whenever statistical events like singletons or rates are used to characterise measured 
          metrics of a time-interval, at least 5 events of a relevant metric MUST be present to ensure 
          a minimum confidence into the reported value (see <a class='info' href='#Rule of thumb'>Wikipedia on confidence<span> (</span><span class='info'>N., N., &ldquo;Confidence interval,&rdquo; October&nbsp;2008.</span><span>)</span></a> [Rule of thumb]).
          Note that this criterion also is to be respected e.g. when comparing packet loss metrics. 
          Any packet loss measurement interval to be compared with the results of another implementation 
          needs to contain at least five lost packets to have a minimum confidence that the observed loss 
          rate wasn't caused by a samll number of random packet drops.
</li>
<li>The minimum number of singletons or samples to be compared by an Anderson-Darling test is 
          100 per tested metric implementation. Note that the Anderson-Darling test detects small 
          differences in distributions fairly well and will fail for high number of compared results 
          (RFC2330 mentions an example with 8192 measurements to guarantee a failure of an 
          Anderson-Darling test). 
</li>
<li>The Anderson-Darling test is sensible against differing accuracy or bias of different 
          implementations. These differences result in differing averages of compared samples. 
          In general, differences in averages of samples may result from differing test conditions. An 
          example may be different packet sizes, resulting in a constant delay difference between compared 
          samples. Therefore samples to be compared by an Anderson Darling test MAY be calibrated by the 
          difference of the average values of the samples.
</li>
</ul>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Tests two or more different implementations against a metric specification</h3>

<p>RFC2330 expects that a "a methodology for a given metric exhibits continuity 
        if, for small variations in conditions, it results in small variations in the resulting 
        measurements.  Slightly more precisely, for every positive epsilon, there exists a positive
        delta, such that if two sets of conditions are within delta of each other, then the resulting 
        measurements will be within epsilon of each other." A small variation in conditions in the 
        context of a metric comparison can be seen as different implementations measuring the same metric 
        along the same path.
</p>
<p>RFC2679 comments that a "95 percent [confidence level for an Anderson-Darling goodness of fit
        test] was chosen because....a particular confidence level should be specified so that the results 
        of independent implementations can be compared." While the RFC 2679 statement refers to 
        calibration, it expresses the expectation that the methodology allows for comparisons between 
        different implementations.
</p>
<p>IPPM metric specification however allow for implementor options to the largest possible degree. 
        It can't be expected that two implementors pick identical options for the implementations. 
        Implementors SHOULD to the highest degree possible pick the same configurations for their systems 
        when comparing their implementations by a metric test. 
</p>
<p>In some cases, a goodness of fit test may not be possible or show dissapointing results. To 
        clarify the difficulties arising from different implemenation options, the individual options picked 
        for every compared implementation SHOULD be documented in sufficient detail. Based on this 
        documentation, the underlying metric specification should be improved before it is promoted to a
        standard.
</p>
<p>The same statistical test as applicable to quantify precision of a single metric implementation 
        MUST be passed to compare metric conformance of different implemenations. To document compatibility, 
        the smallest measurement resolution at which the compared implementations passed the ADK sample test
        MUST be documented.
</p>
<p>For different implementations of the same metric, "variations in conditions" are reasonably 
        expected. The ADK test comparing samples of the different implemenations may result in a lower 
        precision than the test for precision of each implementation individually.
</p>
<p>
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Clock synchronisation</h3>

<p>Clock synchronization effects require special attention. Accuracy of one-way active delay 
      measurements for any metrics implementation depends on clock synchronization between the source 
      and destination of tests. Ideally, one-way active delay measurement (<a class='info' href='#RFC2679'>RFC 2679,<span> (</span><span class='info'>Almes, G., Kalidindi, S., and M. Zekauskas, &ldquo;A One-way Delay Metric for IPPM,&rdquo; September&nbsp;1999.</span><span>)</span></a> [RFC2679])
      test endpoints either have direct access to independent GPS or CDMA-based time sources or 
      indirect access to nearby NTP primary (stratum 1) time sources, equipped with GPS receivers. 
      Access to these time sources may not be available at all test locations associated with 
      different Internet paths, for a variety of reasons out of scope of this document.
</p>
<p>When secondary (stratum 2 and above) time sources are used with NTP running acrossthe same 
      network, whose metrics are subject to comparative implementation tests, network impairments 
      can affect clock synchronization, distort sample one-way values and their interval statistics.  
      It is RECOMMENDED to discard sample one-way delay values for any implementation, when one of 
      the following reliability conditions is met:
</p>
<p></p>
<ul class="text">
<li>Delay is measured and is finite in one direction, but not the other.
</li>
<li>Absolute value of the difference between the sum of one-way measurements in both 
          directions and round-trip measurement is greater than X% of the latter value.
</li>
</ul>

<p>Examination of the second condition requires RTT measurement for reference, e.g., based 
      on TWAMP (RFC5357, <a class='info' href='#RFC5357'>RFC 5357<span> (</span><span class='info'>Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;A Two-Way Active Measurement Protocol (TWAMP),&rdquo; October&nbsp;2008.</span><span>)</span></a> [RFC5357]), in conjunction with one-way 
      delay measurement.
</p>
<p>Specification of X% to strike a balance between identification of unreliable one-way delay 
      samples and misidentification of reliable samples under a wide range of Internet path RTTs 
      probably requires further study.
</p>
<p>An IPPM compliant metric implementation whose measurement requires synchonized clocks is 
      however expected to provide precise measurement results. Any IPPM metric implementation MUST be 
      of a precision of 1 ms (+/- 500 us)  with a confidence of 95% if the metric is captured along 
      an Internet path which is stable and not congested during a measurement duration of an hour or
      more. [Editor: this latter definition may avoid NTP (stratum 2 or worse) synchonized IPPM 
      implementations from becoming IPPM compliant. However internal PC clock synched implementations 
      can't be rejected that way. Ideas on criteria to deal with the latter are welcome. May drift 
      be one, as GPS synched implementations shouldn't have one or the same on origin and destination,
      respectively].
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Recommended Metric Verification Measurement Process</h3>

<p>The proposal made by the authors of <a class='info' href='#bradner-metrictest'>bradner-metrictest<span> (</span><span class='info'>Bradner, S., Mankin, A., and V. Paxson, &ldquo;Advancement of metrics specifications on the IETF Standards Track,&rdquo; July&nbsp;2007.</span><span>)</span></a> [bradner&#8209;metrictest] 
      is picked up and slightly enhanced:
</p>
<p>"In order to meet their obligations under the IETF Standards Process
      the IESG must be convinced that each metric specification advanced to
      Draft Standard or Internet Standard status is clearly written, that
      there are the required multiple verifiably equivalent
      implementations, and that all options have been implemented.
</p>
<p>"In the context of this memo, metrics are designed to measure some
      characteristic of a data network.  An aim of any metric definition
      should be that it should be specified in a way that can reliably
      measure the specific characteristic in a repeatable way."
</p>
<p>Each metric, statistic or option of those to be validated must be 
      compared against a reference measurement or another implementation by 
      at least 5 different  basic data sets, each on with sufficient size 
      to reach the specified level of confidence.
</p>
<p>"In the same way, sequentially running different implementations
      of software that perform the tests described in the metric document
      on a stable network, or simultaneously on a network that may or may
      not be stable should produce essentially the same results."
</p>
<p>Following these assumptions any recommendation for the advancement of
      a metric specification needs to be accompanied by an implementation
      report, as is the case with all requests for the advancement of IETF
      specifications.  The implementation report needs to include a specific
      plan to test the specific metrics in the RFC in lab or real-world
      networks and reports of the tests performed with two or more
      implementations of the software.  The test plan should cover key
      parts of the specification, specify the precision reached for each
      measured metric and thus define the meaning of "statistically 
      equivalent" for the specific metrics being tested.  Ideally, the test 
      plan would co-evolve with the development of the metric, since that's 
      when people have the most context in their thinking regarding the 
      different subtleties that can arise.
</p>
<p>In particular, the implementation report MUST as a minimum document:
</p>
<p></p>
<ul class="text">
<li>The metric compared and the RFC specifying it, including the chosen 
          options (like e.g. the implemented selection function in the case of IPDV).
</li>
<li>A complete specification of the measurement stream (mean rate, statistical
          distribution of packets, packet size (or mean packet size and their 
          distribution), DSCP and any other measurement stream property which could
          result in deviating results. Deviations in results can be caused also if 
          chosen IP addresses and ports of different implementations can result in 
          different layer 2 or layer 3 paths due to operation of Equal Cost Multi-Path 
          routing in an operational network
</li>
<li>The duration of each measurement to be used for a metric validation, the 
          number of measurement points collected for each metric during each measurement 
          interval (i.e. the probe size) and the level of confidence derived from this 
          probe size for each measurement interval.
</li>
<li>The result of the statistical tests performed for each metric validation.
</li>
<li>The measurement configuration and set up.
</li>
<li>A parameterization of laboratory conditions and applied traffic and network 
          conditions allowing reproduction of these laboratory conditions for readers of 
          the implementation report.
          
</li>
</ul>

<p>All of the tests for each set MUST be run in a test set up as specified in the
      section "Test set up resulting in identical live network testing conditions."
</p>
<p>It is RECOMMENDED to avoid effects falsifying results of real data 
      networks, if validation measurements are taken over them. Obviously, 
      the conditions met there can't be reproduced. As the measurement equipment
      compared is designed to reliable quantify real network performance, 
      validating metrics under real network conditions is desirable of course.
</p>
<p>Data networks may forward packets differently in the case of:
</p>
<p></p>
<ul class="text">
<li>Different packet sizes chosen for different metric implementations. A 
          proposed countermeasure is selecting the same packet size when validating
          results of two samples or a sample against an original distribution.
</li>
<li>Selection of differing IP addresses and ports used by different metric 
          implementations during metric validation tests. If ECMP is applied on IP 
          or MPLS level, different paths can result (note that it may be impossible 
          to detect an MPLS ECMP path from an IP endpoint). A proposed counter 
          measure is to connect the measurement equipment to be compared by a NAT 
          device, or establishing a single tunnel to transport all measurement traffic
          The aim is to have the same IP addresses and port for all measurement 
          packets or to avoid ECMP based local routing diversion by using a layer 
          2 tunnel.
</li>
<li>Different IP options.
</li>
<li>Different DSCP.
</li>
</ul>

<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Acknowledgements</h3>

<p>Gerhard Hasslinger commented a first version of this document, suggested 
      statistical tests and the evaluation of time series information. Henk Uijterwaal 
      pushed this work and Mike Hamilton reviewed the document before publication.
</p>
<a name="Contributors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Contributors</h3>

<p>Scott Bradner, Vern Paxson and Allison Manking drafted <a class='info' href='#bradner-metrictest'>bradner-metrictest<span> (</span><span class='info'>Bradner, S., Mankin, A., and V. Paxson, &ldquo;Advancement of metrics specifications on the IETF Standards Track,&rdquo; July&nbsp;2007.</span><span>)</span></a> [bradner&#8209;metrictest],
      and major parts of it are quoted in this document. Scott Bradner and Emile 
      Stephan commented this draft before publication. 
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This memo includes no request to IANA.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>This draft does not raise any specific security issues.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2003">[RFC2003]</a></td>
<td class="author-text"><a href="mailto:perk@watson.ibm.com">Perkins, C.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2003">IP Encapsulation within IP</a>,&rdquo; RFC&nbsp;2003, October&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2003.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2003.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2003.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2026">[RFC2026]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2026">The Internet Standards Process -- Revision 3</a>,&rdquo; BCP&nbsp;9, RFC&nbsp;2026, October&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2026.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2330">[RFC2330]</a></td>
<td class="author-text"><a href="mailto:vern@ee.lbl.gov">Paxson, V.</a>, <a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:mahdavi@psc.edu">Mahdavi, J.</a>, and <a href="mailto:mathis@psc.edu">M. Mathis</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2330">Framework for IP Performance Metrics</a>,&rdquo; RFC&nbsp;2330, May&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2330.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2330.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2330.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2661">[RFC2661]</a></td>
<td class="author-text"><a href="mailto:townsley@cisco.com">Townsley, W.</a>, <a href="mailto:vandys@cisco.com">Valencia, A.</a>, <a href="mailto:acr@del.com">Rubens, A.</a>, <a href="mailto:gurdeep@microsoft.com">Pall, G.</a>, <a href="mailto:gwz@acm.org">Zorn, G.</a>, and <a href="mailto:palter@zev.net">B. Palter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2661">Layer Two Tunneling Protocol "L2TP"</a>,&rdquo; RFC&nbsp;2661, August&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2661.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2679">[RFC2679]</a></td>
<td class="author-text"><a href="mailto:almes@advanced.org">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org">Kalidindi, S.</a>, and <a href="mailto:matt@advanced.org">M. Zekauskas</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2679">A One-way Delay Metric for IPPM</a>,&rdquo; RFC&nbsp;2679, September&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2679.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2784">[RFC2784]</a></td>
<td class="author-text"><a href="mailto:dino@procket.com">Farinacci, D.</a>, <a href="mailto:tony1@home.net">Li, T.</a>, <a href="mailto:stan_hanks@enron.net">Hanks, S.</a>, <a href="mailto:dmm@cisco.com">Meyer, D.</a>, and <a href="mailto:pst@juniper.net">P. Traina</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2784">Generic Routing Encapsulation (GRE)</a>,&rdquo; RFC&nbsp;2784, March&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2784.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3931">[RFC3931]</a></td>
<td class="author-text">Lau, J., Townsley, M., and I. Goyret, &ldquo;<a href="http://tools.ietf.org/html/rfc3931">Layer Two Tunneling Protocol - Version 3 (L2TPv3)</a>,&rdquo; RFC&nbsp;3931, March&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3931.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4448">[RFC4448]</a></td>
<td class="author-text">Martini, L., Rosen, E., El-Aawar, N., and G. Heron, &ldquo;<a href="http://tools.ietf.org/html/rfc4448">Encapsulation Methods for Transport of Ethernet over MPLS Networks</a>,&rdquo; RFC&nbsp;4448, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4448.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4928">[RFC4928]</a></td>
<td class="author-text">Swallow, G., Bryant, S., and L. Andersson, &ldquo;<a href="http://tools.ietf.org/html/rfc4928">Avoiding Equal Cost Multipath Treatment in MPLS Networks</a>,&rdquo; BCP&nbsp;128, RFC&nbsp;4928, June&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4928.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Autocorrelation">[Autocorrelation]</a></td>
<td class="author-text">N., N., &ldquo;Autocorrelation,&rdquo; December&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Correlation">[Correlation]</a></td>
<td class="author-text">N., N., &ldquo;Correlation,&rdquo; June&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="GU&Duffield">[GU&Duffield]</a></td>
<td class="author-text">Gu, Y., Duffield, N., Breslau, L., and S. Sen, &ldquo;GRE Encapsulated Multicast Probing: A Scalable Technique for Measuring One-Way Loss,&rdquo; SIGMETRICS07&nbsp;San Diego, California, USA, June&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="Precision">[Precision]</a></td>
<td class="author-text">N., N., &ldquo;Accuracy and precision,&rdquo; June&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5357">[RFC5357]</a></td>
<td class="author-text">Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J. Babiarz, &ldquo;<a href="http://tools.ietf.org/html/rfc5357">A Two-Way Active Measurement Protocol (TWAMP)</a>,&rdquo; RFC&nbsp;5357, October&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5357.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Rule of thumb">[Rule of thumb]</a></td>
<td class="author-text">N., N., &ldquo;Confidence interval,&rdquo; October&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="bradner-metrictest">[bradner-metrictest]</a></td>
<td class="author-text">Bradner, S., Mankin, A., and V. Paxson, &ldquo;Advancement of metrics specifications on the IETF Standards Track,&rdquo; draft&nbsp;-morton-ippm-advance-metrics-00, (work in progress), July&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="morton-advance-metrics">[morton-advance-metrics]</a></td>
<td class="author-text">Morton, A., &ldquo;Problems and Possible Solutions for Advancing Metrics on the Standards Track,&rdquo; draft&nbsp;-bradner-metricstest-03, (work in progress), July&nbsp;2009.</td></tr>
</table>

<a name="Appendix A"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Further ideas on statistical tests</h3>

<p>IPPM metrics are captured by time series. Time series can be checked for correlation. 
      There are two expectations on statistical time series properties which should be met by separate 
      measurements probing the same underlying network performance distribution:
</p>
<p></p>
<ul class="text">
<li>The Autocorrelation indicates, whether there are any repeating patterns within a time series. 
          For the purpose of this document, it does not matter whether there is autocorrelation in a 
          measurement. It is however expected, that two measurements expose the same autocorrelation 
          on identical "lag" intervals. If calculable, the autocorrelation lies within an interval [-1;1],
          (see <a class='info' href='#Autocorrelation'>Wikipedia on autocorrelation<span> (</span><span class='info'>N., N., &ldquo;Autocorrelation,&rdquo; December&nbsp;2008.</span><span>)</span></a> [Autocorrelation]).
</li>
<li>The correlation coefficient "indicates the strength of a linear relationship between 
          two random variables." The two random variables in the case of this document are the measurement 
          time series of the IPPM implementations to be compared. The expectation is, that both are strongly 
          correlated and the resulting correlation coefficient is close to 1, (see <a class='info' href='#Correlation'>Wikipedia on correlation<span> (</span><span class='info'>N., N., &ldquo;Correlation,&rdquo; June&nbsp;2009.</span><span>)</span></a> [Correlation]).
</li>
</ul>

<p>A metric test can derive additional statistics from time series analysis. Further, formulation of a 
     test hypothesis is possible for autocorrelation and the correlation coefficient. It is however not clear, 
     whether an appropriate statistical test to validate the hypothesis by 95% significance exists. 
     Applicability of time series analysis for a metric test requires further input from statisticians.
</p>
<p>In the absence of any metric test on time series, any test result SHOULD provide the autocorrelation 
     of the compared metrics time series by lags from 1 to 10. In addition, the value of the correlation 
     coefficient SHOULD be provided. Autocorrelation and Correlation coefficient are expected to be rather 
     close to the value 1.
</p>
<p>As mentioned earlier, the time series analysis requires application of identical time intervals to 
      allow a comparison. In our delay example, single sample delay metric values are calculated for 9 
      minute intervals. If 200 consecutive sample delay metrics with the same start and end interval are 
      available for each implementation, autocorrelation can be calculated for different n * 9 minute lags. 
      The autocorrelation calculated for the time series of each implementation should be very close to 
      the autocorrelation of the other implementation for the same time lag. Further, the correlation 
      coefficient for both time series should be close to 1.
</p>
<p>The way to prove that two IPPM metric measurements provide compatible results 
      then could be performed stepwise:
</p>
<p></p>
<ul class="text">
<li>First prove that the two compared implementations have the same precision by comparing 
          statistics of the distribution of singletons (or samples) of a metric by comparing the EDF 
          of the samples captured by the two implementations.
</li>
<li>Second indicate that two compared implementations produce strongly correlated time series 
          of which each one individually has the same autocorrelation as the other one.
</li>
</ul>

<p> Comparing "Accuracy" of IPPM implementations based on averages and variations may require 
      prior checks for the absence of long range dependency within the compared measurements. Large 
      outliers as typically occurring in the case of long range dependency, can have a serious impact 
      on mean values. The median or percentiles may be more robust measures on which to compare 
      the accuracy of different IPPM implementations. An idea may be to consider data up to a certain 
      percentile, calculate the mean for data up to this percentile and then compare the means of the 
      two implementations. This could be repeated for different percentiles. If long range dependencies 
      impact is limited to large outliers, the method may work for lower percentiles. Whether this 
      makes sense must be confirmed by a statistician, so this attempt requires further study.
</p>
<a name="Appendix B"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Verification of measurement precision by statistical methods</h3>

<p> Following <a class='info' href='#Precision'>the definition of statistical precision<span> (</span><span class='info'>N., N., &ldquo;Accuracy and precision,&rdquo; June&nbsp;2009.</span><span>)</span></a> [Precision], a measurement 
      process can be characterised by two properties:
</p>
<p></p>
<ul class="text">
<li>Accuracy, which is the degree of conformity of a measured quantity to its actual (true) value.
</li>
<li>Precision, also called reproducibility or repeatability, the degree to which repeated measurements
          show the same or similar results.
</li>
</ul>

<p><a class='info' href='#Figure 1'>Figure&nbsp;1</a> further clarifies the difference between accuracy and precision of a measurement.
</p><br /><hr class="insert" />
<a name="Figure 1"></a>

<p style='text-align: center'> 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
       Probability  ^
         Density    |
                    |   Reference value     Measured Value
                    |         |                 |
                    |         |&lt;---Accuracy----&gt;|
                    |         |                _|_
                    |         |               / | \
                    |         |              /  |  \
                    |         |             /   |   \
                    |         |            /    |    \
                    |         |           /     |     \
                    |         |          /      |      \
          Measured  |         |         /&lt;- Precision -&gt;\
            Value  -|---------|-----------------|----------&gt;
                    |
</pre></div>
<p style='text-align: center'>Measurement  
        <a class='info' href='#Precision'>accuracy and precision<span> (</span><span class='info'>N., N., &ldquo;Accuracy and precision,&rdquo; June&nbsp;2009.</span><span>)</span></a> [Precision].
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Framework for IP Performance Metrics (<a class='info' href='#RFC2330'>RFC 2330,<span> (</span><span class='info'>Paxson, V., Almes, G., Mahdavi, J., and M. Mathis, &ldquo;Framework for IP Performance Metrics,&rdquo; May&nbsp;1998.</span><span>)</span></a> [RFC2330]) 
     expects that a "methodology for a metric should have the property that it is repeatable: if 
     the methodology is used multiple times under identical conditions, it should result in 
     consistent measurements." This means, an IPPM implementation is expected to measure a 
     metric with high precision.
</p>
<p>A guideline for an IPPM conformant metric implementation can be taken from these principles:
</p>
<p>Two different implementations measuring the same IPPM metric must produce results with a 
     limited difference if measuring under to the largest extent possible identical network conditions.
</p>
<p>In a metric test, both conditions are expected to hold, meaning that repeated tests of two 
      implementations MUST produce precise results for all repetition intervals.
</p>
<p>A suitable statistical test and and a level of confidence to define whether differences are rather 
     limited and whether a measurement is highly precise are specified below.
</p>
<p>Let's assume a one way delay measurement comparison between system A, probing with a frequency 
     of 2 probes per second and system B probing at a rate of 2 probes every 3 minutes. To ensure 
     reasonable confidence in results, sample metrics are calculated from at least 5 singletons per 
     compared time interval. This means, sample delay values are calculated for each system for 
     identical 6 minute intervals for the whole test duration. Per 6 minute interval, the sample 
     metric is calculated from 720 singletons for system A and from 6 singletons for system B). Note, 
     that if outliers are not filtered, moving averages are an option for an evaluation too. The 
     minimum move of an averaging interval is three minutes in our example.
</p>
<p>The test set up for the delay measurement is chosen to minimize errors by locating one system of 
     each implementation at the same end of two separate sites, between which delay is measured for the 
     metric test. Both measurement sites are connected by one IPSEC tunnel, so that all measurement packets 
     cross the Internet with the same IP addresses. Both measurement systems measure simultaneously and the 
     local links are dimensioned to avoid congestion caused by the probing traffic itself.
</p>
<p>The measured delay values are reported with a resolution above the measurement error and above 
     the synchronisation error. This is done to avoid comparing these errors between two different metric 
     implementations instead of comparing the IPPM metric implementation itself.
</p>
<p>The overall duration of the test is chosen so that more than 1000 six minute measurement intervals 
     are collected. The amount of data collected allows separate comparisons for e.g. 200 consecutive 6 minute 
     intervals. intervals, during which routes were instable, are discarded prior to evaluation.
</p>
<p>The captured delays may have been captured singletons ranging from an absolute minimum Delay Dmin 
     to values Dmin + 5 ms. To compare distributions, the set of singletons of a chosen evaluation interval 
     (e.g. the data of one of the five 1800 minute capture sequences, see above) is sorted for the frequency 
     of singletons per Dmin + N * 0.5 ms (n = 1, 2, ...). After that, a comparison of the two probe sets with 
     any of the mentioned tests may be applied.
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ruediger Geib (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Deutsche Telekom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Heinrich Hertz Str. 3-7</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Darmstadt,   64295</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 6151 628 2747</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Ruediger.Geib@telekom.de">Ruediger.Geib@telekom.de</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Al Morton</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AT&T Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">200 Laurel Avenue South</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Middletown, NJ  07748</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 732 420 1571</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+1 732 368 1192</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:acmorton@att.com">acmorton@att.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Reza Fardid</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Covad Communications</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2510 Zanker Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95131</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 408 434-2042</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:RFardid@covad.com">RFardid@covad.com</a></td></tr>
</table>
</body></html>
