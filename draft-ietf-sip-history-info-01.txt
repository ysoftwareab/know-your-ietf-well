
Internet Draft                                              M. Barnes 
Document: draft-ietf-sip-history-info-01.txt                   Editor 
Category: Standards Track                             Nortel Networks 
                                                                      
Expires: April, 2004                                 October,  2003 

    An Extension to the Session Initiation Protocol for Request History 
                                Information  
     
Status of this Memo  
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026.  
        
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-
   Drafts.  
        
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time. It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress."  
        
   The list of current Internet-Drafts can be accessed at  
        http://www.ietf.org/ietf/1id-abstracts.txt  
   The list of Internet-Draft Shadow Directories can be accessed at  
        http://www.ietf.org/shadow.html.  
      
Copyright Notice 
   
   Copyright (C) The Internet Society (2003).  All Rights Reserved. 
    
Abstract  
    
   This draft defines a standard mechanism for capturing the history 
   information associated with a SIP request.  This capability enables 
   many enhanced services by providing the information as to how and why 
   a call arrives at a specific application or user.  This draft defines 
   a new optional SIP header, History-Info, for capturing the history 
   information in requests. A new option tag, Histinfo, to be included 
   in the Supported header is defined to allow UAs to indicate whether 
   the History-Info should be returned in responses to a request which 
   has captured the history information.  

Table of Contents 
    
   1 Request History Information Description.........................3 
      1.1 Optionality of History-Info................................4 
      1.2 Securing History-Info......................................4 


Barnes                   Expires April 2004                  [Page 1] 
                  SIP Request History Information       October 2003 


      1.3 Ensuring the Privacy of History-Info.......................5 
   2 Request History Information Protocol Details....................5 
      2.1 Protocol Structure of History-Info.........................5 
      2.2 Protocol Examples..........................................6 
      2.3 Protocol usage.............................................7 
      2.4 Security for History-Info.................................10 
      2.5 Example Applications using History-Info...................11 
   3. Security Considerations.......................................13 
   References.......................................................14 
   Appendix A  Forking Scenarios....................................16 
      A.1 Sequentially forking (Hist-Info in Response)..............16 
      A.2 Sequential Forking (with Success).........................17 
   Appendix B  Voicemail............................................18 
   Appendix C  Automatic Call Distribution Example..................23 
   Full Copyright Statement.........................................25 
       
Overview  
        
   This document defines a solution for the Request History requirements 
   as defined in [1], providing the capability to inform proxies and UAs 
   involved in processing a request about the history or progress of 
   that request. This draft defines a new SIP header, History-Info, to 
   provide a standard mechanism for capturing the request history 
   information to enable a wide variety of services for networks and end 
   users.  The History-Info header provides a building block for 
   development of new services.   
  
   Section 1 provides an overall description of the solution, providing 
   references to the appropriate requirements. 
    
   Section 2 provides the details of the additions to the SIP protocol.  
   An example use of the new header is included in Section 2, with 
   additional scenarios included in the Appendix. It is anticipated that 
   these would be moved and progressed in a general Service examples 
   draft such as [2] or individual informational drafts describing these 
   specific services, since the History-Info header is just one of the 
   building blocks for implementing these services. Individual drafts 
   would be particularly useful for documenting services for which there 
   are multiple solutions, since the use of the request history 
   information isn't prescriptive.   As well, as these example 
   applications, the History-Info header can be used to enhance basic 
   SIP functionality by providing additional diagnostic information.  In 
   addition, the inclusion of the History-Info header in messages 
   strengthens the overall SIP security solution.  When the History-Info 
   header is secured as described in section 2.4, it provides an 
   additional means by which the initiator of a request can be assured 
   that the forwarding and any retargeting of that request was valid.  
    
    


Barnes                   Expires April 2004                  [Page 2] 
                  SIP Request History Information       October 2003 


   Section 3 summarizes the security solution as described in section 
   2.4.   

Conventions used in this document  
        
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC 2119 [7]. 
    
   In order to provide a cross reference of the solution description to 
   the requirements defined in [1] without reiterating the entirety of 
   the requirements in this document, the requirements are referenced as 
   [REQNAME-req] following the text or paragraph which explicitly 
   satisfies the requirement.   
    


1 Request History Information Description 

   The fundamental functionality provided by the request history 
   information is the ability to inform proxies and UAs involved in 
   processing a request about the history or progress of that request 
   [CAPABILITY-req].  The solution is to capture the Request-URIs as a 
   request is forwarded in a new header for SIP messages: History-Info 
   [CONTENT-req].  This allows for the capturing of the history of a 
   request that would be lost with the normal SIP processing involved in 
   the subsequent forwarding of the request. This solution proposes no 
   changes in the fundamental determination of request targets or in the 
   request forwarding as defined in sections 16.5 and 16.6 of the SIP 
   protocol specification [4].  
    
   The History-Info header can appear in any request not associated with 
   an established dialog, which includes INVITE, REGISTER, MESSAGE, 
   REFER and OPTIONS [REQUEST-VALIDITY-req] and any valid response to 
   these requests.[ISSUER-req]  
    
   The History-Info header is added to a Request when a new request is 
   created by a UAC or Proxy, or when the target of a request is 
   changed. The term 'retarget' was introduced in [1] to refer to this 
   changing of the target of a request and the subsequent forwarding of 
   that request. It should be noted that retargeting only occurs when 
   the Request-URI indicates a domain for which the processing entity is 
   responsible.  In terms of the SIP protocol, the processing associated 
   with retargeting is described in sections 16.5, and 16.6 of [4].  As 
   described in section 16.5 of [4], it is possible for the target of a 
   request to be changed by the same proxy multiple times (referred to 
   as 'internal retargeting' in [1]), as the proxy MAY add targets to 
   the target set after beginning Request Forwarding. Section 16.6 of 
   [1] describes Request Forwarding. It is during this process of 


Barnes                   Expires April 2004                  [Page 3] 
                  SIP Request History Information       October 2003 


   Request Forwarding, that the History Information is captured as an 
   optional, additional header field. Thus, the addition of the History-
   Info header does not impact fundamental SIP Request Forwarding. An 
   entity (UA or proxy) changing the target of a request in response to 
   a redirect or REFER SHOULD also propagate any History-Info header 
   from the initial Request in the new request [GENERATION-req, 
   FORWARDS-req]. 
      
1.1 Optionality of History-Info 
      
   The History-Info header is optional in that neither UAs nor Proxies 
   are required to support it.  A new Supported header, Histinfo, is 
   included in the Request to indicate whether the History-Info header 
   is returned in Responses [BACKWARDS-req]. In addition to the Histinfo 
   Supported header, local policy determines whether or not the header 
   is added to any request, or for a specific Request-URI, being 
   retargeted. It is possible that this could restrict the applicability 
   of services which make use of the Request History Information to be 
   limited to retargeting within domain(s) controlled by the same local 
   policy, or between domain(s) which negotiate policies with other 
   domains to ensure support of the given policy, or services for which 
   "complete" History Information isn't required to provide the service. 
   [OPTIONALITY-req]  All applications making use of the History-info 
   header MUST clearly define the impact of the information not being 
   available and specify the processing of such a request.  
    
1.2 Securing History-Info 
    
   This draft defines a new header for SIP. The draft does RECOMMEND the 
   use of a secure transport mechanism such as TLS to ensure the overall 
   confidentiality of the History-Info headers[SEC-req-4]. However, the 
   problem is slightly different than the hop by hop security problem 
   solved by TLS, as each hop is not required to add the History-Info 
   header.  Since the History-Info header is being inserted by an entity 
   as it targets and forwards a Request, the resulting security 
   requirements also introduce a slightly different problem than the 
   basic SIP header or Identity [8] problem, which are focused on 
   securing the information in the initial request end to end. For the 
   History-Info header, the general requirement is to secure a header 
   that is inserted by an intermediary and then subsequently referenced, 
   by other intermediaries to build the next header entry, or by an end 
   application using the information to provide a service. Thus, the 
   general requirement takes the form of a middle to middle and middle 
   to end security solution, which is addressed in a separate draft [5]. 
   The use of the middle-to-end security solution discussed in [5] 
   allows the integrity of the History-Info to be ascertained as it 
   traverses the intermediaries.  Thus, including the History-Info 
   header in SIP Requests and securing in this manner adds an additional 
   level of security end to end, assuring the initiator of a Request 


Barnes                   Expires April 2004                  [Page 4] 
                  SIP Request History Information       October 2003 


   that it has indeed reached the intended recipient.  Further 
   discussion of the security mechanism for History-Info is provided in 
   section 2.4. 
    

1.3 Ensuring the Privacy of History-Info 
    
   Since the History-Info header can inadvertently reveal information 
   about the requestor as described in [6], the Privacy header SHOULD be 
   used to determine whether an intermediary can include the History-
   Info header in a Request that it receives and forwards [PRIV-req-2] 
   or that it retargets [PRIV-req-1]. Thus, the History-Info header 
   SHOULD not be included in Requests where the requestor has indicated 
   a priv-value of Session or Header level privacy. 
      
   In addition, the History-Info header can reveal general routing 
   information, which may be viewed by a specific intermediary or 
   network, to be subject to privacy restrictions.  Thus, local policy 
   MAY also be used to determine whether to include the History-Info 
   header, or if it would only be included in the Request as it is 
   retargeted within a specific domain.   
    
   It is recognized that satisfying the privacy requirements can impact 
   the functionality of this solution by overriding the request to 
   generate the information. As with the optionality and security 
   requirements, applications making use of History-Info SHOULD address 
   any impact this may have. 

2 Request History Information Protocol Details 
   
   This section contains the details and usage of the proposed new SIP 
   protocol elements.  It also discusses the security aspects of the 
   solution and provides some examples.   

2.1 Protocol Structure of History-Info 
    
   History-Info is a header field as defined by [4].  It can appear in 
   any request not associated with an established dialog, which includes 
   INVITE, REGISTER, MESSAGE, REFER and OPTIONS and any valid response 
   to these requests.   
    
   It carries the following information: 
    
     o Targeted-to-URI: the Request URI captured as the Request is 
        forwarded. 
    
     o Index: A mandatory parameter for History-Info reflecting the  
        chronological order of the information, indexed to also reflect 
        the forking and nesting of requests. The format for this 


Barnes                   Expires April 2004                  [Page 5] 
                  SIP Request History Information       October 2003 


        parameter is a string of digits, separated by dots to indicate 
        the number of forward hops and retargets. This results in a tree 
        representation of the history of the request, with the lowest 
        level index reflecting a branch of the tree. By including the 
        index and securing the header, the ordering of the History-info 
        headers in the request is assured.[SEC-req-2] 

     o Reason: An optional parameter for History-info. The reason for 
        the retargeting is captured by including the Reason Header [3] 
        associated with the Request URI being retargeted.  Thus, a 
        reason is not included for a Request URI when it is first added 
        in a History-info header, but rather is added when that 
        particular Request-URI is retargeted.  Note, that this does 
        appear to complicate the security problem, however, retargeting 
        only occurs when the Request-URI indicates a domain for which 
        the processing entity is responsible, thus it would be the same 
        processing entity that initially added the Request-URI to the 
        header that would be updating it with the Reason. 


   The following summarizes the syntax of the History-Info header, based 
   upon the standard SIP syntax [4]:  
                                                                         
          History-Info = ("History-Info" / "h") HCOLON  
    
                            hist-info *(COMMA hist-info) 
    
          hist-info = hi-targeted-to-uri *( SEMI hi-param ) 
    
          hi-targeted-to-uri= name-addr 
    
          hi-param = hi-index / hi-extension  
    
           hi-index = "index" EQUAL 1*DIGIT *(DOT 1*DIGIT) 
    
          hi-extension = generic-param 
 
    
2.2 Protocol Examples 
    
   History-Info:<sip:UserA@ims.nortelnetworks.com?Reason=SIP; 
   cause=302;text="Moved Temporarily">; index=1; foo=bar 
    
   History-Info: <sip:UserA@ims.nortelnetworks.com?Reason=SIP; 
   cause=302; text="Moved Temporarily">; index=1.1,  
   <sip:UserB@nortelnetworks.com? Reason=SIP;cause=486; 
   text="Busy Here">;index=1.2, 
   <sip:45432@vm.nortelnetworks.com> ; index=1.3 



Barnes                   Expires April 2004                  [Page 6] 
                  SIP Request History Information       October 2003 


   [Editor's note: need to insert row for Table 2].  
    
2.3 Protocol usage 
    
   This section describes the processing specific to UAs and Proxies for 
   the History-Info header and the Histinfo option tag. As discussed in 
   section 1, the fundamental objective is to capture the target 
   Request-URIs as a request is forwarded.  This allows for the 
   capturing of the history of a request that would be lost due to 
   subsequent (re)targeting and forwarding.  To accomplish this for the 
   entire history of a request, either the UAC must capture the Request-
   URI in the initial request or a proxy must add History-Info headers 
   for both the Request-URI in the initial request and the target 
   Request-URI as the request is forwarded.  The basic processing is for 
   each entity forwarding a request to add a History-Info header for the 
   target Request-URI, updating the index and adding the Reason as 
   appropriate for any retargeted Request-URI.  
    
   [Editor's note: Once the Security solution is fully fleshed out, it 
   may be reasonable to move this section 2.3 after section 2.4 and 
   provide the detailed security related processing prior to this 
   section, so that security aspects can be detailed in this section, as 
   well.] 
    
   2.3.1 UAC Behavior 
    
   The UAC SHOULD include the Histinfo option tag in the Supported 
   header in any request not associated with an established dialog for 
   which the UAC would like the History-Info in the Response.  In 
   addition, the UAC SHOULD initiate the capturing of the History 
   Information by adding a History-Info header using the Request-URI of 
   the request as the hi-targeted-to-uri and initializing the index to 1 
   in the History-Info header  
    
   The processing of the History-Info header received in the Response is 
   application specific and outside the scope of this draft. However, 
   the validity of the information SHOULD be ensured prior to any 
   application usage. [Editor's note: Further detail to be provided once 
   the security solution is available.] 
    
    
   2.3.2 UAS Behavior 
    
   The processing of the History-Info header by a UAS in a Request 
   depends upon local policy and specific applications at the UAS which 
   might make use of the information.  Prior to any application usage of 
   the information, the validity SHOULD be ascertained.  [Editor's note: 
   Further detail to be provided once the security solution is 
   available.] 


Barnes                   Expires April 2004                  [Page 7] 
                  SIP Request History Information       October 2003 


    
   If the Histinfo option tag is received in a request, the UAS should 
   include any History-Info received in the request in the subsequent 
   response.     


   2.3.3 Proxy Behavior 
    
   The inclusion of the History-Info header in a Request does not alter 
   the fundamental processing of proxies for determining request targets 
   as defined in section 16.5 of [4].  Whether a proxy adds the the 
   History-Info header as it forwards a Request depends upon local 
   policy, with the following being considerations in the definition of 
   that policy: 
       o Whether the Request contains the Histinfo option tag in the 
          Supported header.  
       o Whether the proxy supports the History-Info header. 
       o Whether any History-Info header added for a proxy/domain 
          should go outside that domain.  An example being the use of 
          the History-Info header within the specific domain in which 
          it is retargeted, however, policies (for privacy, user and 
          network security, etc.) prohibit the exposure of that 
          information outside that domain.  An example of such an 
          application is provided in Appendix C. 
       o Whether the History-Info header is added for a specific 
          Request URI due to local privacy policy considerations. 

   An example policy would be a proxy that only adds the History-Info 
   header if the Histinfo option tag is in the Supported header.  Other 
   proxies may have a policy that they always add the header, but never 
   forward it outside a particular domain.     

   Each application making use of the History-Info header SHOULD address 
   the impacts of the local policies on the specific application (e.g. 
   what specification of local policy is optimally required for a 
   specific application and any potential limitations imposed by local 
   policy decisions). 

   Consistent with basic SIP processing of optional headers, proxies 
   SHOULD maintain History-Info headers, received in messages being 
   forwarded, independent of whether local policy supports History-Info. 
    
   The specific processing by proxies for adding the History-Info 
   headers in Requests and Responses is described in detail in the 
   following sections.  

   2.3.3.1 Adding the History-Info header to Requests  
    



Barnes                   Expires April 2004                  [Page 8] 
                  SIP Request History Information       October 2003 


   If the proxy supports the History-Info header, the proxy SHOULD add a 
   History-Info header as it forwards a Request. Section 16.6 of [4] 
   defines the steps to be followed as the proxy forwards a Request.  
   Step 5 prescribes the addition of optional headers.  Although, this 
   would seem the appropriate step for adding the History-info header, 
   the interaction with Step 6 "Postprocess routing information" and the 
   impact of a strict route in the Route header could result in the 
   Request-URI being changed, thus adding the History-info header 
   between steps 8 and 9 is RECOMMENDED. Note, that in the case of loose 
   routing, the Request-URI does not change during the forwarding of a 
   Request, thus the capturing of History-Info for such a request would 
   result in duplicate Request-URIs with different indices. The History-
   Info header SHOULD be added following any History-Info header 
   received in the request being forwarded.  Additionally, if a request 
   is received that doesn't include a History-Info header, the proxy MAY 
   add an additional History-Info header preceding the one being added 
   for the current request being forwarded.  The index for this entry is 
   RECOMMENDED to start at 1.  

   For retargets that are the result of an explicit SIP response, the 
   SIP Response Code that triggered the retargeting MUST be included in 
   the Reason header field of the Request URI that has been retargeted. 
   For retargets as a result of timeouts or internal events, a Reason 
   MAY be included in the Reason header field of the Request URI that 
   has been retargeted. 
    
   In order to maintain ordering and accurately reflect the nesting and 
   retargeting of the request, an index MUST be included along with the 
   Targeted-to-URI being captured. Per the ABNF in section 2.1, the 
   index consists of a dot delimited series of digits (e.g. 1.1.2), with 
   each dot reflecting the number of hops or level of nesting of the 
   request.  Thus, the indexing results in a logical tree representation 
   for the history of the Request. It is recommended that for each level 
   of indexing, the index start at 1.  For retargets within a proxy, the 
   proxy MUST maintain the current level of nesting by incrementing the 
   lowest/last digit of the index for each instance of retargeting, thus 
   reflecting the number of retargets within the proxy. 
    
   The basic rules for adding the index are summarized as follows: 
    
     1. If the Request-URI in the original request indicates a resource 
     for which this proxy is responsible, then the proxy reads the value 
     from the History-Info header in the received request, if available, 
     and adds another level of indexing. For example, if the index in 
     the last History-Info header field in the received request is 1.1, 
     this proxy would initialize its index to 1.1.1.  For each 
     subsequent target that is forwarded by the same proxy, a new index 
     is used by incrementing the last/lowest digit.  
      


Barnes                   Expires April 2004                  [Page 9] 
                  SIP Request History Information       October 2003 


     2. If the Request-URI indicates a resource that this proxy is not 
     responsible for, then the lowest/last digit of the index is 
     incremented (i.e. a new level is not created).  For example, if the 
     index in the History-Info header of the received request was 1, 
     then the index in the History-Info header field added by this proxy 
     would be 2.  

   If the request forwarding is done in parallel, the proxy MUST capture 
   each of the Request-URIs to which the Request is forwarded in the 
   manner previously described per rule 1 above. The index MUST be 
   captured for each forked request per the rules above, with each new 
   Request having a unique index. The proxy builds the subsequent 
   requests and responses using the amalgamated information associated 
   with each of those requests and including the header entries in the 
   order indicated by the indexing.  Section 2.5 provides an example of 
   a parallel request scenario, highlighting this indexing mechanism.   
    
   2.3.3.2 Processing History-Info in Responses 
    
   A proxy that receives a Request with the Histinfo option tag in the 
   Supported header, and depending upon a local policy supporting the 
   capture of History-Info, SHOULD return captured History-Info in 
   subsequent, provisional and final responses to the Request.   
    
   It should be noted that local policy considerations, for network and 
   intermediary privacy, MAY restrict the sending of the History-Info 
   headers added by the intermediary in subsequent responses.  Thus, in 
   such cases, the proxy MAY remove from these responses the History-
   Info headers which it inserted in the original forwarded request.   
    
   2.3.4 Redirect Server Behavior 
    
   A redirect server SHOULD NOT add any new History-Info, as that would 
   be done by the entity receiving the 3xx response. However, a redirect 
   server MAY include History-Info in responses by adding any History-
   Info headers received in a request to a subsequent response. 

   2.4 Security for History-Info 

   As discussed in Section 1, the security requirements are partially 
   met by recommending the use of TLS (a basic SIP requirement per [4]) 
   for hop by hop security.   In addition, the use of the middle-to-end 
   security solution discussed in [5] allows the integrity of the 
   History-Info to be ascertained as it traverses the intermediaries. 
   For the History-Info header, the general requirement is to secure a 
   header that is inserted by an intermediary and then subsequently 
   referenced, by other intermediaries to build the next header entry or 
   by an end application using the information to provide a service. In 
   terms of exactly what is being secured, it is primarily the captured 


Barnes                   Expires April 2004                 [Page 10] 
                  SIP Request History Information       October 2003 


   Request-URIs that are the security concern, since they can reflect 
   some aspect of a user's identity and service routing. However, the 
   indices are also important in that they can be used to determine if 
   specific Request-URIs have been removed from the header. Thus, the 
   primary objective of the security solution is to ensure that the 
   entire History-Info header is protected from being accessed or 
   manipulated by non-authorized entities, with the fundamental 
   assumption that retargeting entities are implicitly authorized.   
    
   The security associated with the Request History Information is 
   optional and depends upon local policy and the impact on specific 
   applications of having the information compromised.  Since, the 
   Request History Information itself is also optional and it has been 
   recommended that applications document the impact of the information 
   not being available, it is also suggested that the impact of not 
   supporting the security recommendations also be documented by the 
   application to ensure that the impacts have been sufficiently 
   addressed by the application.  

    
   2.4.1 Security examples   
    
   [Editor's Note: Need to add some protocol details for protecting 
   History-Info once [5] is further along]. 
    
2.5 Example Applications using History-Info 

   This scenario highlights an example where the History-Info in the 
   response is primarily of use in not retrying routes that have already 
   been tried by another proxy. Note, that this is just an example and 
   that there may be valid reasons why a Proxy would want to retry the 
   routes and thus, this would like be a local proxy or even user 
   specific policy.  
    
   UA 1 sends a call to "Bob" to proxy 1. Proxy 1 forwards the request 
   to Proxy 2.  Proxy 2 sends the requests in parallel and tries several 
   places (UA2, UA3 and UA4) before sending a response to Proxy 1 that 
   all the places are busy.   Proxy 1, without the History-Info, would 
   try several of the same places (UA3 and UA4) based upon registered 
   contacts for "Bob", before completing at UA5. However, with the 
   History-Info, Proxy 1 determines that UA3 and UA4 have already 
   received the invite, thus the INVITE goes directly to UA5.  
    

    
   UA1        Proxy1  Proxy2     UA2      UA3      UA4      UA5 
                
   |            |         |        |        |        |        | 
   |--INVITE -->|         |        |        |        |        | 


Barnes                   Expires April 2004                 [Page 11] 
                  SIP Request History Information       October 2003 


   |            |-INVITE->|        |        |        |        | 
                 Supported: Histinfo 
                 History-Info: <sip:Bob@P1>;index=1, 
                               <sip:Bob@P2>; index=2 
   |            |         |        |        |        |        | 
   |            |         |-INVITE>|        |        |        | 
                  History-Info: <sip:Bob@P1>;index=1,  
                                <sip:Bob@P2>; index=2, 
                                <sip:User2@UA2>; index=2.1 
   |            |         |        |        |        |        | 
   |            |         |-----INVITE ---->|        |        | 
                  History-Info: <sip:Bob@P1>;index=1,  
                                <sip:Bob@P2 >; index=2, 
                                <sip:User3@UA3>; index=2.2 
   |            |         |        |        |        |        | 
   |            |         |-------INVITE------------>|        |  
                  History-Info: <sip:Bob@P1>;index=1,  
                                <sip:Bob@P2 >; index=2, 
                                <sip:User4@UA4 >; index=2.3 
    
   /* All Responses from the INVITEs indicate non-success/non-
   availability*/   
  |            |         |        |        |        |        | 
  |            |<-480 ---|        |        |        |        | 
               History-Info: <sip:Bob@P1>;index=1,  
                  <sip:Bob@P2>; index=2,   
                  <sip:User2@UA2?Reason:SIP; 
                   cause=408;text="RequestTimeout">;index=2.1,                  
                  <sip:User3@UA3?Reason:SIP;         
                   cause=487;text="Request Terminated">; index=2.2, 
                  <sip:User4@UA4?Reason:SIP;         
                   cause=603;text="Decline">; index=2.3 

                              
  |            |         |        |        |        |        | 
 /* Upon receipt of the response, P1 determines another route for the 
  INVITE, but finds that it matches some routes already attempted  
 (e.g. UA2 and UA3, thus the INVITE is only forwarded to UA5, where  
  the session is successfully established  */ 
  |            |         |        |        |        |        | 
   |            |----------------INVITE --------------------->| 
                History-Info: <sip:Bob@P1>;index=1, 
                   <sip:Bob@P2>; index=2,  
                   <sip:User2@UA2?Reason:SIP;cause=408; 
                    text="RequestTimeout">;index=2.1,                      
                   <sip:User3@UA3?Reason:SIP;cause=487; 
                    text="Request Terminated">; index=2.2, 
                   <sip:User4@UA4?Reason:SIP;cause=603; 
                    text="Decline">; index=2.3 


Barnes                   Expires April 2004                 [Page 12] 
                  SIP Request History Information       October 2003 


                  <sip:User5@UA5>;index=1.1  
  |            |         |        |        |        |        | 
   |            |<-----200 OK---------------------------------| 
  |<--200 OK---|         |        |        |        |        | 
  |            |         |        |        |        |        |  
  |--ACK --------------------------------------------------->| 


   Additional detailed scenarios are available in the appendix. 

    
3. Security Considerations  
   
   This draft provides a proposal for addressing the Security 
   requirements identified in [1] in sections 1.2 and 2.4 of this draft 
   by proposing the use of TLS between entities, and by securing the 
   History-Info headers added by proxies as described in [5].  
     
4. IANA Considerations 

   (Note to RFC Editor: Please fill in all occurrences of XXXX in this 
   section with the RFC number of this specification). 

   This document defines a new SIP header field name with a compact 
   form: History-Info and h respectively, and a new option tag: 
   Histinfo.  
    
   The following changes should be made to 
   http:///www.iana.org/assignments/sip-parameters 
    
   The following row should be added to the header field section:  
    
   Header Name             Compact Form               Reference 
   History-Info                  h                    [RFCXXXX] 
    
  The following should be added to the Options Tags section: 

  Name          Description                          Reference                       
  Histinfo      When used with the Supported header, [RFCXXXX] 
                this option tag indicates support 
                for the History Information to be  
                captured for requests and returned in 
                subsequent responses. This tag is not 
                used in a Proxy-Require or Require  
                header field since support of  
                History-Info is optional.       
          
5. Changes since last version 



Barnes                   Expires April 2004                 [Page 13] 
                  SIP Request History Information       October 2003 


   Changes from the û00 to the û01 version: 
    
     o Attempted to be more explicit about the fundamental processing 
        associated with the header.  Removed definitions of new terms, 
        only referencing the terms from the requirements in the context 
        of the fundamental SIP processing implied by the terms.   
     o Attempted to clarify the Index and the related processing.  
     o Added more detail addressing the privacy requirements. 
     o Added a bit more detail on security. The security solution 
        remains in a separate document and this document will need 
        updating once that is completed.  
     o Updated the examples (in section 2.5 and appendix) and clarified 
        the definition and the maintenance of the Index in sections 2.1 
        and 2.3.3.1.   
     o Clarified the Reason description in section 2.1.  There had been 
        an error in the description of the processing that was a remnant 
        of the change to include only a single URI for each History-Info 
        header. 
     o Miscellaneous editorial changes (i.e. HistInfo -> Histinfo, 
        etc.) 

   Changes from individual draft-barnes-sipping-history-info-02 to the û
   00 WG version:       
        o Updated references and added reference to Security solution 
          draft. 
        o Removed appendix D which included background on analysis of 
          solution options. 
        o Cleaned up the document format per rfc2223bis. 
        o Strengthened the inclusion of the INDEX as a MUST (per 
          discussion at IETF-56). 
        o Added text around the capturing of the Reason (SHOULD be 
          captured for SIP responses and MAY be captured for other 
          things such as timeouts).   
        o Clarified the response processing 2.3.3.2 to include 
          provisional responses and the sending of a 183 to convey 
          History-Info. 
        o Added section 2.3.4 to address Redirect Server behavior. 
   
References  
   
   [1] M. Barnes, M. Watson, C. Jennings, J. Peterson, "SIP Generic 
   Request History Capability Requirements", draft-ietf-sipping-req-
   history-04.txt, June, 2003.  
    
   [2] A. Johnson, "SIP Service Examples", draft-ietf-sipping-service-
   examples-05.txt, November, 2002.  
    
   [3] H. Schulzrinne, D. Oran, G. Camarillo, "The Reason Header Field 
   for the Session Initiation Protocol", RFC 3326, December, 2002. 


Barnes                   Expires April 2004                 [Page 14] 
                  SIP Request History Information       October 2003 


    
   [4] J. Rosenberg et al, "SIP: Session initiation protocol," RFC 3261, 
   June, 2002. 
    
   [5] M. Barnes, "A Mechanism to Secure SIP Headers Inserted by 
   Intermediaries", draft-barnes-sipping-inserted-info-01.txt, October, 
   2003. 
     
   [6] J. Peterson, "A Privacy Mechanism for the Session Initiation 
   Protocol (SIP)", RFC 3323, November, 2002. 
    
   [7] Bradner, S., "Key words for use in RFCs to Indicate Requirement 
   Levels", RFC 2119, March 1997. 
    
   [8] J. Peterson, "Enhancements for Authenticated Identity Management 
   in the Session Initiation Protocol (SIP)", draft-ietf-sip-identity-
   01.txt, February, 2003. 
    
   [9] Crocker, D. and P. Overell, "Augmented BNF for Syntax 
   Specifications: ABNF", RFC 2234, November 1997. 
    
    


Acknowledgements 

   The editor would like to acknowledge the constructive feedback 
   provided by Robert Sparks, Paul Kyzivat, Scott Orton, John Elwell, 
   Nir Chen, Francois Audet, Palash Jain, Brian Stucker, Norma Ng, 
   Anthony Brown, and Jayshree Bharatia. 
    
   The editor would like to acknowledge the significant input from  
   Rohan Mahy on some of the normative aspects of the ABNF, particularly 
   around the need for and format of the index and around the enhanced 
   SIP security aspects enabled by this draft 
    
Contributors' Addresses 

   Cullen and Mark provided substantial input in the form of email 
   discussion in the development of the initial version of this 
   individual solution document.   

   Cullen Jennings 
   Cisco Systems 
   170 West Tasman Dr              
   MS: SJC-21/3                    
    
   Tel: +1 408 527 9132 
   Email: fluffy@cisco.com 


Barnes                   Expires April 2004                 [Page 15] 
                  SIP Request History Information       October 2003 


    
  Mark Watson 
   Nortel Networks (UK) 
   Maidenhead Office Park (Bray House) 
   Westacott Way 
   Maidenhead, 
  Berkshire                      
  England                         

   Tel: +44 (0)1628-434456 
   Email:  mwatson@nortelnetworks.com 

Author's Address 
        
   Mary Barnes  
   Nortel Networks 
   2380 Performance Drive          
   Richardson, TX USA              
    
   Phone:  1-972-684-5432  
   Email:  mary.barnes@nortelnetworks.com  
    
    
    
Appendix A  Forking Scenarios 
    
A.1 Sequentially forking (History-Info in Response) 
    
   This scenario highlights an example where the History-Info in the 
   response is useful to an application or user that originated the 
   request. 

   UA 1 sends a call to "Bob" via proxy 1. Proxy 1 sequentially tries 
   several places (UA2, UA3 and UA4) unsuccessfully before sending a 
   response to UA1.   

   This scenario is provided to show that by providing the History-Info 
   to UA1, the end user or an application at UA1 could make a decision 
   on how best to attempt finding "Bob".  Without this mechanism UA1 
   might well attempt UA3 (and thus UA4) and then re-attempt UA4 on a     rd   3   manual attempting at reaching "Bob". With this mechanism, either 
   the end user or application could know that "Bob" is busy on his home 
   phone and is physically not in the office. If there were an 
   alternative address for "Bob" known to this end user or application, 
   that hasn't been attempted, then either the application or the end 
   user could attempt that. The intent here is to highlight an example 
   of the flexibility of this mechanism that enables applications well 
   beyond SIP as it is certainly well beyond the scope of this draft to 
   prescribe detailed applications.   


Barnes                   Expires April 2004                 [Page 16] 
                  SIP Request History Information       October 2003 


    
    
   UA1        Proxy1              UA2      UA3      UA4                   
   |            |                  |        |        |         
   |--INVITE -->|                  |        |        |         
   |            |                  |        |        |         
   |            |--INVITE -------->|        |        |         
   |<--100 -----|                  |        |        |         
   |            |<-302 ------------|        |        |         
   |            |                  |        |        |         
   |            |-------INVITE ------------>|        |         
   |            |                  |        |        |         
   |            |<-------180 ---------------|        |         
   |<---180 ----|                  |        |        |         
   |  . .       |-------INVITE------------->|        |         
   |            |       timeout    |        |        |         
   |            |                  |        |        |         
   |            |------INVITE ---------------------->|         
  |<--100 -----|                  |        |        |         
   |            |                  |        |        |         
   |            |<-486 ------------------------------|         
   |            |                  |        |        |         
   |            |-- ACK ---------------------------->|                 
  |<--486------|                  |        |        |         
  |            |                  |        |        |          
  |--ACK ----->|                  |        |        |         
  |            |                  |        |        |          
   
   
   [Editor's Note: Need to detail the message flow.] 



A.2 Sequential Forking (with Success) 

   This scenario highlights an example where the History-Info in the 
   request is primarily of use in not retrying routes that have already 
   been tried by another proxy. Note, that this is just an example and 
   that there may be valid reasons why a Proxy would want to retry the 
   routes and thus, this would like be a local proxy or even user 
   specific policy.  
    
   UA 1 sends a call to "Bob" to proxy 1. Proxy 1 sequentially tries 
   several places (UA2, UA3 and UA4) before retargeting the call to 
   Proxy 2.  Proxy 2, without the History-Info, would try several of the 
   same places (UA3 and UA4)based upon registered contacts for "Bob", 
   before completing at UA5. However, with the History-Info, Proxy 2 
   determines that UA3 and UA4 have already received the invite, thus 
   the INVITE goes directly to UA5.  


Barnes                   Expires April 2004                 [Page 17] 
                  SIP Request History Information       October 2003 




    
   UA1        Proxy1  Proxy2     UA2      UA3      UA4      UA5 
                
   |            |         |        |        |        |        | 
   |--INVITE -->|         |        |        |        |        | 
   |            |         |        |        |        |        | 
   |            |--INVITE -------->|        |        |        | 
   |<--100 -----|         |        |        |        |        | 
   |            |<-302 ------------|        |        |        | 
   |            |         |        |        |        |        | 
   |            |-------INVITE ------------>|        |        | 
   |            |         |        |        |        |        | 
   |            |<-------180 ---------------|        |        | 
   |<---180 ----|         |        |        |        |        | 
   |  . .       |-------INVITE------------->|        |        | 
   |            |       timeout    |        |        |        | 
   |            |         |        |        |        |        | 
   |            |------INVITE ---------------------->|        | 
  |<--100 -----|         |        |        |        |        | 
   |            |<-302 ------------------------------|        | 
   |            |         |        |        |        |        | 
   |            |-INVITE->|        |        |        |        | 
   |            |         |        |        |        |        | 
   |            |         |        |        |        |        | 
   |            |         |------INVITE --------------------->|         
  |            |         |        |        |        |        | 
   |            |         |<-----200 OK---------------------->| 
  |<--200 OK-------------|        |        |        |        | 
  |            |         |        |        |        |        |  
  |--ACK --------------------------------------------------->| 

 [Editor's Note: Need to add the details of the messages here.] 
    
    
Appendix B  Voicemail 

   This scenario highlights an example where the History-Info in the 
   request is primarily of use by an edge service (e.g. Voicemail 
   Server). It should be noted that this isn't intended to be a complete 
   specification for this specific edge service as it is quite likely 
   that additional information is need by the edge service. History-Info 
   is just one building block that this service makes use of. 

   UA 1 called UA A which had been forwarded to UA B which forwarded to 
   a UA VM (voicemail server).  Based upon the retargeted URIs and 
   Reasons (and other information) in the INVITE, the VM server makes a 



Barnes                   Expires April 2004                 [Page 18] 
                  SIP Request History Information       October 2003 


   policy decision about what mailbox to use, which greeting to play 
   etc.  

   UA1          Proxy           UA-A         UA-B        UA-VM 
                
   |              |              |             |          | 
   |--INVITE F1-->|              |             |          | 
   |              |              |             |          | 
   |              |--INVITE F2-->|             |          | 
   |<--100 F3-----|              |             |          | 
   |              |<-302 F4------|             |          | 
   |              |              |             |          | 
   |              |--------INVITE F5---------->|          | 
   |              |              |             |          | 
   |              |<--------180 F6-------------|          | 
   |<---180 F7----|              |             |          | 
  |  . . .       |              |             |          | 
   |              |------retransmit INVITE---->|          |           
  |  . . .       |              |             |          | 
   |              |       (timeout)            |          | 
   |              |              |             |          | 
   |              |-------INVITE F8---------------------->| 
   |              |              |             |          | 
   |              |<-200 F9-------------------------------| 
   |              |              |             |          | 
   |<-200 F10-----|              |             |          | 
   |              |              |             |          | 
   |--ACK F11-------------------------------------------->| 

   Message Details  
       
 INVITE F1   UA1->Proxy  
     
 INVITE sip:UserA@nortelnetworks.com SIP/2.0  
 Via: SIP/2.0/UDP here.com:5060  
 From: BigGuy <sip:User1@here.com>  
 To: LittleGuy <sip:UserA@nortelnetworks.com>  
 Call-Id: 12345600@here.com  
 CSeq: 1 INVITE  
 Contact: BigGuy <sip:User1@here.com>  
 Content-Type: application/sdp  
 Content-Length: <appropriate value>  
     
   v=0  
   o=UserA 2890844526 2890844526 IN IP4 client.here.com  
   s=Session SDP  
   c=IN IP4 100.101.102.103  
   t=0 0  
   m=audio 49170 RTP/AVP 0  


Barnes                   Expires April 2004                 [Page 19] 
                  SIP Request History Information       October 2003 


   a=rtpmap:0 PCMU/8000  
     
   /*Client for UA1 prepares to receive data on port 49170  
   from the network. */  
     
   INVITE F2 Proxy->UA-A       
    
   INVITE sip:UserA@ims.nortelnetworks.com SIP/2.0     
   Via: SIP/2.0/UDPims.nortelnetworks.com:5060;branch=1   
     Via: SIP/2.0/UDP here.com:5060  
   Record-Route: <sip:UserA@nortelnetworks.com>  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy <sip:UserA@nortelnetworks.com>  
   Call-Id: 12345600@here.com  
   CSeq: 1 INVITE  
   History-Info: <sip:UserA@ims.nortelnetworks.com>; index=1 
  Contact: BigGuy <sip:User1@here.com>  
   Content-Type: application/sdp  
   Content-Length: <appropriate value>  
     
   v=0  
   o=UserA 2890844526 2890844526 IN IP4 client.here.com  
   s=Session SDP  
   c=IN IP4 100.101.102.103  
   t=0 0  
   m=audio 49170 RTP/AVP 0  
   a=rtpmap:0 PCMU/8000  
     
   100 Trying F3 Proxy->UA1     
    
   SIP/2.0 100 Trying  
   Via: SIP/2.0/UDP here.com:5060  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy <sip:UserA@nortelnetworks.com>  
   Call-Id: 12345600@here.com  
   CSeq: 1 INVITE  
   Content-Length: 0  
     
     
   302 Moved Temporarily F4  UserA->Proxy   
   SIP/2.0 302 Moved Temporarily  
   Via: SIP/2.0/UDP ims.nortelnetworks.com:5060;branch=1  
   Via: SIP/2.0/UDP here.com:5060  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy <sip:UserA@nortelnetworks.com>;tag=3  
   Call-Id: 12345600@here.com  
   CSeq: 1 INVITE  
   Contact: <sip:UserB@nortelnetworks.com> 
   Content-Length: 0  


Barnes                   Expires April 2004                 [Page 20] 
                  SIP Request History Information       October 2003 


     
                      
     
   INVITE F5 Proxy-> UA-B       
        
   INVITE sip:UserB@nortelnetworks.com SIP/2.0  
   Via: SIP/2.0/UDP ims.nortelnetworks.com:5060;branch=2  
   Via: SIP/2.0/UDP here.com:5060  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy <sip:UserA@nortelnetworks.com>  
   Call-Id: 12345600@here.com  
   History-Info: <sip:UserA@ims.nortelnetworks.com?Reason=SIP; 
   cause=302; text="Moved Temporarily">; index=1,  
   <sip:UserB@nortelnetworks.com>;index=2 
   CSeq: 1 INVITE  
  Contact: BigGuy <sip:User1@here.com> 
   Content-Type: application/sdp  
   Content-Length: <appropriate value>  
     
   v=0  
   o=User1 2890844526 2890844526 IN IP4 client.here.com  
   s=Session SDP  
   c=IN IP4 100.101.102.103  
   t=0 0  
   m=audio 49170 RTP/AVP 0  
   a=rtpmap:0 PCMU/8000  
     
  180 Ringing F6  UA-B ->Proxy  
    
   SIP/2.0 180 Ringing  
   Via: SIP/2.0/UDP there.com:5060  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy <sip:UserA@nortelnetworks.com>;tag=5  
   Call-ID: 12345600@here.com  
   CSeq: 1 INVITE  
   Content-Length: 0  
     
   180 Ringing F7  Proxy-> UA1   
          
   SIP/2.0 180 Ringing  
   SIP/2.0/UDP here.com:5060  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy <sip:UserA@nortelnetworks.com>  
   Call-Id: 12345600@here.com  
   CSeq: 1 INVITE  
   Content-Length: 0  
     
   /* User B is not available. INVITE is sent multiple  
   times until it times out. */  


Barnes                   Expires April 2004                 [Page 21] 
                  SIP Request History Information       October 2003 


                       
     /* The proxy forwards the INVITE to UA-VM after adding the 
   additional History Information entry. */ 
    
                       
   INVITE F8  Proxy-> UA-VM      
      
   INVITE sip:VM@nortelnetworks.com SIP/2.0  
   Via: SIP/2.0/UDP ims.nortelnetworks.com:5060;branch=3  
   Via: SIP/2.0/UDP here.com:5060  
   From: BigGuy <sip:User1@here.com>  
      To: LittleGuy <sip:UserA@nortelnetworks.com> 
   Call-Id: 12345600@here.com  
   History-Info: <sip:UserA@ims.nortelnetworks.com?Reason=SIP; 
   cause=302; text="Moved Temporarily">;index=1, 
   <sip:UserB@nortelnetworks.com?Reason=SIP;cause=480;text="Temporarily 
   Unavailable" >;index=2,  
   <sip:VM@nortelnetworks.com>;index=3 
   CSeq: 1 INVITE  
   Contact: BigGuy <sip:User1@here.com>  
   Content-Type: application/sdp  
   Content-Length: <appropriate value>  
     
   v=0  
   o=User1 2890844526 2890844526 IN IP4 client.here.com  
   s=Session SDP  
   c=IN IP4 100.101.102.103  
   t=0 0  
   m=audio 49170 RTP/AVP 0  
   a=rtpmap:0 PCMU/8000  
      
      
   200 OK F9     
    
   SIP/2.0 200 OK UA-VM->Proxy 
         
   Via: SIP/2.0/UDP ims.nortelnetworks.com:5060;branch=3  
   Via: SIP/2.0/UDP here.com:5060  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy <sip:UserA@nortelnetworks.com>;tag=3  
   Call-Id: 12345600@here.com  
   CSeq: 1 INVITE  
   Contact: TheVoiceMail <sip:VM@nortelnetworks.com>  
   Content-Type: application/sdp  
   Content-Length: <appropriate value>  
     
   v=0  
   o=UserA 2890844527 2890844527 IN IP4 vm.nortelnetworks.com  
   s=Session SDP  


Barnes                   Expires April 2004                 [Page 22] 
                  SIP Request History Information       October 2003 


   c=IN IP4 110.111.112.114  
   t=0 0  
   m=audio 3456 RTP/AVP 0  
   a=rtpmap:0 PCMU/8000  
     
     
   200 OK F10  Proxy->UA1         
    
   SIP/2.0 200 OK  
   Via: SIP/2.0/UDP ims.nortelnetworks.com:5060;branch=3 
   Via: SIP/2.0/UDP here.com:5060  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy <sip:UserA@nortelnetworks.com>;tag=3  
   Call-Id: 12345600@here.com              
   CSeq: 1 INVITE  
   Contact: TheVoiceMail <sip:VM@nortelnetworks.com>  
   Content-Type: application/sdp  
   Content-Length: <appropriate value>  
     
   v=0  
   o=UserA 2890844527 2890844527 IN IP4 vm.nortelnetworks.com  
   s=Session SDP  
   c=IN IP4 110.111.112.114  
   t=0 0  
   m=audio 3456 RTP/AVP 0  
   a=rtpmap:0 PCMU/8000  
     
   ACK F11 UA1-> UA-VM                
    
   ACK sip:VM@nortelnetworks.com SIP/2.0  
   Via: SIP/2.0/UDP here.com:5060  
   From: BigGuy <sip:User1@here.com>  
   To: LittleGuy<sip:UserA@nortelnetworks.com>;tag=3  
   Call-Id: 12345600@here.com  
   CSeq: 1 ACK  
   Content-Length: 0  
     
   /* RTP streams are established between UA1 and  
   UA-VM. UA-VM starts announcement for UA1 */ 

           
Appendix C  Automatic Call Distribution Example 

   This scenario highlights an example of an Automatic Call Distribution 
   service, where the agents are divided into groups based upon the type 
   of customers they handle. In this example, the Gold customers are 
   given higher priority than Silver customers, so a Gold call would get 
   serviced even if all the agents servicing the Gold group (ACDGRP1) 
   were busy, by retargeting the request to the Silver Group.  Upon 


Barnes                   Expires April 2004                 [Page 23] 
                  SIP Request History Information       October 2003 


   receipt of the call at the agent assigned to handle the incoming 
   call, based upon the History-Info header in the message, the 
   application at the agent can provide an indication that this is a 
   Gold call, from how many groups it might have overflowed before 
   reaching the agent, etc. and thus can be handled appropriately by the 
   agent.  
    
   For scenarios whereby calls might overflow from the Silver to the 
   Gold, clearly the alternate group identification, internal routing or 
   actual agent that handles the call SHOULD not be sent to UA1, thus 
   for this scenario, one would expect that the Proxy would not support 
   the sending of the History-Info in the response, even if requested by 
   the calling UA.  
    
   As with the other examples, this is not prescriptive of how one would 
   do this type of service but an example of a subset of processing that 
   might be associated with such a service.  In addition, this example 
   is not addressing any aspects of Agent availability, which might also 
   be done via a SIP interface. 



   UA1          Proxy        ACDGRP1 Svr   ACDGRP2 Svr UA2-ACDGRP2              
                
   |              |              |             |          | 
   |--INVITE F1-->|              |             |          | 
    Supported:Histinfo 
   |              |              |             |          | 
   |              |--INVITE F2-->|             |          | 
                    Supported:Histinfo 
                    History-Info: <sip:Gold@ACD.com>; index=1  
                    History-Info: <sip:ACDGRP1@ACD.com>; index=1.1 
  |              |              |             |          |  
   |              |<-302 F3------|             |          | 
                    Contact: <sip:ACDGRP2@ACD.com>                  
  |              |              |             |          | 
   |              |--------INVITE F4---------->|          | 
                    History-Info: <sip:Gold@ACD.com>; index=1  
                    History-Info: <sip:ACDGRP1@ACD.com>; index=1.1 
                    History-Info: <sip:ACDGRP2@ACD.com>; index=1.2               
   |              |              |             |          |         
  |              |              |             |          | 
   |              |              |             |INVITE F5>| 
                    History-Info: <sip:Gold@ACD.com>; index=1  
                    History-Info: <sip:ACDGRP1@ACD.com>; index=1.1 
                    History-Info: <sip:ACDGRP2@ACD.com>; index=1.2                 
   |              |              |             |          | 
   |              |              |             |<-200 F6--|                 
   |              |              |             |          | 


Barnes                   Expires April 2004                 [Page 24] 
                  SIP Request History Information       October 2003 


   |              |<-200 F7--------------------|          |  
                    History-Info: <sip:Gold@ACD.com>; index=1  
                    History-Info: <sip:ACDGRP1@ACD.com>; index=1.1 
                    History-Info: <sip:ACDGRP2@ACD.com>; index=1.2                    
   |<-200 F8------|              |             |          | 
 No History-Info included in the response due to Local Policy> 
   |              |              |             |          | 
   |--ACK F9--------------------------------------------->| 

   Message Details  

   [To be completed] 
      
    
Full Copyright Statement 
   
   Copyright (C) The Internet Society (2003).  All Rights Reserved. 
       
   This document and translations of it may be copied and furnished to 
   others, and derivative works that comment on or otherwise explain it 
   or assist in its implementation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph are 
   included on all such copies and derivative works.  However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet Standards process must be 
   followed, or as required to translate it into languages other than 
   English.  The limited permissions granted above are perpetual and 
   will not be revoked by the Internet Society or its successors or 
   assigns.  This document and the information contained herein is 
   provided on an "AS IS" basis and THE INTERNET SOCIETY AND THE 
   INTERNET ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR 
   IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF 
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE." 

    
    
    
    
    







Barnes                   Expires April 2004                 [Page 25] 
