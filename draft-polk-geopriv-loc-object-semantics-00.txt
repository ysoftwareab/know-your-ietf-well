Internet Engineering Task Force                              James M. Polk
Internet Draft                                             John Schnizlein
Expiration: April 25th, 2002                                  Marc Linsner
File: draft-polk-geopriv-loc-object-semantics-00.txt         Cisco Systems








             Semantics for DHC Location Object within GEOPRIV

                          October 25th, 2002 




Status of this Memo 

This document is an Internet-Draft and is in full conformance with all 
provisions of Section 10 of RFC2026. 

Internet-Drafts are working documents of the Internet Engineering Task 
Force (IETF), its areas, and its working groups. Note that other groups 
may also distribute working documents as Internet-Drafts. 

Internet-Drafts are draft documents valid for a maximum of six months 
and may be updated, replaced, or obsoleted by other documents at any 
time. It is inappropriate to use Internet-Drafts as reference material 
or to cite them other than as "work in progress." 

The list of current Internet-Drafts can be accessed at 
http://www.ietf.org/ietf/1id-abstracts.txt 

The list of Internet-Draft Shadow Directories can be accessed 
at http://www.ietf.org/shadow.html. 






Abstract 

This document describes the semantic intent of the proposed Location 
Object (LO) within DHC ID [1] for use by the GEOPRIV Protocol. Reasons are 
provided for the choice of representation of location resolution, and 
examples illustrate the use of this choice.






Polk/Schnizlein/Linsner                                             Page 1

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002


Table of Contents 
     
Abstract  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  2
Table of Contents . . . . . . . . . . . . . . . . . . . . . . . . . . .  2
1.0  Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . .  2
1.1  Conventions  . . . . . . . . . . . . . . . . . . . . . . . . . . .  3
1.2  Motivation . . . . . . . . . . . . . . . . . . . . . . . . . . . .  3
2.0  DHC Location Object Elements . . . . . . . . . . . . . . . . . . .  4
 2.1 Elements of the Location Object  . . . . . . . . . . . . . . . . .  4
3.0  Purpose of Resolution Value per La/Lo/Alt Element  . . . . . . . .  6
4.0  Calculations of Imprecision possible with the DHC LO . . . . . . .  6
 4.1 Location Object of "White House" (Example 1) . . . . . . . . . . .  6
 4.2 Location Object of "Sears Tower" (Example 2) . . . . . . . . . . .  9
5.0  Security Considerations  . . . . . . . . . . . . . . . . . . . . .  9
6.0  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . . .  9
7.0  References . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
8.0  Author Information . . . . . . . . . . . . . . . . . . . . . . . . 10


1.0 Introduction

This document describes the semantic intent of the proposed Location 
Object (LO) within DHC ID [1] for use by the GEOPRIV Protocol. [1] 
proposes no expression (which is GEOPRIV's charter), but merely defines a 
LO format with its elements and a mechanism to download that LO to the IP 
Device for other uses, with GEOPRIV being the most obvious. This LO format 
could be considered a subset of a larger GEOPRIV LO. Achieving a core set 
of LO elements is desired across multiple Protocols which can convey 
location information. 

An important feature is that [1] places the LO completely under control of 
the end device rather than storing the object in an outside service for 
retrieval by the end device during times of emergency when an outbound 
transaction can fail to provide necessary results.

Another important feature of the LO is its inclusion of a resolution 
parameter for each of the dimensions of location. The GEOPRIV working 
group has a stated requirement [2] to enable decreasing the precision of a 
location element. Because this resolution parameter need not apply to all 
dimensions equally, a resolution value is included for each of the 3 
location elements. GEOPRIV actually calls their requirement: Accuracy. We 
use the term and meaning "Resolution" as being more precise for the intent 
here. 

When comparing the resolution method described here with other methods to 
express geo-location accuracy, the result of this resolution method 
describes a region (normally trapezoidal) rather than the possible (error) 
distance from the indicated location.  There is good reason not to 
describe geo-location accuracy as a potential error in distance from the 
latitude, longitude, and altitude values.  


Polk/Schnizlein/Linsner                                             Page 2

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002


    Example: I am located within 123 meters of 38.89868N and 77.03723W 
             at an altitude of 0.  

The above example describes a circular area with a center point. If this 
method were used for a LO and the end device wanted to 'hide' from the 
center point, it would need to recalculate a location from the stated 
center point that remains in the stated circle. This recalculation could 
be problematic for the end device depending on that deviceÆs geo-location 
computing framework. By using the resolution method described from [1], 
the end device could simply express a lesser resolution value to provide a 
less precise location. Or, the end device may or may not need to be 
involved with the resolution policy at all, as this could be dictated by 
another entity, perhaps that device's domain, simply by providing the end 
device with a location with the resolution of the desired value.

This resolution method provides a natural ability for the device to hide 
from the center point of the bounding area as this resolution method is 
determined via the inherent affects of binary mathematics, using the power 
of 2.  

The resulting LO using this resolution method is a small fixed 
length object that can be easily stored in memory and be easily appended 
within other protocols with little regards to packet size as the LO is 
only 15 bytes long.

Finally, this document provides some arithmetic examples of just how the 
imprecision can be introduced in any or all of the La/Lo/Alt values 
without the IP device needing to be preprogrammed with bogus LOs, and just 
how imprecise the La/Lo/Alt values can be. This document does not cover 
any policy regarding the potential use of this other than a few as 
potential suggestions to convey the meaning intended by the document.


1.1  Conventions used in this document

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
document are to be interpreted as described in [3].


1.2 Motivation

The motivation of this document is discussion within the GEOPRIV WG of a 
minimal Location Object, which can be delivered along with the hostÆs IP 
Address (as well as the other information provided in a DHCP Reply [4 and 
5]). [1] has the LO format and the definitions present, but not how each 
of those elements map into the existing requirements of the GEOPRIV WG. 
Neither this document nor the [1] document address the GEOPRIV protocol 
for controlled sharing of the hostÆs location directly in any way. 



Polk/Schnizlein/Linsner                                             Page 3

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002

2.0 DHC Location Object Elements 

DHCP is a binary Protocol; GEOPRIV is text-based. Most coordinate systems 
translate fairly easily between binary-based and text-based location 
output (i.e. even emergency services within the US). The authors believe 
translation/conversion is a non-issue with DHCP's binary format. 

This binary format provides a fortunate benefit in a mechanism for making 
a true/correct location coordinate imprecise. It further provides the 
capability to have this binary representation be deterministically 
imprecise.


The proposed LO format in [1] is:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Code TBD    |      15       |   LaRes   |     Latitude      +
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                Latitude (cont'd)              |    LoRes  |   +
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             Longitude                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   MU  |   AltRes  |                Altitude                   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  Alt (cont'd) |                                                
      +-+-+-+-+-+-+-+-+                                                


2.1 Elements of the Location Object

   Code TBD: The code for this DHCP option is TBD by IANA.

   15:       The length of this option is 15 bytes.

   LaRes:    Latitude resolution. 6 bits indicating the valid number of 
             valid bits in the fixed-point value of Latitude. 

This value is a length value of the (left to right) number of Latitude 
bits that should be considered valid. Any bits entered to the right of 
this limit should not be considered valid and might be purposely false, or 
zeroed by the sending device (meaning the GEOPRIV target towards the 
requestor).

The examples below in section 4.0, are to illustrate that a smaller value 
in the resolution field increases the area within which the device is 
located (without deception). 

Values of resolution above decimal 34 are currently Undefined and reserved 
because that is the largest number of bits in the Latitude variable.


Polk/Schnizlein/Linsner                                             Page 4

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002


   Latitude: a 34 bit fixed point value consisting of 9 bits of integer 
             and 25 bits of fraction. Latitude SHOULD be normalized to 
             within +/- 90 degrees. 

A value of 2 in the LaRes field indicates a precision of no greater than 
1/6th that of the globe (detailed in the first example in section 4.0). A 
value of 34 in the LaRes field indicates a precision within 3.11 mm in 
Latitude.

   LoRes:    Longitude resolution. 6 bits indicating the number of valid 
             bits in the fixed-point value of Longitude. 
             
This value is a length value of the (left to right) number of Longitude 
bits that should be considered valid. Any bits entered to the right of 
this limit should not be considered valid and might be purposely false, or 
zeroed by the sending device (meaning the GEOPRIV target towards the 
requestor).

             Values above decimal 34 are currently undefined and reserved.

   Longitude:   a 34 bit fixed point value consisting of 9 bits of integer 
             and 25 bits of fraction. Longitude SHOULD be normalized to 
             within +/- 180 degrees.

Entering a value of 2 in the LoRes field will result in the precision of 
no greater than 1/6th that of the globe (see first example in section 4.0 
for more here). A value of 34 in the LoRes field indicates a precision 
within 2.42 mm in longitude (at the equator). Because lines of longitude 
converge at the poles, the distance is smaller (resolution greater) for 
locations away from the equator.

   AltRes:   Altitude resolution. 6 bits indicating the number of valid 
             bits in the altitude. Values above 30 decimal are undefined 
             and reserved.

   MU: Measurement unit for altitude. Codes defined here are:

     1: Meters - in 2s-complement fixed-point 22-bit integer part with 
                 8-bit fraction

If MU = 1, then a completely imprecise Altitude would be of AltRes value 
0. If the Altitude is known exactly, then the AltRes can be value 30 (or 
all ones).

     2: Floors - in 2s-complement fixed-point 22-bit integer part with 
                 8-bit fraction

MU = 2 for Floors was chosen because of the impreciseness of the number of 
meters any one floor is above/below the ground floor, or above mean low 
tide (the Altitude datum within WGS84). What is fairly understood is which 


Polk/Schnizlein/Linsner                                             Page 5

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002

floor a device or person is on. 

If MU=2, AltRes = 30, and Altitude = 0, that represents the ground 
regardless if there is a building present or not (as well as the ground 
floor of a building). This is important because the precise altitude might 
not be known, but it is likely known what is the ground level. The non-
obvious case is in a hilly or mountainous area, these values still 
represent being on the ground level at the La/Lo coordinates provided. 


3.0 Purpose of Resolution Value per La/Lo/Alt Element

GEOPRIV specified [2] the requirement that any location expressed from or 
proxied on behalf of a device through the GEOPRIV Protocol can have the 
accuracy or precision of that device's location limited. The owner of the 
device, or the domain of the device determines the policy for divulging 
how precise the location is for any/all given requesters of that device's 
location. 

One aspect within the GEOPRIV WG is the precision of a device's ability to 
present its location coordinates might have a domain policy override the 
individual policy in the sense of maximum resolution possible. In other 
words, a user of a device might not mind providing a quite precise 
location return to a location request, but the local domain might not want 
that level of precision by its policy. In this case, the resolution value 
provided in the DHCP Reply can set this maximum precision value, perhaps 
allowing the user of the Target device to make the values more imprecise 
based on who is requesting their location. The document does not go 
further down this thought for good reason.


4.0 Calculations of Imprecision possible with the DHC LO

The following examples for two different locations demonstrate how the 
Resolution values for Latitude, Longitude and Altitude can be used. 

4.1 Location Object of "White House" (Example 1)

The address was NOT picked for any political reason and can easily be 
found on the Internet or mapping software, but was picked as an easily 
identifiable location on our planet.

Postal Address:
  White House
  1600 Pennsylvania Ave. NW
  Washington, DC 20006

Standing on the sidewalk, north side of White House, between driveways.





Polk/Schnizlein/Linsner                                             Page 6

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002


Latitude 38.89868 degrees North (or +38.89868 degrees)
   Using 2s complement, 34 bit fixed point, 25 bit fraction 
   Latitude = 0x04dcc1fc8, Latitude = 0001001101110011000001111111001000

Longitude 77.03723 degrees West (or û77.03723 degrees)
   Using 2s complement, 34 bit fixed point, 25 bit fraction 
   Longitude = 0xf65ecf031, Longitude = 1101100101111011001111000000110001

Altitude 15

  In this example we are not inside a structure, therefore we will 
  assume an altitude value of 15 meters, interpolated from the US 
  Geological survey map, Washington West quadrangle.

    AltRes = 30, 0x1e, 011110
    MU = 1, 0x01, 000001
    Altitude = 15, 0x0F00, 00000000000000000000000001111100000000

If: LaRes is expressed as value 2 (0x02 or 000010) and LoRes is 
    expressed as value 2 (0x02 or 000010), then it would describe 
    a geo-location region that is north of the equator and extends from 
    û1 degree (west of the meridian) to û128 degrees.  This would 
    include the area from approximately 600km south of Saltpond, Ghana, 
    due north to the North Pole and approximately 4400km south-
    southwest of Los Angeles, CA due north to the North Pole.  This 
    would cover an area of about one-sixth of the globe, approximately 
    20 million square nm.

If: LaRes is expressed as value 3 (0x03 or 000011) and LoRes is 
    expressed as value 3, (0x03 or 000011) then it would describe 
    a geo-location area that is north from the equator to 63 degrees 
    north, and -65 degrees to û128 degrees longitude.  This area 
    includes south of a line from Anchorage, AL to eastern Nunavut, CN. 
    and from the Amazons of northern Brazil to approximately 4400km 
    south-southwest of Los Angeles, CA.  This area would include North 
    America, Central America, and parts of Venezuela and Columbia, 
    except portions of Alaska and northern and eastern Canada, 
    approximately 10 million square nm.

If: LaRes is expressed as value 5 (0x05 or 000101) and LoRes is 
    expressed as value 5 (0x05 or 000101), then it would describe 
    a geo-location area that is latitude 32 north of the equator to 
    latitude 48 and extends from û64 degrees to û80 degrees longitude. 
    This is approximately an east-west boundary of a time zone, an area 
    of approximately 700,000 square nm.

If: LaRes is expressed as value 9 (0x09 or 001001) and LoRes is 
    expressed as value 9 (0x09 or 001001), which includes all the 
    integer bits, then it would describe a geo-location area that 
    is latitude 38 north of the equator to latitude 39 and extends from 


Polk/Schnizlein/Linsner                                             Page 8

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002


    û77 degrees to û78 degrees longitude.  This is an area of 
    approximately 9600 square km (111.3km x 86.5km).

If: LaRes is expressed as value 18 (0x12 or 010010) and LoRes is 
    expressed as value 18 (0x12 or 010010), then it would describe 
    a geo-location area that is latitude 38.8984375 north to latitude 
    38.9003906 and extends from û77.0390625 degrees to û77.0371094 
    degrees longitude.  This is an area of approximately 36,600 square 
    meters (169m x 217m).

If: LaRes is expressed as value 22 (0x16 or 010110) and LoRes is 
    expressed as value 22 (0x16 or 010110), then it would describe a 
    geo-location area that is latitude 38.896816 north to latitude 
    38.8985596 and extends from û77.0372314 degrees to û77.0371094 
    degrees longitude.  This is an area of approximately 143 square 
    meters (10.5m x 13.6m).

If: LaRes is expressed as value 28 (0x1c or 011100) and LoRes is 
    expressed as value 28 (0x1c or 011100), then it would describe a 
    geo-location area that is latitude 38.8986797 north to latitude 
    38.8986816 and extends from û77.0372314 degrees to û77.0372296 
    degrees longitude.  This is an area of approximately 339 square 
    centimeters (20.9cm x 16.23cm).

If: LaRes is expressed as value 30 (0x1e or 011110) and LoRes is 
    expressed as value 30 (0x1e or 011110), then it would describe a 
    geo-location area that is latitude 38.8986797 north to latitude 
    38.8986802 and extends from û77.0372300 degrees to û77.0372296 
    degrees longitude.  This is an area of approximately 19.5 square 
    centimeters (50mm x 39mm).

If: LaRes is expressed as value 34 (0x22 or 100010) and LoRes is 
    expressed as value 34 (0x22 or 100010), then it would describe a 
    geo-location area that is latitude 38.8986800 north to latitude 
    38.8986802 and extends from û77.0372300 degrees to û77.0372296 
    degrees longitude.  This is an area of approximately 7.5 square 
    millimeters (3.11mm x 2.42mm).

In the (White House) example, the requirement of emergency responders in 
North America via their NENA Model Legislation [6], could be met by a 
LaRes value of 21 and a LoRes value of 20.  This would yield a geo-
location that is latitude 38.8984375 north to latitude 38.8988616 north 
and longitude û77.0371094 to longitude û77.0375977.  This is an area of 
approximately 89 feet by 75 feet or 6669 square feet, which is very close 
to the 7000 square feet asked for by NENA.  In this example a service 
provider could enforce that a device send a Location Object with this 
minimum amount of resolution for this particular location when calling 
emergency services.




Polk/Schnizlein/Linsner                                             Page 8

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002

4.2 Location Object of "Sears Tower" (Example 2)

Postal Address:
Sears Tower
103th Floor
233 S. Wacker Dr.
Chicago, IL  60606

Viewing the Chicago area from the Observation Deck of the Sears Tower.

Latitude 41.87884 degrees North (or +41.87884 degrees)
   Using 2s complement, 34 bit fixed point, 25 bit fraction 
   Latitude = 0x053c1f751, Latitude = 0001010011110000011111011101010001

Longitude 87.63602 degrees West (or û87.63602 degrees)
   Using 2s complement, 34 bit fixed point, 25 bit fraction 
   Longitude = 0xf50ba5b97, Longitude = 1101010000101110100101101110010111

Altitude 103

  In this example we are inside a structure, therefore we will assume an 
  altitude value of 103 to indicate the floor we are on.  The measurement 
  unit value is 2 indicating floors.  The AltRes field would indicate that 
  all bits in the Altitude field are true, as we want to accurately 
  represent the floor of the structure where we are located.

    AltRes = 30, 0x1e, 011110
    MU = 2, 0x02, 000010
    Altitude = 103, 0x00006700, 000000000000000110011100000000

For the accuracy of the latitude and longitude, the best information 
available to us was supplied by a generic mapping service that shows a 
single geo-loc for all of the Sears Tower.  Therefore we are going to show 
LaRes as value 18 (0x12 or 010010) and LoRes as value 18 (0x12 or 010010).  
This would be describing a geo-location area that is latitude 41.8769531 
to latitude 41.8789062 and extends from û87.6367188 degrees to û87.6347657 
degrees longitude.  This is an area of approximately 373412 square feet 
(713.3 ft. x 523.5 ft.).


5.0 Security Considerations

TBD

6.0 IANA Considerations

This document has no IANA Considerations






Polk/Schnizlein/Linsner                                             Page 9

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002

7.0 References

 [1] Polk J., Schnizlein J., Linsner M., "DHCP Option for Geographic 
     Location", Internet Draft, "Work in Progress", October 2002

 [2] Cuellar J., Morris J., Mulligan D., "GEOPRIV Requirements", Internet 
     Draft, "Work in Progress", June 2002

 [3] Bradner S., "Key words for use in RFCs to Indicate Requirement 
     Levels", RFC 2119, March 1997

 [4] Droms R., "Dynamic Host Configuration Protocol", RFC 2131, March 1997

 [5] Patrick M., "DHCP Relay Agent Information Option", RFC 3046, January 
     2001

 [6] NENA û National Emergency Number Association û www.nena.org - NENA 
     Technical Information Document on Model Legislation Enhanced 911 for 
     Multi-Line Telephone Systems
     (http://www.nena.org/9%2D1%2D1techstandards/TechInfoDocs/
           MLTS_ModLeg_Nov200.PDF)


8.0 Author Information

James M. Polk
Cisco Systems
2200 East President George Bush Turnpike
Richardson, Texas 75082 USA
jmpolk@cisco.com


John Schnizlein 
Cisco Systems
9123 Loughran Road
Fort Washington, MD 20744 USA
john.schnizlein@cisco.com

Marc Linsner
Cisco Systems
Marco Island, FL 34145 USA
marc.linsner@cisco.com



"Copyright (C) The Internet Society (February 23rd, 2001). 
All Rights Reserved.

This document and translations of it may be copied and furnished to 
others, and derivative works that comment on or otherwise explain it 
or assist in its implementation may be prepared, copied, published and 


Polk/Schnizlein/Linsner                                            Page 10

Internet Draft            GEOPRIV/DHC LO Semantics          Oct 25th, 2002

distributed, in whole or in part, without restriction of any kind, 
provided that the above copyright notice and this paragraph are 
included on all such copies and derivative works.  However, this 
document itself may not be modified in any way, such as by removing 
the copyright notice or references to the Internet Society or other 
Internet organizations, except as needed for the purpose of developing 
Internet standards in which case the procedures for copyrights defined 
in the Internet Standards process must be followed, or as required to 
translate it into languages other than English.

The limited permissions granted above are perpetual and will not be 
revoked by the Internet Society or its successors or assigns.

This document and the information contained herein is provided on an 
"AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT 
NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN 
WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE."




The Expiration date for this Internet Draft is:

April 25th, 2003


























Polk/Schnizlein/Linsner                                            Page 11
