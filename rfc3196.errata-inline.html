<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="robots" content="index,follow" />

        <link rel="icon" href="./css/images/rfc.png" type="image/png" />
        <link rel="shortcut icon" href="./css/images/rfc.png" type="image/png" />
        <title>rfc3196</title>
    
        <link rel="stylesheet" type="text/css" href="./css/errata-base.css"/>
        <link rel="stylesheet" type="text/css" href="./css/errata-color.css" title="Default: Basic Colors"/>
        <link rel="alternative stylesheet" type="text/css" href="./css/errata-monochrome.css" title="Monochrome"/>
        <link rel="alternative stylesheet" type="text/css" href="./css/errata-printer.css" title="Printer"/>

        <script src="./css/errata.js"></script>
    </head>
    <body>
        <div class='Verified-headnote-styling'>
<span style="font-weight: bold;">This is a purely informative rendering of an RFC that includes verified errata.  This rendering may not be used as a reference.</span>
<br/>
<br/>
The following 'Verified' errata have been incorporated in this document:
 <a href='#btn_2924'>EID 2924</a>,  <a href='#btn_3009'>EID 3009</a>,  <a href='#eid3010'>EID 3010</a>,  <a href='#btn_3161'>EID 3161</a>
</div>

        <pre>
Network Working Group                                        T. Hastings
Request for Comments: 3196                                     C. Manros
Obsoletes: 2639                                                P. Zehler
Category: Informational                                Xerox Corporation
                                                               C. Kugler
                                                 IBM Printing Systems Co
                                                                H. Holst
                                                 i-data Printing Systems
                                                           November 2001


          Internet Printing Protocol/1.1: Implementor&#x27;s Guide

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2001).  All Rights Reserved.

Abstract

   This document is one of a set of documents, which together describe
   all aspects of a new Internet Printing Protocol (IPP).

Table of Contents

   1  Introduction...................................................  4
   1.1   Conformance language........................................  5
   1.2   Other terminology...........................................  6
   1.3   Issues Raised from Interoperability Testing Events..........  6
   2  IPP Objects....................................................  6
   3  IPP Operations.................................................  7
   3.1   Common Semantics............................................  7
   3.1.1  Summary of Operation Attributes............................  8
   3.1.2  Suggested Operation Processing Steps for IPP Objects....... 16
   3.1.2.1   Suggested Operation Processing Steps for all Operations. 17
   3.1.2.1.1   Validate version number............................... 18
   3.1.2.1.2   Validate operation identifier......................... 20
   3.1.2.1.3   Validate the request identifier....................... 20
   3.1.2.1.4   Validate attribute group and attribute presence and
               order................................................. 20
   3.1.2.1.4.1   Validate the presence and order of attribute groups. 20
   3.1.2.1.4.2   Ignore unknown attribute groups in the expected
                 position............................................ 21

   3.1.2.1.4.3   Validate the presence of a single occurrence of
                 required Operation attributes....................... 21
   3.1.2.1.5   Validate the values of the REQUIRED Operation
               attributes............................................ 29
   3.1.2.1.6   Validate the values of the OPTIONAL Operation
               attributes............................................ 33
   3.1.2.2   Suggested Additional Processing Steps for Operations
             that Create/Validate Jobs and Add Documents............. 37
   3.1.2.2.1   Default &quot;ipp-attribute-fidelity&quot; if not supplied...... 37
   3.1.2.2.2   Check that the Printer object is accepting jobs....... 38
   3.1.2.2.3   Validate the values of the Job Template attributes.... 38
   3.1.2.3   Algorithm for job validation............................ 39
   3.1.2.3.1   Check for conflicting Job Template attributes values.. 45
   3.1.2.3.2   Decide whether to REJECT the request.................. 46
   3.1.2.3.3   For the Validate-Job operation, RETURN one of the
               success status codes.................................. 48
   3.1.2.3.4   Create the Job object with attributes to support...... 48
   3.1.2.3.5   Return one of the success status codes................ 50
   3.1.2.3.6   Accept appended Document Content...................... 50
   3.1.2.3.7   Scheduling and Starting to Process the Job............ 50
   3.1.2.3.8   Completing the Job.................................... 50
   3.1.2.3.9   Destroying the Job after completion................... 51
   3.1.2.3.10  Interaction with &quot;ipp-attribute-fidelity&quot;............. 51
   3.1.2.3.11  Character set code conversion support................. 51
   3.1.2.3.12  What charset to return when an unsupported charset is
               requested (Issue 1.19)?....... ....................... 52
   3.1.2.3.13  Natural Language Override (NLO)....................... 53
   3.1.3  Status codes returned by operation......................... 55
   3.1.3.1   Printer Operations...................................... 55
   3.1.3.1.1   Print-Job............................................. 55
   3.1.3.1.2   Print-URI............................................. 58
   3.1.3.1.3   Validate-Job.......................................... 58
   3.1.3.1.4   Create-Job............................................ 58
   3.1.3.1.5   Get-Printer-Attributes................................ 59
   3.1.3.1.6   Get-Jobs.............................................. 60
   3.1.3.1.7   Pause-Printer......................................... 61
   3.1.3.1.8   Resume-Printer........................................ 62
   3.1.3.1.8.1   What about Printers unable to change state due to
                 an error condition?................................. 63
   3.1.3.1.8.2   How is &quot;printer-state&quot; handled on Resume-Printer?... 63
   3.1.3.1.9   Purge-Printer......................................... 63
   3.1.3.2   Job Operations.......................................... 64
   3.1.3.2.1   Send-Document......................................... 64
   3.1.3.2.2   Send-URI.............................................. 65
   3.1.3.2.3   Cancel-Job............................................ 65
   3.1.3.2.4   Get-Job-Attributes.................................... 67
   3.1.3.2.5   Hold-Job.............................................. 68
   3.1.3.2.6   Release-Job........................................... 69

   3.1.3.2.7   Restart-Job........................................... 69
   3.1.3.2.7.1   Can documents be added to a restarted job?.......... 69
   3.1.4  Returning unsupported attributes in Get-Xxxx responses
          (Issue 1.18)............................................... 70
   3.1.5  Sending empty attribute groups............................. 70
   3.2   Printer Operations.......................................... 71
   3.2.1  Print-Job operation........................................ 71
   3.2.1.1   Flow controlling the data portion of a Print-Job
             request (Issue 1.22).................................... 71
   3.2.1.2   Returning job-state in Print-Job response (Issue 1.30).. 71
   3.2.2  Get-Printer-Attributes operation........................... 72
   3.2.3  Get-Jobs operation......................................... 72
   3.2.3.1   Get-Jobs, my-jobs=&#x27;true&#x27;, and &#x27;requesting-user-name&#x27;
             (Issue 1.39)?..........................................  72
   3.2.3.2   Why is there a &quot;limit&quot; attribute in the Get-Jobs
             operation?.............................................. 73
   3.2.4  Create-Job operation....................................... 73
   3.3   Job Operations.............................................. 74
   3.3.1  Validate-Job............................................... 74
   3.3.2  Restart-Job................................................ 74
   4  Object Attributes.............................................. 74
   4.1   Attribute Syntax&#x27;s.......................................... 74
   4.1.1  The &#x27;none&#x27; value for empty sets (Issue 1.37)............... 74
   4.1.2  Multi-valued attributes (Issue 1.31)....................... 75
   4.1.3  Case Sensitivity in URIs (issue 1.6)....................... 75
   4.1.4  Maximum length for xxxWithLanguage and xxxWithoutLanguage.. 76
   4.2   Job Template Attributes..................................... 76
   4.2.1  multiple-document-handling(type2 keyword).................. 76
   4.2.1.1   Support of multiple document jobs....................... 76
   4.3   Job Description Attributes.................................. 76
   4.3.1  Getting the date and time of day........................... 76
   4.4   Printer Description Attributes.............................. 77
   4.4.1  queued-job-count (integer(0:MAX)).......................... 77
   4.4.1.1   Why is &quot;queued-job-count&quot; RECOMMENDED (Issue 1.14)?..... 77
   4.4.1.2   Is &quot;queued-job-count&quot; a good measure of how busy a
             printer is (Issue 1.15)?................................ 77
   4.4.2  printer-current-time (dateTime)............................ 78
   4.4.3  Printer-uri................................................ 78
   4.5   Empty Jobs.................................................. 79
   5  Directory Considerations....................................... 79
   5.1   General Directory Schema Considerations..................... 79
   5.2   IPP Printer with a DNS name................................. 79
   6  Security Considerations........................................ 80
   6.1   Querying jobs with IPP that were submitted using other job
         submission protocols (Issue 1.32)........................... 80
   7  Encoding and Transport......................................... 81
   7.1   General Headers............................................. 83
   7.2   Request  Headers............................................ 84

   7.3   Response Headers............................................ 86
   7.4   Entity  Headers............................................. 87
   7.5   Optional support for HTTP/1.0............................... 88
   7.6   HTTP/1.1 Chunking........................................... 88
   7.6.1  Disabling IPP Server Response Chunking..................... 88
   7.6.2  Warning About the Support of Chunked Requests.............. 88
   8  References..................................................... 89
   9  Authors&#x27; Addresses............................................. 91
   10 Description of the Base IPP Documents.......................... 94
   11 Full Copyright Statement....................................... 96

Tables

   Table 1 - Summary of Printer operation attributes that sender MUST
             supply .................................................  8
   Table 2 - Summary of Printer operation attributes that sender MAY
             supply ................................................. 10
   Table 3 - Summary of Job operation attributes that sender MUST
             supply.................................................. 12
   Table 4 - Summary of Job operation attributes that sender MAY
             supply.................................................. 14
   Table 5 - Printer operation response attributes................... 16
   Table 6 - Examples of validating IPP version...................... 19
   Table 7 - Rules for validating single values X against Z.......... 40

1. Introduction

   IPP is an application level protocol that can be used for distributed
   printing using Internet tools and technologies.  This document
   contains information that supplements the IPP Model and Semantics
   [RFC2911] and the IPP Transport and Encoding [RFC2910] documents.  It
   is intended to help implementers understand IPP/1.1, as well as
   IPP/1.0 [RFC2565, RFC2566], and some of the considerations that may
   assist them in the design of their client and/or IPP object
   implementation.  For example, a typical order of processing requests
   is given, including error checking.  Motivation for some of the
   specification decisions is also included.

   This document obsoletes RFC 2639 which was the Implementor&#x27;s Guide
   for IPP/1.0.  The IPP Implementor&#x27;s Guide (IIG) (this document)
   contains information that supplements the IPP Model and Semantics
   [RFC2911] and the IPP Transport and Encoding [RFC2910] documents.
   This document is just one of a suite of documents that fully define
   IPP.  The base set of IPP documents includes:

      Design Goals for an Internet Printing Protocol [RFC2567]
      Rationale for the Structure and Model and Protocol for the
      Internet Printing Protocol [RFC2568]

      Internet Printing Protocol/1.1: Model and Semantics [RFC2911]
      Internet Printing Protocol/1.1: Encoding and Transport [RFC2910]
      Internet Printing Protocol/1.1: Implementor&#x27;s Guide (this
      document)
      Mapping between LPD and IPP Protocols [RFC2569]

   See section 10 for a description of these base IPP documents.  Anyone
   reading these documents for the first time is strongly encouraged to
   read the IPP documents in the above order.

   As such the information in this document is not part of the formal
   specification of IPP/1.1.  Instead information is presented to help
   implementers understand IPP/1.1, as well as IPP/1.0 [RFC2565,
   RFC2566], including some of the motivation for decisions taken by the
   committee in developing the specification.  Some of the
   implementation considerations are intended to help implementers
   design their client and/or IPP object implementations.  If there are
   any contradictions between this document and [RFC2911] or [RFC2910],
   those documents take precedence over this document.

   Platform-specific implementation considerations will be included in
   this guide as they become known.

   Note:  In order to help the reader of the IIG and the IPP Model and
   Semantics document, the sections in this document parallel the
   corresponding sections in the Model document and are numbered the
   same for ease of cross reference.  The sections that correspond to
   the IPP Transport and Encoding are correspondingly offset.

      1.1               yes (MUST)                1.1

      1.2               yes (MUST)                1.2

      1.3               no (SHOULD NOT)           1.2

   It is advantageous for Printers to support both IPP/1.1 and IPP/1.0,
   so that they can interoperate with either client implementations.
   Some implementations may allow an Administrator to explicitly disable
   support for one or the other by setting the &quot;ipp-versions-supported&quot;
   Printer description attribute.

   Likewise, it is advantageous for clients to support both versions to
   allow interoperability with new and legacy Printers.

2.  IPP Objects

   The term &quot;client&quot; in IPP is intended to mean any client that issues
   IPP operation requests and accepts IPP operation responses, whether
   it be a desktop or a server.  In other words, the term &quot;client&quot; does
   not just mean end-user clients, such as those associated with
   desktops.

   The term &quot;IPP Printer&quot; in IPP is intended to mean an object that
   accepts IPP operation requests and returns IPP operation responses,
   whether implemented in a server or a device.  An IPP Printer object
   MAY, if implemented in a server, turn around and forward received
   jobs (and other requests) to other devices and print
   servers/services, either using IPP or some other protocol.

3  IPP Operations

   This section  corresponds to Section 3 &quot;IPP Operations&quot; in the
   IPP/1.1 Model and Semantics document [RFC2911].

3.1  Common Semantics

   This section discusses semantics common to all operations.

3.1.1  Summary of Operation Attributes

   Table 1 - Summary of Printer operation attributes that sender MUST
             supply

Printer Operations

                     Requests                               Responses
   Operation         PJ,    PU    CJ    GPA    GJ    PP,    All
   Attributes        VJ     (O)   (O)   (R)    (R)   RP,    Operations
                     (R)                             PP
                                                     (O+)

   Operation parameters--REQUIRED to be supplied by the sender:

   operation-id      R      R     R     R      R     R

   status-code                                              R

   request-id        R      R     R     R      R     R      R

   version-number    R      R     R     R      R     R      R

   Operation attributes--REQUIRED to be supplied by the sender:

   attributes-       R      R     R     R      R     R      R
     charset

   attributes-       R      R     R     R      R     R      R
     natural-
     language

   document-uri             R

   job-id*

   job-uri*

Printer Operations

                     Requests                               Responses

   Operation         PJ,    PU    CJ    GPA    GJ    PP,    All
   Attributes        VJ     (O)   (O)   (R)    (R)   RP,    Operations
                     (R)                             PP
                                                     (O+)
   last-document

   printer-uri       R      R     R     R      R     R

   Operation  attributes--RECOMMENDED   to  be  supplied   by  the
     sender:

   job-name          R      R     R

   requesting-user-  R      R     R      R      R     R
     name

   Legend:

   PJ, VJ:  Print-Job, Validate-Job
   PU:  Print-URI
   CJ:  Create-Job
   GPA:  Get-Printer-Attributes
   GJ:  Get-Jobs
   PP, RP, PP:  Pause-Printer, Resume-Printer, Purge-Printer
   R  indicates a REQUIRED operation that MUST be supported by the IPP
      object (Printer or Job).  For attributes, R indicates that the
      attribute MUST be supported by the IPP object that supports the
      associated operation.
   O  indicates an OPTIONAL operation or attribute that MAY be supported
      by the IPP object (Printer or Job).
   +  indicates that this is not an IPP/1.0 feature, but is only a part
      of IPP/1.1 and future versions of IPP.

     Table 2 - Summary of Printer operation attributes that sender MAY
               supply

Printer Operations

                         Requests                                Respon-
                                                                 ses
   Operation Attributes  PJ,    PU     CJ     GPA    GJ     PP,  All
                         VJ     (O)    (O)    (R)    (R)    RP,  Opera
                         (R)                                PP   tions
                                                            (O+)

   Operation attributes--OPTIONAL to be supplied by the sender:

   status-message                                                 O

   detailed-status-                                               O
     message

   document-access-                                               O**
     error

   compression           R      R

   document-format       R      R             R

   document-name         O      O

   document-natural-     O      O
     language

   ipp-attribute-        R      R      R
     fidelity

   job-impressions       O      O      O

   job-k-octets          O      O      O

   job-media-sheets      O      O      O

Printer Operations

                         Requests                                Respon-
                                                                 ses
   Operation Attributes  PJ,    PU     CJ     GPA    GJ     PP,  All
                         VJ     (O)    (O)    (R)    (R)    RP,  Opera
                         (R)                                PP   tions
                                                            (O+)

   limit                                             R

   message

   my-jobs                                           R

   requested-attributes                       R      R

   which-jobs                                        R

   Legend:

   PJ, VJ:  Print-Job, Validate-Job
   PU:  Print-URI
   CJ:  Create-Job
   GPA:  Get-Printer-Attributes
   GJ:  Get-Jobs
   PP, RP, PP:  Pause-Printer, Resume-Printer, Purge-Printer
   R  indicates a REQUIRED operation that MUST be supported by the IPP
      object (Printer or Job).  For attributes, R indicates that the
      attribute MUST be supported by the IPP object that supports the
      associated operation.
   O  indicates an OPTIONAL operation or attribute that MAY be supported
      by the IPP object (Printer or Job).
   +  indicates that this is not an IPP/1.0 feature, but is only a part
      of IPP/1.1 and future versions of IPP.
   *  &quot;job-id&quot; is REQUIRED only if used together with &quot;printer-uri&quot; to
      identify the target job; otherwise, &quot;job-uri&quot; is REQUIRED.
   ** &quot;document-access-error&quot; applies to the Print-URI response only.

   Table 3 - Summary of Job operation attributes that sender MUST supply

Job Operations

                        Requests                              Responses
   Operation            SD     SU      CJ      GJA    HJ      All
   Attributes           (O)    (O)     (R)     (R)    RJ, RJ Opera-
                                                      (O+)   tions

   Operation parameters--REQUIRED to be supplied by the sender:

   operation-id         R      R       R       R      R

   status-code                                                R

   request-id           R      R       R       R      R       R

   version-number       R      R       R       R      R       R

   Operation attributes--REQUIRED to be supplied by the sender:

   attributes-charset   R      R       R       R      R       R

   attributes-natural-  R      R       R       R      R       R
     language

   document-uri                R

   job-id*              R      R       R       R      R

   job-uri*             R      R       R       R      R

   last-document        R      R

   printer-uri          R      R       R       R      R

   Operation attributes--RECOMMENDED to be supplied by the sender:

   job-name

Job Operations

                        Requests                              Responses

   Operation            SD     SU      CJ      GJA    HJ      All
   Attributes           (O)    (O)     (R)     (R)    RJ, RJ  Opera-
                                                      (O+)    tions

   requesting-user-     R      R       R       R      R
     name

   Legend:

   SD:  Send-Document
   SU:  Send-URI
   CJ:  Cancel-Job
   GJA:  Get-Job-Attributes
   HJ, RJ, RJ:  Hold-Job, Release-Job, Restart-Job
   R  indicates a REQUIRED operation that MUST be supported by the IPP
      object (Printer or Job).  For attributes, R indicates that the
      attribute MUST be supported by the IPP object that supports the
      associated operation.
   O  indicates an OPTIONAL operation or attribute that MAY be supported
      by the IPP object (Printer or Job).
   +  indicates that this is not an IPP/1.0 feature, but is only a part
      of IPP/1.1 and future versions of IPP.
   *  &quot;job-id&quot; is REQUIRED only if used together with &quot;printer-uri&quot; to
      identify the target job; otherwise, &quot;job-uri&quot; is REQUIRED.

   Table 4 - Summary of Job operation attributes that sender MAY supply

Job Operations

                      Requests                                 Responses

   Operation          SD     SU     CJ     GJA    HJ,    SD    All
   Attributes         (O)    (O)    (R)    (R)    RJ,    (O)   Opera-
                                                  RJ           tions
                                                  (O+)

   Operation attributes--OPTIONAL to be supplied by the sender:

   status-message                                                O

   detailed-status-                                              O
     message

   document-access-                                              O**
     error

   compression        R      R

   document-format    R      R

   document-name      O      O

   document-natural-  O      O
     language

   ipp-attribute-
     fidelity

   job-impressions

   job-k-octets

   job-media-sheets

Job Operations

                      Requests                                 Responses

   Operation          SD     SU     CJ     GJA    HJ,    SD    All
   Attributes         (O)    (O)    (R)    (R)    RJ,    (O)   Opera-
                                                  RJ           tions
                                                  (O+)

   limit

   message                          O             O      O

   job-hold-until                                 R

   my-jobs

   requested-                              R
     attributes

   which-jobs

   Legend:

   SD:  Send-Document
   SU:  Send-URI
   CJ:  Cancel-Job
   GJA:  Get-Job-Attributes
   HJ, RJ, RJ:  Hold-Job, Release-Job, Restart-Job
   R  indicates a REQUIRED operation that MUST be supported by the IPP
      object (Printer or Job).  For attributes, R indicates that the
      attribute MUST be supported by the IPP object that supports the
      associated operation.
   O  indicates an OPTIONAL operation or attribute that MAY be supported
      by the IPP object (Printer or Job).
   +  indicates that this is not an IPP/1.0 feature, but is only a part
      of IPP/1.1 and future versions of IPP.
   *  &quot;job-id&quot; is REQUIRED only if used together with &quot;printer-uri&quot; to
      identify the target job; otherwise, &quot;job-uri&quot; is REQUIRED.
   ** &quot;document-access-error&quot; applies to the Send-URI operation only

              Table 5 - Printer operation response attributes

Printer Operations

                  Response

   Operation       PJ (R)  VJ (R) PU (O)  CJ (O)  GPA     GJ (R) PP,
   Attributes      SD (O)         SU (O)          (R)            RP, PP
                                                                 (O+)

   job-uri         R              R       R

   job-id          R              R       R

   job-state       R              R       R

   job-state-      R+             R+      R+
     reasons

   number-of-      O              O       O
     intervening-
     jobs

   document-                      O
     access-
     error+

   Legend:

   PJ, SJ:  Print-Job, Send-Document
   VJ:  Validate-Job
   PU, SU:  Print-URI, Send-URI
   CJ:  Create-Job
   GPA:  Get-Printer-Attributes
   GJ:  Get-Jobs
   PP, RP, PP:  Pause-Printer, Resume-Printer, Purge-Printer
   R  indicates a REQUIRED operation that MUST be supported by the IPP
      object (Printer or Job).  For attributes, R indicates that the
      attribute MUST be supported by the IPP object that supports the
      associated operation.
   O  indicates an OPTIONAL operation or attribute that MAY be supported
      by the IPP object (Printer or Job).

3.1.2  Suggested Operation Processing Steps for IPP Objects

   This section suggests the steps and error checks that an IPP object
   MAY perform when processing requests and returning responses.  An IPP
   object MAY perform some or all of the error checks.  However, some

   implementations MAY choose to be more forgiving than the error checks
   shown here, in order to be able to accept requests from non-
   conforming clients.  Not performing all of these error checks is a
   so-called &quot;forgiving&quot; implementation.  On the other hand, clients
   that successfully submit requests to IPP objects that do perform all
   the error checks will be more likely to be able to interoperate with
   other IPP object implementations.  Thus an implementer of an IPP
   object needs to decide whether to be a &quot;forgiving&quot; or a &quot;strict&quot;
   implementation.  Therefore, the error status codes returned may
   differ between implementations.  Consequentially, client SHOULD NOT
   expect exactly the error code processing described in this section.

   When an IPP object receives a request, the IPP object either accepts
   or rejects the request. In order to determine whether or not to
   accept or reject the request, the IPP object SHOULD execute the
   following steps.  The order of the steps may be rearranged and/or
   combined, including making one or multiple passes over the request.

   A client MUST supply requests that would pass all of the error checks
   indicated here in order to be a conforming client.  Therefore, a
   client SHOULD supply requests that are conforming, in order to avoid
   being rejected by some IPP object implementations and/or risking
   different semantics by different implementations of forgiving
   implementations.  For example, a forgiving implementation that
   accepts multiple occurrences of the same attribute, rather than
   rejecting the request might use the first occurrences, while another
   might use the last occurrence.  Thus such a non-conforming client
   would get different results from the two forgiving implementations.

   In the following, processing continues step by step until a &quot;RETURNS
   the xxx status code ...&quot; statement is encountered.  Error returns are
   indicated by the verb: &quot;REJECTS&quot;.  Since clients have difficulty
   getting the status code before sending all of the document data in a
   Print-Job request, clients SHOULD use the Validate-Job operation
   before sending large documents to be printed, in order to validate
   whether the IPP Printer will accept the job or not.

   It is assumed that security authentication and authorization has
   already taken place at a lower layer.

3.1.2.1  Suggested Operation Processing Steps for all Operations

   This section is intended to apply to all operations.  The next
   section contains the additional steps for the Print-Job, Validate-
   Job, Print-URI, Create-Job, Send-Document, and Send-URI operations
   that create jobs, adds documents, and validates jobs.

   IIG Sect #         Flow                 IPP error status codes
   ----------         ----                 ----------------------
                        |
                        v          err
   3.1.2.1.1   &lt;Validate version&gt;  --&gt; server-error-version-not-
                                       supported
                      ok|
                        v          err
   3.1.2.1.2  &lt;Validate operation&gt; --&gt; server-error-operation-not-
                                       supported
                      ok|
                        v          err
   3.1.2.1.4.1- &lt;Validate presence&gt; --&gt; client-error-bad-request
   3.1.2.1.4.2    &lt;of attributes&gt;
                      ok|
                        v          err
   3.1.2.1.4.3 &lt;Validate presence&gt; --&gt; client-error-bad-request
               &lt;of operation attr&gt;
                      ok|
                        v          err
   3.1.2.1.5  &lt;Validate values of&gt; --&gt; client-error-bad-request
               &lt;operation attrs&gt;       client-error-request-value-
                                       too-long
             &lt;(length, tag, range,&gt;
                 &lt;multi-value)&gt;
                      ok|
                        v          err
   3.1.2.1.5    &lt;Validate values&gt;  --&gt; client-error-bad-request
             &lt;with supported values&gt;   client-error-charset-not-
                                       supported
                      ok|              client-error-attributes-or-
                                       values-
                        |                           not-supported
                        v          err
   3.1.2.1.6 &lt;Validate optionally&gt; --&gt; client-error-bad-request
                &lt;operation attr&gt;       client-error-natural-language-
                                       not-supported
                        |              client-error-request-value-
                                       too-long
                        |              client-error-attributes-or-
                                       values-not-supported

3.1.2.1.1   Validate version number

   Every request and every response contains the &quot;version-number&quot;
   attribute.  The value of this attribute is the major and minor
   version number of the syntax and semantics that the client and IPP
   object is using, respectively.  The &quot;version-number&quot; attribute

   remains in a fixed position across all future versions so that all
   clients and IPP object that support future versions can determine
   which version is being used.  The IPP object checks to see if the
   major version number supplied in the request is supported.  If not,
   the Printer object REJECTS the request and RETURNS the &#x27;server-
   error-version-not-supported&#x27; status code in the response.  The IPP
   object returns in the &quot;version-number&quot; response attribute the major
   and minor version for the error response.  Thus the client can learn
   at least one major and minor version that the IPP object supports.
   The IPP object is encouraged to return the closest version number to
   the one supplied by the client.

   The checking of the minor version number is implementation dependent,
   however if the client-supplied minor version is explicitly supported,
   the IPP object MUST respond using that identical minor version
   number.  If the major version number matches, but the minor version
   number does not, the Printer SHOULD accept and attempt to process the
   request, or MAY reject the request and return the &#x27;server-error-
   version-not-supported&#x27; status code.  In all cases, the Printer MUST
   return the nearest version number that it supports.  For example,
   suppose that an IPP/1.2 Printer supports versions &#x27;1.1&#x27; and &#x27;1.2&#x27;.
   The following responses are conforming:

               Table 6 - Examples of validating IPP version

      Client supplies   Printer Accept Request?   Printer returns


      1.0               yes (SHOULD)              1.1

      1.0               no (SHOULD NOT)           1.1

      1.1               yes (MUST)                1.1

      1.2               yes (MUST)                1.2

      1.3               no (SHOULD NOT)           1.2

   It is advantageous for Printers to support both IPP/1.1 and IPP/1.0,
   so that they can interoperate with either client implementations.
   Some implementations may allow an Administrator to explicitly disable
   support for one or the other by setting the &quot;ipp-versions-supported&quot;
   Printer description attribute.

   Likewise, it is advantageous for clients to support both versions to
   allow interoperability with new and legacy Printers.

      1.3               no (SHOULD NOT)           1.2

   It is advantageous for Printers to support both IPP/1.1 and IPP/1.0,
   so that they can interoperate with either client implementations.
   Some implementations may allow an Administrator to explicitly disable
   support for one or the other by setting the &quot;ipp-versions-supported&quot;
   Printer description attribute.

   Likewise, it is advantageous for clients to support both versions to
   allow interoperability with new and legacy Printers.

3.1.2.1.2   Validate operation identifier

   The Printer object checks to see if the &quot;operation-id&quot; attribute
   supplied by the client is supported as indicated in the Printer
   object&#x27;s &quot;operations-supported&quot; attribute.  If not, the Printer
   REJECTS the request and returns the &#x27;server-error-operation-not-
   supported&#x27; status code in the response.

3.1.2.1.3   Validate the request identifier

   The Printer object SHOULD NOT check to see if the &quot;request-id&quot;
   attribute supplied by the client is in range: between 1 and 2**31 - 1
   (inclusive), but copies all 32 bits.

   Note: The &quot;version-number&quot;, &quot;operation-id&quot;, and the &quot;request-id&quot;
   parameters are in fixed octet positions in the IPP/1.1 encoding.  The
   &quot;version-number&quot; parameter will be the same fixed octet position in
   all versions of the protocol.  These fields are validated before
   proceeding with the rest of the validation.

3.1.2.1.4   Validate attribute group and attribute presence and order

   The order of the following validation steps depends on
   implementation.

3.1.2.1.4.1   Validate the presence and order of attribute groups

   Client requests and IPP object responses contain attribute groups
   that Section 3 requires to be present and in a specified order.  An
   IPP object verifies that the attribute groups are present and in the
   correct order in requests supplied by clients (attribute groups
   without an * in the following tables).

   If an IPP object receives a request with (1) required attribute
   groups missing, or (2) the attributes groups are out of order, or (3)
   the groups are repeated, the IPP object REJECTS the request and
   RETURNS the &#x27;client-error-bad-request&#x27; status code.  For example, it
   is an error for the Job Template Attributes group to occur before the
   Operation Attributes group, for the Operation Attributes group to be
   omitted, or for an attribute group to occur more than once, except in
   the Get-Jobs response.

   Since this kind of attribute group error is most likely to be an
   error detected by a client developer rather than by a customer, the
   IPP object NEED NOT return an indication of which attribute group was

   in error in either the Unsupported Attributes group or the Status
   Message.  Also, the IPP object NEED NOT find all attribute group
   errors before returning this error.

3.1.2.1.4.2   Ignore unknown attribute groups in the expected position

   Future attribute groups may be added to the specification at the end
   of requests just before the Document Content and at the end of
   response, except for the Get-Jobs response, where it maybe there or
   before the first job attributes returned.  If an IPP object receives
   an unknown attribute group in these positions, it ignores the entire
   group, rather than returning an error, since that group may be a new
   group in a later minor version of the protocol that can be ignored.
   (If the new attribute group cannot be ignored without confusing the
   client, the major version number would have been increased in the
   protocol document and in the request).  If the unknown group occurs
   in a different position, the IPP object REJECTS the request and
   RETURNS the &#x27;client-error-bad-request&#x27; status code.

   Clients also ignore unknown attribute groups returned in a response.

   Note:  By validating that requests are in the proper form, IPP
   objects force clients to use the proper form which, in turn,
   increases the chances that customers will be able to use such clients
   from multiple vendors with IPP objects from other vendors.

3.1.2.1.4.3   Validate the presence of a single occurrence of required
              Operation attributes

   Client requests and IPP object responses contain Operation attributes
   that [RFC2911] Section 3 requires to be present.  Attributes within a
   group may be in any order, except for the ordering of target,
   charset, and natural languages attributes.  These attributes MUST be
   first, and MUST be supplied in the following order: charset, natural
   language, and then target.  An IPP object verifies that the
   attributes that Section 4 requires to be supplied by the client have
   been supplied in the request (attributes without an * in the
   following tables).  An asterisk (*) indicates groups and Operation
   attributes that the client may omit in a request or an IPP object may
   omit in a response.

   If an IPP object receives a request with required attributes missing
   or repeated from a group or in the wrong position, the behavior of
   the IPP object is IMPLEMENTATION DEPENDENT.  Some of the possible
   implementations are:

      REJECTS the request and RETURNS the &#x27;client-error-bad-request&#x27;
      status code

      accepts the request and uses the first occurrence of the attribute
      no matter where it is

      accepts the request and uses the last occurrence of the attribute
      no matter where it is

      accept the request and assume some default value for the missing
      attribute

   Therefore, client MUST send conforming requests, if they want to
   receive the same behavior from all IPP object implementations.  For
   example, it is an error for the &quot;attributes-charset&quot; or &quot;attributes-
   natural-language&quot; attribute to be omitted in any operation request,
   or for an Operation attribute to be supplied in a Job Template group
   or a Job Template attribute to be supplied in an Operation Attribute
   group in a create request.  It is also an error to supply the
   &quot;attributes-charset&quot; attribute twice.

   Since these kinds of attribute errors are most likely to be detected
   by a client developer rather than by a customer, the IPP object NEED
   NOT return an indication of which attribute was in error in either
   the Unsupported Attributes group or the Status Message.  Also, the
   IPP object NEED NOT find all attribute errors before returning this
   error.

   The following tables list all the attributes for all the operations
   by attribute group in each request and each response.  The order of
   the groups is the order that the client supplies the groups as
   specified in [RFC2911] Section 3.  The order of the attributes within
   a group is arbitrary, except as noted for some of the special
   operation attributes (charset, natural language, and target).  The
   tables below use the following notation:

      R     indicates a REQUIRED attribute or operation that an IPP
            object MUST support
      O     indicates an OPTIONAL attribute or operation that an IPP
            object NEED NOT support
      *     indicates that a client MAY omit the attribute in a request
            and that an IPP object MAY omit the attribute in a response.
            The absence of an * means that a client MUST supply the
            attribute in a request and an IPP object MUST supply the
            attribute in a response.
      +     indicates that this is not a IPP/1.0 operation, but is only
            a part of IPP/1.1 and future versions of IPP.

   Operation Requests

   The tables below show the attributes in their proper attribute groups
   for operation requests:

   Note: All operation requests contain &quot;version-number&quot;, &quot;operation-
   id&quot;, and &quot;request-id&quot; parameters.

   Print-Job Request (R):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          printer-uri (R)
          requesting-user-name (R*)
          job-name (R*)
          ipp-attribute-fidelity (R*)
          document-name (R*)
          document-format (R*)
          document-natural-language (O*)
          compression (R*)
          job-k-octets (O*)
          job-impressions (O*)
          job-media-sheets (O*)
     Group 2: Job Template Attributes (R*)
          &lt;Job Template attributes&gt; (O*)
               (see [RFC2911] Section 4.2)
     Group 3: Document Content (R)
          &lt;document content&gt;

   Validate-Job Request (R):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          printer-uri (R)
          requesting-user-name (R*)
          job-name (R*)
          ipp-attribute-fidelity (R*)
          document-name (R*)
          document-format (R*)
          document-natural-language (O*)
          compression (R*)
          job-k-octets (O*)
          job-impressions (O*)
          job-media-sheets (O*)
     Group 2: Job Template Attributes (R*)
          &lt;Job Template attributes&gt; (O*)
               (see [RFC2911] Section 4.2)

   Print-URI Request (O):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          printer-uri (R)
          document-uri (R)
          requesting-user-name (R*)
          job-name (R*)
          ipp-attribute-fidelity (R*)
          document-name (R*)
          document-format (R*)
          document-natural-language (O*)
          compression (R*)
          job-k-octets (O*)
          job-impressions (O*)
          job-media-sheets (O*)
     Group 2: Job Template Attributes (R*)
          &lt;Job Template attributes&gt; (O*) (see
               (see [RFC2911] Section 4.2)

   Create-Job Request (O):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          printer-uri (R)
          requesting-user-name (R*)
          job-name (R*)
          ipp-attribute-fidelity (R*)
          job-k-octets (O*)
          job-impressions (O*)
          job-media-sheets (O*)
     Group 2: Job Template Attributes (R*)
          &lt;Job Template attributes&gt; (O*) (see
               (see [RFC2911] Section 4.2)

   Get-Printer-Attributes Request (R):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          printer-uri (R)
          requesting-user-name (R*)
          requested-attributes (R*)
          document-format (R*)

   Get-Jobs Request (R):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)

          printer-uri (R)
          requesting-user-name (R*)
          limit (R*)
          requested-attributes (R*)
          which-jobs (R*)
          my-jobs (R*)

   Send-Document Request (O):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          (printer-uri &amp; job-id) | job-uri (R)
          last-document (R)
          requesting-user-name (R*)
          document-name (R*)
          document-format (R*)
          document-natural-language (O*)
          compression (R*)
     Group 2: Document Content (R*)
          &lt;document content&gt;

   Send-URI Request (O):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          (printer-uri &amp; job-id) | job-uri (R)
          last-document (R)
          document-uri (R)
          requesting-user-name (R*)
          document-name (R*)
          document-format (R*)
          document-natural-language (O*)
          compression (R*)

   Cancel-Job Request (R):
   Release-Job Request (O+):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          (printer-uri &amp; job-id) | job-uri (R)
          requesting-user-name (R*)
          message (O*)

   Get-Job-Attributes Request (R):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          (printer-uri &amp; job-id) | job-uri (R)
          requesting-user-name (R*)
          requested-attributes (R*)

   Pause-Printer Request (O+):
   Resume-Printer Request (O+):
   Purge-Printer Request (O+):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          printer-uri (R)
          requesting-user-name (R*)

   Hold-Job Request (O+):
   Restart-Job Request (O+):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          (printer-uri &amp; job-id) | job-uri (R)
          requesting-user-name (R*)
          job-hold-until (R*)
          message (O*)

   Operation Responses

   The tables below show the response attributes in their proper
   attribute groups for responses.

   Note: All operation responses contain &quot;version-number&quot;, &quot;status-
   code&quot;, and &quot;request-id&quot; parameters.

   Print-Job Response (R):
   Create-Job Response (O):
   Send-Document Response (O):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          status-message (O*)
          detailed-status-message (O*)
     Group 2: Unsupported Attributes (R*) (see Note 3)
      n    &lt;unsupported attributes&gt; (R*)
     Group 3: Job Object Attributes(R*) (see Note 2)
          job-uri (R)
          job-id (R)

          job-state (R)
          job-state-reasons (O* | R+)
          job-state-message (O*)
          number-of-intervening-jobs (O*)

   Validate-Job Response (R):
   Cancel-Job Response (R):
   Hold-Job Response (O+):
   Release-Job Response (O+):
   Restart-Job Response (O+):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          status-message (O*)
          detailed-status-message (O*)
     Group 2: Unsupported Attributes (R*) (see Note 3)
          &lt;unsupported attributes&gt; (R*)

   Print-URI Response (O):
   Send-URI Response (O):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          status-message (O*)
          detailed-status-message (O*)
          document-access-error (O*)
     Group 2: Unsupported Attributes (R*) (see Note 3)
          &lt;unsupported attributes&gt; (R*)
     Group 3: Job Object Attributes(R*) (see Note 2)
          job-uri (R)
          job-id (R)
          job-state (R)
          job-state-reasons (O* | R+)
          job-state-message (O*)
          number-of-intervening-jobs (O*)

   Get-Printer-Attributes Response (R):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          status-message (O*)
          detailed-status-message (O*)
     Group 2: Unsupported Attributes (R*) (see Note 4)
          &lt;unsupported attributes&gt; (R*)
     Group 3: Printer Object Attributes(R*) (see Note 2)
          &lt;requested attributes&gt; (R*)

   Get-Jobs Response (R):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          status-message (O*)
          detailed-status-message (O*)
     Group 2: Unsupported Attributes (R*) (see Note 4)
          &lt;unsupported attributes&gt; (R*)
     Group 3: Job Object Attributes(R*) (see Note 2, 5)
          &lt;requested attributes&gt; (R*)

   Get-Job-Attributes Response (R):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          status-message (O*)
          detailed-status-message (O*)
     Group 2: Unsupported Attributes (R*) (see Note 4)
          &lt;unsupported attributes&gt; (R*)
     Group 3: Job Object Attributes(R*) (see Note 2)
          &lt;requested attributes&gt; (R*)

   Pause-Printer Response (O+):
   Resume-Printer Response (O+):
   Purge-Printer Response (O+):
     Group 1: Operation Attributes (R)
          attributes-charset (R)
          attributes-natural-language (R)
          status-message (O*)
          detailed-status-message (O*)
     Group 2: Unsupported Attributes (R*) (see Note 4)
          &lt;unsupported attributes&gt; (R*)

   Note 2 - the Job Object Attributes and Printer Object Attributes are
   returned only if the IPP object returns one of the success status
   codes.

   Note 3 - the Unsupported Attributes Group is present only if the
   client included some Operation and/or Job Template attributes or
   values that the Printer doesn&#x27;t support whether a success or an error
   return.

   Note 4 - the Unsupported Attributes Group is present only if the
   client included some Operation attributes that the Printer doesn&#x27;t
   support whether a success or an error return.

   Note 5:  for the Get-Jobs operation the response contains a separate
   Job Object Attributes group 3 to N containing requested-attributes
   for each job object in the response.

3.1.2.1.5   Validate the values of the REQUIRED Operation attributes

   An IPP object validates the values supplied by the client of the
   REQUIRED Operation attribute that the IPP object MUST support.  The
   next section specifies the validation of the values of the OPTIONAL
   Operation attributes that IPP objects MAY support.

   The IPP object performs the following syntactic validation checks of
   each Operation attribute value:

      a) that the length of each Operation attribute value is correct
         for the attribute syntax tag supplied by the client according
         to [RFC2911] Section 4.1,

      b) that the attribute syntax tag is correct for that Operation
         attribute according to [RFC2911] Section 3,

      c) that the value is in the range specified for that Operation
         attribute according to [RFC2911] Section 3,

      d) that multiple values are supplied by the client only for
         operation attributes that are multi-valued, i.e., that are
         1setOf X according to [RFC2911] Section 3.

   If any of these checks fail, the IPP object REJECTS the request and
   RETURNS the &#x27;client-error-bad-request&#x27; or the &#x27;client-error-request-
   value-too-long&#x27; status code.  Since such an error is most likely to
   be an error detected by a client developer, rather than by an end-
   user, the IPP object NEED NOT return an indication of which attribute
   had the error in either the Unsupported Attributes Group or the
   Status Message.  The description for each of these syntactic checks
   is explicitly expressed in the first IF statement in the following
   table.

   In addition, the IPP object checks each Operation attribute value
   against some Printer object attribute or some hard-coded value if
   there is no &quot;xxx-supported&quot; Printer object attribute defined.  If its
   value is not among those supported or is not in the range supported,
   then the IPP object REJECTS the request and RETURNS the error status
   code indicated in the table by the second IF statement.  If the value
   of the Printer object&#x27;s &quot;xxx-supported&quot; attribute is &#x27;no-value&#x27;
   (because the system administrator hasn&#x27;t configured a value), the
   check always fails.

   -----------------------------------------------

   attributes-charset (charset)

      IF NOT a single non-empty &#x27;charset&#x27; value, REJECT/RETURN &#x27;client-
      error-bad-request&#x27;.

      IF the value length is greater than 63 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT in the Printer object&#x27;s &quot;charset-supported&quot; attribute,
      REJECT/RETURN &quot;client-error-charset-not-supported&quot;.

   attributes-natural-language(naturalLanguage)

      IF NOT a single non-empty &#x27;naturalLanguage&#x27; value, REJECT/RETURN
      &#x27;client-error-bad-request&#x27;.

      IF the value length is greater than 63 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      ACCEPT the request even if not a member of the set in the Printer
      object&#x27;s &quot;generated-natural-language-supported&quot; attribute.  If the
      supplied value is not a member of the Printer object&#x27;s
      &quot;generated-natural-language-supported&quot; attribute, use the Printer
      object&#x27;s &quot;natural-language- configured&quot; value.

   requesting-user-name

      IF NOT a single &#x27;name&#x27; value, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF the IPP object can obtain a better-authenticated name, use it
      instead.

   job-name(name)

      IF NOT a single &#x27;name&#x27; value, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT supplied by the client, the Printer object creates a name
      from the document-name or document-uri.

   document-name (name)

      IF NOT a single &#x27;name&#x27; value, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

   ipp-attribute-fidelity (boolean)

      IF NEITHER a single &#x27;true&#x27; NOR a single &#x27;false&#x27; &#x27;boolean&#x27; value,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF the value length is NOT equal to 1 octet, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;

      IF NOT supplied by the client, the IPP object assumes the value
      &#x27;false&#x27;.

   document-format (mimeMediaType)

      IF NOT a single non-empty &#x27;mimeMediaType&#x27; value, REJECT/RETURN
      &#x27;client-error-bad-request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT in the Printer object&#x27;s &quot;document-format-supported&quot;
      attribute, REJECT/RETURN &#x27;client-error-document-format-not-
      supported&#x27;

      IF NOT supplied by the client, the IPP object assumes the value of
      the Printer object&#x27;s &quot;document-format-default&quot; attribute.

   document-uri (uri)

      IF NOT a single non-empty &#x27;uri&#x27; value, REJECT/RETURN &#x27;client-
      error-bad-request&#x27;.

      IF the value length is greater than 1023 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF the URI syntax is not valid, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      If the client-supplied URI scheme is not supported, i.e., the
      value is not in the Printer object&#x27;s referenced-uri-scheme-
      supported&quot; attribute, the Printer object MUST reject the request

      and return the &#x27;client-error-uri-scheme-not-supported&#x27; status
      code. The Printer object MAY check to see if the document exists
      and is accessible.  If the document is not found or is not
      accessible, REJECT/RETURN &#x27;client-error-not found&#x27;.

   last-document (boolean)

      IF NEITHER a single &#x27;true&#x27; NOR a single &#x27;false&#x27; &#x27;boolean&#x27; value,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF the value length is NOT equal to 1 octet, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;

   job-id (integer(1:MAX))

      IF NOT an single &#x27;integer&#x27; value equal to 4 octets AND in the
      range 1 to MAX, REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT a job-id of an existing Job object, REJECT/RETURN &#x27;client-
      error-not-found&#x27; or &#x27;client-error-gone&#x27; status code, if keep track
      of recently deleted jobs.

   requested-attributes (1setOf keyword)

      IF NOT one or more &#x27;keyword&#x27; values, REJECT/RETURN &#x27;client-
      error-bad-request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      Ignore unsupported values, which are the keyword names of
      unsupported attributes.  Don&#x27;t bother to copy such requested
      (unsupported) attributes to the Unsupported Attribute response
      group since the response will not return them.

   which-jobs (type2 keyword)

      IF NOT a single &#x27;keyword&#x27; value, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NEITHER &#x27;completed&#x27; NOR &#x27;not-completed&#x27;, copy the attribute and
      the unsupported value to the Unsupported Attributes response group
      and REJECT/RETURN &#x27;client-error-attributes-or-values-not-
      supported&#x27;.

      Note: a Printer still supports the &#x27;completed&#x27; value even if it
      keeps no completed/canceled/aborted jobs:  by returning no jobs
      when so queried.

      IF NOT supplied by the client, the IPP object assumes the &#x27;not-
      completed&#x27; value.

   my-jobs (boolean)

      IF NEITHER a single &#x27;true&#x27; NOR a single &#x27;false&#x27; &#x27;boolean&#x27; value,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF the value length is NOT equal to 1 octet, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;

      IF NOT supplied by the client, the IPP object assumes the &#x27;false&#x27;
      value.

   limit (integer(1:MAX))

      IF NOT a single &#x27;integer&#x27; value equal to 4 octets AND in the range
      1 to MAX, REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT supplied by the client, the IPP object returns all jobs, no
      matter how many.

   -----------------------------------------------

3.1.2.1.6   Validate the values of the OPTIONAL Operation attributes

   OPTIONAL Operation attributes are those that an IPP object MAY
   support.  An IPP object validates the values of the OPTIONAL
   attributes supplied by the client.  The IPP object performs the same
   syntactic validation checks for each OPTIONAL attribute value as in
   Section 3.1.2.1.5.  As in Section 3.1.2.1.5, if any fail, the IPP
   object REJECTS the request and RETURNS the &#x27;client-error-bad-request&#x27;
   or the &#x27;client-error-request-value-too-long&#x27; status code.

   In addition, the IPP object checks each Operation attribute value
   against some Printer attribute or some hard-coded value if there is
   no &quot;xxx-supported&quot; Printer attribute defined.  If its value is not
   among those supported or is not in the range supported, then the IPP
   object REJECTS the request and RETURNS the error status code
   indicated in the table.  If the value of the Printer object&#x27;s &quot;xxx-
   supported&quot; attribute is &#x27;no-value&#x27; (because the system administrator
   hasn&#x27;t configured a value), the check always fails.

   If the IPP object doesn&#x27;t recognize/support an attribute, the IPP
   object treats the attribute as an unknown or unsupported attribute
   (see the last row in the table below).

   -----------------------------------------------

   document-natural-language (naturalLanguage)

      IF NOT a single non-empty &#x27;naturalLanguage&#x27; value, REJECT/RETURN
      &#x27;client-error-bad-request&#x27;.

      IF the value length is greater than 63 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT a value that the Printer object supports in document
      formats, (no corresponding &quot;xxx-supported&quot; Printer attribute),
      REJECT/RETURN &#x27;client-error-natural-language-not-supported&#x27;.

   compression (type3 keyword)

      IF NOT a single &#x27;keyword&#x27; value, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT in the Printer object&#x27;s &quot;compression-supported&quot; attribute,
      REJECT/RETURN &#x27;client-error-compression-not-supported&#x27;.

      Note to IPP/1.0 implementers:  Support for the &quot;compression&quot;
      attribute was optional in IPP/1.0 and was changed to REQUIRED in
      IPP/1.1.  However, an IPP/1.0 object SHOULD at least check for the
      &quot;compression&quot; attribute being present and reject the create
      request, if they don&#x27;t support &quot;compression&quot;.  Not checking is a
      bug, since the data will be unintelligible.

   job-k-octets (integer(0:MAX))

      IF NOT a single &#x27;integer&#x27; value equal to 4 octets, REJECT/RETURN
      &#x27;client-error-bad-request&#x27;.

      IF NOT in the range of the Printer object&#x27;s &quot;job-k-octets-
      supported&quot; attribute, copy the attribute and the unsupported value
      to the Unsupported Attributes response group and REJECT/RETURN
      &#x27;client-error-attributes-or-values-not-supported&#x27;.

   job-impressions (integer(0:MAX))

      IF NOT a single &#x27;integer&#x27; value equal to 4 octets, REJECT/RETURN
      &#x27;client-error-bad-request&#x27;.

      IF NOT in the range of the Printer object&#x27;s &quot;job-impressions-
      supported&quot; attribute, copy the attribute and the unsupported value
      to the Unsupported Attributes response group and REJECT/RETURN
      &#x27;client-error-attributes-or-values-not-supported&#x27;.

   job-media-sheets (integer(0:MAX))

      IF NOT a single &#x27;integer&#x27; value equal to 4 octets, REJECT/RETURN
      &#x27;client-error-bad-request&#x27;.

      IF NOT in the range of the Printer object&#x27;s &quot;job-media-sheets-
      supported&quot; attribute, copy the attribute and the unsupported value
      to the Unsupported Attributes response group and REJECT/RETURN
      &#x27;client-error-attributes-or-values-not-supported&#x27;.

   message (text(127))

      IF NOT a single &#x27;text&#x27; value, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      IF the value length is greater than 127 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

   unknown or unsupported attribute

      IF the attribute syntax supplied by the client is supported but
      the length is not legal for that attribute syntax, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      ELSE copy the attribute and value to the Unsupported Attributes
      response group and change the attribute value to the &quot;out-of-band&quot;
      &#x27;unsupported&#x27; value, but otherwise ignore the attribute.

   Note: Future Operation attributes may be added to the protocol
   specification that may occur anywhere in the specified group.  When
   the operation is otherwise successful, the IPP object returns the
   &#x27;successful-ok-ignored-or-substituted-attributes&#x27; status code.
   Ignoring unsupported Operation attributes in all operations is
   analogous to the handling of unsupported Job Template attributes in
   the create and Validate-Job operations when the client supplies the
   &quot;ipp-attribute-fidelity&quot; Operation attribute with the &#x27;false&#x27; value.
   This last rule is so that we can add OPTIONAL Operation attributes to
   future versions of IPP so that older clients can inter-work with new

   IPP objects and newer clients can inter-work with older IPP objects.
   (If the new attribute cannot be ignored without performing
   unexpectedly, the major version number would have been increased in
   the protocol document and in the request).  This rule for Operation
   attributes is independent of the value of the &quot;ipp-attribute-
   fidelity&quot; attribute.  For example, if an IPP object doesn&#x27;t support
   the OPTIONAL &quot;job-k-octets&quot; attribute&#x27;, the IPP object treats &quot;job-
   k-octets&quot; as an unknown attribute and only checks the length for the
   &#x27;integer&#x27; attribute syntax supplied by the client.  If it is not four
   octets, the IPP object REJECTS the request and RETURNS the &#x27;client-
   error-bad-request&#x27; status code, else the IPP object copies the
   attribute to the Unsupported Attribute response group, setting the
   value to the &quot;out-of-band&quot; &#x27;unsupported&#x27; value, but otherwise ignores
   the attribute.

3.1.2.2 Suggested Additional Processing Steps for Operations that
        Create/Validate Jobs and Add Documents

   This section in combination with the previous section recommends the
   processing steps for the Print-Job, Validate-Job, Print-URI, Create-
   Job, Send-Document, and Send-URI operations that IPP objects SHOULD
   use.  These are the operations that create jobs, validate a Print-Job
   request, and add documents to a job.

   IIG Sect #         Flow                 IPP error status codes
   ----------         ----                 ----------------------
                        |
                        v             No
   3.1.2.2.1 &lt;ipp-attribute-fidelity&gt; ------------------+
                  &lt;supplied?&gt;                           |
                     Yes|                               |
                        |  ipp-attribute-fidelity = no  |
                        |&lt;------------------------------+
                        v          No
   3.1.2.2.2       &lt;Printer is&gt;    --&gt; server-error-not-accepting-jobs
                &lt;accepting jobs?&gt;
                     Yes|
                        v          err
   3.1.2.3    &lt;Validate values of&gt; --&gt; client-error-bad-request
           &lt;Job template attributes&gt;   client-error-request-value-too-
                                       long
            &lt;(length, tag, range,&gt;
                 &lt;multi-value)&gt;
                      ok|
                        v          err
   3.1.2.3  &lt;Validate values with&gt; --&gt; client-error-bad-request
             &lt;supported values&gt;        client-error-attributes-or-
                        |              values-not-supported
                        v          err
   3.1.2.3.1   &lt;Any conflicting&gt;   --&gt; client-error-conflicting-
                                       attributes
          &lt;Job Template attr values&gt;   client-error-attributes-or-
                                       values-not-supported
                           v

3.1.2.2.1   Default &quot;ipp-attribute-fidelity&quot; if not supplied

   The Printer object checks to see if the client supplied an &quot;ipp-
   attribute-fidelity&quot; Operation attribute.  If the attribute is not
   supplied by the client, the IPP object assumes that the value is
   &#x27;false&#x27;.

3.1.2.2.2   Check that the Printer object is accepting jobs

   If the value of the Printer objects &quot;printer-is-accepting-jobs&quot; is
   &#x27;false&#x27;, the Printer object REJECTS the request and RETURNS the
   &#x27;server-error-not-accepting-jobs&#x27; status code.

3.1.2.2.3   Validate the values of the Job Template attributes

   An IPP object validates the values of all Job Template attribute
   supplied by the client.  The IPP object performs the analogous
   syntactic validation checks of each Job Template attribute value that
   it performs for Operation attributes (see Section 3.1.2.1.5.):

      a) that the length of each value is correct for the attribute
         syntax tag supplied by the client according to [RFC2911]
         Section 4.1.

      b) that the attribute syntax tag is correct for that attribute
         according to [RFC2911] Sections 4.2 to 4.4.

      c) that multiple values are supplied only for multi-valued
         attributes, i.e., that are 1setOf  X according to [RFC2911]
         Sections 4.2 to 4.4.

   As in Section 3.1.2.1.5, if any of these syntactic checks fail, the
   IPP object REJECTS the request and RETURNS the &#x27;client-error-bad-
   request&#x27; or &#x27;client-error-request-value-too-long&#x27; status code as
   appropriate, independent of the value of the &quot;ipp-attribute-
   fidelity&quot;.  Since such an error is most likely to be an error
   detected by a client developer, rather than by an end-user, the IPP
   object NEED NOT return an indication of which attribute had the error
   in either the Unsupported Attributes Group or the Status Message.
   The description for each of these syntactic checks is explicitly
   expressed in the first IF statement in the following table.

   Each Job Template attribute MUST occur no more than once.  If an IPP
   Printer receives a create request with multiple occurrences of a Job
   Template attribute, it MAY:

      1. reject the operation and return the &#x27;client-error-bad-request&#x27;
         error status code

      2. accept the operation and use the first occurrence of the
         attribute

      3. accept the operation and use the last occurrence of the
         attribute

   depending on implementation.  Therefore, clients MUST NOT supply
   multiple occurrences of the same Job Template attribute in the Job
   Attributes group in the request.

3.1.2.3  Algorithm for job validation

   The process of validating a Job-Template attribute &quot;xxx&quot; against a
   Printer attribute &quot;xxx-supported&quot; can use the following validation
   algorithm (see section 3.2.1.2 in [RFC2911]).

   To validate the value U of Job-Template attribute &quot;xxx&quot; against the
   value V of Printer &quot;xxx-supported&quot;, perform the following algorithm:

   1. If U is multi-valued, validate each value X of U by performing the
      algorithm in Table 7 with each value X. Each validation is
      separate from the standpoint of returning unsupported values.
      Example:  If U is &quot;finishings&quot; that the client supplies with
      &#x27;staple&#x27;, &#x27;bind&#x27; values, then X takes on the successive values:
      &#x27;staple&#x27;, then &#x27;bind&#x27;

   2. If V is multi-valued, validate X against each Z of V by performing
      the algorithm in Table 7 with each value Z.  If a value Z
      validates, the validation for the attribute value X succeeds. If
      it fails, the algorithm is applied to the next value Z of V. If
      there are no more values Z of V, validation fails. Example&quot;  If V
      is &quot;sides-supported&quot; with values: &#x27;one- sided&#x27;, &#x27;two-sided-long&#x27;,
      and &#x27;two-sided-short&#x27;, then Z takes on the successive values:
      &#x27;one-sided&#x27;, &#x27;two-sided-long&#x27;, and &#x27;two-sided-short&#x27;.  If the
      client supplies &quot;sides&quot; with &#x27;two-sided- long&#x27;, the first
      comparison fails (&#x27;one-sided&#x27; is not equal to &#x27;two-sided-long&#x27;),
      the second comparison succeeds (&#x27;two-sided-long&#x27; is equal to
      &#x27;two-sided-long&quot;), and the third comparison (&#x27;two-sided-short&#x27;
      with &#x27;two-sided-long&#x27;) is not even performed.

   3. If both U and V are single-valued, let X be U and Z be V and use
      the validation rules in Table 7.

   Table 7 - Rules for validating single values X against Z

   Attribute syntax   attribute syntax validated if:
   of X               of Z

   integer            rangeOfInteger   X is within the range of Z

   uri                uriScheme        the uri scheme in X is equal to
                                       Z

   any                boolean          the value of Z is TRUE

   any                any              X and Z are of the same type
                                       and are equal.

   If the value of the Printer object&#x27;s &quot;xxx-supported&quot; attribute is
   &#x27;no-value&#x27; (because the system administrator hasn&#x27;t configured a
   value), the check always fails.  If the check fails, the IPP object
   copies the attribute to the Unsupported Attributes response group
   with its unsupported value.  If the attribute contains more than one
   value, each value is checked and each unsupported value is separately
   copied, while supported values are not copied.  If an IPP object
   doesn&#x27;t recognize/support a Job Template attribute, i.e., there is no
   corresponding Printer object &quot;xxx-supported&quot; attribute, the IPP
   object treats the attribute as an unknown or unsupported attribute
   (see the last row in the table below).

   If some Job Template attributes are supported for some document
   formats and not for others or the values are different for different
   document formats, the IPP object SHOULD take that into account in
   this validation using the value of the &quot;document-format&quot; supplied by
   the client (or defaulted to the value of the Printer&#x27;s &quot;document-
   format-default&quot; attribute, if not supplied by the client).  For
   example, if &quot;number-up&quot; is supported for the &#x27;text/plain&#x27; document
   format, but not for the &#x27;application/postscript&#x27; document format, the
   check SHOULD (though it NEED NOT) depend on the value of the
   &quot;document-format&quot; operation attribute.  See &quot;document-format&quot; in
   [RFC2911] section 3.2.1.1 and 3.2.5.1.

   Note: whether the request is accepted or rejected is determined by
   the value of the &quot;ipp-attribute-fidelity&quot; attribute in a subsequent
   step, so that all Job Template attribute supplied are examined and
   all unsupported attributes and/or values are copied to the
   Unsupported Attributes response group.

   -----------------------------------------------

   job-priority (integer(1:100))

      IF NOT a single &#x27;integer&#x27; value with a length equal to 4 octets,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT supplied by the client, use the value of the Printer
      object&#x27;s &quot;job-priority-default&quot; attribute at job submission time.

      IF NOT in the range 1 to 100, inclusive, copy the attribute and
      the unsupported value to the Unsupported Attributes response
      group.

      Map the value to the nearest supported value in the range 1:100 as
      specified by the number of discrete values indicated by the value
      of the Printer&#x27;s &quot;job-priority-supported&quot; attribute.  See the
      formula in [RFC2911] Section 4.2.1.

   job-hold-until (type3 keyword | name)

      IF NOT a single &#x27;keyword&#x27; or &#x27;name&#x27; value, REJECT/RETURN &#x27;client-
      error-bad-request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT supplied by the client, use the value of the Printer
      object&#x27;s &quot;job-hold-until&quot; attribute at job submission time.

      IF NOT in the Printer object&#x27;s &quot;job-hold-until-supported&quot;
      attribute, copy the attribute and the unsupported value to the
      Unsupported Attributes response group.

   job-sheets (type3 keyword | name)

      IF NOT a single &#x27;keyword&#x27; or &#x27;name&#x27; value, REJECT/RETURN &#x27;client-
      error-bad-request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT in the Printer object&#x27;s &quot;job-sheets-supported&quot; attribute,
      copy the attribute and the unsupported value to the Unsupported
      Attributes response group.

   multiple-document-handling (type2 keyword)

      IF NOT a single &#x27;keyword&#x27; value, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT in the Printer object&#x27;s &quot;multiple-document-handling-
      supported&quot; attribute, copy the attribute and the unsupported value
      to the Unsupported Attributes response group.

   copies (integer(1:MAX))

      IF NOT a single &#x27;integer&#x27; value with a length equal to 4 octets,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT in range of the Printer object&#x27;s &quot;copies-supported&quot;
      attribute

      copy the attribute and the unsupported value to the Unsupported
      Attributes response group.

   finishings (1setOf type2 enum)

      IF NOT an &#x27;enum&#x27; value(s) each with a length equal to 4 octets,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT in the Printer object&#x27;s &quot;finishings-supported&quot; attribute,
      copy the attribute and the unsupported value(s), but not any
      supported values, to the Unsupported Attributes response group.

   page-ranges (1setOf  rangeOfInteger(1:MAX))

      IF NOT a &#x27;rangeOfInteger&#x27; value(s) each with a length equal to 8
      octets, REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF first value is greater than second value in any range, the
      ranges are not in ascending order, or ranges overlap,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF the value of the Printer object&#x27;s &quot;page-ranges-supported&quot;
      attribute is &#x27;false&#x27;, copy the attribute to the Unsupported
      Attributes response group and set the value to the &quot;out-of-band&quot;
      &#x27;unsupported&#x27; value.

   sides (type2 keyword)

      IF NOT a single &#x27;keyword&#x27; value, REJECT/RETURN &#x27;client-error-bad-
      request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT in the Printer object&#x27;s &quot;sides-supported&quot; attribute, copy
      the attribute and the unsupported value to the Unsupported
      Attributes response group.

   number-up (integer(1:MAX))

      IF NOT a single &#x27;integer&#x27; value with a length equal to 4 octets,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT a value or in the range of one of the values of the Printer
      object&#x27;s &quot;number-up-supported&quot; attribute, copy the attribute and
      value to the Unsupported Attribute response group.

   orientation-requested (type2 enum)

      IF NOT a single &#x27;enum&#x27; value with a length equal to 4 octets,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT in the Printer object&#x27;s &quot;orientation-requested-supported&quot;
      attribute, copy the attribute and the unsupported value to the
      Unsupported Attributes response group.

   media (type3 keyword | name)

      IF NOT a single &#x27;keyword&#x27; or &#x27;name&#x27; value, REJECT/RETURN &#x27;client-
      error-bad-request&#x27;.

      IF the value length is greater than 255 octets, REJECT/RETURN
      &#x27;client-error-request-value-too-long&#x27;.

      IF NOT in the Printer object&#x27;s &quot;media-supported&quot; attribute, copy
      the attribute and the unsupported value to the Unsupported
      Attributes response group.

   printer-resolution (resolution)

      IF NOT a single &#x27;resolution&#x27; value with a length equal to 9
      octets, REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT in the Printer object&#x27;s &quot;printer-resolution-supported&quot;
      attribute, copy the attribute and the unsupported value to the
      Unsupported Attributes response group.

   print-quality (type2 enum)

      IF NOT a single &#x27;enum&#x27; value with a length equal to 4 octets,
      REJECT/RETURN &#x27;client-error-bad-request&#x27;.

      IF NOT in the Printer object&#x27;s &quot;print-quality-supported&quot;
      attribute, copy the attribute and the unsupported value to the
      Unsupported Attributes response group.

      unknown or unsupported attribute (i.e., there is no corresponding
      Printer object &quot;xxx-supported&quot; attribute)

      IF the attribute syntax supplied by the client is supported but
      the length is not legal for that attribute syntax,

      REJECT/RETURN &#x27;client-error-bad-request&#x27; if the length of the
      attribute syntax is fixed or &#x27;client-error-request-value-too-long&#x27;
      if the length of the attribute syntax is variable.

      ELSE copy the attribute and value to the Unsupported Attributes
      response group and change the attribute value to the &quot;out-of-band&quot;
      &#x27;unsupported&#x27; value.  Any remaining Job Template Attributes are
      either unknown or unsupported Job Template attributes and are
      validated algorithmically according to their attribute syntax for
      proper length (see below).

      -----------------------------------------------

      If the attribute syntax is supported AND the length check fails,
      the IPP object REJECTS the request and RETURNS the &#x27;client-error-
      bad-request&#x27; if the length of the attribute syntax is fixed or the
      &#x27;client-error-request-value-too-long&#x27; status code if the length of
      the attribute syntax is variable. Otherwise, the IPP object copies
      the unsupported Job Template attribute to the Unsupported
      Attributes response group and changes the attribute value to the
      &quot;out-of-band&quot; &#x27;unsupported&#x27; value.  The following table shows the
      length checks for all attribute syntaxes.  In the following table:
      &quot;&lt;=&quot; means less than or equal, &quot;=&quot; means equal to:

   Name                    Octet length check for read-write attributes
   ----------              ---------------------------------------------

   &#x27;textWithLanguage          &lt;= 1023 AND &#x27;naturalLanguage&#x27; &lt;= 63
   &#x27;textWithoutLanguage&#x27;      &lt;= 1023
   &#x27;nameWithLanguage&#x27;         &lt;= 255 AND &#x27;naturalLanguage&#x27;  &lt;= 63
   &#x27;nameWithoutLanguage&#x27;      &lt;= 255
   &#x27;keyword&#x27;                  &lt;= 255
   &#x27;enum&#x27;                     = 4
   &#x27;uri&#x27;                      &lt;= 1023
   &#x27;uriScheme&#x27;                &lt;= 63
   &#x27;charset&#x27;                  &lt;= 63
   &#x27;naturalLanguage&#x27;          &lt;= 63
   &#x27;mimeMediaType&#x27;            &lt;= 255
   &#x27;octetString&#x27;              &lt;= 1023
   &#x27;boolean&#x27;                  = 1
   &#x27;integer&#x27;                  = 4
   &#x27;rangeOfInteger&#x27;           = 8
   &#x27;dateTime&#x27;                 = 11
   &#x27;resolution&#x27;               = 9
   &#x27;1setOf X&#x27;

   Note:  It&#x27;s possible for a Printer to receive a zero length keyword
   in a request.  Since this is a keyword, its value needs to be
   compared with the supported values.  Assuming that the printer
   doesn&#x27;t have any values in its corresponding &quot;xxx-supported&quot;
   attribute that are keywords of zero length, the comparison will fail.
   Then the request will be accepted or rejected depending on the value
   of &quot;ipp-attributes-fidelity&quot; being &#x27;false&#x27; or &#x27;true&#x27;, respectively.
   No special handling is required for

3.1.2.3.1   Check for conflicting Job Template attributes values

   Once all the Operation and Job Template attributes have been checked
   individually, the Printer object SHOULD check for any conflicting
   values among all the supported values supplied by the client.  For
   example, a Printer object might be able to staple and to print on
   transparencies, however due to physical stapling constraints, the
   Printer object might not be able to staple transparencies.  The IPP
   object copies the supported attributes and their conflicting
   attribute values to the Unsupported Attributes response group.  The
   Printer object only copies over those attributes that the Printer
   object either ignores or substitutes in order to resolve the
   conflict, and it returns the original values which were supplied by
   the client.  For example suppose the client supplies &quot;finishings&quot;
   equals &#x27;staple&#x27; and &quot;media&quot; equals &#x27;transparency&#x27;, but the Printer
   object does not support stapling transparencies.  If the Printer
   chooses to ignore the stapling request in order to resolve the

   conflict, the Printer objects returns &quot;finishings&quot; equal to &#x27;staple&#x27;
   in the Unsupported Attributes response group.  If any attributes are
   multi-valued, only the conflicting values of the attributes are
   copied.

   Note: The decisions made to resolve the conflict (if there is a
   choice) is implementation dependent.

3.1.2.3.2   Decide whether to REJECT the request

   If there were any unsupported Job Template attributes or
   unsupported/conflicting Job Template attribute values and the client
   supplied the &quot;ipp-attribute-fidelity&quot; attribute with the &#x27;true&#x27;
   value, the Printer object REJECTS the request and return the status
   code:

      1.&#x27;client-error-conflicting-attributes&#x27; status code, if there were
         any conflicts between attributes supplied by the client.

      2.&#x27;client-error-attributes-or-values-not-supported&#x27; status code,
         otherwise.

   Note:  Unsupported Operation attributes or values that are returned
   do not affect the status returned in this step.  If the unsupported
   Operation attribute was a serious error, the above already rejected
   the request in a previous step.  If control gets to this step with
   unsupported Operation attributes being returned, they are not serious
   errors.

   In general, the final results of Job processing are unknown at Job
   submission time.  The client has to rely on notifications or polling
   to find out what happens at Job processing time.  However, there are
   cases in which some Printers can determine at Job submission time
   that Job processing is going to fail.  As an optimization, we&#x27;d like
   to have the Printer reject the Job in these cases.

   There are three types of &quot;processing&quot; errors that might be detectable
   at Job submission time:

   1.  &#x27;client-error-document-format-not-supported&#x27; :  For the Print-
   Job, Send-Document, Print-URI, and Send-URI operations, if  all these
   conditions are true:

      -  the Printer supports auto-sensing,
      -  the request &quot;document-format&quot;  operation attribute is
         &#x27;application/octet-stream&#x27;,
      -  the Printer receives document data before responding,
      -  the Printer auto-senses the document format before responding,
      -  the sensed document format is not supported by the Printer

   then the  Printer should respond with &#x27;client-error-document-format-
   not-supported&#x27; status.

   2.  &#x27;client-error-compression-error&#x27;:  For the Print-Job, Send-
   Document, Print-URI, and Send-URI operations, if  all these
   conditions are true:

      -  the client supplies a supported value for the &quot;compression&quot;
         operation attribute in the request
      -  the Printer receives document data before responding,
      -  the Printer attempts to decompress the document data before
         responding,
      -  the document data cannot be decompressed using the algorithm
         specified by the &quot;compression&quot; operation attribute

   then the Printer should respond with &#x27;client-error-compression-error&#x27;
   status.

   3.  &#x27;client-error-document-access-error&#x27;:  For the Print-URI, and
   Send-URI operations, if the Printer attempts and fails to pull the
   referenced document data before responding, it should respond with
   &#x27;client-error-document-access-error&#x27; status.

   Some Printers are not able to detect these errors until Job
   processing time.  In that case, the errors are recorded in the
   corresponding job-state and job-state reason attributes.  (There is
   no standard way for a client to determine whether a Printer can
   detect these errors at Job submission time.)  For example, if auto-
   sensing happens AFTER the job is accepted (as opposed to auto-sensing
   at submit time before returning the response), the implementation
   aborts the job, puts the job in the &#x27;aborted&#x27; state and sets the
   &#x27;unsupported-document-format&#x27; value in the job&#x27;s &quot;job-state-reasons&quot;.

   A client should always provide a valid &quot;document-format&quot; operation
   attribute whenever practical.  In the absence of other information, a
   client itself may sniff the document data to determine document
   format.

   Auto sensing at Job submission time may be more difficult for the
   Printer when combined with compression.  For auto-sensed Jobs, a
   client may be better off  deferring compression to the transfer
   protocol layer, e.g.; by using the HTTP Content-Encoding header.

3.1.2.3.3   For the Validate-Job operation, RETURN one of the success
            status codes

   If the requested operation is the Validate-Job operation, the Printer
   object returns:

      1. the &quot;successful-ok&quot; status code, if there are no unsupported or
         conflicting Job Template attributes or values.
      2. the &quot;successful-ok-conflicting-attributes, if there are any
         conflicting Job Template attribute or values.
      3. the &quot;successful-ok-ignored-or-substituted-attributes, if there
         are only unsupported Job Template attributes or values.

   Note:  Unsupported Operation attributes or values that are returned
   do not affect the status returned in this step.  If the unsupported
   Operation attribute was a serious error, the above already rejected
   the request in a previous step.  If control gets to this step with
   unsupported Operation attributes being returned, they are not serious
   errors.

3.1.2.3.4   Create the Job object with attributes to support

   If &quot;ipp-attribute-fidelity&quot; is set to &#x27;false&#x27; (or it was not supplied
   by the client), the Printer object:

      1. creates a Job object, assigns a unique value to the job&#x27;s
         &quot;job-uri&quot; and &quot;job-id&quot; attributes, and initializes all of the
         job&#x27;s other supported Job Description attributes.
      2. removes all unsupported attributes from the Job object.
      3. for each unsupported value, removes either the unsupported
         value or substitutes the unsupported attribute value with some
         supported value.  If an attribute has no values after removing
         unsupported values from it, the attribute is removed from the
         Job object (so that the normal default behavior at job
         processing time will take place for that attribute).
      4. for each conflicting value, removes either the conflicting
         value or substitutes the conflicting attribute value with some
         other supported value.  If an attribute has no values after
         removing conflicting values from it, the attribute is removed
         from the Job object (so that the normal default behavior at job
         processing time will take place for that attribute).

   If there were no attributes or values flagged as unsupported, or the
   value of &#x27;ipp-attribute-fidelity&quot; was &#x27;false&#x27;, the Printer object is
   able to accept the create request and create a new Job object.  If
   the &quot;ipp-attribute-fidelity&quot; attribute is set to &#x27;true&#x27;, the Job
   Template attributes that populate the new Job object are necessarily
   all the Job Template attributes supplied in the create request.  If

   the &quot;ipp-attribute-fidelity&quot; attribute is set to &#x27;false&#x27;, the Job
   Template attributes that populate the new Job object are all the
   client supplied Job Template attributes that are supported or that
   have value substitution.  Thus, some of the requested Job Template
   attributes will not appear in the Job object because the Printer
   object did not support those attributes.  The attributes that
   populate the Job object are persistently stored with the Job object
   for that Job.  A Get-Job-Attributes operation on that Job object will
   return only those attributes that are persistently stored with the
   Job object.

   Note: All Job Template attributes that are persistently stored with
   the Job object are intended to be &quot;override values&quot;; that is, they
   that take precedence over whatever other embedded instructions might
   be in the document data itself.  However, it is not possible for all
   Printer objects to realize the semantics of &quot;override&quot;.  End users
   may query the Printer&#x27;s &quot;pdl-override-supported&quot; attribute to
   determine if the Printer either attempts or does not attempt to
   override document data instructions with IPP attributes.

   There are some cases, where a Printer supports a Job Template
   attribute and has an associated default value set for that attribute.
   In the case where a client does not supply the corresponding
   attribute, the Printer does not use its default values to populate
   Job attributes when creating the new Job object; only Job Template
   attributes actually in the create request are used to populate the
   Job object.  The Printer&#x27;s default values are only used later at Job
   processing time if no other IPP attribute or instruction embedded in
   the document data is present.

   Note: If the default values associated with Job Template attributes
   that the client did not supply were to be used to populate the Job
   object, then these values would become &quot;override values&quot; rather than
   defaults.  If the Printer supports the &#x27;attempted&#x27; value of the
   &quot;pdl-override-supported&quot; attribute, then these override values could
   replace values specified within the document data.  This is not the
   intent of the default value mechanism.  A default value for an
   attribute is used only if the create request did not specify that
   attribute (or it was ignored when allowed by &quot;ipp-attribute-fidelity&quot;
   being &#x27;false&#x27;) and no value was provided within the content of the
   document data.

   If the client does not supply a value for some Job Template
   attribute, and the Printer does not support that attribute, as far as
   IPP is concerned, the result of processing that Job (with respect to
   the missing attribute) is undefined.

3.1.2.3.5   Return one of the success status codes

   Once the Job object has been created, the Printer object accepts the
   request and returns to the client:

      1. the &#x27;successful-ok&#x27; status code, if there are no unsupported or
         conflicting Job Template attributes or values.
      2. the &#x27;successful-ok-conflicting-attributes&#x27; status code, if
         there are any conflicting Job Template attribute or values.
      3. the &#x27;successful-ok-ignored-or-substituted-attributes&#x27; status
         code, if there are only unsupported Job Template attributes or
         values.

   Note:  Unsupported Operation attributes or values that are returned
   do not affect the status returned in this step.  If the unsupported
   Operation attribute was a serious error, the above already rejected
   the request in a previous step.  If control gets to this step with
   unsupported Operation attributes being returned, they are not serious
   errors.

   The Printer object also returns Job status attributes that indicate
   the initial state of the Job (&#x27;pending&#x27;, &#x27;pending-held&#x27;,
   &#x27;processing&#x27;, etc.), etc.  See Print-Job Response, [RFC2911] section
   3.2.1.2.

3.1.2.3.6   Accept appended Document Content

   The Printer object accepts the appended Document Content data and
   either starts it printing, or spools it for later processing.

3.1.2.3.7   Scheduling and Starting to Process the Job

   The Printer object uses its own configuration and implementation
   specific algorithms for scheduling the Job in the correct processing
   order.  Once the Printer object begins processing the Job, the
   Printer changes the Job&#x27;s state to &#x27;processing&#x27;.  If the Printer
   object supports PDL override (the &quot;pdl-override-supported&quot; attribute
   set to &#x27;attempted&#x27;), the implementation does its best to see that IPP
   attributes take precedence over embedded instructions in the document
   data.

3.1.2.3.8   Completing the Job

   The Printer object continues to process the Job until it can move the
   Job into the &#x27;completed&#x27; state.  If an Cancel-Job operation is
   received, the implementation eventually moves the Job into the
   &#x27;canceled&#x27; state.  If the system encounters errors during processing
   that do not allow it to progress the Job into a completed state, the

   implementation halts all processing, cleans up any resources, and
   moves the Job into the &#x27;aborted&#x27; state.

3.1.2.3.9   Destroying the Job after completion

   Once the Job moves to the &#x27;completed&#x27;, &#x27;aborted&#x27;, or &#x27;canceled&#x27;
   state, it is an implementation decision as to when to destroy the Job
   object and release all associated resources.  Once the Job has been
   destroyed, the Printer would return either the &quot;client-error-not-
   found&quot; or &quot;client-error-gone&quot; status codes for operations directed at
   that Job.

   Note:  the Printer object SHOULD NOT re-use a &quot;job-uri&quot; or &quot;job-id&quot;
   value for a sufficiently long time after a job has been destroyed, so
   that stale references kept by clients are less likely to access the
   wrong (newer) job.

3.1.2.3.10  Interaction with &quot;ipp-attribute-fidelity&quot;

   Some Printer object implementations may support &quot;ipp-attribute-
   fidelity&quot; set to &#x27;true&#x27; and &quot;pdl-override-supported&quot; set to
   &#x27;attempted&#x27; and yet still not be able to realize exactly what the
   client specifies in the create request.  This is due to legacy
   decisions and assumptions that have been made about the role of job
   instructions embedded within the document data and external job
   instructions that accompany the document data and how to handle
   conflicts between such instructions.  The inability to be 100%
   precise about how a given implementation will behave is also
   compounded by the fact that the two special attributes, &quot;ipp-
   attribute-fidelity&quot; and &quot;pdl-&quot;override-supported&quot;, apply to the whole
   job rather than specific values for each attribute. For example, some
   implementations may be able to override almost all Job Template
   attributes except for &quot;number-up&quot;.  Character Sets, natural
   languages, and internationalization

   This section discusses character set support, natural language
   support and internationalization.

3.1.2.3.11  Character set code conversion support

   IPP clients and IPP objects are REQUIRED to support UTF-8.  They MAY
   support additional charsets.  It is RECOMMENDED that an IPP object
   also support US-ASCII, since many clients support US-ASCII, and
   indicate that UTF-8 and US-ASCII are supported by populating the
   Printer&#x27;s &quot;charset-supported&quot; with &#x27;utf-8&#x27; and &#x27;us-ascii&#x27; values.  An
   IPP object is required to code covert with as little loss as possible
   between the charsets that it supports, as indicated in the Printer&#x27;s
   &quot;charsets-supported&quot; attribute.

   How should the server handle the situation where the &quot;attributes-
   charset&quot; of the response itself is &quot;us-ascii&quot;, but one or more
   attributes in that response is in the &quot;utf-8&quot; format?

   Example: Consider a case where a client sends a Print-Job request
   with &quot;utf-8&quot; as the value of &quot;attributes-charset&quot; and with the &quot;job-
   name&quot; attribute supplied.  Later another client submits a Get-Job-
   Attribute or Get-Jobs request.  This second request contains the
   &quot;attributes-charset&quot; with value &quot;us-ascii&quot; and &quot;requested-attributes&quot;
   attribute with exactly one value &quot;job-name&quot;.

   According to the RFC2911 document (section 3.1.4.2), the value of the
   &quot;attributes-charset&quot; for the response of the second request must be
   &quot;us-ascii&quot; since that is the charset specified in the request.  The
   &quot;job-name&quot; value, however, is in &quot;utf-8&quot; format.  Should the request
   be rejected even though both &quot;utf-8&quot; and &quot;us-ascii&quot; charsets are
   supported by the server? or should the &quot;job-name&quot; value be converted
   to &quot;us-ascii&quot; and return &quot;successful-ok-conflicting-attributes&quot;
   (0x0002) as the status code?

   Answer: An IPP object that supports both utf-8 (REQUIRED) and us-
   ascii, the second paragraph of section 3.1.4.2 applies so that the
   IPP object MUST accept the request, perform code set conversion
   between these two charsets with &quot;the highest fidelity possible&quot; and
   return &#x27;successful-ok&#x27;, rather than a warning &#x27;successful-ok-
   conflicting-attributes, or an error.  The printer will do the best it
   can to convert between each of the character sets that it supports --
   even if that means providing a string of question marks because none
   of the characters are representable in US ASCII.  If it can&#x27;t perform
   such conversion, it MUST NOT advertise us-ascii as a value of its
   &quot;attributes-charset-supported&quot; and MUST reject any request that
   requests &#x27;us-ascii&#x27;.

   One IPP object implementation strategy is to convert all request text
   and name values to a Unicode internal representation.  This is 16-bit
   and virtually universal.  Then convert to the specified operation
   attributes-charset on output.

   Also it would be smarter for a client to ask for &#x27;utf-8&#x27;, rather than
   &#x27;us-ascii&#x27; and throw away characters that it doesn&#x27;t understand,
   rather than depending on the code conversion of the IPP object.

3.1.2.3.12  What charset to return when an unsupported charset is
            requested (Issue 1.19)?

   Section 3.1.4.1 Request Operation attributes was clarified in
   November 1998 as follows:

   All clients and IPP objects MUST support the &#x27;utf-8&#x27; charset
   [RFC2044] and MAY support additional charsets provided that they are
   registered with IANA [IANA-CS].  If the Printer object does not
   support the client supplied charset value, the Printer object MUST
   reject the request, set the &quot;attributes-charset&quot; to &#x27;utf-8&#x27; in the
   response, and return the &#x27;client-error-charset-not-supported&#x27; status
   code and any &#x27;text&#x27; or &#x27;name&#x27; attributes using the &#x27;utf-8&#x27; charset.

   Since the client and IPP object MUST support UTF-8, returning any
   text or name attributes in UTF-8 when the client requests a charset
   that is not supported should allow the client to display the text or
   name.

   Since such an error is a client error, rather than a user error, the
   client should check the status code first so that it can avoid
   displaying any other returned &#x27;text&#x27; and &#x27;name&#x27; attributes that are
   not in the charset requested.

   Furthermore, [RFC2911] section 14.1.4.14 client-error-charset-not-
   supported (0x040D) was clarified in November 1998 as follows:

   For any operation, if the IPP Printer does not support the charset
   supplied by the client in the &quot;attributes-charset&quot; operation
   attribute, the Printer MUST reject the operation and return this
   status and any &#x27;text&#x27; or &#x27;name&#x27; attributes using the &#x27;utf-8&#x27; charset
   (see Section 3.1.4.1).

3.1.2.3.13  Natural Language Override (NLO)

   The &#x27;text&#x27; and &#x27;name&#x27; attributes each have two forms.  One has an
   implicit natural language, and the other has an explicit natural
   language.  The &#x27;textWithoutLanguage&#x27; and &#x27;textWithLanguage&#x27; are the
   two &#x27;text&#x27; forms.  The &#x27;nameWithoutLanguage&quot; and &#x27;nameWithLanguage
   are the two &#x27;name&#x27; forms.  If a receiver (IPP object or IPP client)
   supports an attribute with attribute syntax &#x27;text&#x27;, it MUST support
   both forms in a request and a response.  A sender (IPP client or IPP
   object) MAY send either form for any such attribute.  When a sender
   sends a WithoutLanguage form, the implicit natural language is
   specified in the &quot;attributes-natural-language&quot; operation attribute,
   which all senders MUST include in every request and response.

   When a sender sends a WithLanguage form, it MAY be different from the
   implicit natural language supplied by the sender or it MAY be the
   same.  The receiver MUST treat either form equivalently.

   There is an implementation decision for senders, whether to always
   send the WithLanguage forms or use the WithoutLanguage form when the
   attribute&#x27;s natural language is the same as the request or response.

   The former approach makes the sender implementation simpler.  The
   latter approach is more efficient on the wire and allows inter-
   working with non-conforming receivers that fail to support the
   WithLanguage forms.  As each approach have advantages, the choice is
   completely up to the implementer of the sender.

   Furthermore, when a client receives a &#x27;text&#x27; or &#x27;name&#x27; job attribute
   that it had previously supplied, that client MUST NOT expect to see
   the attribute in the same form, i.e., in the same WithoutLanguage or
   WithLanguage form as the client supplied when it created the job.
   The IPP object is free to transform the attribute from the
   WithLanguage form to the WithoutLanguage form and vice versa, as long
   as the natural language is preserved.  However, in order to meet this
   latter requirement, it is usually simpler for the IPP object
   implementation to store the natural language explicitly with the
   attribute value, i.e., to store using an internal representation that
   resembles the WithLanguage form.

   The IPP Printer MUST copy the natural language of a job, i.e., the
   value of the &quot;attributes-natural-language&quot; operation attribute
   supplied by the client in the create operation, to the Job object as
   a Job Description attribute, so that a client is able to query it.
   In returning a Get-Job-Attributes response, the IPP object MAY return
   one of three natural language values in the responses &quot;attributes-
   natural-language&quot; operation attribute: (1) that requested by the
   requester, (2) the natural language of the job, or (3) the configured
   natural language of the IPP Printer, if the requested language is not
   supported by the IPP Printer.

   This &quot;attributes-natural-language&quot; Job Description attribute is
   useful for an IPP object implementation that prints start sheets in
   the language of the user who submitted the job.  This same Job
   Description attribute is useful to a multi-lingual operator who has
   to communicate with different job submitters in different natural
   languages.  This same Job Description attribute is expected to be
   used in the future to generate notification messages in the natural
   language of the job submitter.

   Early drafts of [RFC2911] contained a job-level natural language
   override (NLO) for the Get-Jobs response.  A job-level (NLO) is an
   (unrequested) Job Attribute which then specified the implicit natural
   language for any other WithoutLanguage job attributes returned in the
   response for that job.  Interoperability testing of early
   implementations showed that no one was implementing the job-level NLO
   in Get-Job responses.  So the job-level NLO was eliminated from the
   Get-Jobs response.  This simplification makes all requests and
   responses consistent in that the implicit natural language for any

   WithoutLanguage &#x27;text&#x27; or &#x27;name&#x27; form is always supplied in the
   request&#x27;s or response&#x27;s &quot;attributes-natural-language&quot; operation
   attribute.

3.1.3  Status codes returned by operation

   This section corresponds to [RFC2911] section 3.1.6 &quot;Operation
   Response Status Codes and Status Messages&quot;.  This section lists all
   status codes once in the first operation (Print-Job).  Then it lists
   the status codes that are different or specialized for subsequent
   operations under each operation.

3.1.3.1  Printer Operations

3.1.3.1.1   Print-Job

   <span class="Verified-inline-styling" id='inline-2924'>The Printer object MUST return one of the following &quot;status-code&quot; <button id="btn_2924" target="expand_2924" onclick='hideFunction("expand_2924")'>Expand</button>
values for the indicated reason.  The Printer object MUST accept all
document data before returning the success or error response.  See
Section 13 in [RFC2911] for a more complete description of each
status code.
</span id__locate=2924>
<div class="nodeCloseClass" id='expand_2924'><div class='Verified-endnote-styling' id='eid2924'>
<pre>
<b><i><a href='https://www.rfc-editor.org/errata/eid2924'>EID 2924</a> (Verified) is as follows:</i></b>

<b>Section:</b> 3.1.3.1.1

<b>Original Text:</b>

The Printer object MUST return one of the following &quot;status-code&quot;
values for the indicated reason.  Whether all of the document data
has been accepted or not before returning the success or error
response depends on implementation.  See Section 13 in [RFC2911] for
a more complete description of each status code.

<b>Corrected Text:</b>

The Printer object MUST return one of the following &quot;status-code&quot;
values for the indicated reason.  The Printer object MUST accept all
document data before returning the success or error response.  See
Section 13 in [RFC2911] for a more complete description of each
status code.
</pre>
<b>Notes:</b><br/>
HTTP (RFC 2616) classifies POST as a non-idempotent method, so a conforming server implementation may only return an error status or 100-continue as described in sections 8.1.2.2 and 8.2.2 of RFC 2616. Essentially, the printer cannot respond to the POST until it has processed all of the request message body, otherwise how would it report chunking or other protocol errors? And how would a client reliably send or a server reliably process multiple IPP requests (as POST messages) when a server provides an early response?
</div>
</div>
   For the following success status codes, the Job object has been
   created and the &quot;job-id&quot;, and &quot;job-uri&quot; assigned and returned in the
   response:

      successful-ok:  no request attributes were substituted or ignored.

      successful-ok-ignored-or-substituted-attributes:  some supplied
      (1) attributes were ignored or (2) unsupported attribute syntaxes
      or values were substituted with supported values or were ignored.
      Unsupported attributes, attribute syntax&#x27;s, or values MUST be
      returned in the Unsupported Attributes group of the response.

      successful-ok-conflicting-attributes:  some supplied attribute
      values conflicted with the values of other supplied attributes and
      were either substituted or ignored.  Attributes or values which
      conflict with other attributes and have been substituted or
      ignored MUST be returned in the Unsupported Attributes group of
      the response as supplied by the client.

   [RFC2911] section 3.1.6 Operation Status Codes and Messages states:

      If the Printer object supports the &quot;status-message&quot; operation
      attribute, it SHOULD use the REQUIRED &#x27;utf-8&#x27; charset to return a
      status message for the following error status codes (see section
      13 in [RFC2911]): &#x27;client-error-bad-request&#x27;, &#x27;client-error-
      charset-not-supported&#x27;, &#x27;server-error-internal-error&#x27;, &#x27;server-

      error-operation-not-supported&#x27;, and &#x27;server-error-version-not-
      supported&#x27;.  In this case, it MUST set the value of the
      &quot;attributes-charset&quot; operation attribute to &#x27;utf-8&#x27; in the error
      response.

      For the following error status codes, no job is created and no
      &quot;job-id&quot; or &quot;job-uri&quot; is returned:

         client-error-bad-request:  The request syntax does not conform
         to the specification.

         client-error-forbidden:  The request is being refused for
         authorization or authentication reasons.  The implementation
         security policy is to not reveal whether the failure is one of
         authentication or authorization.

         client-error-not-authenticated:  Either the request requires
         authentication information to be supplied or the authentication
         information is not sufficient for authorization.

         client-error-not-authorized:  The requester is not authorized
         to perform the request on the target object.

         client-error-not-possible: The request cannot be carried out
         because of the state of the system.  See also &#x27;server-error-
         not-accepting-jobs&#x27; status code, which MUST take precedence if
         the Printer object&#x27;s &quot;printer-accepting-jobs&quot; attribute is
         &#x27;false&#x27;.

         client-error-timeout:  not applicable.

         client-error-not-found:  the target object does not exist.

         client-error-gone:  the target object no longer exists and no
         forwarding address is known.

         client-error-request-entity-too-large:  the size of the request
         and/or print data exceeds the capacity of the IPP Printer to
         process it.

         client-error-request-value-too-long:  the size of request
         variable length attribute values, such as &#x27;text&#x27; and &#x27;name&#x27;
         attribute syntax&#x27;s, exceed the maximum length specified in
         [RFC2911] for the attribute and MUST be returned in the
         Unsupported Attributes Group.

         supplied is not supported.  The &quot;document-format&quot; attribute
         with the unsupported value MUST be returned in the Unsupported
         Attributes Group.  This error SHOULD take precedence over any
         other &#x27;xxx-not-supported&#x27; error, except &#x27;client-error-charset-
         not-supported&#x27;.

         client-error-attributes-or-values-not-supported:  one or more
         supplied attributes, attribute syntax&#x27;s, or values are not
         supported and the client supplied the &quot;ipp-attributes-
         fidelity&quot; operation attribute with a &#x27;true&#x27; value.  They MUST
         be returned in the Unsupported Attributes Group as explained
         below.

         client-error-uri-scheme-not-supported:  not applicable.

         client-error-charset-not-supported:  the charset supplied in
         the &quot;attributes-charset&quot; operation attribute is not supported.
         The Printer&#x27;s &quot;configured-charset&quot; MUST be returned in the
         response as the value of the &quot;attributes-charset&quot; operation
         attribute and used for any &#x27;text&#x27; and &#x27;name&#x27; attributes
         returned in the error response.  This error SHOULD take
         precedence over any other error, unless the request syntax is
         so bad that the client&#x27;s supplied &quot;attributes-charset&quot; cannot
         be determined.

         client-error-conflicting-attributes:  one or more supplied
         attribute values conflicted with each other and the client
         supplied the &quot;ipp-attributes-fidelity&quot; operation attribute with
         a &#x27;true&#x27; value.  They MUST be returned in the Unsupported
         Attributes Group as explained below.

         server-error-internal-error:  an unexpected condition prevents
         the request from being fulfilled.

         server-error-operation-not-supported:  not applicable (since
         Print-Job is REQUIRED).

         server-error-service-unavailable:  the service is temporarily
         overloaded.

         server-error-version-not-supported:  the version in the request
         is not supported.  The &quot;closest&quot; version number supported MUST
         be returned in the response.

         server-error-device-error:  a device error occurred while
         receiving or spooling the request or document data or the IPP
         Printer object can only accept one job at a time.

         server-error-temporary-error:  a temporary error such as a
         buffer full write error, a memory overflow, or a disk full
         condition occurred while receiving the request and/or the
         document data.

         server-error-not-accepting-jobs: the Printer object&#x27;s
         &quot;printer-is-not-accepting-jobs&quot; attribute is &#x27;false&#x27;.

         server-error-busy:  the Printer is too busy processing jobs to
         accept another job at this time.

         server-error-job-canceled:  the job has been canceled by an
         operator or the system while the client was transmitting the
         document data.

3.1.3.1.2   Print-URI

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to Print-URI with the following
   specializations and differences.  See Section 14 for a more complete
   description of each status code.

         client-error-uri-scheme-not-supported:  the URI scheme supplied
         in the &quot;document-uri&quot; operation attribute is not supported and
         is returned in the Unsupported Attributes group.

         server-error-operation-not-supported: the Print-URI operation
         is not supported.

3.1.3.1.3   Validate-Job

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to Validate-Job.  See Section 13 in
   [RFC2911] for a more complete description of each status code.

3.1.3.1.4   Create-Job

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to Create-Job with the following
   specializations and differences.  See Section 13 in [RFC2911] for a
   more complete description of each status code.

         server-error-operation-not-supported:  the Create-Job operation
         is not supported.

         client-error-multiple-document-jobs-not-supported: while the
         Create-Job and Send-Document operations are supported, this
         implementation doesn&#x27;t support more than one document with
         data.

3.1.3.1.5   Get-Printer-Attributes

         All of the Print-Job status codes described in Section
         3.1.3.1.1 Print-Job Response are applicable to the Get-
         Printer-Attributes operation with the following
         specialization&#x27;s and differences.   See Section 13 in [RFC2911]
         for a more complete description of each status code.

         For the following success status codes, the requested
         attributes are returned in Group 3 in the response:

         successful-ok:  no operation attributes or values were
         substituted or ignored (same as Print-Job) and no requested
         attributes were unsupported.

         successful-ok-ignored-or-substituted-attributes: The
         &quot;requested-attributes&quot; operation attribute MAY, but NEED NOT,
         be returned with the unsupported values.

         successful-ok-conflicting-attributes:  same as Print-Job.

   For the error status codes, Group 3 is returned containing no
   attributes or is not returned at all:

         client-error-not-possible:  Same as Print-Job, in addition the
         Printer object is not accepting any requests.

         client-error-request-entity-too-large:  same as Print-job,
         except that no print data is involved.

         client-error-attributes-or-values-not-supported:  not
         applicable, since unsupported operation attributes and/or
         values MUST be ignored and an appropriate success code returned
         (see above).

         client-error-conflicting-attributes:  same as Print-Job, except
         that &quot;ipp-attribute-fidelity&quot; is not involved.

         server-error-operation-not-supported: not applicable (since
         Get-Printer-Attributes is REQUIRED).

         server-error-device-error:  same as Print-Job, except that no
         document data is involved.

         server-error-temporary-error:  same as Print-Job, except that
         no document data is involved.

         server-error-not-accepting-jobs:  not applicable.

         server-error-busy:  same as Print-Job, except the IPP object is
         too busy to accept even query requests.

         server-error-job-canceled:  not applicable.

3.1.3.1.6   Get-Jobs

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to the Get-Jobs operation with the
   following specialization&#x27;s and differences.   See Section 13 in
   [RFC2911] for a more complete description of each status code.

   For the following success status codes, the requested attributes are
   returned in Group 3 in the response:

         successful-ok:  same as Get-Printer-Attributes (see section
         3.1.3.1.5).

         successful-ok-ignored-or-substituted-attributes: same as Get-
         Printer-Attributes (see section 3.1.3.1.5).

         successful-ok-conflicting-attributes: same as Get-Printer-
         Attributes (see section 3.1.3.1.5).

   For any error status codes, Group 3 is returned containing no
   attributes or is not returned at all.  The following brief error
   status code descriptions contain unique information for use with
   Get-Jobs operation.  See section 14 for the other error status codes
   that apply uniformly to all operations:

         client-error-not-possible:  Same as Print-Job, in addition the
         Printer object is not accepting any requests.

         client-error-request-entity-too-large:  same as Print-job,
         except that no print data is involved.

         client-error-document-format-not-supported:  not applicable.

         client-error-attributes-or-values-not-supported:  not
         applicable, since unsupported operation attributes and/or
         values MUST be ignored and an appropriate success code returned
         (see above).

         client-error-conflicting-attributes:  same as Print-Job, except
         that &quot;ipp-attribute-fidelity&quot; is not involved.

         server-error-operation-not-supported:  not applicable (since
         Get-Jobs is REQUIRED).

         server-error-device-error:  same as Print-Job, except that no
         document data is involved.

         server-error-temporary-error:  same as Print-Job, except that
         no document data is involved.

         server-error-not-accepting-jobs:  not applicable.

         server-error-job-canceled:  not applicable.

3.1.3.1.7   Pause-Printer

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to Pause-Printer with the following
   specializations and differences.  See Section 13 in [RFC2911] for a
   more complete description of each status code.

   For the following success status codes, the Printer object is being
   stopped from scheduling jobs on all its devices.

         successful-ok:  no request attributes were substituted or
         ignored (same as Print-Job).

         successful-ok-ignored-or-substituted-attributes:  same as
         Print-Job.

         successful-ok-conflicting-attributes:  same as Print-Job.

   For any of the error status codes, the Printer object has not been
   stopped from scheduling jobs on all its devices.

         client-error-not-possible: not applicable.

         client-error-not-found:  the target Printer object does not
         exist.

         client-error-gone:  the target Printer object no longer exists
         and no forwarding address is known.

         client-error-request-entity-too-large:  same as Print-Job,
         except no document data is involved.

         client-error-document-format-not-supported:  not applicable.

         client-error-conflicting-attributes:  same as Print-Job, except
         that the Printer&#x27;s &quot;printer-is-accepting-jobs&quot; attribute is not
         involved.

         server-error-operation-not-supported: the Pause-Printer
         operation is not supported.

         server-error-device-error: not applicable.

         server-error-temporary-error:  same as Print-Job, except no
         document data is involved.

         server-error-not-accepting-jobs:  not applicable.

         server-error-job-canceled:  not applicable.

3.1.3.1.8   Resume-Printer

   All of the Print-Job status code descriptions in Section 3.1.3.1.1
   Print-Job Response with the specialization&#x27;s described for Pause-
   Printer are applicable to Resume-Printer.  See Section 13 in
   [RFC2911] for a more complete description of each status code.

   For the following success status codes, the Printer object resumes
   scheduling jobs on all its devices.

         successful-ok:  no request attributes were substituted or
         ignored (same as Print-Job).

         successful-ok-ignored-or-substituted-attributes:   same as
         Print-Job.

         successful-ok-conflicting-attributes:  same as Print-Job.

   For any of the error status codes, the Printer object does not resume
   scheduling jobs.

         server-error-operation-not-supported: the Resume-Printer
         operation is not supported.

3.1.3.1.8.1   What about Printers unable to change state due to an error
              condition?

   If, in case, the IPP printer is unable to change its state due to
   some problem with the actual printer device (say, it is shut down or
   there is a media-jam as indicated in [RFC2911]), what should be the
   result of the &quot;Resume-Printer&quot; operation?  Should it still change the
   &#x27;printer-state-reasons&#x27; and return success or should it fail ?

   The Resume-Printer operation must clear the &#x27;paused&#x27; or &#x27;moving-to-
   paused&#x27; &#x27;printer-state-message&#x27;.  The operation must return a
   &#x27;successful-ok&#x27; status code.

3.1.3.1.8.2   How is &quot;printer-state&quot; handled on Resume-Printer?

   If the Resume-Printer operation succeeds, what should be the value of
   &quot;printer-state&quot; and  who should take care of the &quot;printer-state&quot;
   attribute value later on ?

   The Resume-Printer operation may change the &quot;printer-state-reasons&quot;
   value.

   The &quot;printer-state&quot; will change to one of three states:

      1. &#x27;idle&#x27; - no additional jobs and no error conditions present

      2. &#x27;processing&#x27; - job available and no error conditions present

      3. current state (i.e. no change) an error condition is present
         (e.g. media jam)

   In the third case the &quot;printer-state-reason&quot; will be cleared by
   automata when it detects the error condition no longer exists.  The
   &quot;printer-state&quot; will move to &#x27;idle&#x27; or &#x27;processing&#x27; when conditions
   permit. (i.e. no more error conditions)

3.1.3.1.9   Purge-Printer

   All of the Print-Job status code descriptions in Section 3.1.3.1.1
   Print-Job Response with the specialization&#x27;s described for Pause-
   Printer are applicable to Purge-Printer.  See Section 13 in [RFC2911]
   for a more complete description of each status code.

   For the following success status codes, the Printer object purges all
   it&#x27;s jobs.

         successful-ok:  no request attributes were substituted or
         ignored (same as Print-Job).

         successful-ok-ignored-or-substituted-attributes:   same as
         Print-Job.

         successful-ok-conflicting-attributes:  same as Print-Job.

   For any of the error status codes, the Printer object does not purge
   any jobs.

         server-error-operation-not-supported: the Purge-Printer
         operation is not supported.

3.1.3.2  Job Operations

3.1.3.2.1   Send-Document

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to the Get-Printer-Attributes
   operation with the following specialization&#x27;s and differences.   See
   Section 13 in [RFC2911] for a more complete description of each
   status code.

   For the following success status codes, the document has been added
   to the specified Job object and the job&#x27;s &quot;number-of-documents&quot;
   attribute has been incremented:

         successful-ok:  no request attributes were substituted or
         ignored (same as Print-Job).

         successful-ok-ignored-or-substituted-attributes:  same as
         Print-Job.

         successful-ok-conflicting-attributes:  same as Print-Job.

   For the error status codes, no document has been added to the Job
   object and the job&#x27;s &quot;number-of-documents&quot; attribute has not been
   incremented:

         client-error-not-possible: Same as Print-Job, except that the
         Printer&#x27;s &quot;printer-is-accepting-jobs&quot; attribute is not
         involved, so that the client is able to finish submitting a job
         that was created with a Create-Job operation after this
         attribute has been set to &#x27;true&#x27;.  Another condition is that
         the state of the job precludes Send-Document, i.e., the job has

         already been closed out by the client.  However, if the IPP
         Printer closed out the job due to timeout, the &#x27;client-error-
         timeout&#x27; error status SHOULD  be returned instead.

         client-error-timeout: This request was sent after the Printer
         closed the job, because it has not received a Send-Document or
         Send-URI operation within the Printer&#x27;s &quot;multiple-operation-
         time-out&quot; period .

         client-error-request-entity-too-large:  same as Print-Job.

         client-error-conflicting-attributes:  same as Print-Job, except
         that &quot;ipp-attributes-fidelity&quot; operation attribute is not
         involved..

         server-error-operation-not-supported:  the Send-Document
         request is not supported.

         server-error-not-accepting-jobs:  not applicable.

         server-error-job-canceled:  the job has been canceled by an
         operator or the system while the client was transmitting the
         data.

3.1.3.2.2   Send-URI

   All of the Print-Job status code descriptions in Section 3.1.3.1.1
   Print-Job Response with the specialization&#x27;s described for Send-
   Document are applicable to Send-URI.  See Section 13 in [RFC2911] for
   a more complete description of each status code.

         client-error-uri-scheme-not-supported:  the URI scheme supplied
         in the &quot;document-uri&quot; operation attribute is not supported and
         the &quot;document-uri&quot; attribute MUST be returned in the
         Unsupported Attributes group.

         server-error-operation-not-supported: the Send-URI operation is
         not supported.

3.1.3.2.3   Cancel-Job

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to Cancel-Job with the following
   specializations and differences.  See Section 13 in [RFC2911] for a
   more complete description of each status code.

   For the following success status codes, the Job object is being
   canceled or has been canceled:

         successful-ok:  no request attributes were substituted or
         ignored (same as Print-Job).

         successful-ok-ignored-or-substituted-attributes:   same as
         Print-Job.

         successful-ok-conflicting-attributes:  same as Print-Job.

   For any of the error status codes, the Job object has not been
   canceled or was previously canceled.

         client-error-not-possible:  The request cannot be carried out
         because of the state of the Job object (&#x27;completed&#x27;,
         &#x27;canceled&#x27;, or &#x27;aborted&#x27;) or the state of the system.

         client-error-not-found:  the target Printer and/or Job object
         does not exist.

         client-error-gone:  the target Printer and/or Job object no
         longer exists and no forwarding address is known.

         client-error-request-entity-too-large:  same as Print-Job,
         except no document data is involved.

         client-error-document-format-not-supported:  not applicable.

         client-error-attributes-or-values-not-supported:  not
         applicable, since unsupported operation attributes and values
         MUST be ignored.

         client-error-conflicting-attributes:  same as Print-Job, except
         that the Printer&#x27;s &quot;printer-is-accepting-jobs&quot; attribute is not
         involved.

         server-error-operation-not-supported:  not applicable (Cancel-
         Job is REQUIRED).

         server-error-device-error:  same as Print-Job, except no
         document data is involved.

         server-error-temporary-error:  same as Print-Job, except no
         document data is involved.

         server-error-not-accepting-jobs:  not applicable.

         server-error-job-canceled:  not applicable.

3.1.3.2.4   Get-Job-Attributes

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to Get-Job-Attributes with the
   following specializations and differences.  See Section 13 in
   [RFC2911] for a more complete description of each status code.

   For the following success status codes, the requested attributes are
   returned in Group 3 in the response:

         successful-ok:  same as Get-Printer-Attributes (see section
         3.1.3.1.5).

         successful-ok-ignored-or-substituted-attributes:  same as Get-
         Printer-Attributes (see section 3.1.3.1.5).

         successful-ok-conflicting-attributes:  same as Get-Printer-
         Attributes (see section 3.1.3.1.5).

   For the error status codes, Group 3 is returned containing no
   attributes or is not returned at all.

         client-error-not-possible:  Same as Print-Job, in addition the
         Printer object is not accepting any requests.

         client-error-document-format-not-supported:  not applicable.

         client-error-attributes-or-values-not-supported:  not
         applicable.

         client-error-uri-scheme-not-supported:  not applicable.

         client-error-attributes-or-values-not-supported:  not
         applicable, since unsupported operation attributes and/or
         values MUST be ignored and an appropriate success code returned
         (see above).

         client-error-conflicting-attributes:  not applicable

         server-error-operation-not-supported:  not applicable (since
         Get-Job-Attributes is REQUIRED).

         server-error-device-error:  same as Print-Job, except no
         document data is involved.

         server-error-temporary-error:  sane as Print-Job, except no
         document data is involved..

         server-error-not-accepting-jobs:  not applicable.

         server-error-job-canceled:  not applicable.

3.1.3.2.5   Hold-Job

   All of the Print-Job status codes described in Section 3.1.3.1.1
   Print-Job Response are applicable to Hold-Job with the following
   specializations and differences.  See Section 13 in [RFC2911] for a
   more complete description of each status code.

   For the following success status codes, the Job object is being held
   or has been held:

         successful-ok:  no request attributes were substituted or
         ignored (same as Print-Job).

         successful-ok-ignored-or-substituted-attributes:   same as
         Print-Job.

         successful-ok-conflicting-attributes:  same as Print-Job.

   For any of the error status codes, the Job object has not been held
   or was previously held.

         client-error-not-possible:  The request cannot be carried out
         because of the state of the Job object (&#x27;completed&#x27;,
         &#x27;canceled&#x27;, or &#x27;aborted&#x27;) or the state of the system.

         client-error-not-found:  the target Printer and/or Job object
         does not exist.

         client-error-gone:  the target Printer and/or Job object no
         longer exists and no forwarding address is known.

         client-error-request-entity-too-large:  same as Print-Job,
         except no document data is involved.

         client-error-document-format-not-supported:  not applicable.

         client-error-conflicting-attributes:  same as Print-Job, except
         that the Printer&#x27;s &quot;printer-is-accepting-jobs&quot; attribute is not
         involved.

         server-error-operation-not-supported: the Hold-Job operation is
         not supported.

         server-error-device-error: not applicable.

         server-error-temporary-error:  same as Print-Job, except no
         document data is involved.

         server-error-not-accepting-jobs:  not applicable.

         server-error-job-canceled:  not applicable.

3.1.3.2.6   Release-Job

   All of the Print-Job status code descriptions in Section 3.1.3.1.1
   Print-Job Response with the specialization&#x27;s described for Hold-Job
   are applicable to Release-Job.  See Section 13 in [RFC2911] for a
   more complete description of each status code.

         server-error-operation-not-supported: the Release-Job operation
         is not supported.

3.1.3.2.7   Restart-Job

   All of the Print-Job status code descriptions in Section 3.1.3.1.1
   Print-Job Response with the specialization&#x27;s described for Hold-Job
   are applicable to Restart-Job.  See Section 13 in [RFC2911] for a
   more complete description of each status code.

         server-error-operation-not-supported: the Restart-Job operation
         is not supported.

3.1.3.2.7.1   Can documents be added to a restarted job?

   Assume I give a Create-Job request along with a set of 5 documents.
   All the documents get printed and the job state is moved to
   completed.  I issue a Restart-Job request on the job. Now the issue
   is that, if I try to add new documents to the restarted job, will the
   IPP Server permit me to do so or  return &quot;client-error-not-possible &quot;
   and again print those 5 jobs?

   A job can not move to the &#x27;completed&#x27; state until all the documents
   have been processed.  The &#x27;last-document&#x27; flag indicates when the
   last document for a job is being sent from the client.  This is the
   semantic equivalent of closing a job.  No documents may be added once
   a job is closed. Section 3.3.7 of the IPP/1.1 model states &quot;The job
   is moved to the &#x27;pending&#x27; job state and restarts the beginning on the
   same IPP Printer object with the same attribute values.&quot;  &#x27;number-
   of-documents&#x27; is a job attribute.

3.1.4  Returning unsupported attributes in Get-Xxxx responses (Issue
       1.18)

   In the Get-Printer-Attributes, Get-Jobs, or Get-Job-Attributes
   responses, the client cannot depend on getting unsupported attributes
   returned in the Unsupported Attributes group that the client
   requested, but are not supported by the IPP object.  However, such
   unsupported requested attributes will not be returned in the Job
   Attributes or Printer Attributes group (since they are unsupported).
   Furthermore, the IPP object is REQUIRED to return the &#x27;successful-
   ok-ignored-or-substituted-attributes&#x27; status code, so that the client
   knows that not all that was requested has been returned.

3.1.5  Sending empty attribute groups

   The [RFC2911] and [RFC2910] specifications RECOMMEND that a sender
   not send an empty attribute group in a request or a response.
   However, they REQUIRE a receiver to accept an empty attribute group
   as equivalent to the omission of that group.  So a client SHOULD omit
   the Job Template Attributes group entirely in a create operation that
   is not supplying any Job Template attributes.  Similarly, an IPP
   object SHOULD omit an empty Unsupported Attributes group if there are
   no unsupported attributes to be returned in a response.

   The [RFC2910] specification REQUIRES a receiver to be able to receive
   either an empty attribute group or an omitted attribute group and
   treat them equivalently.  The term &quot;receiver&quot; means an IPP object for
   a request and a client for a response.  The term &quot;sender&#x27; means a
   client for a request and an IPP object for a response.

   There is an exception to the rule for Get-Jobs when there are no
   attributes to be returned.  [RFC2910] contains the following
   paragraph:

   The syntax allows an xxx-attributes-tag to be present when the xxx-
   attribute-sequence that follows is empty. The syntax is defined this
   way to allow for the response of Get-Jobs where no attributes are
   returned for some job-objects.  Although it is RECOMMENDED that the
   sender not send an xxx-attributes-tag if there are no attributes
   (except in the Get-Jobs response just mentioned), the receiver MUST
   be able to decode such syntax.

3.2  Printer Operations

3.2.1  Print-Job operation

3.2.1.1  Flow controlling the data portion of a Print-Job request (Issue
         1.22)

   A paused printer, or one that is stopped due to paper out or jam or
   spool space full or buffer space full, may flow control the data of a
   Print-Job operation (at the TCP/IP layer), so that the client is not
   able to send all the document data.  Consequently, the Printer will
   not return a response until the condition is changed.

   The Printer should not return a Print-Job response with an error code
   in any of these conditions, since either the printer will be resumed
   and/or the condition will be freed either by human intervention or as
   jobs print.

   In writing test scripts to test IPP Printers, the script must also be
   written not to expect a response, if the printer has been paused,
   until the printer is resumed, in order to work with all possible
   implementations.

3.2.1.2  Returning job-state in Print-Job response (Issue 1.30)

   An IPP client submits a small job via Print-Job.  By the time the IPP
   printer/print server is putting together a response to the operation,
   the job has finished printing and been removed as an object from the
   print system.  What should the job-state be in the response?

   The Model suggests that the Printer return a response before it even
   accepts the document content.  The Job Object Attributes are returned
   only if the IPP object returns one of the success status codes. Then
   the job-state would always be &quot;pending&quot; or &quot;pending-held&quot;.

   This issue comes up for the implementation of an IPP Printer object
   as a server that forwards jobs to devices that do not provide job
   status back to the server.  If the server is reasonably certain that
   the job completed successfully, then it should return the job-state
   as &#x27;completed&#x27;.  Also the server can keep the job in its &quot;job
   history&quot; long after the job is no longer in the device.  Then a user
   could query the server and see that the job was in the &#x27;completed&#x27;
   state and completed as specified by the jobs &quot;time-at-completed&quot;
   time, which would be the same as the server submitted the job to the
   device.

   An alternative is for the server to respond to the client before or
   while sending the job to the device, instead of waiting until the
   server has finished sending the job to the device.  In this case, the
   server can return the job&#x27;s state as &#x27;pending&#x27; with the &#x27;job-
   outgoing&#x27; value in the job&#x27;s &quot;job-state-reasons&quot; attribute.

   If the server doesn&#x27;t know for sure whether the job completed
   successfully (or at all), it could return the (out-of-band) &#x27;unknown&#x27;
   value.

   On the other hand, if the server is able to query the device and/or
   setup some sort of event notification that the device initiates when
   the job makes state transitions, then the server can return the
   current job state in the Print-Job response and in subsequent queries
   because the server knows what the job state is in the device (or can
   query the device).

   All of these alternatives depend on implementation of the server and
   the device.

3.2.2  Get-Printer-Attributes operation

   If a Printer supports the &quot;printer-make-and-model&quot; attribute and
   returns the .INF file model name of the printer in that attribute,
   the Microsoft client will automatically install the correct driver
   (if available).

   Clients which poll periodically for printer status or queued-job-
   count should use the &quot;requested-attributes&quot; operation attribute  to
   limit the scope of the query in order to save Printer and network
   resources.

3.2.3  Get-Jobs operation

3.2.3.1  Get-Jobs, my-jobs=&#x27;true&#x27;, and &#x27;requesting-user-name&#x27; (Issue
         1.39)?

   In [RFC2911] section 3.2.6.1 &#x27;Get-Jobs Request&#x27;, if the attribute
   &#x27;my-jobs&#x27; is present and set to TRUE, MUST the &#x27;requesting-user-name&#x27;
   attribute be there too, and if it&#x27;s not present what should the IPP
   printer do?

   [RFC2911] Section 8.3 describes the various cases of &quot;requesting-
   user-name&quot; being present or not for any operation.  If the client
   does not supply a value for &quot;requesting-user-name&quot;, the printer MUST
   assume that the client is supplying some anonymous name, such as
   &quot;anonymous&quot;.

3.2.3.2  Why is there a &quot;limit&quot; attribute in the Get-Jobs operation?

   When using the Get-Jobs operation a client implementer might choose
   to limit the number of jobs that the client shows on the first
   screenful.  For example, if its UI can only display 50 jobs, it can
   defend itself against a printer that would otherwise return 500 jobs,
   perhaps taking a long time on a slow dial-up line. The client can
   then go and ask for a larger number of jobs in the background, while
   showing the user the first 50 jobs. Since the job history is returned
   in reverse order, namely the most recently completed jobs are
   returned first, the user is most likely interested in the first jobs
   that are returned. Limiting the number of jobs may be especially
   useful for a client that is requesting &#x27;completed&#x27; jobs from a
   printer that keeps a long job history. Clients that don&#x27;t mind
   sometimes getting very large responses, can omit the &quot;limit&quot;
   attribute in their Get-Jobs requests.

3.2.4  Create-Job operation

   A Printer may respond to a Create-Job operation with &quot;job-state&quot;
   &#x27;pending&#x27; or &#x27;pending-held&#x27; and &quot; job-state-reason&quot; &#x27;job-data-
   insufficient&#x27; to indicate that operation has been accepted by the
   Printer, but the Printer is expecting additional document data before
   it can move the job into the &#x27;processing&#x27; state.  Alternatively, it
   may respond with &quot;job-state&quot; &#x27;processing&#x27; and &quot;job-state-reason&quot;
   &#x27;job-incoming&#x27;  to indicate that the Create-Job operation has been
   accepted by the Printer, but the Printer is expecting additional
   Send-Document and/or Send-URI operations and/or is
   accessing/accepting document data.  The second alternative is for
   non-spooling Printers that don&#x27;t implement the &#x27;pending&#x27; state.

   Should the server wait for the &quot;last-document&quot; operation attribute
   set to &#x27;true&#x27; before starting to &quot;process&quot; the job?

   It depends on implementation. Some servers spool the entire job,
   including all document data, before starting to process, so such an
   implementation would wait for the &quot;last-document&quot; before starting to
   process the job. If the time-out occurs without the &quot;last-document&quot;,
   then the server takes one of the indicated actions in section 3.3.1
   in the [RFC2911] document. Other servers will start to process
   document data as soon as they have some. These are the so-called
   &quot;non-spooling&quot; printers. Currently, there isn&#x27;t a way for a client to
   determine whether the Printer will spool all the data or will start
   to process (and print) as soon as it has some data.

3.3  Job Operations

3.3.1  Validate-Job

   The Validate-Job operation has been designed so that its
   implementation may be a part of the Print-Job operation.  Therefore,
   requiring Validate-Job is not a burden on implementers.  Also it is
   useful for client&#x27;s to be able to count on its presence in all
   conformance implementations, so that the client can determine before
   sending a long document, whether the job will be accepted by the IPP
   Printer or not.

3.3.2   Restart-Job

   The Restart-Job operation allows the reprocessing of a completed job.
   Some jobs store the document data on the printer.  Jobs created using
   the Print-Job operation are an example.  It is required that the
   printer retains the job data after the job has moved to a &#x27;completed
   state&#x27; in order for the Restart-Job operation to succeed.

   Some jobs contain only a reference to the job data.  A job created
   using the Print-URI is an example of such a job.  When the Restart-
   Job operation is issued the job is reprocessed. The job data MUST be
   retrieved again to print the job.

   It is possible that a job fails while attempting to access the print
   data.  When such a job is the target of a Restart-Job  the Printer
   SHALL attempt to retrieve the job data again.

4  Object Attributes

4.1  Attribute Syntax&#x27;s

4.1.1  The &#x27;none&#x27; value for empty sets (Issue 1.37)

   [RFC2911] states that the &#x27;none&#x27; value should be used as the value of
   a 1setOf when the set is empty. In most cases, sets that are
   potentially empty contain keywords so the keyword &#x27;none&#x27; is used, but
   for the 3 finishings attributes, the values are enums and thus the
   empty set is represented by the enum 3.  Currently there are no other
   attributes with 1setOf values, which can be empty and can contain
   values that are not keywords.  This exception requires special code
   and is a potential place for bugs.  It would have been better if we
   had chosen an out-of-band value, either &quot;no-value&quot; or some new value,
   such as &#x27;none&#x27;.  Since we didn&#x27;t, implementations have to deal with
   the different representations of &#x27;none&#x27;, depending on the attribute
   syntax.

4.1.2  Multi-valued attributes (Issue 1.31)

   What is the attribute syntax for a multi-valued attribute?  Since
   some attributes support values in more than one data type, such as
   &quot;media&quot;, &quot;job-hold-until&quot;, and &quot;job-sheets&quot;, IPP semantics associate
   the attribute syntax with each value, not with the attribute as a
   whole.  The protocol associates the attribute syntax tag with each
   value.  Don&#x27;t be fooled, just because the attribute syntax tag comes
   before the attribute keyword.  All attribute values after the first
   have a zero length attribute keyword as the indication of a
   subsequent value of the same attribute.

4.1.3  Case Sensitivity in URIs (issue 1.6)

   IPP client and server implementations must be aware of the diverse
   uppercase/lowercase nature of URIs.  RFC 2396 defines URL schemes and
   Host names as case insensitive but reminds us that the rest of the
   URL may well demonstrate case sensitivity.  When creating URL&#x27;s for
   fields where the choice is completely arbitrary, it is probably best
   to select lower case.  However, this cannot be guaranteed and
   implementations MUST NOT rely on any fields being case-sensitive or
   case-insensitive in the URL beyond the URL scheme and host name
   fields.

   The reason that the IPP specification does not make any restrictions
   on URIs, is so that implementations of IPP may use off-the-shelf
   components that conform to the standards that define URIs, such as
   RFC 2396 and the HTTP/1.1 specifications [RFC2616].  See these
   specifications for rules of matching, comparison, and case-
   sensitivity.

   It is also recommended that System Administrators and implementations
   avoid creating URLs for different printers that differ only in their
   case.  For example, don&#x27;t have Printer1 and printer1 as two different
   IPP Printers.

   Example of equivalent URI&#x27;s

        http://abc.com:80/~smith/home.html

        http://ABC.com/%7Esmith/home.html

        http:/ABC.com:/%7esmith/home.html

   Example of equivalent URI&#x27;s using the IPP scheme

        ipp://abc.com:631/~smith/home.html

        ipp://ABC.com/%7Esmith/home.html

        http:/ABC.com:631/%7esmith/home.html

   The HTTP/1.1 specification [RFC2616] contains more details on
   comparing URLs.

4.1.4  Maximum length for xxxWithLanguage and xxxWithoutLanguage

   The &#x27;textWithLanguage&#x27; and &#x27;nameWithLanguage&#x27; are compound syntaxes
   that have two components.  The first component is the &#x27;language&#x27;
   component that can contain up to 63 octets.  The second component is
   the &#x27;text&#x27; or &#x27;name&#x27; component.  The maximum length of these are 1023
   octets and 255 octets respectively.  The definition of attributes
   with either syntax may further restrict the length (e.g., printer-
   name (name(127))).

   The length of the &#x27;language&#x27; component has no effect on the allowable
   length of &#x27;text&#x27; in &#x27;textWithLanguage&#x27; or the length of &#x27;name&#x27; in
   &#x27;nameWithLanguage&#x27;

4.2  Job Template Attributes

4.2.1  multiple-document-handling(type2 keyword)

4.2.1.1  Support of multiple document jobs

   IPP/1.0 is silent on which of the four effects an implementation
   would perform if it supports Create-Job, but does not support
   &quot;multiple-document-handling&quot; or multiple documents per job.  IPP/1.1
   was changed so that a Printer could support Create-Job without having
   to support multiple document jobs.  The &quot;multiple-document-jobs-
   supported&quot; (boolean) Printer description attribute was added to
   IPP/1.1 along with the &#x27;server-error-multiple-document-jobs-not-
   supported&#x27; status code for a Printer to indicate whether or not it
   supports multiple document jobs, when it supports the Create-Job
   operation.  Also IPP/1.1 was clarified that the Printer MUST support
   the &quot;multiple-document-handling&quot; (type2 keyword) Job Template
   attribute with at least one value if the Printer supports multiple
   documents per job.

4.3  Job Description Attributes

4.3.1  Getting the date and time of day

   The &quot;date-time-at-creation&quot;, &quot;date-time-at-processing&quot;, and &quot;date-
   time-at-completed&quot; attributes are returned as dateTime syntax.  These
   attributes are OPTIONAL for a Printer to support.  However, there are

   various ways for a Printer to get the date and time of day.  Some
   suggestions:

      1. A Printer can get time from an NTP timeserver if there&#x27;s one
         reachable on the network .  See RFC 1305.  Also DHCP option 32
         in RFC 2132 returns the IP address of the NTP server.

      2. Get the date and time at startup from a human operator

      3. Have an operator set the date and time using a web
         administrative interface

      4. Get the date and time from incoming HTTP requests, though the
         problems of spoofing need to be considered.  Perhaps comparing
         several HTTP requests could reduce the chances of spoofing.

      5. Internal date time clock battery driven.

      6. Query &quot;http://tycho.usno.navy.mil/cgi-bin/timer.pl&quot;

4.4  Printer Description Attributes

4.4.1  queued-job-count (integer(0:MAX))

4.4.1.1  Why is &quot;queued-job-count&quot; RECOMMENDED (Issue 1.14)?

   The reason that &quot;queued-job-count&quot; is RECOMMENDED, is that some
   clients look at that attribute alone when summarizing the status of a
   list of printers, instead of doing a Get-Jobs to determine the number
   of jobs in the queue.  Implementations that fail to support the
   &quot;queued-job-count&quot; will cause that client to display 0 jobs when
   there are actually queued jobs.

   We would have made it a REQUIRED Printer attribute, but some
   implementations had already been completed before the issue was
   raised, so making it a SHOULD was a compromise.

4.4.1.2  Is &quot;queued-job-count&quot; a good measure of how busy a printer is
         (Issue 1.15)?

   The &quot;queued-job-count&quot; is not a good measure of how busy the printer
   is when there are held jobs.  A future registration could be to add a
   &quot;held-job-count&quot; (or an &quot;active-job-count&quot;) Printer Description
   attribute if experience shows that such an attribute (combination) is
   needed to quickly indicate how busy a printer really is.

4.4.2  printer-current-time (dateTime)

   A Printer implementation MAY support this attribute by obtaining the
   date and time by any number of implementation-dependent means at
   startup or subsequently.  Examples include:

      1. an internal date time clock,

      2. from the operator at startup using the console,

      3. from an operator using an administrative web page,

      4. from HTTP headers supplied in client requests,

      5. use HTTP to query &quot;http://tycho.usno.navy.mil/cgi-bin/timer.pl&quot;

      6. from the network, using NTP [RFC1305] or DHCP option 32
         [RFC2132] that returns the IP address of the NTP server.

   If an implementation supports this attribute by obtaining the current
   time from the network (at startup or later), but the time is not
   available, then the implementation MUST return the value of this
   attribute using the out-of-band &#x27;no-value&#x27; meaning not configured.
   See the beginning of section 4.1.

   Since the new &quot;date-and-time-at-xxx&quot; Job Description attributes refer
   to the &quot;printer-current-time&quot;, they will be covered also.

4.4.3  Printer-uri

   Must the operational attribute for printer-uri match one of the
   values in &quot;printer-uri-supported&quot;?

   A forgiving printer implementation would not reject the operation.
   But the implementation has its rights to reject a printer or job
   operation if the operational attribute printer-uri is not a value of
   the printer-uri-supported.  The printer might not be improperly
   configured.  The request obviously reached the printer. The printer
   could treat the printer-uri as the logical equivalent of a value in
   the printer-uri-supported.  It would be implementation dependent for
   which value, and associated security policy, would apply. This does
   also apply to a job object specified with a printer-uri and job-id,
   or with a job-uri. See section 4.1.3 for how to compare URI&#x27;s.

4.5  Empty Jobs

   <span class="Verified-inline-styling" id='inline-3161'>   The IPP object model does not prohibit a job that contains no <button id="btn_3161" target="expand_3161" onclick='hideFunction("expand_3161")'>Expand</button>
   documents.  Such a job may be created in a number of ways including a
   &#x27;Create-Job&#x27; followed by a &#x27;Send-Document&#x27; that contains no data and
   has the &#x27;last-document&#x27; flag set.
</span id__locate=3161>
<div class="nodeCloseClass" id='expand_3161'><div class='Verified-endnote-styling' id='eid3161'>
<pre>
<b><i><a href='https://www.rfc-editor.org/errata/eid3161'>EID 3161</a> (Verified) is as follows:</i></b>

<b>Section:</b> 4.5

<b>Original Text:</b>

   The IPP object model does not prohibit a job that contains no
   documents.  Such a job may be created in a number of ways including a
   &#x27;create-job&#x27; followed by an &#x27;add-document&#x27; that contains no data and
   has the &#x27;last-document&#x27; flag set.

<b>Corrected Text:</b>

   The IPP object model does not prohibit a job that contains no
   documents.  Such a job may be created in a number of ways including a
   &#x27;Create-Job&#x27; followed by a &#x27;Send-Document&#x27; that contains no data and
   has the &#x27;last-document&#x27; flag set.
</pre>
<b>Notes:</b><br/>
The operation is called &quot;Send-Document&quot;, not &quot;add-document&quot;...
</div>
</div>
   An empty job is processed just as any other job.  The operation that
   &quot;closes&quot; an empty job is not rejected because the job is empty.  If
   no other conditions exist, other than the job is empty, the response
   to the operation will indicate success.  After the job is scheduled
   and processed, the job state SHALL be &#x27;completed&#x27;.

   There will be some variation in the value(s) of the &quot;job-state-
   reasons&quot; attribute.  It is required that if no conditions, other than
   the job being empty, exist the &quot;job-state-reasons&quot; SHALL include the

   &#x27;completed-successfully&#x27;.  If other conditions existed, the
   &#x27;completed-with-warnings&#x27; or &#x27;completed-with-errors&#x27; values may be
   used.

5  Directory Considerations

5.1  General Directory Schema Considerations

   The [RFC2911] document lists RECOMMENDED and OPTIONAL Printer object
   attributes for directory schemas.  See [RFC2911] APPENDIX E: Generic
   Directory Schema.

   The SLP printer template is defined in the &quot;Definition of the Printer
   Abstract Service Type v2.0&quot; document [svrloc-printer].  The LDAP
   printer template is defined in the &quot;Internet Printing Protocol (IPP):
   LDAP Schema for Printer Services&quot; document [ldap-printer].  Both
   documents systematically add &quot;printer-&quot; to any attribute that doesn&#x27;t
   already start with &quot;printer-&quot; in order to keep the printer directory
   attributes distinct from other directory attributes.  Also, instead
   of using &quot;printer-uri-supported&quot;, &quot;uri-authentication-supported&quot;, and
   &quot;uri-security-supported&quot;, they use a &quot;printer-xri-supported&quot;
   attribute with special syntax to contain all of the same information
   in a single attribute.

5.2  IPP Printer with a DNS name

   If the IPP printer has a DNS name should there be at least two values
   for the printer-uri-supported attribute.  One URL with the fully
   qualified DNS name the other with the IP address in the URL?

   The printer may contain one or the other or both.  It&#x27;s up to the
   administrator to configure this attribute.

6  Security Considerations

   The security considerations given in [RFC2911] Section 8 &quot;Security
   Considerations&quot; all apply to this document.  In addition, the
   following sub-sections describes security consideration that have
   arisen as a result of implementation testing.

6.1  Querying jobs with IPP that were submitted using other job
     submission protocols (Issue 1.32)

   The following clarification was added to [RFC2911] section 8.5:

      8.5 Queries on jobs submitted using non-IPP protocols If the
      device that an IPP Printer is representing is able to accept jobs
      using other job submission protocols in addition to IPP, it is
      RECOMMEND that such an implementation at least allow such
      &quot;foreign&quot; jobs to be queried using Get-Jobs returning &quot;job-id&quot; and
      &quot;job-uri&quot; as &#x27;unknown&#x27;.  Such an implementation NEED NOT support
      all of the same IPP job attributes as for IPP jobs.  The IPP
      object returns the &#x27;unknown&#x27; out-of-band value for any requested
      attribute of a foreign job that is supported for IPP jobs, but not
      for foreign jobs.

      It is further RECOMMENDED, that the IPP Printer generate &quot;job-id&quot;
      and &quot;job-uri&quot; values for such &quot;foreign jobs&quot;, if possible, so that
      they may be targets of other IPP operations, such as Get-Job-
      Attributes and Cancel-Job.  Such an implementation also needs to
      deal with the problem of authentication of such foreign jobs.  One
      approach would be to treat all such foreign jobs as belonging to
      users other than the user of the IPP client.  Another approach
      would be for the foreign job to belong to &#x27;anonymous&#x27;.  Only if
      the IPP client has been authenticated as an operator or
      administrator of the IPP Printer object, could the foreign jobs be
      queried by an IPP request.  Alternatively, if the security policy
      were to allow users to query other users&#x27; jobs, then the foreign
      jobs would also be visible to an end-user IPP client using Get-
      Jobs and Get-Job- Attributes.

      Thus IPP MAY be implemented as a &quot;universal&quot; protocol that
      provides access to jobs submitted with any job submission
      protocol.  As IPP becomes widely implemented, providing a more
      universal access makes sense.

7  Encoding and Transport

   This section discusses various aspects of IPP/1.1 Encoding and
   Transport [RFC2910].

   A server is not required to send a response until after it has
   received the client&#x27;s entire request.  Hence, a client must not
   expect a response until after it has sent the entire request.
   However, we recommend that the server return a response as soon as
   possible if an error is detected while the client is still sending
   the data, rather than waiting until all of the data is received.
   Therefore, we also recommend that a client listen for an error
   response that an IPP server MAY send before it receives all the data.
   In this case a client, if chunking the data, can send a premature
   zero-length chunk to end the request before sending all the data (and
   so the client can keep the connection open for other requests, rather
   than closing it).  If the request is blocked for some reason, a
   client MAY determine the reason by opening another connection to
   query the server using Get-Printer-Attributes.

   IPP, by design, uses TCP&#x27;s built-in flow control mechanisms [RFC 793]
   to throttle clients when Printers are busy.  Therefore, it is
   perfectly normal for an IPP client transmitting a Job to be blocked
   for a really long time.  Accordingly, socket timeouts must be
   avoided.  Some socket implementations have a timeout option, which
   specifies how long a write operation on a socket can be blocked
   before it times out and the blocking ends.  A client should set this
   option for infinite timeout when transmitting Job submissions.

   Some IPP client applications might be able to perform other useful
   work while a Job transmission is blocked.  For example, the client
   may have other jobs that it could transmit to other Printers
   simultaneously.  A client may have a GUI, which must remain
   responsive to the user while the Job transmission is blocked.  These
   clients should be designed to spawn a thread to handle the Job
   transmission at its own pace, leaving the main application free to do
   other work.  Alternatively, single-threaded applications could use
   non-blocking I/O.

   Some Printer conditions, such as jam or lack of paper, could cause a
   client to be blocked indefinitely.  Clients may open additional
   connections to the Printer to Get-Printer-Attributes, determine the
   state of the device, alert a user if the printer is stopped, and let
   a user decide whether to abort the job transmission or not.

   In the following sections, there are tables of all HTTP headers,
   which describe their use in an IPP client or server.  The following
   is an explanation of each column in these tables.

     - the &quot;header&quot; column contains the name of a header
     - the &quot;request/client&quot; column indicates whether a client sends the
       header.
     - the &quot;request/ server&quot; column indicates whether a server supports
       the header when received.
     - the &quot;response/ server&quot; column indicates whether a server sends
       the header.
     - the &quot;response /client&quot; column indicates whether a client
       supports the header when received.
     - the &quot;values and conditions&quot; column specifies the allowed header
       values and the conditions for the header to be present in a
       request/response.

   The table for &quot;request headers&quot; does not have columns for responses,
   and the table for &quot;response headers&quot; does not have columns for
   requests.

   The following is an explanation of the values in the &quot;request/client&quot;
   and &quot;response/ server&quot; columns.

     - must: the client or server MUST send the header,
     - must-if: the client or server MUST send the header when the
       condition described in the &quot;values and conditions&quot; column is
       met,
     - may: the client or server MAY send the header
     - not: the client or server SHOULD NOT send the header. It is not
       relevant to an IPP implementation.

   The following is an explanation of the values in the
   &quot;response/client&quot; and &quot;request/ server&quot; columns.

     - must: the client or server MUST support the header,
     - may: the client or server MAY support the header
     - not: the client or server SHOULD NOT support the header. It is
       not relevant to an IPP implementation.

7.1  General Headers

<div class='Verified-endnote-styling' id='eid3010'>
<pre>
<b><i><a href='https://www.rfc-editor.org/errata/eid3010'>EID 3010</a> (Verified) is as follows:</i></b>

<b>Section:</b> 7.1

<b>Original Text:</b>

User-Agent     not      not

<b>Corrected Text:</b>

User-Agent     may      not
</pre>
<b>Notes:</b><br/>
User-Agent identifies the client software to the Printer, which may in fact be useful for implementing workarounds, etc.
</div>
   The following is a table for the general headers.

   General-    Request         Response       Values and Conditions
   Header

               Client  Server  Server Client


   Cache-              not     must   not     &quot;no-cache&quot; only
     Control   must

   <span class="Verified-inline-styling" id='inline-3009'>   Connection  must-   must    must-  must    &quot;close&quot; or &quot;upgrade&quot; only.  Both <button id="btn_3009" target="expand_3009" onclick='hideFunction("expand_3009")'>Expand</button>
                 if              if             client and server
                                                SHOULD keep a
                                                connection for the
                                                duration of a sequence
                                                of operations.  The
                                                client and server MUST
                                                include this header
                                                with the value &quot;close&quot;
                                                for the last operation
                                                in such a sequence,
                                                if known. The value
                                                &quot;Upgrade&quot; is used for
                                                TLS upgrade [RFC2817].
</span id__locate=3009>
<div class="nodeCloseClass" id='expand_3009'><div class='Verified-endnote-styling' id='eid3009'>
<pre>
<b><i><a href='https://www.rfc-editor.org/errata/eid3009'>EID 3009</a> (Verified) is as follows:</i></b>

<b>Section:</b> 7.1

<b>Original Text:</b>

   Connection  must-   must    must-  must    &quot;close&quot; only.  Both
                 if              if             client and server
                                                SHOULD keep a
                                                connection for the
                                                duration of a sequence
                                                of operations.  The
                                                client and server MUST
                                                include this header
                                                for the last operation
                                                in such a sequence.

<b>Corrected Text:</b>

   Connection  must-   must    must-  must    &quot;close&quot; or &quot;upgrade&quot; only.  Both
                 if              if             client and server
                                                SHOULD keep a
                                                connection for the
                                                duration of a sequence
                                                of operations.  The
                                                client and server MUST
                                                include this header
                                                with the value &quot;close&quot;
                                                for the last operation
                                                in such a sequence,
                                                if known. The value
                                                &quot;Upgrade&quot; is used for
                                                TLS upgrade [RFC2817].
</pre>
<b>Notes:</b><br/>
Implementers guide does not include support for HTTP Upgrade [RFC2817].
</div>
</div>
   Date        may     may     must   may     per RFC 1123 [RFC1123]
                                                from RFC 2616
                                                [RFC2616]

   Pragma      must    not     must   not     &quot;no-cache&quot; only

   Transfer-   must-   must    must-  must    &quot;chunked&quot; only.  Header
     Encoding    if              if             MUST be present if
                                                Content-Length is
                                                absent.

   Upgrade     not     not     not    not

   Via         not     not     not    not

7.2  Request  Headers

   The following is a table for the request headers.

   Request-       Client   Server Request Values and Conditions
   Header

   Accept         may      must   &quot;application/ipp&quot; only.  This
                                    value is the default if the
                                    client omits it

   Accept-        not      not     Charset information is within the
     Charset                        application/ipp entity

   Accept-        may      must   empty and per RFC 2616 [RFC2616]
     Encoding                       and IANA registry for content-
                                    codings

   Accept-        not      not    language information is within the
     Language                       application/ipp entity

   Authorization  must-    must   per RFC 2616.  A client MUST send
                    if              this header when it receives a
                                    401 &quot;Unauthorized&quot; response and
                                    does not receive a &quot;Proxy-
                                    Authenticate&quot; header.

   From           not      not    per RFC 2616.  Because RFC
                                    recommends sending this header
                                    only with the user&#x27;s approval,
                                    it is not very useful

   Host           must     must   per RFC 2616

   If-Match       not      not

   If-Modified-   not      not
     Since

   If-None-Match  not      not

   If-Range       not      not

   If-            not      not
     Unmodified-
     Since

   Request-       Client   Server Request Values and Conditions
   Header

   Max-Forwards   not      not

   Proxy-         must-    not    per RFC 2616.  A client MUST send
     Authorizati    if              this header when it receives a
     on                             401 &quot;Unauthorized&quot; response and
                                    a &quot;Proxy-Authenticate&quot; header.

   Range          not      not

   Referrer       not      not

   User-Agent     not      not

7.3  Response Headers

   The following is a table for the request headers.

   Response-       Server  Client Response Values and Conditions
   Header


   Accept-Ranges   not     not

   Age             not     not

   Location        must-   may    per RFC 2616.  When URI needs
                     if             redirection.

   Proxy-                  must   per RFC 2616
     Authenticat
     e             not

   Public          may     may    per RFC 2616

   Retry-After     may     may    per RFC 2616

   Server          not     not

   Vary            not     not

   Warning         may     may    per RFC 2616

   WWW-            must-   must   per RFC 2616.  When a server needs
     Authenticate    if             to authenticate a client.

7.4  Entity  Headers

   The following is a table for the entity headers.

   Entity-Header   Request        Response        Values and
                                                  Conditions

                   Client  Server Server  Client

   Allow           not     not    not     not

   Content-Base    not     not    not     not

   Content-        may     must   must    must    per RFC 2616 and
     Encoding                                       IANA registry for
                                                    content codings.

   Content-        not     not    not     not     Application/ipp
     Language                                       handles language

   Content-        must-   must   must-   must    the length of the
     Length          if             if              message-body per
                                                    RFC 2616.  Header
                                                    MUST be present
                                                    if Transfer-
                                                    Encoding is
                                                    absent..

   Content-        not     not    not     not
     Location

   Content-MD5     may     may    may     may     per RFC 2616

   Content-Range   not     not    not     not

   Content-Type    must    must   must    must    &quot;application/ipp&quot;
                                                    only

   ETag            not     not    not     not

   Expires         not     not    not     not

   Last-Modified   not     not    not     not

7.5  Optional support for HTTP/1.0

   IPP implementations consist of an HTTP layer and an IPP layer.  In
   the following discussion, the term &quot;client&quot; refers to the HTTP client
   layer and the term &quot;server&quot; refers to the HTTP server layer.  The
   Encoding and Transport document [RFC2910] requires that HTTP 1.1 MUST
   be supported by all clients and all servers.  However, a client
   and/or a server implementation may choose to also support HTTP 1.0.

   This option means that a server may choose to communicate with a
   (non-conforming) client that only supports HTTP 1.0.  In such cases
   the server should not use any HTTP 1.1 specific parameters or
   features and should respond using HTTP version number 1.0.

   This option also means that a client may choose to communicate with a
   (non-conforming) server that only supports HTTP 1.0.  In such cases,
   if the server responds with an HTTP &#x27;unsupported version number&#x27; to
   an HTTP 1.1 request, the client should retry using HTTP version
   number 1.0.

7.6  HTTP/1.1 Chunking

7.6.1  Disabling IPP Server Response Chunking

   Clients MUST anticipate that the HTTP/1.1 server may chunk responses
   and MUST accept them in responses.  However, a (non-conforming) HTTP
   client that is unable to accept chunked responses may attempt to
   request an HTTP 1.1 server not to use chunking in its response to an
   operation by using the following HTTP header:

      TE: identity

   This mechanism should not be used by a server to disable a client
   from chunking a request, since chunking of document data is an
   important feature for clients to send long documents.

7.6.2  Warning About the Support of Chunked Requests

   This section describes some problems with the use of chunked requests
   and HTTP/1.1 servers.

   The HTTP/1.1 standard [RFC2616] requires that conforming servers
   support chunked requests for any method.  However, in spite of this
   requirement, some HTTP/1.1 implementations support chunked responses
   in the GET method, but do not support chunked POST method requests.
   Some HTTP/1.1 implementations that support CGI scripts [CGI] and/or
   servlets [Servlet] require that the client supply a Content-Length.
   These implementations might reject a chunked POST method and return a

   411 status code (Length Required), might attempt to buffer the
   request and run out of room returning a 413 status code (Request
   Entity Too Large), or might successfully accept the chunked request.

   Because of this lack of conformance of HTTP servers to the HTTP/1.1
   standard, the IPP standard [RFC2910] REQUIRES that a conforming IPP
   Printer object implementation support chunked requests and that
   conforming clients accept chunked responses.  Therefore, IPP object
   implementers are warned to seek HTTP server implementations that
   support chunked POST requests in order to conform to the IPP standard
   and/or use implementation techniques that support chunked POST
   requests.

8  References

   [CGI]             CGI/1.1 (http://www.w3.org/CGI/).

   [IANA-CS]         IANA Registry of Coded Character Sets:
                     http://www.iana.org/assignments/character-sets

   [ldap-printer]    Fleming, P., Jones, K., Lewis, H. and I. McDonald,
                     &quot;Internet Printing Protocol (IPP): LDAP Schema for
                     Printer Services&quot;, Work in Progress.

   [RFC793]          Postel, J., &quot;Transmission Control Protocol&quot;, STD 7,
                     RFC 793, September 1981.

   [RFC1123]         Braden, R., &quot;Requirements for Internet Hosts -
                     Application and Support&quot;, RFC 1123, October, 1989.

   [RFC2026]         Bradner, S., &quot;The Internet Standards Process --
                     Revision 3&quot;, BCP 9, RFC 2026, October 1996.

   [RFC2119]         Bradner, S., &quot;Key words for use in RFCs to Indicate
                     Requirement Levels&quot;, BCP 14, RFC 2119 , March 1997.

   [RFC2396]         Berners-Lee, T., Fielding, R. and L. Masinter,
                     &quot;Uniform Resource Identifiers (URI): Generic
                     Syntax&quot;, RFC 2396, August 1998.

   [RFC2565]         DeBry, R., Hastings, T., Herriot, R., Isaacson, S.
                     and P. Powell, &quot;Internet Printing Protocol/1.0:
                     Model and Semantics&quot;, RFC 2566, April 1999.

   [RFC2566]         Herriot, R., Butler, S., Moore, P. and R. Turner,
                     &quot;Internet Printing Protocol/1.0: Encoding and
                     Transport&quot;, RFC 2565, April 1999.

   [RFC2567]         Wright, D., &quot;Design Goals for an Internet Printing
                     Protocol&quot;, RFC 2567, April 1999.

   [RFC2568]         Zilles, S., &quot;Rationale for the Structure and Model
                     and Protocol for the Internet Printing Protocol&quot;,
                     RFC 2568, April 1999.

   [RFC2569]         Herriot, R., Hastings, T., Jacobs, N. and J.
                     Martin, &quot;Mapping between LPD and IPP Protocols&quot;,
                     RFC 2569, April 1999.

   [RFC2616]         Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
                     Masinter, L., Leach, P. and T. Berners-Lee,
                     &quot;Hypertext Transfer Protocol - HTTP/1.1&quot;, RFC 2616,
                     June 1999.

   [RFC2910]         Herriot, R., Butler, S., Moore, P. and R. Turner,
                     &quot;Internet Printing Protocol/1.0: Encoding and
                     Transport&quot;, RFC 2910, September, 2000.

   [RFC2911]         DeBry, R., Hastings, T., Herriot, R., Isaacson, S.
                     and P. Powell, &quot;Internet Printing Protocol/1.0:
                     Model and Semantics&quot;, RFC 2911, September, 2000.

   [Servlet]         Servlet Specification Version 2.1
                     (http://java.sun.com/products/servlet/2.1/
                     index.html).

   [svrloc-printer]  St. Pierre, P., Isaacson, S., McDonald, I.,
                     &quot;Definition of the Printer Abstract Service Type
                     v2.0&quot;, http://www.isi.edu/in-
                     notes/iana/assignments/svrloc-
                     templates/printer.2.0.en (IANA Registered, May 27,
                     2000).

   [SSL]             Netscape, The SSL Protocol, Version 3, (Text
                     version 3.02), November 1996.

9.  Authors&#x27; Addresses

   Thomas N. Hastings
   Xerox Corporation
   701 Aviation Blvd.
   El Segundo, CA 90245

   EMail: hastings@cp10.es.xerox.com


   Carl-Uno Manros
   Independent Consultant
   1601 N. Sepulveda Blvd. #505
   Manhattan Beach, CA 90266

   Email: carl@manros.com


   Carl Kugler
   Mail Stop 003G
   IBM Printing Systems Co
   6300 Diagonal Hwy
   Boulder CO 80301

   EMail: Kugler@us.ibm.com


   Henrik Holst
   i-data Printing Systems
   Vadstrupvej 35-43
   2880 Bagsvaerd, Denmark

   EMail: hh@I-data.com


   Peter Zehler
   Xerox Corporation
   800 Philips Road
   Webster, NY 14580

   EMail: PZehler@crt.xerox.com

   IPP Web Page:  http://www.pwg.org/ipp/
   IPP Mailing List:  ipp@pwg.org

   To subscribe to the ipp mailing list, send the following email:

      1) send it to majordomo@pwg.org
      2) leave the subject line blank
      3) put the following two lines in the message body:
         subscribe ipp
         end

   Implementers of this specification document are encouraged to join
   the IPP Mailing List in order to participate in any discussions of
   clarification issues and review of registration proposals for
   additional attributes and values.  In order to reduce spam the
   mailing list rejects mail from non-subscribers, so you must subscribe
   to the mailing list in order to send a question or comment to the
   mailing list.

   Other Participants:

   Chuck Adams - Tektronix            Shivaun Albright - HP

   Stefan Andersson - Axis            Jeff Barnett - IBM

   Ron Bergman - Hitachi Koki         Dennis Carney - IBM
   Imaging Systems

   Keith Carter - IBM                 Angelo Caruso - Xerox

   Rajesh Chawla - TR Computing       Nancy Chen - Okidata
   Solutions

   Josh Cohen - Microsoft             Jeff Copeland - QMS

   Andy Davidson - Tektronix          Roger deBry - IBM

   Maulik Desai - Auco                Mabry Dozier - QMS

   Lee Farrell - Canon Information    Satoshi Fujitami - Ricoh
   Systems

   Steve Gebert - IBM                 Sue Gleeson - Digital

   Charles Gordon - Osicom            Brian Grimshaw - Apple

   Jerry Hadsell - IBM                Richard Hart - Digital

   Tom Hastings - Xerox               Henrik Holst - I-data

   Stephen Holmstead                  Zhi-Hong Huang - Zenographics

   Scott Isaacson - Novell            Babek Jahromi - Microsoft

   Swen Johnson - Xerox               David Kellerman - Northlake
                                      Software

   Robert Kline - TrueSpectra         Charles Kong - Panasonic

   Carl Kugler - IBM                  Dave Kuntz - Hewlett-Packard

   Takami Kurono - Brother            Rick Landau - Digital

   Scott Lawrence - Agranot Systems   Greg LeClair - Epson

   Dwight Lewis - Lexmark             Harry Lewis - IBM

   Tony Liao - Vivid Image            Roy Lomicka - Digital

   Pete Loya - HP                     Ray Lutz - Cognisys

   Mike MacKay - Novell, Inc.         David Manchala - Xerox

   Carl-Uno Manros - Xerox            Jay Martin - Underscore

   Stan McConnell - Xerox             Larry Masinter - Xerox

   Sandra Matts - Hewlett Packard     Peter Michalek - Shinesoft

   Ira McDonald - High North Inc.     Mike Moldovan - G3 Nova

   Tetsuya Morita - Ricoh             Yuichi Niwa - Ricoh

   Pat Nogay - IBM                    Ron Norton - Printronics

   Hugo Parra, Novell                 Bob Pentecost - Hewlett-Packard

   Patrick Powell - Astart            Jeff Rackowitz - Intermec
   Technologies

   Eric Random - Peerless             Rob Rhoads - Intel

   Xavier Riley - Xerox               Gary Roberts - Ricoh

   David Roach - Unisys               Stuart Rowley - Kyocera

   Yuji Sasaki - Japan Computer       Richard Schneider - Epson
   Industry

   Kris Schoff - HP                   Katsuaki Sekiguchi - Canon

   Bob Setterbo - Adobe               Gail Songer - Peerless

   Hideki Tanaka - Canon              Devon Taylor - Novell, Inc.

   Mike Timperman - Lexmark           Atsushi Uchino - Epson

   Shigeru Ueda - Canon               Bob Von Andel - Allegro Software

   William Wagner - NetSilicon/DPI    Jim Walker - DAZEL

   Chris Wellens - Interworking Labs  Trevor Wells - Hewlett Packard

   Craig Whittle - Sharp Labs         Rob Whittle - Novell, Inc.

   Jasper Wong - Xionics              Don Wright - Lexmark

   Michael Wu - Heidelberg Digital    Rick Yardumian - Xerox

   Michael Yeung - Toshiba            Lloyd Young - Lexmark

   Atsushi Yuki - Kyocera             Peter Zehler - Xerox

   William Zhang- Canon Information   Frank Zhao - Panasonic
   Systems

   Steve Zilles - Adobe               Rob Zirnstein - Canon
                                      Information Systems

10. Description of the Base IPP Documents

   In addition to this document, the base set of IPP documents includes:

      Design Goals for an Internet Printing Protocol [RFC2567]
      Rationale for the Structure and Model and Protocol for the
      Internet
      Printing Protocol [RFC2568]
      Internet Printing Protocol/1.1: Model and Semantics [RFC2911]
      Internet Printing Protocol/1.1: Encoding and Transport [RFC2910]
      Mapping between LPD and IPP Protocols [RFC2569]

   The &quot;Design Goals for an Internet Printing Protocol&quot; document takes a
   broad look at distributed printing functionality, and it enumerates
   real-life scenarios that help to clarify the features that need to be

   included in a printing protocol for the Internet.  It identifies
   requirements for three types of users: end users, operators, and
   administrators.  It calls out a subset of end user requirements that
   are satisfied in IPP/1.0 [RFC2566, RFC2565].  A few OPTIONAL operator
   operations have been added to IPP/1.1 [RFC2911, RFC2910].

   The &quot;Rationale for the Structure and Model and Protocol for the
   Internet Printing Protocol&quot; document describes IPP from a high level
   view, defines a roadmap for the various documents that form the suite
   of IPP specification documents, and gives background and rationale
   for the IETF IPP working group&#x27;s major decisions.

   The &quot;Internet Printing Protocol/1.1: Model and Semantics&quot; document
   describes a simplified model with abstract objects, their attributes,
   and their operations.  The model introduces a Printer and a Job.  The
   Job supports multiple documents per Job.  The model document also
   addresses how security, internationalization, and directory issues
   are addressed.

   The &quot;Internet Printing Protocol/1.1: Encoding and Transport&quot; document
   is a formal mapping of the abstract operations and attributes defined
   in the model document onto HTTP/1.1 [RFC2616].  It also defines the
   encoding rules for a new Internet MIME media type called
   &quot;application/ipp&quot;.  This document also defines the rules for
   transporting a message body over HTTP whose Content-Type is
   &quot;application/ipp&quot;.  This document defines the &#x27;ipp&#x27; scheme for
   identifying IPP printers and jobs.

   The &quot;Mapping between LPD and IPP Protocols&quot; document gives some
   advice to implementers of gateways between IPP and LPD (Line Printer
   Daemon) implementations.

11  Full Copyright Statement

   Copyright (C) The Internet Society (2001).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   &quot;AS IS&quot; basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.


        </re>
        
    </body>
</html>
