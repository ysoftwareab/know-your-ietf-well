<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>An Interactive Voice
		Response (IVR) Control Package for the Media Control Channel
		Framework</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="An Interactive Voice
		Response (IVR) Control Package for the Media Control Channel
		Framework">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">S. McGlashan</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Hewlett-Packard</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">T. Melanchuk</td></tr>
<tr><td class="header">Expires: May 15, 2011</td><td class="header">Rain Willow Communications</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">C. Boulton</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">NS-Technologies</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 11, 2010</td></tr>
</table></td></tr></table>
<h1><br />An Interactive Voice
		Response (IVR) Control Package for the Media Control Channel
		Framework<br />draft-ietf-mediactrl-ivr-control-package-09</h1>

<h3>Abstract</h3>

<p>This document defines a Media Control Channel Framework
			Package for Interactive Voice Response (IVR) dialog
			interaction on media connections and conferences.  The
			package defines dialog management request elements for
			preparing, starting and terminating dialog interactions, as
			well as associated responses and notifications. Dialog
			interactions are specified in a dialog language.  This
			package defines a lightweight IVR dialog language
			(supporting prompt playback, runtime controls, Dual-Tone
			Multi-Frequency (DTMF) collection and media recording) and
			allows other dialog languages to be used.  The package also
			defines elements for auditing package capabilities and IVR
			dialogs.
            
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on May 15, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Conventions and Terminology<br />
<a href="#sec:Control_Package_Definition">3.</a>&nbsp;
Control Package
Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Control_Package_Name">3.1.</a>&nbsp;
Control Package Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Message_Usage">3.2.</a>&nbsp;
Framework Message Usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Common_XML">3.3.</a>&nbsp;
Common XML Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Control_Body">3.4.</a>&nbsp;
CONTROL Message Body<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:REPORT_Body">3.5.</a>&nbsp;
REPORT Message Body<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#audit">3.6.</a>&nbsp;
Audit<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#cfw_examples">3.7.</a>&nbsp;
Examples<br />
<a href="#defn.elements">4.</a>&nbsp;
Element Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.mscivr">4.1.</a>&nbsp;
&lt;mscivr><br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialogmgt">4.2.</a>&nbsp;
Dialog Management Elements<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialogprepare">4.2.1.</a>&nbsp;
&lt;dialogprepare><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialogstart">4.2.2.</a>&nbsp;
&lt;dialogstart><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.subscribe">4.2.2.1.</a>&nbsp;
&lt;subscribe><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dtmfsub">4.2.2.1.1.</a>&nbsp;
&lt;dtmfsub><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.stream">4.2.2.2.</a>&nbsp;
&lt;stream><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.region">4.2.2.2.1.</a>&nbsp;
&lt;region><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.priority">4.2.2.2.2.</a>&nbsp;
&lt;priority><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialogterminate">4.2.3.</a>&nbsp;
&lt;dialogterminate><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.response">4.2.4.</a>&nbsp;
&lt;response><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.event">4.2.5.</a>&nbsp;
&lt;event><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialogexit">4.2.5.1.</a>&nbsp;
&lt;dialogexit><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dtmfnotify">4.2.5.2.</a>&nbsp;
&lt;dtmfnotify><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.params">4.2.6.</a>&nbsp;
&lt;params><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.param">4.2.6.1.</a>&nbsp;
&lt;param><br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.ivrdialog">4.3.</a>&nbsp;
IVR Dialog Elements<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialog">4.3.1.</a>&nbsp;
&lt;dialog><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.prompt">4.3.1.1.</a>&nbsp;
&lt;prompt><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.variable">4.3.1.1.1.</a>&nbsp;
&lt;variable><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.variable.date">4.3.1.1.1.1.</a>&nbsp;
Date type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.variable.time">4.3.1.1.1.2.</a>&nbsp;
Time type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.variable.digits">4.3.1.1.1.3.</a>&nbsp;
Digits type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dtmf">4.3.1.1.2.</a>&nbsp;
&lt;dtmf><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.par">4.3.1.1.3.</a>&nbsp;
&lt;par><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.seq">4.3.1.1.3.1.</a>&nbsp;
&lt;seq><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.control">4.3.1.2.</a>&nbsp;
&lt;control><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.collect">4.3.1.3.</a>&nbsp;
&lt;collect><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.grammar">4.3.1.3.1.</a>&nbsp;
&lt;grammar><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.record">4.3.1.4.</a>&nbsp;
&lt;record><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.media">4.3.1.5.</a>&nbsp;
&lt;media><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialog.exit">4.3.2.</a>&nbsp;
Exit Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialog.promptinfo">4.3.2.1.</a>&nbsp;
&lt;promptinfo><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialog.controlinfo">4.3.2.2.</a>&nbsp;
&lt;controlinfo><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialog.controlmatch">4.3.2.2.1.</a>&nbsp;
&lt;controlmatch><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialog.collectinfo">4.3.2.3.</a>&nbsp;
&lt;collectinfo><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialog.recordinfo">4.3.2.4.</a>&nbsp;
&lt;recordinfo><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialog.mediainfo">4.3.2.4.1.</a>&nbsp;
&lt;mediainfo><br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.auditmgt">4.4.</a>&nbsp;
Audit Elements<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.audit">4.4.1.</a>&nbsp;
&lt;audit><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.auditresponse">4.4.2.</a>&nbsp;
&lt;auditresponse><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.codecs">4.4.2.1.</a>&nbsp;
&lt;codecs><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.codec">4.4.2.1.1.</a>&nbsp;
&lt;codec><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.capabilities">4.4.2.2.</a>&nbsp;
&lt;capabilities><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialoglanguages">4.4.2.2.1.</a>&nbsp;
&lt;dialoglanguages><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.grammartypes">4.4.2.2.2.</a>&nbsp;
&lt;grammartypes><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.recordtypes">4.4.2.2.3.</a>&nbsp;
&lt;recordtypes><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.prompttypes">4.4.2.2.4.</a>&nbsp;
&lt;prompttypes><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.variables">4.4.2.2.5.</a>&nbsp;
&lt;variables><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.variabletype">4.4.2.2.5.1.</a>&nbsp;
&lt;variabletype><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.maxpreparedduration">4.4.2.2.6.</a>&nbsp;
&lt;maxpreparedduration><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.maxrecordduration">4.4.2.2.7.</a>&nbsp;
&lt;maxrecordduration><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialogs">4.4.2.3.</a>&nbsp;
&lt;dialogs><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.dialogaudit">4.4.2.3.1.</a>&nbsp;
&lt;dialogaudit><br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.statuscodes">4.5.</a>&nbsp;
Response Status Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defn.types">4.6.</a>&nbsp;
Type Definitions<br />
<a href="#schema">5.</a>&nbsp;
Formal Syntax<br />
<a href="#examples">6.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#examples.protocol">6.1.</a>&nbsp;
AS-MS Dialog Interaction Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">6.1.1.</a>&nbsp;
Starting an IVR dialog<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">6.1.2.</a>&nbsp;
IVR dialog fails to start<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">6.1.3.</a>&nbsp;
Preparing and starting an IVR dialog<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">6.1.4.</a>&nbsp;
Terminating a dialog<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#examples.templates">6.2.</a>&nbsp;
IVR Dialog Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">6.2.1.</a>&nbsp;
Playing announcements<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">6.2.2.</a>&nbsp;
Prompt and collect<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">6.2.3.</a>&nbsp;
Prompt and record<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">6.2.4.</a>&nbsp;
Runtime controls<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">6.2.5.</a>&nbsp;
Subscriptions and notifications<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">6.2.6.</a>&nbsp;
Dialog repetition until DTMF collection complete<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#examples.otherdialoglanguages">6.3.</a>&nbsp;
Other Dialog Languages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#examples.foreignnamespaces">6.4.</a>&nbsp;
Foreign Namespace Attributes and Elements<br />
<a href="#security">7.</a>&nbsp;
Security Considerations<br />
<a href="#sec:IANA_Considerations">8.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Control_Package_Reg">8.1.</a>&nbsp;
Control Package Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:URN_Reg">8.2.</a>&nbsp;
URN Sub-Namespace Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:XML_SCHEMA_IANA">8.3.</a>&nbsp;
XML Schema Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:MIME_Reg">8.4.</a>&nbsp;
MIME Media Type Registration for 
'application/msc-ivr+xml'<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Prompt_Variable_Type_Reg">8.5.</a>&nbsp;
IVR Prompt Variable Type Registration Information<br />
<a href="#voicexml">9.</a>&nbsp;
Using VoiceXML as a dialog language<br />
<a href="#anchor12">10.</a>&nbsp;
Change Summary<br />
<a href="#anchor13">11.</a>&nbsp;
Contributors<br />
<a href="#anchor14">12.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">13.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">13.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">13.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The Media Control Channel Framework (<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>) provides a generic
approach for establishment and reporting capabilities of remotely
initiated commands.  The Channel Framework - an equivalent term for the
Media Control Channel Framework - utilizes many functions provided by
the Session Initiation Protocol <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> (SIP) for the
rendezvous and establishment of a reliable channel for control
interactions.  The Control Framework also introduces the concept of a
Control Package.  A Control Package is an explicit usage of the Control
Framework for a particular interaction set.  This document defines a
Control Package for Interactive Voice Response (IVR) dialogs on media
connections and conferences. The term 'dialog' in this document refers
to an IVR dialog and is completely unrelated to the notion of a SIP
dialog. The term 'IVR' is used in its inclusive sense, allowing media
other than voice for dialog interaction.

</p>
<p>The package defines dialog management request elements for preparing,
starting and terminating dialog interactions, as well as associated
responses and notifications. Dialog interactions are specified using a
dialog language where the language specifies a well-defined syntax and
semantics for permitted operations (play a prompt, record input from the
user, etc).  This package defines a lightweight IVR dialog language
(supporting prompt playback, runtime controls, DTMF collection and media
recording) and allows other dialog languages to be used. These dialog
languages are specified inside dialog management elements for preparing
and starting dialog interactions. The package also defines elements for
auditing package capabilities and IVR dialogs.

</p>
<p>This package has been designed to satisfy IVR requirements documented
in the Media Server Control Protocol Requirements document (<a class='info' href='#RFC5167'>[RFC5167]<span> (</span><span class='info'>Dolly, M. and R. Even, &ldquo;Media Server Control Protocol Requirements,&rdquo; March&nbsp;2008.</span><span>)</span></a>); more specifically REQ-MCP-28, REQ-MCP-29 and
REQ-MCP-30. It achieves this by building upon two major approaches to
IVR dialog design. These approaches address a wide range of IVR use
cases and are used in many applications which are extensively deployed
today.

</p>
<p>First, the package is designed to provide the major IVR functionality
of SIP Media Server languages such as netann (<a class='info' href='#RFC4240'>[RFC4240]<span> (</span><span class='info'>Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;Basic Network Media Services with SIP,&rdquo; December&nbsp;2005.</span><span>)</span></a>),
MSCML (<a class='info' href='#RFC5022'>[RFC5022]<span> (</span><span class='info'>Van Dyke, J., Burger, E., and A. Spitzer, &ldquo;Media Server Control Markup Language (MSCML) and Protocol,&rdquo; September&nbsp;2007.</span><span>)</span></a>) and MSML (<a class='info' href='#RFC5707'>[RFC5707]<span> (</span><span class='info'>Saleem, A., Xin, Y., and G. Sharratt, &ldquo;Media Server Markup Language (MSML),&rdquo; February&nbsp;2010.</span><span>)</span></a>)
which themselves build upon more traditional non-SIP languages (<a class='info' href='#H.248.9'>[H.248.9]<span> (</span><span class='info'>, &ldquo;Gateway control protocol: Advanced media server packages,&rdquo; .</span><span>)</span></a>, <a class='info' href='#RFC2897'>[RFC2897]<span> (</span><span class='info'>Cromwell, D., &ldquo;Proposal for an MGCP Advanced Audio Package,&rdquo; August&nbsp;2000.</span><span>)</span></a>). A key differentiator is
that this package provides IVR functionality using the Channel
Framework.

</p>
<p>Second, its design is aligned with key concepts of the web model as
defined in W3C Voice Browser languages. The key dialog management
mechanism is closely aligned with CCXML (<a class='info' href='#CCXML10'>[CCXML10]<span> (</span><span class='info'>Auburn, R J., &ldquo;Voice Browser Call Control: CCXML Version 1.0,&rdquo; April&nbsp;2010.</span><span>)</span></a>). The
dialog functionality defined in this package can be largely seen as a
subset of VoiceXML (<a class='info' href='#VXML20'>[VXML20]<span> (</span><span class='info'>McGlashan, S., Burnett, D., Carter, J., Danielsen, P., Ferrans, J., Hunt, A., Lucas, B., Porter, B., Rehor, K., and S. Tryphonas, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 2.0,&rdquo; March&nbsp;2004.</span><span>)</span></a>, <a class='info' href='#VXML21'>[VXML21]<span> (</span><span class='info'>Oshry, M., Auburn, RJ., Baggia, P., Bodell, M., Burke, D., Burnett, D., Candell, E., Carter, J., McGlashan, S., Lee, A., Porter, B., and K. Rehor, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 2.1,&rdquo; June&nbsp;2007.</span><span>)</span></a>):
where possible, basic prompting, DTMF collection and media recording
features are incorporated, but not any advanced VoiceXML constructs
(such as &lt;form>, its interpretation algorithm, or a dynamic data
model). As W3C develops VoiceXML 3.0 (<a class='info' href='#VXML30'>[VXML30]<span> (</span><span class='info'>McGlashan, S., Burnett, D., Akolkar, R., Auburn, RJ., Baggia, P., Barnett, J., Bodell, M., Carter, J., Oshry, M., Rehor, K., Young, M., and R. Hosn, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 3.0,&rdquo; August&nbsp;2010.</span><span>)</span></a>), we
expect to see further alignment, especially in providing a set of basic
independent primitive elements (such as prompt, collect, record and
runtime controls) which can be re-used in different dialog languages.

</p>
<p>By reusing and building upon design patterns from these approaches to
IVR languages, this package is intended to provide a foundation which is
familiar to current IVR developers and sufficient for most IVR
applications, as well as a path to other languages which address more
advanced applications.

</p>
<p>This control package defines a lightweight IVR dialog language. The
scope of this dialog language is the following IVR functionality:

</p>
<ul class="text">
<li>playing one or more media resources as a prompt to the user
</li>
<li>runtime controls (including VCR controls like speed and volume) 
</li>
<li>collecting DTMF input from the user according to a grammar
</li>
<li>recording user media input
</li>
</ul><p>
Out of scope for this dialog language are more advanced functions
including ASR (Automatic Speech Recognition), TTS (Text-to-Speech), fax,
automatic prompt recovery ('media fallback') and media
transformation. Such functionality can be addressed by other dialog
languages (such as VoiceXML) used with this package, extensions to this
package (addition of foreign elements or attributes from another
namespace) or other control packages. 

</p>
<p>The functionality of this package is defined by messages, containing
XML <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C M., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Third Edition),&rdquo; February&nbsp;2004.</span><span>)</span></a> elements, transported using the Media Control
Channel Framework. The XML elements can be divided into three types:
dialog management elements; a dialog element which defines a lightweight
IVR dialog language used with dialog management elements; and finally,
elements for auditing package capabilities as well as dialogs managed by
the package.

</p>
<p>Dialog management elements are designed to manage the general
lifecycle of a dialog. Elements are provided for preparing a dialog,
starting the dialog on a conference or connection, and terminating
execution of a dialog. Each of these elements is contained in a Media
Control Channel Framework CONTROL message sent to the media server. When
the appropriate action has been executed, the media server sends a
REPORT message (or a 200 response to the CONTROL if it can execute in
time) with a response element indicating whether the operation was
successful or not (e.g. if the dialog cannot be started, then the error
is reported in this response). Once a dialog has been successfully
started, the media server can send further event notifications in a
framework CONTROL message. This package defines two event notifications:
a DTMF event indicating the DTMF activity; and a dialogexit event
indicating that the dialog has exited. If the dialog has executed
successfully, the dialogexit event includes information collected during
the dialog. If an error occurs during execution (e.g. a media resource
failed to play, no recording resource available, etc), then error
information is reported in the dialogexit event. Once a dialogexit event
is sent, the dialog lifecycle is terminated. 
</p>
<p>The dialog management elements for preparing and starting a dialog
specify the dialog using a dialog language. A dialog language has
well-defined syntax and semantics for defined dialog
operations. Typically dialog languages are written in XML where the root
element has a designated XML namespace and, when used as standalone
documents, have an associated MIME media type. For example, VoiceXML is
an XML dialog language with the root element &lt;vxml> with the
designated namespace 'http://www.w3.org/2001/vxml' and standalone
documents are associated with the MIME media type
'application/voicexml+xml' (<a class='info' href='#RFC4267'>[RFC4267]<span> (</span><span class='info'>Froumentin, M., &ldquo;The W3C Speech Interface Framework Media Types: application/voicexml+xml, application/ssml+xml, application/srgs, application/srgs+xml, application/ccxml+xml, and application/pls+xml,&rdquo; November&nbsp;2005.</span><span>)</span></a>).
</p>
<p>This control package defines its own lightweight IVR dialog language.
The language has a root element (&lt;dialog>) with the same designated
namespace as used for other elements defined in this package (see <a class='info' href='#sec:URN_Reg'>Section&nbsp;8.2<span> (</span><span class='info'>URN Sub-Namespace Registration</span><span>)</span></a>). The root element contains child elements for
playing prompts to the user, specifying runtime controls, collecting
DTMF input from the user and recording media input from the user. The
child elements can co-occur so as to provide 'play announcement',
'prompt and collect' as well as 'prompt and record' functionality.

</p>
<p>The dialog management elements for preparing and starting a dialog
can specify the dialog language either by including inline a fragment
with the root element or by referencing an external dialog document. The
dialog language defined in this package is specified inline. Other
dialog languages, such as VoiceXML, can be used by referencing an
external dialog document.

</p>
<p>The document is organized as follows.  

<a class='info' href='#sec:Control_Package_Definition'>Section&nbsp;3<span> (</span><span class='info'>Control Package Definition</span><span>)</span></a> describes how this
control package fulfills the requirements for a Media Control Channel
Framework control package.


<a class='info' href='#defn.elements'>Section&nbsp;4<span> (</span><span class='info'>Element Definitions</span><span>)</span></a> describes the syntax and semantics of
defined elements, including dialog management (<a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a>), the IVR dialog element (<a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>) and audit elements (<a class='info' href='#defn.auditmgt'>Section&nbsp;4.4<span> (</span><span class='info'>Audit Elements</span><span>)</span></a>).

<a class='info' href='#schema'>Section&nbsp;5<span> (</span><span class='info'>Formal Syntax</span><span>)</span></a> describes an XML schema for these elements and
provides extensibility by allowing attributes and elements from other
namespaces.

<a class='info' href='#examples'>Section&nbsp;6<span> (</span><span class='info'>Examples</span><span>)</span></a> provides examples of package usage.

<a class='info' href='#security'>Section&nbsp;7<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> describes important security considerations
for use of this control package. <a class='info' href='#sec:IANA_Considerations'>Section&nbsp;8<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a> provides information on IANA
registration of this control package, including its name, XML namespace
and MIME media type. It also establishes a registry for prompt
variables. Finally, <a class='info' href='#voicexml'>Section&nbsp;9<span> (</span><span class='info'>Using VoiceXML as a dialog language</span><span>)</span></a> provides additional
information on using VoiceXML when supported as an external dialog
language.

</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions and Terminology</h3>

<p>In this document, <a class='info' href='#RFC2119'>BCP 14<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119]
defines the key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY",
and "OPTIONAL".  In addition, BCP 15 indicates requirement levels for
compliant implementations.  
</p>
<p>The following additional terms are defined for use in this document:
			
</p>
<blockquote class="text"><dl>
<dt>Dialog:</dt>
<dd>A dialog performs media interaction with a user
following the concept of an IVR (Interactive Voice Response) dialog
(this sense of 'dialog' is completely unrelated to a SIP dialog).  A
dialog is specified as inline XML, or via a URI reference to an external
dialog document.  Traditional IVR dialogs typically feature capabilities
such as playing audio prompts, collecting DTMF input and recording audio
input from the user. More inclusive definitions include support for
other media types, runtime controls, synthesized speech, recording and
playback of video, recognition of spoken input, and mixed initiative
conversations.
</dd>
<dt>Application server:</dt>
<dd>A SIP <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>
application server (AS) hosts and executes services such as interactive
media and conferencing in an operator's network. An AS influences and
impacts the SIP session, in particular by terminating SIP sessions on a
media server, which is under its control.
</dd>
<dt>Media Server:</dt>
<dd>A media server (MS) processes media streams
on behalf of an AS by offering functionality such as interactive media,
conferencing, and transcoding to the end user. Interactive media
functionality is realized by way of dialogs which are initiated by the
application server.  
</dd>
</dl></blockquote><p>

</p>
<a name="sec:Control_Package_Definition"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Control Package
Definition</h3>

<p>This section fulfills the mandatory requirement for information that
MUST be specified during the definition of a Control Framework Package,
as detailed in Section 8 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="sec:Control_Package_Name"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Control Package Name</h3>

<p>The Control Framework requires a Control Package to specify and
register a unique name.
</p>
<p>The name of this Control Package is "msc-ivr/1.0" (Media Server
Control - Interactive Voice Response - version 1.0). Its IANA
registration is specified in <a class='info' href='#sec:Control_Package_Reg'>Section&nbsp;8.1<span> (</span><span class='info'>Control Package Registration</span><span>)</span></a>. 
</p>
<p>
Since this is the initial ("1.0") version of the control package, there
are no backwards compatibility issues to address.

</p>
<a name="sec:Message_Usage"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Framework Message Usage</h3>

<p>The Control Framework requires a Control Package to explicitly detail
the control messages that can be used as well as provide an indication
of directionality between entities. This will include which role type is
allowed to initiate a request type. 
</p>
<p>This package specifies CONTROL and response messages in terms of XML
elements defined in <a class='info' href='#defn.elements'>Section&nbsp;4<span> (</span><span class='info'>Element Definitions</span><span>)</span></a>, where the message
bodies have the MIME media type defined in <a class='info' href='#sec:MIME_Reg'>Section&nbsp;8.4<span> (</span><span class='info'>MIME Media Type Registration for  'application/msc-ivr+xml'</span><span>)</span></a>. These elements describe requests, response and
notifications and all are contained within a root &lt;mscivr> element
(<a class='info' href='#defn.mscivr'>Section&nbsp;4.1<span> (</span><span class='info'>&lt;mscivr></span><span>)</span></a>).
</p>
<p>In this package, the MS operates as a Control Server in
receiving requests from, and sending responses to, the AS (operating as
 Control Client). Dialog management requests and responses are
defined in <a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a>.  Audit requests and
responses are defined in <a class='info' href='#defn.auditmgt'>Section&nbsp;4.4<span> (</span><span class='info'>Audit Elements</span><span>)</span></a>. dialog
management and audit responses are carried in a framework 200 response
or REPORT message bodies. This package's response codes are defined in
<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>. 
</p>
<p>Note that package responses are different from framework response
codes. Framework error response codes (see Section 8 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>) are used when the
request or event notification is invalid; for example, a request is
invalid XML (400), or not understood (500). 
</p>
<p>The MS also operates as a Control Client in sending event
notification to the AS (Control Server). Event notifications
(<a class='info' href='#defn.event'>Section&nbsp;4.2.5<span> (</span><span class='info'>&lt;event></span><span>)</span></a>) are carried in CONTROL message bodies. The
AS MUST respond with a Control Framework 200 response.

</p>
<a name="sec:Common_XML"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Common XML Support</h3>

<p>The Control Framework requires a Control Package definition to
specify if the attributes for media dialog or conference references are
required.
</p>
<p>This package requires that the XML Schema in Section 16.1 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a> MUST be supported
for media dialogs and conferences. 
</p>
<p>The package uses "connectionid" and "conferenceid" attributes for
various element definitions (<a class='info' href='#defn.elements'>Section&nbsp;4<span> (</span><span class='info'>Element Definitions</span><span>)</span></a>). The XML
schema (<a class='info' href='#schema'>Section&nbsp;5<span> (</span><span class='info'>Formal Syntax</span><span>)</span></a>) imports the definitions of these
attributes from the framework schema.

</p>
<a name="sec:Control_Body"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
CONTROL Message Body</h3>

<p>The Control Framework requires a Control Package to define the
control body that can be contained within a CONTROL command request and
to indicate the location of detailed syntax definitions and semantics
for the appropriate body types.

</p>
<p>When operating as Control Server, the MS receives CONTROL
messages body with the MIME media type defined in <a class='info' href='#sec:MIME_Reg'>Section&nbsp;8.4<span> (</span><span class='info'>MIME Media Type Registration for  'application/msc-ivr+xml'</span><span>)</span></a> and containing an &lt;mscivr> element (<a class='info' href='#defn.mscivr'>Section&nbsp;4.1<span> (</span><span class='info'>&lt;mscivr></span><span>)</span></a>) with either a dialog management or audit request
child element.

</p>
<p>The following dialog management request elements are carried in
CONTROL message bodies to MS: &lt;dialogprepare> (<a class='info' href='#defn.dialogprepare'>Section&nbsp;4.2.1<span> (</span><span class='info'>&lt;dialogprepare></span><span>)</span></a>), &lt;dialogstart> (<a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>) and &lt;dialogterminate> (<a class='info' href='#defn.dialogterminate'>Section&nbsp;4.2.3<span> (</span><span class='info'>&lt;dialogterminate></span><span>)</span></a>)elements.

</p>
<p> The &lt;audit> request element (<a class='info' href='#defn.audit'>Section&nbsp;4.4.1<span> (</span><span class='info'>&lt;audit></span><span>)</span></a>) is also
carried in CONTROL message bodies.

</p>
<p>When operating as Control Client, the MS sends CONTROL messages with
the MIME media type defined in <a class='info' href='#sec:MIME_Reg'>Section&nbsp;8.4<span> (</span><span class='info'>MIME Media Type Registration for  'application/msc-ivr+xml'</span><span>)</span></a> and a body
containing an &lt;mscivr> element (<a class='info' href='#defn.mscivr'>Section&nbsp;4.1<span> (</span><span class='info'>&lt;mscivr></span><span>)</span></a>) with a
notification &lt;event> child element (<a class='info' href='#defn.event'>Section&nbsp;4.2.5<span> (</span><span class='info'>&lt;event></span><span>)</span></a>).

</p>
<a name="sec:REPORT_Body"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
REPORT Message Body</h3>

<p>The Control Framework requires a control package definition to define
the REPORT body that can be contained within a REPORT command request,
or that no report package body is required. This section indicates
the location of detailed syntax definitions and semantics for the
appropriate body types.

</p>
<p>When operating as Control Server, the MS sends REPORT
bodies with the MIME media type defined in <a class='info' href='#sec:MIME_Reg'>Section&nbsp;8.4<span> (</span><span class='info'>MIME Media Type Registration for  'application/msc-ivr+xml'</span><span>)</span></a>
and containing a &lt;mscivr> element (<a class='info' href='#defn.mscivr'>Section&nbsp;4.1<span> (</span><span class='info'>&lt;mscivr></span><span>)</span></a>) with
a response child element.  The response element for dialog management
requests is a &lt;response> element (<a class='info' href='#defn.response'>Section&nbsp;4.2.4<span> (</span><span class='info'>&lt;response></span><span>)</span></a>). The response element for an audit request is
a &lt;auditresponse> element (<a class='info' href='#defn.auditresponse'>Section&nbsp;4.4.2<span> (</span><span class='info'>&lt;auditresponse></span><span>)</span></a>).

</p>
<a name="audit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6"></a><h3>3.6.&nbsp;
Audit</h3>

<p>The Control Framework encourages Control Packages to specify whether
auditing is available, how it is triggered as well as the query/response
formats. 
</p>
<p>This Control Packages supports auditing of package capabilities and
dialogs on the MS. An audit request is carried in a CONTROL message (see
<a class='info' href='#sec:Control_Body'>Section&nbsp;3.4<span> (</span><span class='info'>CONTROL Message Body</span><span>)</span></a>) and an audit response in a REPORT
message (or a 200 response to the CONTROL if it can execute the audit in
time) (see <a class='info' href='#sec:REPORT_Body'>Section&nbsp;3.5<span> (</span><span class='info'>REPORT Message Body</span><span>)</span></a>).

</p>
<p>The syntax and semantics of audit request and response elements is
defined in <a class='info' href='#defn.auditmgt'>Section&nbsp;4.4<span> (</span><span class='info'>Audit Elements</span><span>)</span></a>.
</p>
<a name="cfw_examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7"></a><h3>3.7.&nbsp;
Examples</h3>

<p>The Control Framework recommends Control Packages to provide a range
of message flows that represent common flows using the package and this
framework document. 
</p>
<p>This Control Package provides examples of such message flows in 
<a class='info' href='#examples'>Section&nbsp;6<span> (</span><span class='info'>Examples</span><span>)</span></a>.
</p>
<a name="defn.elements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Element Definitions</h3>

<p>This section defines the XML elements for this package.  The elements
are defined in the XML namespace specified in <a class='info' href='#sec:URN_Reg'>Section&nbsp;8.2<span> (</span><span class='info'>URN Sub-Namespace Registration</span><span>)</span></a>.

</p>
<p>The root element is &lt;mscivr> (<a class='info' href='#defn.mscivr'>Section&nbsp;4.1<span> (</span><span class='info'>&lt;mscivr></span><span>)</span></a>).  All
other XML elements (requests, responses and notification elements) are
contained within it.  Child elements describe dialog management (<a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a>) and audit (<a class='info' href='#defn.auditmgt'>Section&nbsp;4.4<span> (</span><span class='info'>Audit Elements</span><span>)</span></a>)
functionality. The IVR dialog element (contained within dialog
management elements) is defined in <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>. Response status codes are defined in <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a> and type definitions in <a class='info' href='#defn.types'>Section&nbsp;4.6<span> (</span><span class='info'>Type Definitions</span><span>)</span></a>.

</p>
<p>Implementation of this control package MUST address the Security
Considerations described in <a class='info' href='#security'>Section&nbsp;7<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>. 
</p>
<p>Implementation of this control package MUST adhere to the syntax and
semantics of XML elements defined in this section and the schema (<a class='info' href='#schema'>Section&nbsp;5<span> (</span><span class='info'>Formal Syntax</span><span>)</span></a>).  Since XML Schema is unable to support some types of
syntactic constraints (such as attribute and element co-occurrence),
some elements in this package specify additional syntactic constraints
in their textual definition. If there is a difference in constraints
between the XML schema and the textual description of elements in this
section, the textual definition takes priority.

</p>
<p>The XML schema supports extensibility by allowing attributes and
elements from other namespaces. Implementations MAY support additional
capabilities by means of attributes and elements from other (foreign)
namespaces. Attributes and elements from foreign namespaces are not
described in this section.

</p>
<p>Some elements in this control package contain attributes whose value
is a URI. These elements include: &lt;dialogprepare> (<a class='info' href='#defn.dialogprepare'>Section&nbsp;4.2.1<span> (</span><span class='info'>&lt;dialogprepare></span><span>)</span></a>), &lt;dialogstart> (<a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>), &lt;media> (<a class='info' href='#defn.media'>Section&nbsp;4.3.1.5<span> (</span><span class='info'>&lt;media></span><span>)</span></a>),
&lt;grammar> (<a class='info' href='#defn.grammar'>Section&nbsp;4.3.1.3.1<span> (</span><span class='info'>&lt;grammar></span><span>)</span></a>), and &lt;record> (<a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>).  The MS MUST support both HTTP (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>) and HTTPS (<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a>) protocol
schemes for fetching and uploading resources and the MS MAY support
other schemes.
</p>
<p>Some elements in this control package contain attributes whose value
is descriptive text. Since the descriptive text is for diagnostic use
only, and is neither a protocol element nor intended for user display,
the descriptive text does not require a language indicator such as a
language tag (<a class='info' href='#RFC2277'>[RFC2277]<span> (</span><span class='info'>Alvestrand, H., &ldquo;IETF Policy on Character Sets and Languages,&rdquo; January&nbsp;1998.</span><span>)</span></a>) and thus does not carry one.
These comprise: the reason attribute on &lt;response> (<a class='info' href='#defn.response'>Section&nbsp;4.2.4<span> (</span><span class='info'>&lt;response></span><span>)</span></a>), &lt;dialogexit> (<a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>) and &lt;auditresponse> (<a class='info' href='#defn.auditresponse'>Section&nbsp;4.4.2<span> (</span><span class='info'>&lt;auditresponse></span><span>)</span></a>); desc attribute on &lt;variabletype>
and &lt;format> (<a class='info' href='#defn.variabletype'>Section&nbsp;4.4.2.2.5.1<span> (</span><span class='info'>&lt;variabletype></span><span>)</span></a>).

</p>
<p>Usage examples are provided in <a class='info' href='#examples'>Section&nbsp;6<span> (</span><span class='info'>Examples</span><span>)</span></a>. 
</p>
<a name="defn.mscivr"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
&lt;mscivr></h3>

<p>The &lt;mscivr> element has the following attributes (in addition to
standard XML namespace attributes such as xmlns):

</p>
<blockquote class="text"><dl>
<dt>version:</dt>
<dd>a string specifying the mscivr package
version. The value is fixed as '1.0' for this version of the
package. The attribute is mandatory.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;mscivr> element has the following defined child elements,
only one of which can occur:

</p>
<ol class="text">
<li>dialog management elements defined in <a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a>:


<blockquote class="text"><dl>
<dt>&lt;dialogprepare></dt>
<dd>prepare a dialog. See <a class='info' href='#defn.dialogprepare'>Section&nbsp;4.2.1<span> (</span><span class='info'>&lt;dialogprepare></span><span>)</span></a>
</dd>
<dt>&lt;dialogstart></dt>
<dd>start a dialog. See <a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>
</dd>
<dt>&lt;dialogterminate></dt>
<dd>terminate a dialog. See <a class='info' href='#defn.dialogterminate'>Section&nbsp;4.2.3<span> (</span><span class='info'>&lt;dialogterminate></span><span>)</span></a>
</dd>
<dt>&lt;response></dt>
<dd>response to a dialog request. See <a class='info' href='#defn.response'>Section&nbsp;4.2.4<span> (</span><span class='info'>&lt;response></span><span>)</span></a>
</dd>
<dt>&lt;event></dt>
<dd>dialog or subscription notification. See <a class='info' href='#defn.event'>Section&nbsp;4.2.5<span> (</span><span class='info'>&lt;event></span><span>)</span></a>
</dd>
</dl></blockquote>


</li>
<li>audit elements defined in <a class='info' href='#defn.auditmgt'>Section&nbsp;4.4<span> (</span><span class='info'>Audit Elements</span><span>)</span></a>:


<blockquote class="text"><dl>
<dt>&lt;audit></dt>
<dd>audit package capabilities and managed
dialogs. See <a class='info' href='#defn.audit'>Section&nbsp;4.4.1<span> (</span><span class='info'>&lt;audit></span><span>)</span></a>
</dd>
<dt>&lt;auditresponse></dt>
<dd>response to an audit request. See <a class='info' href='#defn.auditresponse'>Section&nbsp;4.4.2<span> (</span><span class='info'>&lt;auditresponse></span><span>)</span></a>
</dd>
</dl></blockquote>


</li>
</ol><p>


</p>
<p>For example, a request to the MS to start an IVR dialog playing a
prompt:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="ssd3r3:sds345b"&gt;
  &lt;dialog&gt;
   &lt;prompt&gt;
    &lt;media loc="http://www.example.com/welcome.wav"/&gt;
   &lt;/prompt&gt;
  &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>and a response from the MS that the dialog started successfully:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;response status="200" dialogid="d1"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>and finally a notification from the MS indicating that the dialog
exited upon completion of playing the prompt:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="d1"&gt;
  &lt;dialogexit status="1"&gt;
   &lt;promptinfo termmode="completed"/&gt;
  &lt;/dialogexit&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>



</p>
<a name="defn.dialogmgt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Dialog Management Elements</h3>

<p>This section defines the dialog management XML elements for this
control package. These elements are divided into requests, responses and
notifications.

</p>
<p>Request elements are sent to the MS to request a specific dialog
operation to be executed. The following request elements are defined:

</p>
<blockquote class="text"><dl>
<dt>&lt;dialogprepare>:</dt>
<dd> prepare a dialog for later
 execution 
</dd>
<dt>&lt;dialogstart>:</dt>
<dd> start a (prepared) dialog on a connection or
 conference
</dd>
<dt>&lt;dialogterminate>:</dt>
<dd>terminate a dialog
</dd>
</dl></blockquote><p>

</p>
<p>Responses from the MS describe the status of the requested operation.
Responses are specified in a &lt;response> element (<a class='info' href='#defn.response'>Section&nbsp;4.2.4<span> (</span><span class='info'>&lt;response></span><span>)</span></a>) which includes a mandatory attribute
describing the status in terms of a numeric code. Response status codes
are defined in <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>. The MS MUST respond to
a request message with a response message.  If the MS is not able to
process the request and carry out the dialog operation, the request has
failed and the MS MUST indicate the class of failure using an
appropriate 4xx response code. Unless an error response code is
specified for a class of error within this section, implementations
follow <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a> in determining the appropriate
status code for the response.

</p>
<p>Notifications are sent from the MS to provide updates on the status
of a dialog or operations defined within the dialog.  Notifications are
specified in an &lt;event> element (<a class='info' href='#defn.event'>Section&nbsp;4.2.5<span> (</span><span class='info'>&lt;event></span><span>)</span></a>). 
</p><br /><hr class="insert" />
<a name="fig:dialog_lifecycle"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                            +---------+
                            |  IDLE   |
                            +---------+
                              |     |
                              |     |
              &lt;dialogprepare&gt;/|     |&lt;dialogstart&gt;/
                              |     |
          +---------+         |     |             +---------+
 +-----&lt;--|         |&lt;--------+     +------------&gt;|         |+------&gt;-+
 | +-&lt;----|PREPARING|                             |STARTING |         |
 | |      |         |                 -----------&gt;|         |----&gt;--+ |
 | |      +---------+                /            +---------+       | |
 | |           |                    /                  |            | |
 | |           |/200 response      /      /200 response|            | |
 | |           |                  /                    |            | |
 | |           |                 /                     |            | |
 | |           |                /                      |            | |
 V V           v               /&lt;dialogstart&gt;/         v            | |
 | |      +---------+         /                   +---------+       | |
 | |      |         |--------+               +----|         |       | |
 | |      |PREPARED |---------+              |    | STARTED |       | |
 | |      |         |         |              +---&gt;|         |       | |
 | |      |         |--------+| &lt;dialogterminate&gt;/|         |       | |
 | |      +---------+        ||  200 response     +---------+       | |
 | |                         ||                    |                | |
 | | /dialogexit notification||                    |                | |
 | |           (timeout)     ||                    |                | |
 | |                         ||                    |                | |
 | |                         ||                    |                | |
 | |                         ||                    |                | |
 | |                         ||&lt;dialogterminate&gt;/  |                | |
 | |                         ||  200 response      |                | |
 | |                         ||       +            |/dialogexit     | |
 | |                         || /dialogexit        | notification   | |
 | |                         || notification       |                | |
 | |                         ||                    |                | |
 | |                         vv                    |                | |
 | |      /ERROR response  +-----------+           |                | |
 | +----------------------&gt;|           |&lt;----------+ /ERROR response| |
 +------------------------&gt;|TERMINATED |&lt;---------------------------+ |
      &lt;dialogterminate&gt;/   |           |&lt;-----------------------------+
          410 response     +-----------+ &lt;dialogterminate&gt;/410 response

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Dialog Lifecycle&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The MS implementation MUST adhere to the dialog lifecycle shown in
<a class='info' href='#fig:dialog_lifecycle'>Figure&nbsp;1<span> (</span><span class='info'>Dialog Lifecycle</span><span>)</span></a>, where each dialog has the
following states:

</p>
<blockquote class="text"><dl>
<dt>IDLE:</dt>
<dd>the dialog is uninitialized. 
</dd>
<dt>PREPARING:</dt>
<dd>the dialog is being prepared. The dialog is
 assigned a valid dialog identifier (see below).  If an error occurs the
 dialog transitions to the TERMINATED state and the MS MUST send a
 response indicating the error.  If the dialog is terminated before
 preparation is complete, the dialog transitions to the TERMINATED state
 and the MS MUST send a 410 response (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>)
 for the prepare request.

</dd>
<dt>PREPARED:</dt>
<dd>the dialog has been successfully prepared and
 the MS MUST send a 200 response indicating the prepare operation was
 successful.  If the dialog is terminated, then the MS MUST send a 200
 response, the dialog transitions to the TERMINATED state and the MS
 MUST send a dialogexit notification event (see <a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>). If the duration the dialog remains in the
 PREPARED state exceeds the maximum preparation duration, the dialog
 transitions to the TERMINATED state and the MS MUST send a dialogexit
 notification with the appropriate error status code (see <a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>). A maximum preparation duration of 300s is
 RECOMMENDED.

</dd>
<dt>STARTING:</dt>
<dd>the dialog is being started. If the dialog has
 not already been prepared, it is first prepared and assigned a valid
 dialog identifier (see below).  If an error occurs the dialog
 transitions to the TERMINATED state and the MS MUST send a response
 indicating the error.  If the dialog is terminated, the dialog
 transitions to the TERMINATED state and the MS MUST send a 410 response
 (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>) for the start request.
</dd>
<dt>STARTED:</dt>
<dd>the dialog has been successfully started and is
 now active. The MS MUST send a 200 response indicating the start
 operation was successful.  If any dialog events occurs which were
 subscribed to, the MS MUST send a notifications when the dialog event
 occurs.  When the dialog exits (due to normal termination, an error or
 a terminate request), the MS MUST send a dialogexit notification event
 (see <a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>) and the dialog transitions to
 the TERMINATED state.

</dd>
<dt>TERMINATED:</dt>
<dd>the dialog is terminated and its dialog
 identifier is no longer valid.  Dialog notifications MUST NOT be sent
 for this dialog.
 
</dd>
</dl></blockquote><p>

</p>
<p>Each dialog has a valid identifier until it transitions to a
TERMINATED state.  The dialog identifier is assigned by the MS unless
the &lt;dialogprepare> or &lt;dialogstart> request already specifies a
identifier (dialogid) which is not associated with any other dialog on
the MS.  Once a dialog is in a TERMINATED state, its dialog identifier
is no longer valid and can be reused for another dialog.

</p>
<p>The identifier is used to reference the dialog in subsequent
requests, responses and notifications. In a &lt;dialogstart> request,
the dialog identifier can be specified in the prepareddialogid attribute
indicating the prepared dialog to start. In &lt;dialogterminate> and
&lt;audit> requests, the dialog identifier is specified in the dialogid
attribute, indicating which dialog is to be terminated or audited
respectively. If these requests specify a dialog identifier already
associated with another dialog on the MS, the MS sends a response with a
405 status code (see <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>) and the same
dialogid as in the request.  The MS MUST specify a dialog identifier in
notifications associated with the dialog. The MS MUST specify a dialog
identifier in responses unless it is a response to a syntactically
invalid request.

</p>
<p>For a given dialog, the &lt;dialogprepare> or &lt;dialogstart>
request elements specify the dialog content to execute either by
including inline a &lt;dialog> element (the dialog language defined in
this package, see <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>) or by referencing an
external dialog document (a dialog language defined outside this
package). When referencing an external dialog document, the request
element contains a URI reference to the remote document (specifying the
dialog definition) and, optionally, a type attribute indicating the MIME
media type associated with the dialog document. Consequently, the dialog
language associated with a dialog on the MS is identified either inline
by a &lt;dialog> child element or by a src attribute referencing a
document containing the dialog language. The MS MUST support inline the
IVR dialog language defined in <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>. The MS
MAY support other dialog languages by reference. 

</p>
<a name="defn.dialogprepare"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
&lt;dialogprepare></h3>

<p>The &lt;dialogprepare> request is sent to the MS to request
preparation of a dialog. Dialog preparation consists of (a) retrieving
an external dialog document and/or external resources referenced within
an inline &lt;dialog> element, and (b) validating the dialog document
syntactically and semantically.
</p>
<p>A prepared dialog is executed when the MS receives a &lt;dialogstart>
request referencing the prepared dialog identifier (see <a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>).

</p>
<p>The &lt;dialogprepare> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>src:</dt>
<dd>specifies the location of an external dialog document
to prepare. A valid value is a URI (see <a class='info' href='#defn.uri'>Section&nbsp;4.6.9<span> (</span><span class='info'>URI</span><span>)</span></a>). The
MS MUST support both HTTP (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>) and HTTPS (<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a>) schemes and the MS MAY support other schemes. If the
URI scheme is unsupported, the MS sends a &lt;response> with a 420
status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). If the document cannot
be retrieved within the timeout interval, the MS sends a &lt;response>
with a 409 status code.  If the document contains a type of dialog
language which the MS does not supported, the MS sends a &lt;response>
with a 421 status code.  The attribute is optional. There is no default
value.

</dd>
<dt>type:</dt>
<dd>specifies the type of the external dialog document
indicated in the 'src' attribute. A valid value is a MIME media type
(see <a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). If the URI scheme used in the src
attribute defines a mechanism for establishing the authoratitive MIME
media type of the media resource, the value returned by that mechanism
takes precedence over this attribute. The attribute is optional. There
is no default value.

</dd>
<dt>maxage:</dt>
<dd>Used to set the max-age value of the Cache-Control
header in conjunction with an external dialog document fetched using
HTTP, as per <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>.  A valid value is a non-negative
integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>). The attribute is
optional. There is no default value. 
</dd>
<dt>maxstale:</dt>
<dd>Used to set the max-stale value of the
Cache-Control header in conjunction with an external dialog document
fetched using HTTP, as per <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>. A valid value is a
non-negative integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>). The
attribute is optional. There is no default value. 
</dd>
<dt>fetchtimeout:</dt>
<dd>the maximum timeout interval to wait when
fetching an external dialog document. A valid value is a Time
Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute
is optional. The default value is 30s. 
</dd>
<dt>dialogid:</dt>
<dd>string indicating a unique name for the
dialog. If a dialog with the same name already exists on the MS, the MS
sends a &lt;response> with a 405 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). If this attribute is not specified, the MS
MUST create a unique name for the dialog (see <a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a> for dialog identifier assignment). The
attribute is optional. There is no default value. 
</dd>
</dl></blockquote><p>


</p>
<p>The &lt;dialogprepare> element has the following sequence of child
elements:

</p>
<blockquote class="text"><dl>
<dt>&lt;dialog></dt>
<dd>an IVR dialog (<a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>)
to prepare. The element is optional. 

</dd>
<dt>&lt;params>:</dt>
<dd>specifies input parameters (<a class='info' href='#defn.params'>Section&nbsp;4.2.6<span> (</span><span class='info'>&lt;params></span><span>)</span></a>) for dialog languages defined outside this
specification. The element is optional. If a parameter is not supported
by the MS for the external dialog language, the MS sends a &lt;response>
with a 427 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</dd>
</dl></blockquote><p>

</p>
<p>The dialog to prepare can either be specified inline with a
&lt;dialog> child element or externally (for dialog languages defined
outside this specification) using the src attribute.  It is a syntax
error if both an inline &lt;dialog> element element and a src attribute
are specified and the MS sends a &lt;response> with a 400 status code
(see <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). The type, maxage, maxstale and
fetchtimeout attributes are only relevant when a dialog is specified as
an external document.

</p>
<p>For example, a &lt;dialogprepare> request to prepare an inline IVR
dialog with a single prompt:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogprepare&gt;
  &lt;dialog&gt;
   &lt;prompt&gt;
    &lt;media loc="http://www.example.com/welcome.wav"/&gt;
   &lt;/prompt&gt;
  &lt;/dialog&gt;
 &lt;/dialogprepare&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>In this example, a request with a specified dialogid to prepare a
VoiceXML dialog document located externally:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogprepare dialogid="d2" type="application/voicexml+xml"
                src="http://www.example.com/mydialog.vxml"
                fetchtimeout="15s"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


Since MS support for dialog languages other than the IVR dialog language
defined in this package is optional, if the MS does not support the
dialog language it would send a response with the status code 421 (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). Further information on using VoiceXML can
be found in <a class='info' href='#voicexml'>Section&nbsp;9<span> (</span><span class='info'>Using VoiceXML as a dialog language</span><span>)</span></a>.

</p>
<a name="defn.dialogstart"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
&lt;dialogstart></h3>

<p>The &lt;dialogstart> element is sent to the MS to start a dialog.  If
the dialog has not been prepared, the dialog is prepared (retrieving
external document and/or external resources referenced within
&lt;dialog> element, and the dialog document validated syntactically and
semantically).  Media processors (e.g. DTMF and prompt queue) are
activated and associated with the specified connection or conference.

</p>
<p>The &lt;dialogstart> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>src:</dt>
<dd>specifies the location of an external dialog document
to start. A valid value is a URI (see <a class='info' href='#defn.uri'>Section&nbsp;4.6.9<span> (</span><span class='info'>URI</span><span>)</span></a>). The
MS MUST support both HTTP (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>) and HTTPS (<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a>) schemes and the MS MAY support other schemes. If the
URI scheme is unsupported, the MS sends a &lt;response> with a 420
status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). If the document cannot
be retrieved with the timeout interval, the MS sends a &lt;response>
with a 409 status code.  If the document contains a type of dialog
language which the MS does not supported, the MS sends a &lt;response>
with a 421 status code.  The attribute is optional. There is no default
value.

</dd>
<dt>type:</dt>
<dd>specifies the type of the external dialog document
indicated in the 'src' attribute. A valid value is a MIME media type
(see <a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). If the URI scheme used in the src
attribute defines a mechanism for establishing the authoratitive MIME
media type of the media resource, the value returned by that mechanism
takes precedence over this attribute. The attribute is optional. There
is no default value.

</dd>
<dt>maxage:</dt>
<dd>Used to set the max-age value of the Cache-Control
header in conjunction with an external dialog document fetched using
HTTP, as per <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>.  A valid value is a non-negative
integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>). The attribute is
optional. There is no default value. 
</dd>
<dt>maxstale:</dt>
<dd>Used to set the max-stale value of the
Cache-Control header in conjunction with an external dialog document
fetched using HTTP, as per <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>. A valid value is a
non-negative integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>). The
attribute is optional. There is no default value. 
</dd>
<dt>fetchtimeout:</dt>
<dd>the maximum timeout interval to wait when
fetching an external dialog document. A valid value is a Time
Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>). The attribute
is optional. The default value is 30s. 
</dd>
<dt>dialogid:</dt>
<dd>string indicating a unique name for the
dialog. If a dialog with the same name already exists on the MS, the MS
sends a &lt;response> with a 405 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).  If neither the dialogid attribute nor the
prepareddialogid attribute is specified, the MS MUST create a unique
name for the dialog (see <a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a> for dialog
identifier assignment). The attribute is optional. There is no default
value.

</dd>
<dt>prepareddialogid:</dt>
<dd>string identifying a dialog previously
prepared using a dialogprepare (<a class='info' href='#defn.dialogprepare'>Section&nbsp;4.2.1<span> (</span><span class='info'>&lt;dialogprepare></span><span>)</span></a>)
request. If neither the dialogid attribute nor the prepareddialogid
attribute is specified, the MS MUST create a unique name for the dialog
(see <a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a> for dialog identifier assignment).
The attribute is optional. There is no default value.
</dd>
<dt>connectionid:</dt>
<dd>string identifying the SIP dialog connection
on which this dialog is to be started (see Section 16.1 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>).  The attribute is
optional. There is no default value.
</dd>
<dt>conferenceid:</dt>
<dd>string identifying the conference on which
this dialog is to be started (see Section 16.1 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). The attribute is
optional. There is no default value.
</dd>
</dl></blockquote><p>

</p>
<p>Exactly one of the connectionid or conferenceid attributes MUST be
specified. If both connectionid and conferenceid attributes are
specified or neither are specified, it is a syntax error and the MS
sends a &lt;response> with a 400 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</p>
<p>It is an error if the connection or conference referenced by a
specific connectionid or conferenceid attribute is not available on the
MS at the time the &lt;dialogstart> request is executed. If an invalid
connectionid is specified, the MS sends a &lt;response> with a 407
status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).  If an invalid
conferenceid is specified, the MS sends a &lt;response> with a 408
status code.

</p>
<p>The &lt;dialogstart> element has the following sequence of child
elements:

</p>
<blockquote class="text"><dl>
<dt>&lt;dialog>:</dt>
<dd>specifies an IVR dialog (<a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>) to execute. The element is optional.

</dd>
<dt>&lt;subscribe>:</dt>
<dd>specifies subscriptions to dialog events
(<a class='info' href='#defn.subscribe'>Section&nbsp;4.2.2.1<span> (</span><span class='info'>&lt;subscribe></span><span>)</span></a>). The element is optional. 
</dd>
<dt>&lt;params>:</dt>
<dd>specifies input parameters (<a class='info' href='#defn.params'>Section&nbsp;4.2.6<span> (</span><span class='info'>&lt;params></span><span>)</span></a>) for dialog languages defined outside this
specification. The element is optional. If a parameter is not supported
by the MS for the external dialog language, the MS sends a &lt;response>
with a 427 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).


</dd>
<dt>&lt;stream>:</dt>
<dd>determines the media stream(s) associated
with the connection or conference on which the dialog is executed (<a class='info' href='#defn.stream'>Section&nbsp;4.2.2.2<span> (</span><span class='info'>&lt;stream></span><span>)</span></a>). The &lt;stream> element is optional.  Multiple
&lt;stream> elements can be specified.

</dd>
</dl></blockquote><p>


</p>
<p>The dialog to start can be specified either (a) inline with a
&lt;dialog> child element, or (b) externally using the src attribute
(for dialog languages defined outside this specification), or (c)
reference a previously prepared dialog using the prepareddialogid
attribute.  If exactly one of the src attribute, the prepareddialogid or
a &lt;dialog> child element is not specified, it is a syntax error and
the MS sends a &lt;response> with a 400 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). If the prepareddialogid and dialogid
attributes are specified, it is also a syntax error and the MS sends a
&lt;response> with a 400 status code. The type, maxage, maxstale and
fetchtimeout attributes are only relevant when a dialog is specified as
an external document.

</p>
<p>The &lt;stream> element provides explicit control over which media
streams on the connection or conference are used during dialog
execution.  For example, if a connection supports both audio and video
streams, a &lt;stream> element could be used to indicate that only the
audio stream is used in receive mode. In cases where there are multiple
media streams of the same type for a dialog, the AS MUST use &lt;stream>
elements to explicitly specify the configuration.  If no &lt;stream>
elements are specified, then the default media configuration is that
defined for the connection or conference. 
</p>
<p> If a &lt;stream> element is in conflict with (a) another &lt;stream>
element, (b) with specified connection or conference media capabilities,
(c) with a SDP label value as part of the connectionid (see Section 16.1
of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>) then the
MS sends a &lt;response> with a 411 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). If the media stream configuration is not
supported by the MS, then the MS sends a &lt;response> with a 428 status
code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</p>
<p>The MS MAY support multiple, simultaneous dialogs being started on
the same connection or conference. For example, the same connection can
receive different media streams (e.g. audio and video) from different
dialogs, or receive (and implicitly mix where appropriate) the same type
of media streams from different dialogs. If the MS does not support
starting another dialog on the same connection or conference, it sends a
&lt;response> with a 432 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>)
when it receives the second (or subsequent) dialog request.

</p>
<p>For example, a request to start an ivr dialog on a connection
subscribing to DTMF notifications:


</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="connection1"&gt;
  &lt;dialog&gt;
   &lt;prompt&gt;
    &lt;media loc="http://www.example.com/getpin.wav"/&gt;
   &lt;/prompt&gt;
   &lt;collect maxdigits="2"/&gt;
  &lt;/dialog&gt;
 &lt;subscribe&gt;
  &lt;dtmfsub matchmode="all"/&gt;
 &lt;/subscribe&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>In this example, the dialog is started on a conference where the
conference only receives an audio media stream from the dialog:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart conferenceid="conference1"&gt;
  &lt;dialog&gt;
   &lt;record maxtime="384000s"/&gt;
  &lt;/dialog&gt;
  &lt;stream media="audio" direction="recvonly"/&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.subscribe"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.1"></a><h3>4.2.2.1.&nbsp;
&lt;subscribe></h3>

<p> The &lt;subscribe> element allows the AS to subscribe to, and be
notified of, specific events which occur during execution of the
dialog. Notifications of dialog events are delivered using the
&lt;event> element (see <a class='info' href='#defn.event'>Section&nbsp;4.2.5<span> (</span><span class='info'>&lt;event></span><span>)</span></a>).

</p>
<p>The &lt;subscribe> element has no attributes. 
</p>
<p>The &lt;subscribe> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;dtmfsub>:</dt>
<dd>Subscription to DTMF input during the dialog
(<a class='info' href='#defn.dtmfsub'>Section&nbsp;4.2.2.1.1<span> (</span><span class='info'>&lt;dtmfsub></span><span>)</span></a>). The element is optional.  

</dd>
</dl></blockquote><p>

</p>
<p>
If a request has &lt;subscribe> with no child elements, the MS treats
the request as if no &lt;subscribe> element was specified.

</p>
<p>The MS MUST support &lt;dtmfsub> subscription for the IVR dialog
language defined in this specification (<a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>). It MAY support other dialog subscriptions
(specified using attributes and child elements from a foreign
namespace). If the MS does not support a subscription specified in a
foreign namespace, the MS sends a response with a 431 status code (see
<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). 
</p>
<a name="defn.dtmfsub"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.1.1"></a><h3>4.2.2.1.1.&nbsp;
&lt;dtmfsub></h3>

<p>The &lt;dtmfsub> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>matchmode:</dt>
<dd>controls which DTMF input are subscribed
to. Valid values are: "all" - notify all DTMF key presses received during
the dialog; "collect" - notify only DTMF input matched by the collect
operation (<a class='info' href='#defn.collect'>Section&nbsp;4.3.1.3<span> (</span><span class='info'>&lt;collect></span><span>)</span></a>); and "control" - notify only
DTMF input matched by the runtime control operation (<a class='info' href='#defn.control'>Section&nbsp;4.3.1.2<span> (</span><span class='info'>&lt;control></span><span>)</span></a>).  The attribute is optional. The default value
is "all".

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;dtmfsub> element has no child elements.
</p>
<p>DTMF notifications are delivered in the &lt;dtmfnotify> element
(<a class='info' href='#defn.dtmfnotify'>Section&nbsp;4.2.5.2<span> (</span><span class='info'>&lt;dtmfnotify></span><span>)</span></a>).

</p>
<p>For example, the AS wishes to subscribe to DTMF key press matching
a runtime control:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart dialogid="d3" connectionid="connection1"&gt;
  &lt;dialog&gt;
   &lt;prompt&gt;
    &lt;media loc="http://www.example.com/getpin.wav"/&gt;
   &lt;/prompt&gt;
   &lt;control ffkey="2" rwkey="3"/&gt;
  &lt;/dialog&gt;
 &lt;subscribe&gt;
  &lt;dtmfsub matchmode="control"/&gt;
 &lt;/subscribe&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>
Each time a '2' or '3' DTMF input is received, the MS sends a
notification event:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="d3"&gt;
   &lt;dtmfnotify matchmode="collect" dtmf="2"
       timestamp="2008-05-12T12:13:14Z"/&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.stream"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.2"></a><h3>4.2.2.2.&nbsp;
&lt;stream></h3>

<p>The &lt;stream> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>media:</dt>
<dd>a string indicating the type of media
        associated with the stream. A valid value is a MIME type-name as
        defined in Section 4.2 of <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>. The
        following values MUST be used for common types of media: "audio"
        for audio media, and "video" for video media. See IANA (<a class='info' href='#IANA'>[IANA]<span> (</span><span class='info'>, &ldquo;IANA registry for RTP Payload Types,&rdquo; .</span><span>)</span></a>) for registered MIME type names.  The attribute
        is mandatory. 
</dd>
<dt>label:</dt>
<dd>a string indicating the SDP label
        associated with a media stream (<a class='info' href='#RFC4574'>[RFC4574]<span> (</span><span class='info'>Levin, O. and G. Camarillo, &ldquo;The Session Description Protocol (SDP) Label Attribute,&rdquo; August&nbsp;2006.</span><span>)</span></a>).  The
        attribute is optional.  
</dd>
<dt>direction:</dt>
<dd>a string indicating the direction of
        the media flow relative to the endpoint conference or
        connection. Defined values are: "sendrecv" (the endpoint can
        send media to, and receive media from, the dialog), "sendonly"
        (the endpoint can only send media to the dialog), "recvonly"
        (the endpoint can only receive media from the dialog) and
        "inactive" (stream is not to be used). The default value is
        "sendrecv". The attribute is optional. 
</dd>
</dl></blockquote><p> 


</p>
<p>The &lt;stream> element has the following sequence of child elements:

    </p>
<blockquote class="text"><dl>
<dt>&lt;region>:</dt>
<dd>an element to specify the area
		within a mixer video layout where a media stream is displayed
		(<a class='info' href='#defn.region'>Section&nbsp;4.2.2.2.1<span> (</span><span class='info'>&lt;region></span><span>)</span></a>). The element is optional. 
</dd>
<dt>&lt;priority>:</dt>
<dd>an element to configure priority
		associated with the stream in the conference mix (<a class='info' href='#defn.priority'>Section&nbsp;4.2.2.2.2<span> (</span><span class='info'>&lt;priority></span><span>)</span></a>). The element is optional.
</dd>
</dl></blockquote><p>
	If conferenceid is not specified or if the "media" attribute does
	not have the value of "video", then the MS ignores the
	&lt;region> and &lt;priority> elements.

</p>
<p>For example, assume a user agent connection with multiple audio and
video streams associated with the user and a separate web camera. In
this case, the dialog could be started to record only the audio and
video streams associated with the user: 

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="connection1"&gt;
  &lt;dialog&gt;
   &lt;record maxtime="384000s"/&gt;
  &lt;/dialog&gt;
  &lt;stream media="audio" label="camaudio" direction="inactive"/&gt;
  &lt;stream media="video" label="camvideo" direction="inactive"/&gt;
  &lt;stream media="audio" label="useraudio" direction="sendonly"/&gt;
  &lt;stream media="video" label="uservideo" direction="sendonly"/&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>Using the &lt;region> element, the dialog can be started on a
conference mixer so that the video output from the dialog is directed to
a specific area within a video layout. For example:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart conferenceid="conference1"&gt;
  &lt;dialog&gt;
   &lt;prompt&gt;
     &lt;media loc="http://www.example.com/presentation.3gp"/&gt;
   &lt;/prompt&gt;
  &lt;/dialog&gt;
  &lt;stream media="video" direction="recvonly"&gt;
    &lt;region&gt;1&lt;/region&gt;
  &lt;/stream&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>



</p>
<a name="defn.region"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.2.1"></a><h3>4.2.2.2.1.&nbsp;
&lt;region></h3>

<p>The &lt;region> element is used to specify a named area within a
	presentation layout where a video media stream is displayed. The MS
	could, for example, play video media into an area of a video layout
	where the layout and its named regions are specified using the Mixer
	Control Package (<a class='info' href='#I-D.ietf-mediactrl-mixer-control-package'>[I&#8209;D.ietf&#8209;mediactrl&#8209;mixer&#8209;control&#8209;package]<span> (</span><span class='info'>McGlashan, S., Melanchuk, T., and C. Boulton, &ldquo;A Mixer Control Package for the Media Control Channel Framework,&rdquo; February&nbsp;2010.</span><span>)</span></a>).
</p>
<p>The &lt;region> element has no attributes and its content model
	specifies the name of the region.
	
</p>
<p>If the region name is invalid, then the MS reports a 416
    status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>) in the response to
    the request element containing the &lt;region> element. 
</p>
<a name="defn.priority"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.2.2"></a><h3>4.2.2.2.2.&nbsp;
&lt;priority></h3>

<p>The &lt;priority> element is used to explicitly specify the
	priority of the dialog for presentation in a conference mix. 
</p>
<p>The &lt;priority> element has no attributes and its content model
	specifies a positive integer (see <a class='info' href='#defn.posinteger'>Section&nbsp;4.6.5<span> (</span><span class='info'>Positive Integer</span><span>)</span></a>). The lower the value, the higher the
	priority.
	
</p>
<a name="defn.dialogterminate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.3"></a><h3>4.2.3.&nbsp;
&lt;dialogterminate></h3>

<p>A dialog can be terminated by sending a &lt;dialogterminate> request
element to the MS. 
</p>
<p>The &lt;dialogterminate> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>dialogid:</dt>
<dd>string identifying the dialog to terminate.
  If the specified dialog identifier is invalid, the MS sends a
  response with a 405 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).
  The attribute is mandatory. 
</dd>
<dt>immediate:</dt>
<dd>indicates whether a dialog in the STARTED
  state is to be terminated immediately or not (in other states,
  termination is always immediate). A valid value is a boolean (see
  <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>).  A value of true indicates that the
  dialog is terminated immediately and the MS MUST send a dialogexit
  notification (<a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>) without report
  information. A value of false indicates that the dialog terminates
  after the current iteration and the MS MUST send a dialogexit
  notification with report information. The attribute is optional. The
  default value is false. 
</dd>
</dl></blockquote><p>

</p>
<p>The MS MUST reply to &lt;dialogterminate> request with a
&lt;response> element (<a class='info' href='#defn.response'>Section&nbsp;4.2.4<span> (</span><span class='info'>&lt;response></span><span>)</span></a>), reporting
whether the dialog was terminated successful or not.

</p>
<p>For example, immediately terminating a STARTED dialog with dialogid
"d4":

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogterminate dialogid="d4" immediate="true"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>If the dialog is terminated successfully, then the response to the
dialogterminate request would be:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;response status="200" dialogid="d4"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.response"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.4"></a><h3>4.2.4.&nbsp;
&lt;response></h3>

<p>Responses to dialog management requests are specified with a
&lt;response> element. 
</p>
<p>The &lt;response> element has following attributes:

</p>
<blockquote class="text"><dl>
<dt>status:</dt>
<dd>numeric code indicating the response status.
Valid values are defined in <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>. The
attribute is mandatory.
</dd>
<dt>reason:</dt>
<dd>string specifying a reason for the response
status. The attribute is optional. There is no default value. 
</dd>
<dt>dialogid:</dt>
<dd>string identifying the dialog. If the request
specifies a dialogid, then that value is used. Otherwise, with
&lt;dialogprepare> and &lt;dialogstart> requests, the dialogid generated
by the MS is used. If there is no available dialogid because the request
is syntactically invalid (e.g. a &lt;dialogterminate> request with no
dialogid attribute specified), then the value is the empty string.  The
attribute is mandatory.
</dd>
<dt>connectionid:</dt>
<dd>string identifying the SIP dialog connection
associated with the dialog (see Section 16.1 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). The attribute is
optional. There is no default value.
</dd>
<dt>conferenceid:</dt>
<dd>string identifying the conference associated
with the dialog (see Section 16.1 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). The attribute is
optional. There is no default value.
</dd>
</dl></blockquote><p>

</p>
<p>For example, a response when a dialog was prepared successfully:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;response status="200" dialogid="d5"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>The response if dialog preparation failed due to an unsupported
dialog language:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;response status="421" dialogid="d5"
    reason="Unsupported dialog language: application/voicexml+xml"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>In this example a &lt;dialogterminate> request does not
specify a dialogid:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogterminate/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>The response status indicates a 400 (Syntax error) status
code and the dialogid attribute has an empty string value:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;response status="400" dialogid=" "
    reason="Attribute required: dialogid"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.event"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.5"></a><h3>4.2.5.&nbsp;
&lt;event></h3>

<p> When a dialog generates a notification event, the MS sends the event
using an &lt;event> element. 
</p>
<p>The &lt;event> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>dialogid:</dt>
<dd>string identifying the dialog which generated
the event. The attribute is mandatory. 
</dd>
</dl></blockquote><p>

</p>
<p>The &lt;event> element has the following child elements, only one of
which can occur:

</p>
<blockquote class="text"><dl>
<dt>&lt;dialogexit>:</dt>
<dd>indicates that the dialog has exited
(<a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>).

</dd>
<dt>&lt;dtmfnotify>:</dt>
<dd>indicates that a DTMF key press occurred
(<a class='info' href='#defn.dtmfnotify'>Section&nbsp;4.2.5.2<span> (</span><span class='info'>&lt;dtmfnotify></span><span>)</span></a>).

</dd>
</dl></blockquote><p>


</p>
<a name="defn.dialogexit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.5.1"></a><h3>4.2.5.1.&nbsp;
&lt;dialogexit></h3>

<p>The &lt;dialogexit> event indicates that a prepared or active dialog
has exited because it is complete, has been terminated, or because an
error occurred during execution (for example, a media resource cannot be
played). This event MUST be sent by the MS when the dialog exits. 

</p>
<p>The &lt;dialogexit> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>status:</dt>
<dd>a status code indicating the status of the dialog
when it exits. A valid value is a non-negative integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>). The MS MUST support the following
values:


<blockquote class="text"><dl>
<dt>0</dt>
<dd>indicates the dialog has been terminated by a
&lt;dialogterminate> request.

</dd>
<dt>1</dt>
<dd>indicates successful completion of the dialog. 

</dd>
<dt>2</dt>
<dd>indicates the dialog terminated because the connection
or conference associated with the dialog has terminated.

</dd>
<dt>3</dt>
<dd>indicates the dialog terminated due to
exceeding its maximum duration.

</dd>
<dt>4</dt>
<dd>indicates the dialog terminated due to an execution
error.

</dd>
</dl></blockquote>

All other valid but undefined values are reserved for future use, where
new status codes are assigned using the Standards Action process defined
in <a class='info' href='#RFC5226'>[RFC5226]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; May&nbsp;2008.</span><span>)</span></a>. The AS MUST treat any status code it does
not recognize as being equivalent to 4 (dialog execution error). The
attribute is mandatory.

</dd>
<dt>reason:</dt>
<dd>a textual description which the MS SHOULD use to
provide a reason for the status code; e.g. details about an error. A
valid value is a string (see <a class='info' href='#defn.string'>Section&nbsp;4.6.6<span> (</span><span class='info'>String</span><span>)</span></a>).  The
attribute is optional. There is no default value.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;dialogexit> element has the following sequence of child
elements:

</p>
<blockquote class="text"><dl>
<dt>&lt;promptinfo>:</dt>
<dd>report information (<a class='info' href='#defn.dialog.promptinfo'>Section&nbsp;4.3.2.1<span> (</span><span class='info'>&lt;promptinfo></span><span>)</span></a>) about the prompt execution in an IVR
&lt;dialog>. The element is optional. 
</dd>
<dt>&lt;controlinfo>:</dt>
<dd>reports information (<a class='info' href='#defn.dialog.controlinfo'>Section&nbsp;4.3.2.2<span> (</span><span class='info'>&lt;controlinfo></span><span>)</span></a>) about the control execution in an
IVR &lt;dialog>. The element is optional. 
</dd>
<dt>&lt;collectinfo>:</dt>
<dd>reports information (<a class='info' href='#defn.dialog.collectinfo'>Section&nbsp;4.3.2.3<span> (</span><span class='info'>&lt;collectinfo></span><span>)</span></a>) about the collect execution in an
IVR &lt;dialog>. The element is optional. 
</dd>
<dt>&lt;recordinfo>:</dt>
<dd>reports information (<a class='info' href='#defn.dialog.recordinfo'>Section&nbsp;4.3.2.4<span> (</span><span class='info'>&lt;recordinfo></span><span>)</span></a>) about the record execution in an IVR
&lt;dialog>. The element is optional. 
</dd>
<dt>&lt;params>:</dt>
<dd>reports exit parameters (<a class='info' href='#defn.params'>Section&nbsp;4.2.6<span> (</span><span class='info'>&lt;params></span><span>)</span></a>) for a dialog language defined outside this
specification. The element is optional. 
</dd>
</dl></blockquote><p>


</p>
<p>For example, an active &lt;dialog> exits normally the MS sends
a dialogexit &lt;event> reporting information:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="d6"&gt;
  &lt;dialogexit status="1"&gt;
   &lt;collectinfo dtmf="1234"  termmode="match"/&gt;
  &lt;/dialogexit&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.dtmfnotify"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.5.2"></a><h3>4.2.5.2.&nbsp;
&lt;dtmfnotify></h3>

<p>The &lt;dtmfnotify> element provide a notification of DTMF input
received during the active dialog as requested by a &lt;dtmfsub>
subscription (<a class='info' href='#defn.subscribe'>Section&nbsp;4.2.2.1<span> (</span><span class='info'>&lt;subscribe></span><span>)</span></a>). 
</p>
<p>The &lt;dtmfnotify> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>matchmode:</dt>
<dd>indicates the matching mode specified in the
subscription request. Valid values are: "all" - all DTMF key presses
notified individually; "collect" - only DTMF input matched by the
collect operation notified; and "control" - only DTMF input matched by
the control operation notified. The attribute is optional. The default
value is "all".

</dd>
<dt>dtmf:</dt>
<dd>DTMF key presses received according to the matchmode.
A valid value is a DTMF string (see <a class='info' href='#defn.dtmfstring'>Section&nbsp;4.6.3<span> (</span><span class='info'>DTMFString</span><span>)</span></a>)
with no space between characters. The attribute is mandatory.

</dd>
<dt>timestamp:</dt>
<dd>indicates the time (on the MS) at which the
last key press occurred according to the matchmode.  A valid value is a
dateTime expression (<a class='info' href='#defn.dateTime'>Section&nbsp;4.6.12<span> (</span><span class='info'>DateTime</span><span>)</span></a>). The attribute is
mandatory.

</dd>
</dl></blockquote><p>

</p>
<p>For example, a notification of DTMF input matched during the collect
operation:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="d3"&gt;
   &lt;dtmfnotify matchmode="collect" dtmf="3123"
     timestamp="2008-05-12T12:13:14Z"/&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.params"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.6"></a><h3>4.2.6.&nbsp;
&lt;params></h3>

<p>The &lt;params> element is a container for &lt;param> elements (<a class='info' href='#defn.param'>Section&nbsp;4.2.6.1<span> (</span><span class='info'>&lt;param></span><span>)</span></a>). 
</p>
<p>The &lt;params> element has no attributes, but the following child
elements are defined (0 or more):

</p>
<blockquote class="text"><dl>
<dt>&lt;param>:</dt>
<dd>specifies a parameter name and value (<a class='info' href='#defn.param'>Section&nbsp;4.2.6.1<span> (</span><span class='info'>&lt;param></span><span>)</span></a>).


</dd>
</dl></blockquote><p>

</p>
<p>For example, usage with a dialog language defined outside this
specification to send additional parameters into the dialog:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
&lt;dialogstart type="application/x-dialog"
             src="nfs://nas01/dialog4" connectionid="c1"&gt;
  &lt;params&gt;
   &lt;param name="mode"&gt;playannouncement&lt;/param&gt;
   &lt;param name="prompt1"&gt;nfs://nas01/media1.3gp&lt;/param&gt;
   &lt;param name="prompt2"&gt;nfs://nas01/media2.3gp&lt;/param&gt;
  &lt;/params&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.param"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.6.1"></a><h3>4.2.6.1.&nbsp;
&lt;param></h3>

<p>The &lt;param> element describes a parameter name and value.
</p>
<p>The &lt;param> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>name:</dt>
<dd>a string indicating the name of the parameter.  The
attribute is mandatory. 
</dd>
<dt>type:</dt>
<dd>specifies a type indicating how the inline value of
the parameter is to be interpreted.  A valid value is a MIME media type
(see <a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). The attribute is optional. The
default value is "text/plain".

</dd>
<dt>encoding:</dt>
<dd>specifies a content-transfer-encoding schema
applied to the inline value of the parameter on top of the MIME media
type specified with the type attribute. A valid value is a
content-transfer-encoding schema as defined by the "mechanism" token in
Section 6.1 of <a class='info' href='#RFC2045'>[RFC2045]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies,&rdquo; November&nbsp;1996.</span><span>)</span></a>. The attribute is
optional. There is no default value.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;param> element content model is the value of the
parameter. Note that a value which contains XML characters (e.g. "&lt;")
needs to be escaped following standard XML conventions.

</p>
<p>For example, usage with a dialog language defined outside this
specification to receive parameters from the dialog when it exits:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="d6"&gt;
  &lt;dialogexit status="1"&gt;
  &lt;params&gt;
   &lt;param name="mode"&gt;recording&lt;/param&gt;
   &lt;param name="recording1" type="audio/x-wav" encoding="base64"&gt;
    &lt;![CDATA[
     R0lGODlhZABqALMAAFrMYr/BvlKOVJKOg2xZUKmenMfDw8tgWJpV
    ]]&gt;
   &lt;/param&gt;
  &lt;/params&gt;
  &lt;/dialogexit&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.ivrdialog"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
IVR Dialog Elements</h3>

<p>This section describes the IVR dialog language defined as part of
this specification. The MS MUST support this dialog language. 
</p>
<p>The &lt;dialog> element is an execution container for operations of
playing prompts (<a class='info' href='#defn.prompt'>Section&nbsp;4.3.1.1<span> (</span><span class='info'>&lt;prompt></span><span>)</span></a>), runtime controls (<a class='info' href='#defn.control'>Section&nbsp;4.3.1.2<span> (</span><span class='info'>&lt;control></span><span>)</span></a>), collecting DTMF (<a class='info' href='#defn.collect'>Section&nbsp;4.3.1.3<span> (</span><span class='info'>&lt;collect></span><span>)</span></a>),and recording user input (<a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>.  Results of the dialog execution (<a class='info' href='#defn.dialog.exit'>Section&nbsp;4.3.2<span> (</span><span class='info'>Exit Information</span><span>)</span></a>) are reported in a dialogexit notification
event. 
</p>
<p>Using these elements, three common dialog models are supported:

</p>
<blockquote class="text"><dl>
<dt>playannouncements:</dt>
<dd>only a &lt;prompt> element is specified
in the container. The prompt media resources are played in sequence.

</dd>
<dt>promptandcollect:</dt>
<dd>a &lt;collect> element is specified and,
optionally, a &lt;prompt> element. If a &lt;prompt> element is specified
and bargein is enabled, playing of the prompt is terminated when bargein
occurs, and DTMF collection is initiated; otherwise, the prompt is
played to completion before DTMF collection is initiated. If no prompt
element is specified, DTMF collection is initiated immediately.

</dd>
<dt>promptandrecord:</dt>
<dd>a &lt;record> element is specified and,
optionally, a &lt;prompt> element. If a &lt;prompt> element is specified
and bargein is enabled, playing of the prompt is terminated when bargein
occurs, and recording is initiated; otherwise, the prompt is played to
completion before recording is initiated. If no prompt element is
specified, recording is initiated immediately.

</dd>
</dl></blockquote><p>
In addition, this dialog language supports runtime ('VCR') controls
enabling a user to control prompt playback using DTMF.

</p>
<p>
Each of the core elements - &lt;prompt>, &lt;control>, &lt;collect> and
&lt;record> - are specified so that their execution and reporting is
largely self-contained. This facilitates their re-use in other dialog
container elements. Note that DTMF and bargein behavior affects multiple
elements and is addressed in the relevant element definitions.

</p>
<p>Execution results are reported in the &lt;dialogexit> notification
event with child elements defined in <a class='info' href='#defn.dialog.exit'>Section&nbsp;4.3.2<span> (</span><span class='info'>Exit Information</span><span>)</span></a>.
If the dialog terminated normally (i.e. not due to an error or to a
&lt;dialogterminate> request), then the MS MUST report the results for
the operations specified in the dialog:

</p>
<blockquote class="text"><dl>
<dt>&lt;prompt>:</dt>
<dd> &lt;promptinfo> (see <a class='info' href='#defn.dialog.promptinfo'>Section&nbsp;4.3.2.1<span> (</span><span class='info'>&lt;promptinfo></span><span>)</span></a>) with at least the termmode attribute
specified. 
</dd>
<dt>&lt;control>:</dt>
<dd> &lt;controlinfo> (see <a class='info' href='#defn.dialog.controlinfo'>Section&nbsp;4.3.2.2<span> (</span><span class='info'>&lt;controlinfo></span><span>)</span></a>) if any runtime controls are
matched. 
</dd>
<dt>&lt;collect>:</dt>
<dd> &lt;collectinfo> (see <a class='info' href='#defn.dialog.collectinfo'>Section&nbsp;4.3.2.3<span> (</span><span class='info'>&lt;collectinfo></span><span>)</span></a>) with the dtmf and termmode attributes
specified. 
</dd>
<dt>&lt;record>:</dt>
<dd> &lt;recordinfo> (see <a class='info' href='#defn.dialog.recordinfo'>Section&nbsp;4.3.2.4<span> (</span><span class='info'>&lt;recordinfo></span><span>)</span></a>) with at least the termmode attribute
and one &lt;mediainfo> element specified. 
</dd>
</dl></blockquote><p>

</p>
<p>The media format requirements for IVR dialogs are undefined. This
package is agnostic to the media types and codecs for media resources
and recording which need to be supported by an implementation. For
example, a MS implementation might only support audio and in particular
the 'audio/basic' codec for media playback and recording. However, when
executing a dialog, if an MS encounters a media type or codec which it
cannot process, the MS MUST stop further processing and report the error
using the dialogexit notification.
</p>
<a name="defn.dialog"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1"></a><h3>4.3.1.&nbsp;
&lt;dialog></h3>

<p>An IVR dialog to play prompts to the user, allow runtime controls,
 collect DTMF or record input. The dialog is specified using a
 &lt;dialog> element.
</p>
<p>A &lt;dialog> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>repeatCount:</dt>
<dd> number of times the dialog is to be
executed. A valid value is a non-negative integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>). A value of 0 indicates that the dialog
is repeated until halted by other means. The attribute is optional. The
default value is 1.

</dd>
<dt>repeatDur:</dt>
<dd>maximum duration for dialog execution.  A valid
value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).
If no value is specified, then there is no limit on the duration of the
dialog.  The attribute is optional. There is no default value.

</dd>
<dt>repeatUntilComplete:</dt>
<dd>indicates whether the MS terminates
dialog execution when an input operation is completed successfully. A
valid value is a boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>). A value of
true indicates that dialog execution is terminated when an input
operation associated with its child elements is completed sucessfully
(see execution model below for precise conditions). A value of false
indicates that dialog execution is terminated by other means. The
attribute is optional. The default value is false.

</dd>
</dl></blockquote><p>

The repeatDur attribute takes priority over the repeatCount attribute in
determining maximum duration of the dialog. See 'repeatCount' and
'repeatDur' in SMIL (<a class='info' href='#W3C.REC-SMIL2-20051213'>[W3C.REC&#8209;SMIL2&#8209;20051213]<span> (</span><span class='info'>Koivisto, A., Bulterman, D., Michel, T., Layada, N., Zucker, D., Jansen, J., Mullender, S., and G. Grassel, &ldquo;Synchronized Multimedia Integration Language (SMIL 2.1),&rdquo; December&nbsp;2005.</span><span>)</span></a>) for
further information. In the situation where a dialog is repeated more
than once, only the results of operations in the last dialog iteration
are reported.


</p>
<p>The &lt;dialog> element has the following sequence of child elements
(at least one, any order):

</p>
<blockquote class="text"><dl>
<dt>&lt;prompt>:</dt>
<dd>defines media resources to play in sequence
(see <a class='info' href='#defn.prompt'>Section&nbsp;4.3.1.1<span> (</span><span class='info'>&lt;prompt></span><span>)</span></a>). The element is optional. 
</dd>
<dt>&lt;control>:</dt>
<dd>defines how DTMF is used for runtime
controls (see <a class='info' href='#defn.control'>Section&nbsp;4.3.1.2<span> (</span><span class='info'>&lt;control></span><span>)</span></a>). The element is
optional. 
</dd>
<dt>&lt;collect>:</dt>
<dd>defines how DTMF is collected (see <a class='info' href='#defn.collect'>Section&nbsp;4.3.1.3<span> (</span><span class='info'>&lt;collect></span><span>)</span></a>). The element is optional. 
</dd>
<dt>&lt;record>:</dt>
<dd>defines how recording takes place (see <a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>). The element is optional. 
</dd>
</dl></blockquote><p>

</p>
<p>Although the behavior when both &lt;collect> and &lt;record> elements
are specified in a request is not defined in this control package, the
MS MAY support this configuration. If the MS does not support this
configuration, the MS sends a &lt;response> with a 433 status code.

</p>
<p>The MS has the following execution model for the IVR dialog after
initialization (initialization errors are reported by the MS in the
response):

</p>
<ol class="text">
<li>If an error occurs during execution, then the MS terminates the
dialog and reports the error in the &lt;dialogexit> event by setting the
status attribute (see <a class='info' href='#defn.dialog.exit'>Section&nbsp;4.3.2<span> (</span><span class='info'>Exit Information</span><span>)</span></a>). Details about
the error are specified in the reason attribute.

</li>
<li>The MS initializes a counter to 0.  
</li>
<li>The MS starts a duration timer for the value of the repeatDur
attribute. If the timer expires before the dialog is complete, then the
MS terminates the dialog and sends a dialogexit whose status attribute
is set to 3 (see <a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>). The MS MAY report
information in the dialogexit gathered in the last execution cycle (if
any).
</li>
<li>The MS initiates a dialog execution cycle. Each cycle executes the
operations associated with the child elements of the dialog.  If a
&lt;prompt> element is specified, then execute the element's prompt
playing operation and activate any controls (if the &lt;control> element
is specified). If no &lt;prompt> is specified or when a specified
&lt;prompt> terminates, then start the collect operation or the record
operation if the &lt;collect> or &lt;record> elements respectively are
specified. If subscriptions are specified for the dialog, then the MS
sends a notification event when the specified event occurs. If execution
of a child element results in an error, the MS terminates dialog
execution (and stops other child element operations) and the MS sends a
dialogexit status event, reporting any information gathered.  
</li>
<li>If the dialog execution cycle completes successfully, then the MS
increments the counter by one.  The MS terminates dialog execution if
either of the following conditions is true:


<ul class="text">
<li>the value of the repeatCount attribute is greater than zero and the
counter is equal to the value of the repeatCount attribute 
</li>
<li>the value of the repeatUntilComplete attribute is true and one of the
following conditions is true:


<ul class="text">
<li>&lt;collect> reports termination status of 'match' or 'stopped'.
</li>
<li>&lt;record> reports termination status of 'stopped', 'dtmf',
'maxtime' or 'finalsilence'.
</li>
</ul>


</li>
</ul>

When the MS terminates dialog execution, it sends a dialogexit (with a
status of 1) reporting operation information collected in the last
dialog execution cycle only.  Otherwise, another dialog execution cycle
is initiated.

</li>
</ol><p>

</p>
<a name="defn.prompt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1"></a><h3>4.3.1.1.&nbsp;
&lt;prompt></h3>

<p>
The &lt;prompt> element specifies a sequence of media resources to play
back in document order.

</p>
<p>A &lt;prompt> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>xml:base:</dt>
<dd>A string declaring the base URI from which
relative URIs in child elements are resolved prior to fetching. A valid
value is a URI (see <a class='info' href='#defn.uri'>Section&nbsp;4.6.9<span> (</span><span class='info'>URI</span><span>)</span></a>).  The attribute is
optional. There is no default value.

</dd>
<dt>bargein:</dt>
<dd>Indicates whether user input stops prompt
playback unless the input is associated with a specified runtime
&lt;control> operation (input matching control operations never
interrupts prompt playback).  A valid value is a boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>). A value of true indicates that bargein is
permitted and prompt playback is stopped. A value of false indicates
that bargein is not permitted: user input does not terminate prompt
playback. The attribute is optional. The default value is true.

</dd>
</dl></blockquote><p>


</p>
<p>The &lt;prompt> element has the following child elements (at least
one, any order, multiple occurrences of elements permitted):

</p>
<blockquote class="text"><dl>
<dt>&lt;media>:</dt>
<dd>specifies a media resource (see <a class='info' href='#defn.media'>Section&nbsp;4.3.1.5<span> (</span><span class='info'>&lt;media></span><span>)</span></a>) to play. The element is optional. 
</dd>
<dt>&lt;variable>:</dt>
<dd> specifies a variable media announcement
(see <a class='info' href='#defn.variable'>Section&nbsp;4.3.1.1.1<span> (</span><span class='info'>&lt;variable></span><span>)</span></a>) to play.  The element is
optional. 
</dd>
<dt>&lt;dtmf>:</dt>
<dd> generates one or more DTMF tones (see <a class='info' href='#defn.dtmf'>Section&nbsp;4.3.1.1.2<span> (</span><span class='info'>&lt;dtmf></span><span>)</span></a>) to play. The element is optional. 
</dd>
<dt>&lt;par>:</dt>
<dd> specifies media resources to play in parallel
(see <a class='info' href='#defn.par'>Section&nbsp;4.3.1.1.3<span> (</span><span class='info'>&lt;par></span><span>)</span></a>). The element is optional. 
</dd>
</dl></blockquote><p>

</p>
<p>If the MS does not support the configuration required for prompt
playback to the output media streams and a more specific error code is
not defined for its child elements, the MS sends a &lt;response>
with a 429 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). The MS MAY
support transcoding between the media resource format and the output
stream format.

</p>
<p>The MS has the following execution model for prompt playing after
initialization:

</p>
<ol class="text">
<li>The MS initiates prompt playback playing its child elements
(&lt;media>, &lt;variable>, &lt;dtmf> and &lt;par>) one after another in
document order.

</li>
<li>If any error (including fetching and rendering errors) occurs during
prompt execution, then the MS terminates playback and reports its error
status to the dialog container (see <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>)
with a &lt;promptinfo> (see <a class='info' href='#defn.dialog.promptinfo'>Section&nbsp;4.3.2.1<span> (</span><span class='info'>&lt;promptinfo></span><span>)</span></a>)
where the termmode attribute is set to stopped and any additional
information is set.
</li>
<li>If DTMF input is received and the value of the bargein attribute is
true, then the MS terminates prompt playback and reports its execution
status to the dialog container (see <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>)
with a &lt;promptinfo> (see <a class='info' href='#defn.dialog.promptinfo'>Section&nbsp;4.3.2.1<span> (</span><span class='info'>&lt;promptinfo></span><span>)</span></a>)
where the termmode attribute is set to bargein and any additional
information is set. 
</li>
<li>If prompt playback is stopped by the dialog container, then the MS
reports its execution status to the dialog container (see <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>) with a &lt;promptinfo> (see <a class='info' href='#defn.dialog.promptinfo'>Section&nbsp;4.3.2.1<span> (</span><span class='info'>&lt;promptinfo></span><span>)</span></a>) where the termmode attribute is set
to stopped and any additional information is set. 
</li>
<li>If prompt playback completes successfully, then the MS reports its
execution status to the dialog container (see <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>) with a &lt;promptinfo> (see <a class='info' href='#defn.dialog.promptinfo'>Section&nbsp;4.3.2.1<span> (</span><span class='info'>&lt;promptinfo></span><span>)</span></a>) where the termmode attribute is set
to completed and any additional information is set.

</li>
</ol><p>

</p>
<a name="defn.variable"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1.1"></a><h3>4.3.1.1.1.&nbsp;
&lt;variable></h3>

<p>
The &lt;variable> element specifies variable announcements using
predefined media resources. Each variable has at least a type
(e.g. date) and a value (e.g. 2008-02-25). The value is rendered
according to the prompt variable type (e.g. 2008-02-25 is rendered as
the date 25th February 2008). The precise mechanism for generating
variable announcements (including the location of associated media
resources) is implementation specific.

</p>
<p>A &lt;variable> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>type:</dt>
<dd>specifies the type of prompt variable to
render. This specification defines three values - date (<a class='info' href='#defn.variable.date'>Section&nbsp;4.3.1.1.1.1<span> (</span><span class='info'>Date type</span><span>)</span></a>), time (<a class='info' href='#defn.variable.time'>Section&nbsp;4.3.1.1.1.2<span> (</span><span class='info'>Time type</span><span>)</span></a>) and digits (<a class='info' href='#defn.variable.digits'>Section&nbsp;4.3.1.1.1.3<span> (</span><span class='info'>Digits type</span><span>)</span></a>). All other valid but undefined values
are reserved for future use, where new values are assigned as described
in <a class='info' href='#sec:Prompt_Variable_Type_Reg'>Section&nbsp;8.5<span> (</span><span class='info'>IVR Prompt Variable Type Registration Information</span><span>)</span></a>. A valid value is a
string (see <a class='info' href='#defn.string'>Section&nbsp;4.6.6<span> (</span><span class='info'>String</span><span>)</span></a>).  The attribute is mandatory.

</dd>
<dt>value:</dt>
<dd>specifies a string to be rendered according to the
prompt variable type. A valid value is a string (see <a class='info' href='#defn.string'>Section&nbsp;4.6.6<span> (</span><span class='info'>String</span><span>)</span></a>). The attribute is mandatory.

</dd>
<dt>format:</dt>
<dd>specifies format information which the prompt
variable type uses to render the value attribute. A valid value is a
string (see <a class='info' href='#defn.string'>Section&nbsp;4.6.6<span> (</span><span class='info'>String</span><span>)</span></a>).  The attribute is
optional. There is no default value.

</dd>
<dt>gender:</dt>
<dd>specifies the gender which the prompt variable
type uses to render the value attribute. Valid values are "male" or
"female".  The attribute is optional. There is no default value.

</dd>
<dt>xml:lang:</dt>
<dd>specifies the language which the prompt variable
type uses to render the value attribute.  A valid value is a language
identifier (see <a class='info' href='#defn.langid'>Section&nbsp;4.6.11<span> (</span><span class='info'>Language Identifier</span><span>)</span></a>).  The attribute is
optional. There is no default value.

</dd>
</dl></blockquote><p>


</p>
<p>The &lt;variable> element has no children.
</p>
<p>This specification is agnostic to the type and codec of media
resources into which variable are rendered as well as the rendering
mechanism itself. For example, an MS implementation supporting audio
rendering could map the &lt;variable> into one or more audio media
resources. 
</p>
<p>This package is agnostic to which &lt;variable> types are supported
by an implementation.  If a &lt;variable> element configuration
specified in a request is not supported by the MS, the MS sends a
&lt;response> with a 425 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</p>
<a name="defn.variable.date"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1.1.1"></a><h3>4.3.1.1.1.1.&nbsp;
Date type</h3>

<p>The date variable type provides a mechanism for dynamically rendering
a date prompt.
</p>
<p>The &lt;variable> type attribute MUST have the value "date".
</p>
<p>The &lt;variable> format attribute MUST be one of the following
values and comply with its rendering of the value attribute:

</p>
<blockquote class="text"><dl>
<dt>mdy</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as sequence composed of month, then day, then year.

</dd>
<dt>ymd</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as sequence composed of year, then month, then day.

</dd>
<dt>dym</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as sequence composed of day, then year, then month.

</dd>
<dt>dm</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as sequence composed of day then month.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;variable> value attribute MUST comply with a lexical
representation of date where
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
yyyy '-' mm '-' dd
</pre></div><p>

as defined in Section 3.2.9 of <a class='info' href='#XMLSchema:Part2'>[XMLSchema:Part2]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>. 

</p>
<p>For example,

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;variable type="date" format="dmy" value="2010-11-25"
  xml:lang="en" gender="male"/&gt;
</pre></div><p>


describe a variable date prompt where the date can be rendered in audio
as "twenty-fifth of November two thousand and ten" using a list of
&lt;media> resources:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;media loc="nfs://voicebase/en/male/25th.wav"/&gt;
&lt;media loc="nfs://voicebase/en/male/of.wav"/&gt;
&lt;media loc="nfs://voicebase/en/male/november.wav"/&gt;
&lt;media loc="nfs://voicebase/en/male/2000.wav"/&gt;
&lt;media loc="nfs://voicebase/en/male/and.wav"/&gt;
&lt;media loc="nfs://voicebase/en/male/10.wav"/&gt;
</pre></div><p>



</p>
<a name="defn.variable.time"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1.1.2"></a><h3>4.3.1.1.1.2.&nbsp;
Time type</h3>

<p>The time variable type provides a mechanism for dynamically rendering
a time prompt.
</p>
<p>The &lt;variable> type attribute MUST have the value "time".
</p>
<p>The &lt;variable> format attribute MUST be one of the following
values and comply with its rendering of the value attribute:

</p>
<blockquote class="text"><dl>
<dt>t12</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as a time in traditional 12 hour format using am or pm
(for example, "twenty five minutes past 2 pm" for "14:25").

</dd>
<dt>t24</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as a time in 24 hour format (for example, "fourteen
twenty five" for "14:25").

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;variable> value attribute MUST comply with a lexical
representation of time where
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
hh ':' mm ( ':' ss )?
</pre></div><p>

as defined in Section 3.2.8 of <a class='info' href='#XMLSchema:Part2'>[XMLSchema:Part2]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>. 

</p>
<a name="defn.variable.digits"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1.1.3"></a><h3>4.3.1.1.1.3.&nbsp;
Digits type</h3>

<p>The digits variable type provides a mechanism for dynamically
rendering a digit sequence.
</p>
<p>The &lt;variable> type attribute MUST have the value "digits".
</p>
<p>The &lt;variable> format attribute MUST be one of the following
values and comply with its rendering of the value attribute:

</p>
<blockquote class="text"><dl>
<dt>gen</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as a general digit string (for example, "one two three"
for "123").

</dd>
<dt>crn</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as a cardinal number (for example, "one hundred and
twenty three" for "123").

</dd>
<dt>ord</dt>
<dd>indicating that the &lt;variable> value attribute is
to be rendered as an ordinal number (for example, "one hundred and
twenty third" for "123").

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;variable> value attribute MUST comply with the lexical
representation
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
d+
</pre></div><p>

i.e. one or more digits.

</p>
<a name="defn.dtmf"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1.2"></a><h3>4.3.1.1.2.&nbsp;
&lt;dtmf></h3>

<p> The &lt;dtmf> element specifies a sequence of DTMF tones for
output. 
</p>
<p>DTMF tones could be generated using &lt;media> resources where the
output is transported as RTP audio packets. However, &lt;media>
resources are not sufficient for cases where DTMF tones are to be
transported as DTMF RTP (<a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a>) or in event
packages. 
</p>
<p>A &lt;dtmf> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>digits:</dt>
<dd>specifies the DTMF sequence to output. A valid
value is a DTMF string (see <a class='info' href='#defn.dtmfstring'>Section&nbsp;4.6.3<span> (</span><span class='info'>DTMFString</span><span>)</span></a>). The
attribute is mandatory.

</dd>
<dt>level:</dt>
<dd>used to define the power level for which the DTMF
tones will be generated. Values are expressed in dBm0. A valid value is
an integer in the range of 0 to -96 (dBm0). Larger negative values
express lower power levels. Note that values lower than -55 dBm0 will be
rejected by most receivers (TR-TSY-000181, ITU-T Q.24A).  The attribute
is optional. The default value is -6 (dBm0).

</dd>
<dt>duration:</dt>
<dd>specifies the duration for which each DTMF tone
is generated. A valid value is a time designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>). The MS MAY round the value if
it only supports discrete durations.  The attribute is optional. The
default value is 100ms.

</dd>
<dt>interval:</dt>
<dd>specifies the duration of a silence interval
following each generated DTMF tone. A valid value is a time designation
(see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>). The MS MAY round the value
if it only supports discrete durations.  The attribute is optional. The
default value is 100ms.

</dd>
</dl></blockquote><p>


</p>
<p>The &lt;dtmf> element has no children.
</p>
<p>If a &lt;dtmf> element configuration is not supported, the MS 
sends a &lt;response> with a 426 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</p>
<a name="defn.par"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1.3"></a><h3>4.3.1.1.3.&nbsp;
&lt;par></h3>

<p>The &lt;par> element allows media resources to be played in
parallel. Each of its child elements specify a media resource (or a
sequence of media resources using the &lt;seq> element). When playback
of the &lt;par> element is initiated, the MS begins playback of all its
child elements at the same time. This element is modeled after the
&lt;par> element in SMIL (<a class='info' href='#W3C.REC-SMIL2-20051213'>[W3C.REC&#8209;SMIL2&#8209;20051213]<span> (</span><span class='info'>Koivisto, A., Bulterman, D., Michel, T., Layada, N., Zucker, D., Jansen, J., Mullender, S., and G. Grassel, &ldquo;Synchronized Multimedia Integration Language (SMIL 2.1),&rdquo; December&nbsp;2005.</span><span>)</span></a>). 
</p>
<p>The &lt;par> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>endsync:</dt>
<dd>indicates when playback of the element is
complete. Valid values are: "first" - indicates that the element is
complete when any child element reports that it is complete; "last" -
indicates it is complete when every child elements are complete. The
attribute is optional. The default value is "last".

</dd>
</dl></blockquote><p>
If the value is "first", then playback of other child element is stopped
when one child element reports it is complete.

</p>
<p>The &lt;par> element has the following child elements (at least one,
any order, multiple occurrences of each element permitted):

</p>
<blockquote class="text"><dl>
<dt>&lt;seq>:</dt>
<dd>specifies a sequence of media resources to play
in a parallel with other &lt;par> child elements (see <a class='info' href='#defn.seq'>Section&nbsp;4.3.1.1.3.1<span> (</span><span class='info'>&lt;seq></span><span>)</span></a>). The element is optional. 
</dd>
<dt>&lt;media>:</dt>
<dd> specifies a media resource (see <a class='info' href='#defn.media'>Section&nbsp;4.3.1.5<span> (</span><span class='info'>&lt;media></span><span>)</span></a>) to play.  The MS is responsible for assigning the
appropriate media stream(s) when more than one is available. The element
is optional. 
</dd>
<dt>&lt;variable>:</dt>
<dd> specifies a variable media announcement
(see <a class='info' href='#defn.variable'>Section&nbsp;4.3.1.1.1<span> (</span><span class='info'>&lt;variable></span><span>)</span></a>) to play.  The element is
optional. 
</dd>
<dt>&lt;dtmf>:</dt>
<dd> generates one or more DTMF tones (see <a class='info' href='#defn.dtmf'>Section&nbsp;4.3.1.1.2<span> (</span><span class='info'>&lt;dtmf></span><span>)</span></a>) to play. The element is optional. 
</dd>
</dl></blockquote><p>

</p>
<p>It is RECOMMENDED that a &lt;par> element contains only one
&lt;media> element of the same media type (i.e. same type-name as
defined in <a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). If a &lt;par> element
configuration is not supported, the MS sends a &lt;response> with a 435
status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</p>
<p>Runtime &lt;control>s (<a class='info' href='#defn.control'>Section&nbsp;4.3.1.2<span> (</span><span class='info'>&lt;control></span><span>)</span></a>) apply to each
child element playing parallel. For example, pause and resume controls
cause all child elements to be paused and resumed respectively. 
</p>
<p>If the &lt;par> element is stopped by the prompt container
(e.g. bargein or dialog termination), then playback of all child
elements is stopped. The playback duration (<a class='info' href='#defn.dialog.promptinfo'>Section&nbsp;4.3.2.1<span> (</span><span class='info'>&lt;promptinfo></span><span>)</span></a>) reported for the &lt;par> element is
the duration of parallel playback, not the cumulative duration of each
child element played in parallel.

</p>
<p>For example, a request to playback audio and video media in parallel:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
&lt;dialogstart connectionid="c1"&gt;
  &lt;dialog&gt;
   &lt;prompt&gt;
    &lt;par&gt;
     &lt;media type="audio/x-wav"
            loc="http://www.example.com/media/comments.wav"/&gt;
     &lt;media type="video/3gpp;codecs='s263'"
            loc="http://www.example.com/media/camera.3gp"/&gt;
    &lt;/par&gt;
   &lt;/prompt&gt;
  &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


When the &lt;prompt> element is executed, it begins playback of its
child element in document order sequence. In this case, there is only
one child element, a &lt;par> element itself containing audio and video
&lt;media> child element. Consequently playback of both audio and video
media resources is initiated at the same time. Since the endsync
attribute is not specified, the default value "last" applies. The
&lt;par> element playback is complete when the media resource with the
longest duration is complete.

</p>
<a name="defn.seq"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.1.3.1"></a><h3>4.3.1.1.3.1.&nbsp;
&lt;seq></h3>

<p>The &lt;seq> element specifies media resources to be played back in
sequence. This allows a sequence of media resources to be played at the
same time as other children of a &lt;par> element are played in
parallel. For example, a sequence of audio resources while a video
resource is played in parallel.  This element is modeled after the
&lt;seq> element in SMIL (<a class='info' href='#W3C.REC-SMIL2-20051213'>[W3C.REC&#8209;SMIL2&#8209;20051213]<span> (</span><span class='info'>Koivisto, A., Bulterman, D., Michel, T., Layada, N., Zucker, D., Jansen, J., Mullender, S., and G. Grassel, &ldquo;Synchronized Multimedia Integration Language (SMIL 2.1),&rdquo; December&nbsp;2005.</span><span>)</span></a>). 
</p>
<p>The &lt;seq> element has no attributes. 
</p>
<p>The &lt;seq> element has the following child elements (at least one,
any order, multiple occurrences of each element permitted):

</p>
<blockquote class="text"><dl>
<dt>&lt;media>:</dt>
<dd> specifies a media resource (see <a class='info' href='#defn.media'>Section&nbsp;4.3.1.5<span> (</span><span class='info'>&lt;media></span><span>)</span></a>) to play.  The element is optional. 
</dd>
<dt>&lt;variable>:</dt>
<dd> specifies a variable media announcement
(see <a class='info' href='#defn.variable'>Section&nbsp;4.3.1.1.1<span> (</span><span class='info'>&lt;variable></span><span>)</span></a>) to play.  The element is
optional. 
</dd>
<dt>&lt;dtmf>:</dt>
<dd> generates one or more DTMF tones (see <a class='info' href='#defn.dtmf'>Section&nbsp;4.3.1.1.2<span> (</span><span class='info'>&lt;dtmf></span><span>)</span></a>) to play. The element is optional. 
</dd>
</dl></blockquote><p>

</p>
<p>Playback of a &lt;seq> element is complete when all child elements in
the sequence are complete. If the &lt;seq> element is stopped by the
&lt;par> container, then playback of the current child element is
stopped (remaining child elements in the sequence are not played).

</p>
<p>For example, a request to play a sequence of audio resources in
parallel with a video media:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
&lt;dialogstart connectionid="c1"&gt;
  &lt;dialog&gt;
   &lt;prompt&gt;
    &lt;par endsync="first"&gt;
     &lt;seq&gt;
       &lt;media type="audio/x-wav"
            loc="http://www.example.com/media/date.wav"/&gt;
       &lt;media type="audio/x-wav"
            loc="http://www.example.com/media/intro.wav"/&gt;
       &lt;media type="audio/x-wav"
            loc="http://www.example.com/media/main.wav"/&gt;
       &lt;media type="audio/x-wav"
            loc="http://www.example.com/media/end.wav"/&gt;
     &lt;/seq&gt;
     &lt;media type="video/3gpp;codecs='s263'"
            loc="rtsp://www.example.com/media/camera.3gp"/&gt;
    &lt;/par&gt;
   &lt;/prompt&gt;
  &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


When the &lt;prompt> element is executed, it begins playback of the
&lt;par> element containing a &lt;seq> element and a video &lt;media>
element.  The &lt;seq> element itself contains a sequence of audio
&lt;media> elements. Consequently playback of the video media resource
is initiated at the same time as playback of the sequence of the audio
media resources is initiated. Each audio resource is played back after
the previous one completes. Since the endsync attribute is set to
"first", the &lt;par> element playback is complete when either all the
audio resources in &lt;seq> have been played to completion or the video
&lt;media> is complete, whichever occurs first.

</p>
<a name="defn.control"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.2"></a><h3>4.3.1.2.&nbsp;
&lt;control></h3>

<p>The &lt;control> element defines how DTMF input is mapped to runtime
controls, including prompt playback controls. 
</p>
<p>DTMF input matching these controls MUST NOT cause prompt playback to
interrupted (i.e. no prompt bargein), but causes the appropriate
operation to be applied; for examples, speeding up prompt playback. 
</p>
<p>DTMF input matching these controls has priority over &lt;collect>
input for the duration of prompt playback. If an incoming DTMF character
matches a specified runtime control, then the DTMF character is
consumed: it is not added to the digit buffer and so is not available to
the &lt;collect> operation. Once prompt playback is complete, runtime
controls are no longer active. 
</p>
<p>The &lt;control> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>gotostartkey:</dt>
<dd>maps a DTMF key to skip directly to the
start of the prompt. A valid value is a DTMF Character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is optional. There is no
default value.
</dd>
<dt>gotoendkey:</dt>
<dd>maps a DTMF key to skip directly to the end of
the prompt. A valid value is a DTMF Character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is optional. There is no
default value.
</dd>
<dt>skipinterval:</dt>
<dd>indicates how far a MS skips backwards or
forwards through prompt playback when the rewind (rwkey) of fast forward
key (ffkey) is pressed.  A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 6s.
</dd>
<dt>ffkey:</dt>
<dd>maps a DTMF key to a fast forward operation equal
to the value of 'skipinterval'. A valid value is a DTMF Character (see
<a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is optional. There is no
default value.
</dd>
<dt>rwkey:</dt>
<dd>maps a DTMF key to a rewind operation equal
to the value of 'skipinterval'. A valid value is a DTMF Character (see
<a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is optional. There is no
default value.
</dd>
<dt>pauseinterval:</dt>
<dd>indicates how long a MS pauses prompt
playback when the pausekey is pressed.  A valid value is a Time
Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute
is optional. The default value is 10s.
</dd>
<dt>pausekey:</dt>
<dd>maps a DTMF key to a pause operation equal to
the value of 'pauseinterval'.  A valid value is a DTMF Character (see
<a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is optional. There is no
default value.
</dd>
<dt>resumekey:</dt>
<dd>maps a DTMF key to a resume operation.  A valid
value is a DTMF Character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The
attribute is optional. There is no default value.
</dd>
<dt>volumeinterval:</dt>
<dd>indicates the increase or decrease in
playback volume (relative to the current volume) when the volupkey or
voldnkey is pressed.  A valid value is a percentage (see <a class='info' href='#defn.percentage'>Section&nbsp;4.6.8<span> (</span><span class='info'>Percentage</span><span>)</span></a>).  The attribute is optional. The default
value is 10%.
</dd>
<dt>volupkey:</dt>
<dd>maps a DTMF key to a volume increase operation
equal to the value of 'volumeinterval'.  A valid value is a DTMF
Character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is
optional. There is no default value.
</dd>
<dt>voldnkey:</dt>
<dd>maps a DTMF key to a volume decrease operation
equal to the value of 'volumeinterval'. A valid value is a DTMF
Character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is
optional. There is no default value.
</dd>
<dt>speedinterval:</dt>
<dd>indicates the increase or decrease in
playback speed (relative to the current speed) when the speedupkey or
speeddnkey is pressed.  A valid value is a percentage (see <a class='info' href='#defn.percentage'>Section&nbsp;4.6.8<span> (</span><span class='info'>Percentage</span><span>)</span></a>).  The attribute is optional. The default
value is 10%.
</dd>
<dt>speedupkey:</dt>
<dd>maps a DTMF key to a speed increase operation
equal to the value of the speedinterval attribute.  A valid value is a
DTMF Character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is
optional. There is no default value.
</dd>
<dt>speeddnkey:</dt>
<dd>maps a DTMF key to a speed decrease operation
equal to the value of the speedinterval attribute. A valid value is a
DTMF Character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is
optional. There is no default value.
</dd>
<dt>external:</dt>
<dd>allows one or more DTMF keys to be declared as
external controls (for example: video camera controls); the MS can send
notifications when a matching key is activated using &lt;dtmfnotify>
(<a class='info' href='#defn.dtmfnotify'>Section&nbsp;4.2.5.2<span> (</span><span class='info'>&lt;dtmfnotify></span><span>)</span></a>). A valid value is a DTMF String (see
<a class='info' href='#defn.dtmfstring'>Section&nbsp;4.6.3<span> (</span><span class='info'>DTMFString</span><span>)</span></a>). The attribute is optional. There is
no default value.
</dd>
</dl></blockquote><p>

If the same DTMF is specified in more than one DTMF key control
attribute - except the pausekey and resumekey attributes - the MS sends
a &lt;response> with a 413 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</p>
<p>The MS has the following execution model for runtime control after
initialization:

</p>
<ol class="text">
<li>If an error occurs during execution, then the MS terminates runtime
control and the error is reported to the dialog container.  The MS MAY
report controls executed successfully before the error in
&lt;controlinfo> (see <a class='info' href='#defn.dialog.controlinfo'>Section&nbsp;4.3.2.2<span> (</span><span class='info'>&lt;controlinfo></span><span>)</span></a>).
</li>
<li>Runtime controls are active only during prompt playback (if no
&lt;prompt> element is specified, then runtime controls are ignored). If
DTMF input matches any specified keys (for example the ffkey), then the
MS applies the appropriate operation immediately.

If a seek operation (ffkey, rwkey) attempts to go beyond the beginning
or end of the prompt queue, then the MS automatically truncates it to
the prompt queue beginning or end respectively.

If a volume operation (voldnkey, volupkey) attempts to go beyond the
minimum or maximum volume supported by the platform, then the MS
automatically limits the operation to minimum or maximum supported
volume respectively.

If a speed operation (speeddnkey, speedupkey) attempts to go beyond the
minimum or maximum playback speed supported by the platform, then the MS
automatically limits the operation to minimum or maximum supported
speed respectively.

If the pause operation attempts to pause output when it is already
paused, then the operation is ignored. If the resume operation attempts
to resume when the prompts are not paused, then the operation is
ignored. 

If a seek, volume or speed operation is applied when output is paused,
then the MS also resumes output automatically.


</li>
<li>If DTMF control subscription has been specified for the dialog, then
each DTMF match of a control operation is reported in a &lt;dtmfnotify>
notification event (<a class='info' href='#defn.dtmfnotify'>Section&nbsp;4.2.5.2<span> (</span><span class='info'>&lt;dtmfnotify></span><span>)</span></a>). 
</li>
<li>When the dialog exits, all control matches are reported in a
&lt;controlinfo> element (<a class='info' href='#defn.dialog.controlinfo'>Section&nbsp;4.3.2.2<span> (</span><span class='info'>&lt;controlinfo></span><span>)</span></a>). 
</li>
</ol><p>

</p>
<a name="defn.collect"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.3"></a><h3>4.3.1.3.&nbsp;
&lt;collect></h3>

<p>The &lt;collect> element defines how DTMF input is collected.
</p>
<p>The &lt;collect> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>cleardigitbuffer:</dt>
<dd>indicates whether the digit buffer is to
be cleared.  A valid value is a boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>).  A value of true indicates that the digit
buffer is to be cleared. A value of false indicates that the digit
buffer is not to be cleared. The attribute is optional. The default
value is true.

</dd>
<dt>timeout:</dt>
<dd>indicates the maximum time to wait for user input
to begin.  A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 5s.
</dd>
<dt>interdigittimeout:</dt>
<dd>indicates the maximum time to wait for
another DTMF when the collected input is incomplete with respect to the
grammar. A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 2s.
</dd>
<dt>termtimeout:</dt>
<dd>indicates the maximum time to wait for the
termchar character when the collected input is complete with respect to
the grammar. A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 0s (no delay).
</dd>
<dt>escapekey:</dt>
<dd>specifies a DTMF key that indicates collected
grammar matches are discarded and the DTMF collection is to be
re-initiated.  A valid value is a DTMF Character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  The attribute is optional. There is no
default value.
</dd>
<dt>termchar:</dt>
<dd>specifies a DTMF character for terminating DTMF
input collection using the internal grammar. It is ignored when a custom
grammar is specified.  A valid value is a DTMF character (see <a class='info' href='#defn.dtmfchar'>Section&nbsp;4.6.2<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>).  To disable termination by a conventional
DTMF character, set the parameter to an unconventional character like
'A'. The attribute is optional. The default value is '#'.
</dd>
<dt>maxdigits:</dt>
<dd>The maximum number of digits to collect using
an internal digits (0-9 only) grammar. It is ignored when a custom
grammar is specified. A valid value is a positive integer (see <a class='info' href='#defn.posinteger'>Section&nbsp;4.6.5<span> (</span><span class='info'>Positive Integer</span><span>)</span></a>).  The attribute is optional. The default
value is 5.
</dd>
</dl></blockquote><p>


</p>
<p>The following matching priority is defined for incoming DTMF:
termchar attribute, escapekey attribute and then as part of a
grammar. For example, if "1" is defined as the escapekey attribute and
as part of a grammar, then its interpretation as a escapekey takes
priority.

</p>
<p>The &lt;collect> element has the following child elements:

</p>
<blockquote class="text"><dl>
<dt>&lt;grammar>:</dt>
<dd>indicates a custom grammar format (see <a class='info' href='#defn.grammar'>Section&nbsp;4.3.1.3.1<span> (</span><span class='info'>&lt;grammar></span><span>)</span></a>).  The element is optional.

</dd>
</dl></blockquote><p>


</p>
<p>The custom grammar takes priority over the internal grammar. If a
&lt;grammar> element is specified, the MS MUST use it for DTMF
collection.
</p>
<p>The MS has the following execution model for DTMF collection after 
initialization:

</p>
<ol class="text">
<li>The DTMF collection buffer MUST NOT receive DTMF input matching
&lt;control> operations (see <a class='info' href='#defn.control'>Section&nbsp;4.3.1.2<span> (</span><span class='info'>&lt;control></span><span>)</span></a>). 
</li>
<li>If an error occurs during execution, then the MS terminates
collection and reports the error to the dialog container (see <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>).  The MS MAY report DTMF collected before the
error in &lt;collectinfo> (see <a class='info' href='#defn.dialog.collectinfo'>Section&nbsp;4.3.2.3<span> (</span><span class='info'>&lt;collectinfo></span><span>)</span></a>).
</li>
<li>The MS clears the digit buffer if the value of the cleardigitbuffer
attribute is true.
</li>
<li>The MS activates an initial timer with the duration of the value of
the timeout attribute.  If the initial timer expires before any DTMF
input is received, then collection execution terminates, the
&lt;collectinfo> (see <a class='info' href='#defn.dialog.collectinfo'>Section&nbsp;4.3.2.3<span> (</span><span class='info'>&lt;collectinfo></span><span>)</span></a>) has the
termmode attribute set to noinput and the execution status is reported
to the dialog container. 

</li>
<li>When the first DTMF collect input is received, the initial timer is
cancelled and DTMF collection begins. Each DTMF input is collected
unless it matches the value of the escapekey attribute, or the termchar
attribute when the internal grammar is used. Collected input is matched
against the grammar to determine if it is valid and, if valid, whether
collection is complete. Valid DTMF patterns are either a simple digit
string where the maximum length is determined by the maxdigits attribute
and which can be optionally terminated by the character in the termchar
attribute; or a custom DTMF grammar specified with the &lt;grammar>
element. 
</li>
<li>After escapekey input, or a valid input which does not complete the
grammar, the MS activates a timer for the value of the interdigittimeout
attribute or the termtimeout attribute.  The MS only uses the
termtimeout value when the grammar does not allow any additional input;
otherwise, the MS uses the interdigittimeout.

</li>
<li>If DTMF collect input matches the value of the escapekey attribute,
then the MS re-initializes DTMF collection: i.e. the MS discards
collected DTMFs already matched against the grammar, and the MS attempts
to match incoming DTMF (including any pending in the digit buffer) as
described in Step 5 above.
</li>
<li>If the collect input is not valid with respect to the grammar or an
interdigittimeout timer expires, the MS terminates collection execution
and reports execution status to the dialog container with a
&lt;collectinfo> (see <a class='info' href='#defn.dialog.collectinfo'>Section&nbsp;4.3.2.3<span> (</span><span class='info'>&lt;collectinfo></span><span>)</span></a>) where
the termmode attribute is set to nomatch. 
</li>
<li>If the collect input completes the grammar or if a termtimeout timer
expires, then the MS terminates collection execution and reports
execution status to the dialog container with &lt;collectinfo> (see
<a class='info' href='#defn.dialog.collectinfo'>Section&nbsp;4.3.2.3<span> (</span><span class='info'>&lt;collectinfo></span><span>)</span></a>) where the termmode attribute
is set to match. 
</li>
</ol><p>

</p>
<a name="defn.grammar"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.3.1"></a><h3>4.3.1.3.1.&nbsp;
&lt;grammar></h3>

<p>The &lt;grammar> element allows a custom grammar, inline or external,
to be specified. Custom grammars permit the full range of DTMF
characters including '*' and '#' to be specified for DTMF pattern
matching.

</p>
<p>The &lt;grammar> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>src:</dt>
<dd>specifies the location of an external grammar
document. A valid value is a URI (see <a class='info' href='#defn.uri'>Section&nbsp;4.6.9<span> (</span><span class='info'>URI</span><span>)</span></a>).  The
MS MUST support both HTTP (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>) and HTTPS (<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a>) schemes and the MS MAY support other schemes.  If
the URI scheme is unsupported, the MS sends a &lt;response> with a 420
status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). If the resource cannot
be retrieved within the timeout interval, the MS sends a &lt;response>
with a 409 status code.  If the grammar format is not supported, the MS
sends a &lt;response> with a 424 status code. The attribute is
optional. There is no default value.

</dd>
<dt>type:</dt>
<dd>identifies the preferred type of the grammar
document identified by the src attribute. A valid value is a MIME media type
(see <a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). If the URI scheme used in the src
attribute defines a mechanism for establishing the authoratitive MIME
media type of the media resource, the value returned by that mechanism
takes precedence over this attribute. The attribute is optional. There
is no default value.

</dd>
<dt>fetchtimeout:</dt>
<dd>the maximum interval to wait when fetching a
grammar resource. A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 30s. 
</dd>
</dl></blockquote><p>

</p>
<p>The &lt;grammar> element allows inline grammars to be specified. XML
grammar formats MUST use a namespace other than the one used in this
specification. Non-XML grammar formats MAY use a CDATA section.

</p>
<p>The MS MUST support the <a class='info' href='#SRGS'>[SRGS]<span> (</span><span class='info'>Hunt, A. and S. McGlashan, &ldquo;Speech Recognition Grammar Specification Version         1.0,&rdquo; March&nbsp;2004.</span><span>)</span></a> XML grammar format
("application/srgs+xml") and MS MAY support KPML (<a class='info' href='#RFC4730'>[RFC4730]<span> (</span><span class='info'>Burger, E. and M. Dolly, &ldquo;A Session Initiation Protocol (SIP) Event Package for Key Press Stimulus (KPML),&rdquo; November&nbsp;2006.</span><span>)</span></a>) or other grammar formats.  If the grammar format is
not supported by the MS, then the MS sends a &lt;response> with a 424
status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</p>
<p>For example, the following fragment shows DTMF collection with an
inline SRGS grammar:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;collect cleardigitbuffer="false" timeout="20s"
	interdigittimeout="1s"&gt;
	&lt;grammar&gt;
		&lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
				version="1.0" mode="dtmf"&gt;
   		  &lt;rule id="digit"&gt;
		   &lt;one-of&gt;
			&lt;item&gt;0&lt;/item&gt;
			&lt;item&gt;1&lt;/item&gt;
			&lt;item&gt;2&lt;/item&gt;
			&lt;item&gt;3&lt;/item&gt;
 			&lt;item&gt;4&lt;/item&gt;
 			&lt;item&gt;5&lt;/item&gt;
			&lt;item&gt;6&lt;/item&gt;
			&lt;item&gt;7&lt;/item&gt;
			&lt;item&gt;8&lt;/item&gt;
			&lt;item&gt;9&lt;/item&gt;
		   &lt;/one-of&gt;
		&lt;/rule&gt;

		&lt;rule id="pin" scope="public"&gt;
 		 &lt;one-of&gt;
			&lt;item&gt;
			 &lt;item repeat="4"&gt;
			  &lt;ruleref uri="#digit"/&gt;
				&lt;/item&gt;#&lt;/item&gt;
				&lt;item&gt;* 9&lt;/item&gt;
		 &lt;/one-of&gt;
		&lt;/rule&gt;

       &lt;/grammar&gt;
	 &lt;/grammar&gt;
	&lt;/collect&gt;
</pre></div><p>


</p>
<p>The same grammar could also be referenced externally (and take
advantage of HTTP caching):

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;collect cleardigitbuffer="false" timeout="20s"&gt;
   &lt;grammar type=""application/srgs+xml"
            src="http://example.org/pin.grxml"/&gt;
&lt;/collect&gt;
</pre></div><p>


</p>
<a name="defn.record"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.4"></a><h3>4.3.1.4.&nbsp;
&lt;record></h3>

<p>The &lt;record> element specifies how media input is recorded.
</p>
<p>The &lt;record> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>timeout:</dt>
<dd>indicates the time to wait for user input to
begin.  A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 5s.
</dd>
<dt>vadinitial:</dt>
<dd>Control whether voice activity detection (VAD)
is used to initiate the recording operation.  A valid value is a boolean
(see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>). A value of true indicates the MS
MUST initiate recording if the VAD detects voice on the configured
inbound audio streams.  A value of false indicates that the MS MUST NOT
initiate recording using VAD. The attribute is optional. The default
value is false.

</dd>
<dt>vadfinal:</dt>
<dd>Control whether voice activity detection (VAD)
is used to terminate the recording operation.  A valid value is a
boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>). A value of true indicates
the MS MUST terminate recording if the VAD detects a period of silence
(whose duration is specified by the finalsilence attribute) on
configured inbound audio streams.  A value of false indicates that the
MS MUST NOT terminate recording using VAD. The attribute is
optional. The default value is false.

</dd>
<dt>dtmfterm:</dt>
<dd>Indicates whether the recording operation is
terminated by DTMF input.  A valid value is a boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>).  A value of true indicates that recording is
terminated by DTMF input. A value of false indicates that recording is
not terminated by DTMF input. The attribute is optional. The default
value is true.

</dd>
<dt>maxtime:</dt>
<dd>indicates The maximum duration of the
recording. A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 15s.

</dd>
<dt>beep:</dt>
<dd>indicates whether a 'beep' is to be played
immediately prior to initiation of the recording operation.  A valid
value is a boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>). The attribute is
optional. The default value is false.

</dd>
<dt>finalsilence:</dt>
<dd>indicates the interval of silence that
indicates the end of voice input. This interval is not part of the
recording itself. This parameter is ignored if the vadfinal attribute
has the value false. A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 5s.
</dd>
<dt>append:</dt>
<dd>indicates whether recorded data is appended or not
to a recording location if a resource already exists. A valid value is a
boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>). A value of true indicates
that recorded data is appended to the existing resource at a recording
location. A value of false indicates that recorded data is to overwrite
the existing resource. The mapping of the append operation onto the
upload protocol scheme is implementation-specific.  The attribute is
optional. The default value is false.

</dd>
</dl></blockquote><p>
If either the vadinitial or vadfinal attribute is set to true and the MS
does not support VAD, the MS sends a &lt;response> with a 434 status
code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).


</p>
<p>The &lt;record> element has the following child element (0 or more
occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;media>:</dt>
<dd>specifies the location and type of the media
resource for uploading recorded data (see <a class='info' href='#defn.media'>Section&nbsp;4.3.1.5<span> (</span><span class='info'>&lt;media></span><span>)</span></a>). The MS MUST support both HTTP (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>) and HTTPS (<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a>) schemes for
uploading recorded data and the MS MAY support other schemes.  The MS
uploads recorded data to this resource as soon as possible after
recording is complete.  The element is optional.

</dd>
</dl></blockquote><p>
If multiple &lt;media> elements are specified, then media input is to be
recorded in parallel to multiple resource locations.

</p>
<p>If no &lt;media> child element is specified, the MS MUST record media
input but the recording location and the recording format are
implementation-specific (e.g. the MS records audio in the WAV format to
a local disk accessible by HTTP). The recording location and format are
reported in &lt;recordinfo> (<a class='info' href='#defn.dialog.recordinfo'>Section&nbsp;4.3.2.4<span> (</span><span class='info'>&lt;recordinfo></span><span>)</span></a>)
when the dialog terminates.  The recording MUST be available from this
location until the connection or conference associated with the dialog
on the MS terminates.

</p>
<p>If the MS does not support the configuration required for recording
from the input media streams to one or more &lt;media> elements and a
more specific error code is not defined for its child elements, the MS
sends a &lt;response> with a 423 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>).

</p>
<p>Note that an MS MAY support uploading recorded data to recording
locations at the same time the recording operation takes place. Such
implementations need to be aware of the requirements of certain
recording formats (e.g. WAV) for metadata at the beginning of the
uploaded file, that the finalsilence interval is not part of the
recording and how these requirements interact with the URI scheme.

</p>
<p>The MS has the following execution model for recording after
initialization:

</p>
<ol class="text">
<li>If an error occurs during execution (e.g. authentication or
communication error when trying to upload to a recording location), then
the MS terminates record execution and reports the error to the dialog
container (see <a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>). The MS MAY report data
recorded before the error in &lt;recordinfo> (see <a class='info' href='#defn.dialog.recordinfo'>Section&nbsp;4.3.2.4<span> (</span><span class='info'>&lt;recordinfo></span><span>)</span></a>).

</li>
<li>If DTMF input (not matching a &lt;control> operation) is received
during prompt playback and the prompt bargein attribute is set to true,
then the MS activates the record execution. Otherwise, the MS activates it
after the completion of prompt playback. 
</li>
<li>If a beep attribute with the value of true is specified, then the MS
plays a beep tone. 
</li>
<li>The MS activates a timer with the duration of the value of the
timeout attribute. If the timer expires before the recording operation
begins, then the MS terminates the recording execution and reports the
status to dialog container with &lt;recordinfo> (see <a class='info' href='#defn.dialog.recordinfo'>Section&nbsp;4.3.2.4<span> (</span><span class='info'>&lt;recordinfo></span><span>)</span></a>) where the termmode attribute is set
to noinput. 
</li>
<li>Initiation of the recording operation depends on the value of the
vadinitial attribute. If vadinitial has the value false, then the
recording operation is initiated immediately. Otherwise, the recording
operation is initiated when voice activity is detected.
</li>
<li>When the recording operation is initiated, a timer is started for the
value of the maxtime attribute (maximum duration of the recording). If
the timer expires before the recording operation is complete, then the
MS terminates recording execution and reports the execution status to
the dialog container with &lt;recordinfo> (see <a class='info' href='#defn.dialog.recordinfo'>Section&nbsp;4.3.2.4<span> (</span><span class='info'>&lt;recordinfo></span><span>)</span></a>) where the termmode attribute set to
maxtime. 
</li>
<li>During the record operation input media streams are recording to a
location and format specified in one or more &lt;media> child
elements. If no &lt;media> child element is specified, the MS records
input to an implementation-specific location and format. 
</li>
<li>If the dtmfterm attribute has the value true and DTMF input is
detected during the record operation, then the MS terminates recording
and its status is reported to the dialog container with a
&lt;recordinfo> (see <a class='info' href='#defn.dialog.recordinfo'>Section&nbsp;4.3.2.4<span> (</span><span class='info'>&lt;recordinfo></span><span>)</span></a>) where the
termmode attribute is set to dtmf. 
</li>
<li>If vadfinal attribute has the value true, then the MS terminates the
recording operation when a period of silence, with the duration
specified by the value of the finalsilence attribute, is detected. This
period of silence is not part of the final recording. The status is
reported to the dialog container with a &lt;recordinfo> (see <a class='info' href='#defn.dialog.recordinfo'>Section&nbsp;4.3.2.4<span> (</span><span class='info'>&lt;recordinfo></span><span>)</span></a>) where the termmode attribute is set
to finalsilence. 
</li>
</ol><p>

</p>
<p>For example, a request to record audio and video input to separate
locations:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
&lt;dialogstart connectionid="c1"&gt;
  &lt;dialog&gt;
   &lt;record maxtime="30s" vadinitial="false" vadfinal="false"&gt;
    &lt;media type="audio/x-wav"
        loc="http://www.example.com/upload/audio.wav"/&gt;
    &lt;media type="video/3gpp;codecs='s263'"
        loc="http://www.example.com/upload/video.3gp"/&gt;
   &lt;/record&gt;
  &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


When the &lt;record> element is executed, it immediately begins
recording of the audio and video (since vadinitial is false) where the
destination locations are specified in the &lt;media> child elements.
Recording is completed when the duration reaches 30s or the connection
is terminated.

</p>
<a name="defn.media"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1.5"></a><h3>4.3.1.5.&nbsp;
&lt;media></h3>

<p>
The &lt;media> element specifies a media resource to playback from (see
<a class='info' href='#defn.prompt'>Section&nbsp;4.3.1.1<span> (</span><span class='info'>&lt;prompt></span><span>)</span></a>) or record to (see <a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>). In the playback case, the resource is retrieved
and in the recording case, recording data is uploaded to the resource
location.

</p>
<p>A &lt;media> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>loc:</dt>
<dd>specifies the location of the media resource. A valid
value is a URI (see <a class='info' href='#defn.uri'>Section&nbsp;4.6.9<span> (</span><span class='info'>URI</span><span>)</span></a>). The MS MUST support both
HTTP (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>) and HTTPS (<a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a>)
schemes and the MS MAY support other schemes. If the URI scheme is not
supported by the MS, the MS sends a &lt;response> with a 420 status code
(<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). If the resource is to be retrieved
but the MS cannot retrieve it within the timeout interval, the MS sends
a &lt;response> with a 409 status code. If the format of the media
resource is not supported, the MS sends a &lt;response> with a 429
status code. The attribute is mandatory.

</dd>
<dt>type:</dt>
<dd>specifies the type of the media resource indicated
in the loc attribute. A valid value is a MIME media type (see <a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>) which, depending on its definition, can
include additional parameters (e.g. <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a>). If the
URI scheme used in the loc attribute defines a mechanism for
establishing the authoratitive MIME media type of the media resource,
the value returned by that mechanism takes precedence over this
attribute. If additional media parameters are specified, the MS MUST use
them to determine media processing. For example, <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a> defines a 'codec' parameter for media types like
video/3gpp which would determine which media streams are played or
recorded. The attribute is optional. There is no default value.

</dd>
<dt>fetchtimeout:</dt>
<dd>the maximum interval to wait when fetching a
media resource. A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The attribute is optional. The
default value is 30s. 
</dd>
<dt>soundLevel:</dt>
<dd>playback soundLevel (volume) for the media
resource. A valid value is a percentage (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>). The value indicates increase or decrease
relative to the original recorded volume of the media. A value of 100%
(the default) plays the media at its recorded volume, a value of 200%
will play the media twice recorded volume, 50% at half its recorded
volume, a value of 0% will play the media silently, and so on.  See
'soundLevel' in SMIL (<a class='info' href='#W3C.REC-SMIL2-20051213'>[W3C.REC&#8209;SMIL2&#8209;20051213]<span> (</span><span class='info'>Koivisto, A., Bulterman, D., Michel, T., Layada, N., Zucker, D., Jansen, J., Mullender, S., and G. Grassel, &ldquo;Synchronized Multimedia Integration Language (SMIL 2.1),&rdquo; December&nbsp;2005.</span><span>)</span></a>) for
further information.

The attribute is optional. The default value is 100%.

</dd>
<dt>clipBegin:</dt>
<dd>offset from start of media resource to begin
playback.  A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The offset is measured in normal
media playback time from the beginning of the media resource.  If the
clipBegin offset is after the end of media (or the clipEnd offset), no
media is played.  See 'clipBegin' in SMIL (<a class='info' href='#W3C.REC-SMIL2-20051213'>[W3C.REC&#8209;SMIL2&#8209;20051213]<span> (</span><span class='info'>Koivisto, A., Bulterman, D., Michel, T., Layada, N., Zucker, D., Jansen, J., Mullender, S., and G. Grassel, &ldquo;Synchronized Multimedia Integration Language (SMIL 2.1),&rdquo; December&nbsp;2005.</span><span>)</span></a>) for further information.  The
attribute is optional. The default value is 0s.
</dd>
<dt>clipEnd:</dt>
<dd>offset from start of media resource to end
playback.  A valid value is a Time Designation (see <a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).  The offset is measured in normal
media playback time from the beginning of the media resource.  If the
clipEnd offset is after the end of media, then the media is played to
the end. If clipBegin is after clipEnd, then no media is played. See
'clipEnd' in SMIL (<a class='info' href='#W3C.REC-SMIL2-20051213'>[W3C.REC&#8209;SMIL2&#8209;20051213]<span> (</span><span class='info'>Koivisto, A., Bulterman, D., Michel, T., Layada, N., Zucker, D., Jansen, J., Mullender, S., and G. Grassel, &ldquo;Synchronized Multimedia Integration Language (SMIL 2.1),&rdquo; December&nbsp;2005.</span><span>)</span></a>) for further
information.  The attribute is optional. There is no default value.
</dd>
</dl></blockquote><p>
The fetchtimeout, soundLevel, clipBegin and clipEnd attributes are only
relevant in the playback use case. The MS ignores these attributes when
using the &lt;media> for recording.

</p>
<p>The &lt;media> element has no children.
</p>
<a name="defn.dialog.exit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2"></a><h3>4.3.2.&nbsp;
Exit Information</h3>

<p>When the dialog exits, information about the specified operations is
reported in a &lt;dialogexit> notification event (<a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>). 
</p>
<a name="defn.dialog.promptinfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2.1"></a><h3>4.3.2.1.&nbsp;
&lt;promptinfo></h3>

<p>The &lt;promptinfo> element reports the information about prompt
execution. It has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>duration:</dt>
<dd>indicates the duration of prompt playback in
milliseconds.  A valid value is a non-negative integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>).  The attribute is optional. There is no
default value.

</dd>
<dt>termmode:</dt>
<dd>indicates how playback was terminated.  Valid
values are: 'stopped', 'completed' or 'bargein'. The attribute is
mandatory.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;promptinfo> element has no child elements.
</p>
<a name="defn.dialog.controlinfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2.2"></a><h3>4.3.2.2.&nbsp;
&lt;controlinfo></h3>

<p>The &lt;controlinfo> element reports information about control
execution. 
</p>
<p>The &lt;controlinfo> element has no attributes and has 0 or more
&lt;controlmatch> child elements each describing an individual runtime
control match.

</p>
<a name="defn.dialog.controlmatch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2.2.1"></a><h3>4.3.2.2.1.&nbsp;
&lt;controlmatch></h3>

<p>The &lt;controlmatch> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>dtmf:</dt>
<dd>DTMF input triggering the runtime control.  A valid
value is a DTMF string (see <a class='info' href='#defn.dtmfstring'>Section&nbsp;4.6.3<span> (</span><span class='info'>DTMFString</span><span>)</span></a>) with no
space between characters. The attribute is mandatory.

</dd>
<dt>timestamp:</dt>
<dd>indicates the time (on the MS) at which the
control was triggered.  A valid value is an dateTime expression (<a class='info' href='#defn.dateTime'>Section&nbsp;4.6.12<span> (</span><span class='info'>DateTime</span><span>)</span></a>). The attribute is mandatory.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;controlmatch> element has no child elements.
</p>
<a name="defn.dialog.collectinfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2.3"></a><h3>4.3.2.3.&nbsp;
&lt;collectinfo></h3>

<p>The &lt;collectinfo> element reports the information about collect
execution.  
</p>
<p>The &lt;collectinfo> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>dtmf:</dt>
<dd>DTMF input collected from the user.  A valid value
is a DTMF string (see <a class='info' href='#defn.dtmfstring'>Section&nbsp;4.6.3<span> (</span><span class='info'>DTMFString</span><span>)</span></a>) with no space
between characters. The attribute is optional. There is no default
value.

</dd>
<dt>termmode:</dt>
<dd>indicates how collection was terminated.  Valid
values are: 'stopped', 'match', 'noinput' or 'nomatch'.  The attribute
is mandatory.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;collectinfo> element has no child elements.
</p>
<a name="defn.dialog.recordinfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2.4"></a><h3>4.3.2.4.&nbsp;
&lt;recordinfo></h3>

<p>The &lt;recordinfo> element reports information about record
execution (<a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>). 
</p>
<p>The &lt;recordinfo> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>termmode:</dt>
<dd>indicates how recording was terminated.  Valid
values are: 'stopped', 'noinput', 'dtmf', 'maxtime', and 'finalsilence'.
The attribute is mandatory.

</dd>
<dt>duration:</dt>
<dd>indicates the duration of the recording in
milliseconds.  A valid value is a non-negative integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>).  The attribute is optional. There is no
default value.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;recordinfo> element has the following child element (0 or
more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;mediainfo>:</dt>
<dd>indicates information about a recorded
media resource (see <a class='info' href='#defn.dialog.mediainfo'>Section&nbsp;4.3.2.4.1<span> (</span><span class='info'>&lt;mediainfo></span><span>)</span></a>). The element
is optional.

</dd>
</dl></blockquote><p>


</p>
<p>When the record operation is successful, the MS MUST specify a
&lt;mediainfo> element for each recording location. For example, if the
&lt;record> element contained three &lt;media> child elements, then the
&lt;recordinfo> would contain three &lt;mediainfo> child elements.
</p>
<a name="defn.dialog.mediainfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2.4.1"></a><h3>4.3.2.4.1.&nbsp;
&lt;mediainfo></h3>

<p>The &lt;mediainfo> element reports information about a recorded media
resource.

</p>
<p>The &lt;mediainfo> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>loc:</dt>
<dd>indicates the location of the media resource. A valid
value is a URI (see <a class='info' href='#defn.uri'>Section&nbsp;4.6.9<span> (</span><span class='info'>URI</span><span>)</span></a>).  The attribute is
mandatory.

</dd>
<dt>type:</dt>
<dd>indicates the format of the media resource. A valid
value is a MIME media type (see <a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). The
attribute is mandatory.

</dd>
<dt>size:</dt>
<dd>indicates the size of the media resource in bytes.
A valid value is a non-negative integer (see <a class='info' href='#defn.nonneginteger'>Section&nbsp;4.6.4<span> (</span><span class='info'>Non-Negative Integer</span><span>)</span></a>).  The attribute is optional. There is no
default value.

</dd>
</dl></blockquote><p>

</p>
<a name="defn.auditmgt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Audit Elements</h3>

<p>The audit elements defined in this section allow the MS to be audited
for package capabilities as well as dialogs managed by the package.

Auditing is particularly important for two use cases. First, it enables
discovery of package capabilities supported on an MS before an AS starts
a dialog on connection or conference. The AS can then use this
information to create request elements using supported capabilities and,
in the case of codecs, to negotiate an appropriate SDP for a user
agent's connection.  Second, auditing enables discovery of the existence
and status of dialogs currently managed by the package on the MS. This
could be used when one AS takes over management of the dialogs if the
AS which initiated the dialogs fails or is no longer available (see
Security Considerations described in <a class='info' href='#security'>Section&nbsp;7<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> ). 
</p>
<a name="defn.audit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.1"></a><h3>4.4.1.&nbsp;
&lt;audit></h3>

<p>The &lt;audit> request element is sent to the MS to request
information about the capabilities of, and dialogs currently managed
with, this control package. Capabilities include supported dialog
languages, grammar formats, record and media types as well as
codecs. Dialog information includes the status of managed dialogs as
well as codecs.


</p>
<p>The &lt;audit> element has the following attributes: 


</p>
<blockquote class="text"><dl>
<dt>capabilities:</dt>
<dd>indicates whether package capabilities are
to be audited. A valid value is a boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>). A value of true indicates that capability
information is to be reported. A value of false indicates that
capability information is not to be reported. The attribute is
optional. The default value is true.

</dd>
<dt>dialogs:</dt>
<dd>indicates whether dialogs currently managed by
the package are to be audited. A valid value is a boolean (see <a class='info' href='#defn.boolean'>Section&nbsp;4.6.1<span> (</span><span class='info'>Boolean</span><span>)</span></a>). A value of true indicates that dialog
information is to be reported. A value of false indicates that dialog
information is not to be reported. The attribute is optional. The
default value is true.

</dd>
<dt>dialogid:</dt>
<dd>string identifying a specific dialog to audit.
The MS sends a response with a 406 status code (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>) if the specified dialog identifier is
invalid. The attribute is optional. There is no default value.

</dd>
</dl></blockquote><p>

If the dialogs attribute has the value true and dialogid attribute is
specified, then only audit information about the specified dialog is
reported. If the dialogs attribute has the value false, then no dialog
audit information is reported even if a dialogid attribute is specified.

</p>
<p>
The &lt;audit> element has no child elements.

</p>
<p>When the MS receives an &lt;audit> request, it MUST reply with a
&lt;auditresponse> element (<a class='info' href='#defn.auditresponse'>Section&nbsp;4.4.2<span> (</span><span class='info'>&lt;auditresponse></span><span>)</span></a>) which
includes a mandatory attribute describing the status in terms of a
numeric code. Response status codes are defined in <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>.  If the request is successful, the
&lt;auditresponse> contains (depending on attribute values) a
&lt;capabilities> element (<a class='info' href='#defn.capabilities'>Section&nbsp;4.4.2.2<span> (</span><span class='info'>&lt;capabilities></span><span>)</span></a>) reporting
package capabilities and a &lt;dialogs> element (<a class='info' href='#defn.dialogs'>Section&nbsp;4.4.2.3<span> (</span><span class='info'>&lt;dialogs></span><span>)</span></a>) reporting managed dialog information. If the MS
is not able to process the request and carry out the audit operation,
the audit request has failed and the MS MUST indicate the class of
failure using an appropriate 4xx response code. Unless an error response
code is specified for a class of error within this section,
implementations follow <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a> in determining
the appropriate status code for the response.

</p>
<p>For example, a request to audit capabilities and dialogs managed by
the package:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
  &lt;audit/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>In this example, only capabilities are to be audited:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
  &lt;audit dialogs="false"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>With this example, only a specific dialog is to be audited:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
  &lt;audit capabilities="false" dialogid="d4"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.auditresponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2"></a><h3>4.4.2.&nbsp;
&lt;auditresponse></h3>

<p>The &lt;auditresponse> element describes a response to a &lt;audit>
request.

</p>
<p>The &lt;auditresponse> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>status:</dt>
<dd>numeric code indicating the audit response
status. The attribute is mandatory. Valid values are defined in <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>. 
</dd>
<dt>reason:</dt>
<dd>string specifying a reason for the status. The
attribute is optional. 
</dd>
</dl></blockquote><p>

</p>
<p>The &lt;auditresponse> element has the following sequence of child
elements:

</p>
<blockquote class="text"><dl>
<dt>&lt;capabilities></dt>
<dd>element (<a class='info' href='#defn.capabilities'>Section&nbsp;4.4.2.2<span> (</span><span class='info'>&lt;capabilities></span><span>)</span></a>) describing capabilities of the
package. The element is optional. 
</dd>
<dt>&lt;dialogs></dt>
<dd>element (<a class='info' href='#defn.dialogs'>Section&nbsp;4.4.2.3<span> (</span><span class='info'>&lt;dialogs></span><span>)</span></a>)
describing information about managed dialogs.  The element is
optional. 
</dd>
</dl></blockquote><p>

</p>
<p>For example, a successful response to a &lt;audit> request requesting
capabilities and dialogs information:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;auditresponse status="200"&gt;
  &lt;capabilities&gt;
   &lt;dialoglanguages&gt;
    &lt;mimetype&gt;application/voicexml+xml&lt;/mimetype&gt;
   &lt;/dialoglanguages&gt;
   &lt;grammartypes/&gt;
   &lt;recordtypes&gt;
    &lt;mimetype&gt;audio/x-wav&lt;/mimetype&gt;
    &lt;mimetype&gt;video/3gpp&lt;/mimetype&gt;
   &lt;/recordtypes&gt;
   &lt;prompttypes&gt;
    &lt;mimetype&gt;audio/x-wav&lt;/mimetype&gt;
    &lt;mimetype&gt;video/3gpp&lt;/mimetype&gt;
   &lt;/prompttypes&gt;
   &lt;variables&gt;
    &lt;variabletype type="date" desc="value formatted as YYYYMMDD"&gt;
     &lt;format desc="month year day"&gt;mdy&lt;/format&gt;
     &lt;format desc="year month day"&gt;ymd&lt;/format&gt;
     &lt;format desc="day month year"&gt;dmy&lt;/format&gt;
     &lt;format desc="day month"&gt;dm&lt;/format&gt;
    &lt;/variabletype&gt;
   &lt;/variables&gt;
   &lt;maxpreparedduration&gt;600s&lt;/maxpreparedduration&gt;
   &lt;maxrecordduration&gt;1800s&lt;/maxrecordduration&gt;
   &lt;codecs&gt;
    &lt;codec name="video"&gt;
     &lt;subtype&gt;H263&lt;/subtype&gt;
    &lt;/codec&gt;
    &lt;codec name="video"&gt;
     &lt;subtype&gt;H264&lt;/subtype&gt;
    &lt;/codec&gt;
    &lt;codec name="audio"&gt;
     &lt;subtype&gt;PCMU&lt;/subtype&gt;
    &lt;/codec&gt;
    &lt;codec name="audio"&gt;
     &lt;subtype&gt;PCMA&lt;/subtype&gt;
    &lt;/codec&gt;
    &lt;codec name="audio"&gt;
     &lt;subtype&gt;telephone-event&lt;/subtype&gt;
    &lt;/codec&gt;
   &lt;/codecs&gt;
  &lt;/capabilities&gt;
  &lt;dialogs&gt;
   &lt;dialogaudit dialogid="4532" state="preparing"/&gt;
   &lt;dialogaudit dialogid="4599" state="prepared"/&gt;
   &lt;dialogaudit dialogid="1234" state="started" conferenceid="conf1"&gt;
    &lt;codecs&gt;
     &lt;codec name="audio"&gt;
      &lt;subtype&gt;PCMA&lt;/subtype&gt;
     &lt;/codec&gt;
     &lt;codec name="audio"&gt;
      &lt;subtype&gt;telephone-event&lt;/subtype&gt;
     &lt;/codec&gt;
    &lt;/codecs&gt;
   &lt;/dialogaudit&gt;
  &lt;/dialogs&gt;
 &lt;/auditresponse&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="defn.codecs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.1"></a><h3>4.4.2.1.&nbsp;
&lt;codecs></h3>

<p> The &lt;codecs> provides audit information about codecs. 
</p>
<p>The &lt;codecs> element has no attributes. 
</p>
<p>The &lt;codecs> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;codec>:</dt>
<dd>audit information for a codec (<a class='info' href='#defn.codec'>Section&nbsp;4.4.2.1.1<span> (</span><span class='info'>&lt;codec></span><span>)</span></a>). The element is optional.

</dd>
</dl></blockquote><p>

</p>
<p>For example, a fragment describing two codecs: 

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;codecs&gt;
  &lt;codec name="audio"&gt;
   &lt;subtype&gt;PCMA&lt;/subtype&gt;
  &lt;/codec&gt;
  &lt;codec name="audio"&gt;
   &lt;subtype&gt;telephone-event&lt;/subtype&gt;
  &lt;/codec&gt;
&lt;/codecs&gt;
</pre></div><p>


</p>
<a name="defn.codec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.1.1"></a><h3>4.4.2.1.1.&nbsp;
&lt;codec></h3>

<p>The &lt;codec> element describes a codec on the MS. The element is
modeled on the &lt;codec> element in the XCON conference information
data model (<a class='info' href='#I-D.ietf-xcon-common-data-model'>[I&#8209;D.ietf&#8209;xcon&#8209;common&#8209;data&#8209;model]<span> (</span><span class='info'>Novo, O., Camarillo, G., Morgan, D., and J. Urpalainen, &ldquo;Conference Information Data Model for Centralized Conferencing (XCON),&rdquo; October&nbsp;2010.</span><span>)</span></a>) but allows
addition information (e.g. rate, speed, etc) to be specified.

</p>
<p>The &lt;codec> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>name:</dt>
<dd>indicates the type name of the codec's media format
as defined in IANA (<a class='info' href='#IANA'>[IANA]<span> (</span><span class='info'>, &ldquo;IANA registry for RTP Payload Types,&rdquo; .</span><span>)</span></a>). A valid value is a
"type-name" as defined in Section 4.2 of <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>.  The
attribute is manadatory.

</dd>
</dl></blockquote><p>


</p>
<p>The &lt;codec> element has the following sequence of child
elements:

</p>
<blockquote class="text"><dl>
<dt>&lt;subtype>:</dt>
<dd>element whose content model describes the
subtype of the codec's media format as defined in IANA (<a class='info' href='#IANA'>[IANA]<span> (</span><span class='info'>, &ldquo;IANA registry for RTP Payload Types,&rdquo; .</span><span>)</span></a>). A valid value is a "subtype-name" as defined in
Section 4.2 of <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>. The element is mandatory.

</dd>
<dt>&lt;params>:</dt>
<dd>element (<a class='info' href='#defn.params'>Section&nbsp;4.2.6<span> (</span><span class='info'>&lt;params></span><span>)</span></a>)
describing additional information about the codec. This package is
agnostic to the names and values of the codec parameters supported by an
implementation. The element is optional.

</dd>
</dl></blockquote><p>

</p>
<p>For example, a fragment with a &lt;codec> element describing the
H263 video codec:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;codec name="video"&gt;
 &lt;subtype&gt;H263&lt;/subtype&gt;
&lt;/codec&gt;
</pre></div><p>


</p>
<a name="defn.capabilities"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2"></a><h3>4.4.2.2.&nbsp;
&lt;capabilities></h3>

<p> The &lt;capabilities> element provides audit information about
package capabilities. 
</p>
<p>The &lt;capabilities> element has no attributes. 
</p>
<p>The &lt;capabilities> element has the following sequence of child
elements:

</p>
<blockquote class="text"><dl>
<dt>&lt;dialoglanguages>:</dt>
<dd>element (<a class='info' href='#defn.dialoglanguages'>Section&nbsp;4.4.2.2.1<span> (</span><span class='info'>&lt;dialoglanguages></span><span>)</span></a>) describing additional dialog languages
supported by the MS. The element is mandatory.

</dd>
<dt>&lt;grammartypes>:</dt>
<dd>element (<a class='info' href='#defn.grammartypes'>Section&nbsp;4.4.2.2.2<span> (</span><span class='info'>&lt;grammartypes></span><span>)</span></a>) describing supported &lt;grammar>
(<a class='info' href='#defn.grammar'>Section&nbsp;4.3.1.3.1<span> (</span><span class='info'>&lt;grammar></span><span>)</span></a>) format types. The element is mandatory.

</dd>
<dt>&lt;recordtypes>:</dt>
<dd>element (<a class='info' href='#defn.recordtypes'>Section&nbsp;4.4.2.2.3<span> (</span><span class='info'>&lt;recordtypes></span><span>)</span></a>) describing &lt;media> (<a class='info' href='#defn.media'>Section&nbsp;4.3.1.5<span> (</span><span class='info'>&lt;media></span><span>)</span></a>) format types supported for &lt;record> (<a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>).  The element is mandatory.

</dd>
<dt>&lt;prompttypes>:</dt>
<dd>element (<a class='info' href='#defn.prompttypes'>Section&nbsp;4.4.2.2.4<span> (</span><span class='info'>&lt;prompttypes></span><span>)</span></a>) describing supported &lt;media> (<a class='info' href='#defn.media'>Section&nbsp;4.3.1.5<span> (</span><span class='info'>&lt;media></span><span>)</span></a>) format types for playback within a &lt;prompt>
(<a class='info' href='#defn.prompt'>Section&nbsp;4.3.1.1<span> (</span><span class='info'>&lt;prompt></span><span>)</span></a>). The element is mandatory.

</dd>
<dt>&lt;variables>:</dt>
<dd>element (<a class='info' href='#defn.variables'>Section&nbsp;4.4.2.2.5<span> (</span><span class='info'>&lt;variables></span><span>)</span></a>)
describing supported types and formats for the &lt;variable> element
(<a class='info' href='#defn.variables'>Section&nbsp;4.4.2.2.5<span> (</span><span class='info'>&lt;variables></span><span>)</span></a>). The element is mandatory.

</dd>
<dt>&lt;maxpreparedduration>:</dt>
<dd> element (<a class='info' href='#defn.maxpreparedduration'>Section&nbsp;4.4.2.2.6<span> (</span><span class='info'>&lt;maxpreparedduration></span><span>)</span></a>) describing the supported maximum
duration for a prepared dialog following a &lt;dialogprepare> (<a class='info' href='#defn.dialogprepare'>Section&nbsp;4.2.1<span> (</span><span class='info'>&lt;dialogprepare></span><span>)</span></a>) request. The element is mandatory.

</dd>
<dt>&lt;maxrecordduration>:</dt>
<dd> element (<a class='info' href='#defn.maxrecordduration'>Section&nbsp;4.4.2.2.7<span> (</span><span class='info'>&lt;maxrecordduration></span><span>)</span></a>) describing the supported maximum
duration for a recording &lt;record> <a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>)
request. The element is mandatory.

</dd>
<dt>&lt;codecs>:</dt>
<dd>element (<a class='info' href='#defn.codecs'>Section&nbsp;4.4.2.1<span> (</span><span class='info'>&lt;codecs></span><span>)</span></a>)
describing codecs available to the package. The element is mandatory.

</dd>
</dl></blockquote><p>

</p>
<p>For example, a fragment describing capabilities:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;capabilities&gt;
   &lt;dialoglanguages&gt;
    &lt;mimetype&gt;application/voicexml+xml&lt;/mimetype&gt;
   &lt;/dialoglanguages&gt;
   &lt;grammartypes/&gt;
   &lt;recordtypes&gt;
    &lt;mimetype&gt;audio/x-wav&lt;/mimetype&gt;
    &lt;mimetype&gt;video/3gpp&lt;/mimetype&gt;
   &lt;/recordtypes&gt;
   &lt;prompttypes&gt;
    &lt;mimetype&gt;audio/x-wav&lt;/mimetype&gt;
    &lt;mimetype&gt;video/3gpp&lt;/mimetype&gt;
   &lt;/prompttypes&gt;
   &lt;variables/&gt;
   &lt;maxpreparedduration&gt;30s&lt;/maxpreparedduration&gt;
   &lt;maxrecordduration&gt;60s&lt;/maxrecordduration&gt;
   &lt;codecs&gt;
    &lt;codec name="video"&gt;
     &lt;subtype&gt;H263&lt;/subtype&gt;
    &lt;/codec&gt;
    &lt;codec name="video"&gt;
     &lt;subtype&gt;H264&lt;/subtype&gt;
    &lt;/codec&gt;
    &lt;codec name="audio"&gt;
     &lt;subtype&gt;PCMU&lt;/subtype&gt;
    &lt;/codec&gt;
    &lt;codec name="audio"&gt;
     &lt;subtype&gt;PCMA&lt;/subtype&gt;
    &lt;/codec&gt;
    &lt;codec name="audio"&gt;
     &lt;subtype&gt;telephone-event&lt;/subtype&gt;
    &lt;/codec&gt;
   &lt;/codecs&gt;
  &lt;/capabilities&gt;
</pre></div><p>


</p>
<a name="defn.dialoglanguages"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2.1"></a><h3>4.4.2.2.1.&nbsp;
&lt;dialoglanguages></h3>

<p> The &lt;dialoglanguages> element provides information about additional
dialog languages supported by the package. Dialog languages are identified by
their associated MIME media types. The MS MUST NOT include the mandatory
dialog language for this package (<a class='info' href='#defn.ivrdialog'>Section&nbsp;4.3<span> (</span><span class='info'>IVR Dialog Elements</span><span>)</span></a>).


</p>
<p>The &lt;dialoglanguages> element has no attributes. 
</p>
<p>The &lt;dialoglanguages> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;mimetype>:</dt>
<dd>element whose content model describes a
MIME media type (<a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>) associated with a
supported dialog language. The element is optional.

</dd>
</dl></blockquote><p>

</p>
<a name="defn.grammartypes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2.2"></a><h3>4.4.2.2.2.&nbsp;
&lt;grammartypes></h3>

<p> The &lt;grammartypes> element provides information about
&lt;grammar> format types supported by the package. The MS MUST NOT
include the mandatory SRGS format type, "application/srgs+xml" (<a class='info' href='#defn.grammar'>Section&nbsp;4.3.1.3.1<span> (</span><span class='info'>&lt;grammar></span><span>)</span></a>).


</p>
<p>The &lt;grammartypes> element has no attributes. 
</p>
<p>The &lt;grammartypes> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;mimetype>:</dt>
<dd>element whose content model describes a
mime type (<a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). The element is optional.

</dd>
</dl></blockquote><p>

</p>
<a name="defn.recordtypes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2.3"></a><h3>4.4.2.2.3.&nbsp;
&lt;recordtypes></h3>

<p> The &lt;recordtypes> element provides information about media
resource format types of &lt;record> supported by the package (<a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>).

</p>
<p>The &lt;recordtypes> element has no attributes. 
</p>
<p>The &lt;recordtypes> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;mimetype>:</dt>
<dd>element whose content model describes a
mime type (<a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). The element is optional.

</dd>
</dl></blockquote><p>

</p>
<a name="defn.prompttypes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2.4"></a><h3>4.4.2.2.4.&nbsp;
&lt;prompttypes></h3>

<p> The &lt;prompttypes> element provides information about media
resource format types of &lt;prompt> supported by the package (<a class='info' href='#defn.prompt'>Section&nbsp;4.3.1.1<span> (</span><span class='info'>&lt;prompt></span><span>)</span></a>).

</p>
<p>The &lt;prompttypes> element has no attributes. 
</p>
<p>The &lt;prompttypes> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;mimetype>:</dt>
<dd>element whose content model describes a
mime type (<a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>). The element is optional.

</dd>
</dl></blockquote><p>

</p>
<a name="defn.variables"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2.5"></a><h3>4.4.2.2.5.&nbsp;
&lt;variables></h3>

<p> The &lt;variables> element provides information about types and
formats for the &lt;variable> element (<a class='info' href='#defn.variable'>Section&nbsp;4.3.1.1.1<span> (</span><span class='info'>&lt;variable></span><span>)</span></a>)
supported by the package.

</p>
<p>The &lt;variables> element has no attributes. 
</p>
<p>The &lt;variables> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;variabletype>:</dt>
<dd>element describing the formats support
for a given type (<a class='info' href='#defn.variabletype'>Section&nbsp;4.4.2.2.5.1<span> (</span><span class='info'>&lt;variabletype></span><span>)</span></a>). The element is
optional.

</dd>
</dl></blockquote><p>

</p>
<p>For example, a fragment describing support for &lt;variable> with a
"date" type according to the formats specified in <a class='info' href='#defn.variable.date'>Section&nbsp;4.3.1.1.1.1<span> (</span><span class='info'>Date type</span><span>)</span></a>.

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;variables&gt;
 &lt;variabletype type="date" desc="value formatted as YYYYMMDD"&gt;
   &lt;format desc="month year day"&gt;mdy&lt;/format&gt;
   &lt;format desc="year month day"&gt;ymd&lt;/format&gt;
   &lt;format desc="day month year"&gt;dmy&lt;/format&gt;
   &lt;format desc="day month"&gt;dm&lt;/format&gt;
 &lt;/variabletype&gt;
&lt;/variables&gt;
</pre></div><p>



</p>
<a name="defn.variabletype"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2.5.1"></a><h3>4.4.2.2.5.1.&nbsp;
&lt;variabletype></h3>

<p> The &lt;variabletype> element describes the formats supported for
&lt;variable> supported type.

</p>
<p>The &lt;variabletype> element has the following attributes: 


</p>
<blockquote class="text"><dl>
<dt>type:</dt>
<dd>indicates a supported value associated with the type
attribute of &lt;variable> element. The attribute is
manadatory. 

</dd>
<dt>desc:</dt>
<dd>a string providing some textual description of the
type and format. The attribute is optional.

</dd>
</dl></blockquote><p>

</p>
<p>The &lt;variabletype> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;format>:</dt>
<dd>element with a desc attribute (optional
description) and a content model describing a supported format in the
&lt;variable> format attribute. The element is optional.

</dd>
</dl></blockquote><p>

</p>
<a name="defn.maxpreparedduration"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2.6"></a><h3>4.4.2.2.6.&nbsp;
&lt;maxpreparedduration></h3>

<p> The &lt;maxpreparedduration> element describes the maximum duration
for a dialog to remain in the prepared state (<a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a>) following a &lt;dialogprepare> (<a class='info' href='#defn.dialogprepare'>Section&nbsp;4.2.1<span> (</span><span class='info'>&lt;dialogprepare></span><span>)</span></a>) request.

</p>
<p>The &lt;maxpreparedduration> element has no attributes. 
</p>
<p>The &lt;maxpreparedduration> element has a content model describing
the maximum prepared dialog duration as a time designation (<a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).

</p>
<a name="defn.maxrecordduration"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.2.7"></a><h3>4.4.2.2.7.&nbsp;
&lt;maxrecordduration></h3>

<p> The &lt;maxrecordduration> element describes the maximum recording
duration for &lt;record> <a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>) request supported
by the MS.

</p>
<p>The &lt;maxrecordduration> element has no attributes. 
</p>
<p>The &lt;maxrecordduration> element has a content model describing the
maximum duration of recording as a time designation (<a class='info' href='#defn.timedesignation'>Section&nbsp;4.6.7<span> (</span><span class='info'>Time Designation</span><span>)</span></a>).

</p>
<a name="defn.dialogs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.3"></a><h3>4.4.2.3.&nbsp;
&lt;dialogs></h3>

<p> The &lt;dialogs> element provides audit information about
dialogs. 
</p>
<p>The &lt;dialogs> element has no attributes. 
</p>
<p>The &lt;dialogs> element has the following sequence of child
elements (0 or more occurrences):

</p>
<blockquote class="text"><dl>
<dt>&lt;dialogaudit>:</dt>
<dd>audit information for a dialog (<a class='info' href='#defn.dialogaudit'>Section&nbsp;4.4.2.3.1<span> (</span><span class='info'>&lt;dialogaudit></span><span>)</span></a>). The element is optional.

</dd>
</dl></blockquote><p>

</p>
<a name="defn.dialogaudit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2.3.1"></a><h3>4.4.2.3.1.&nbsp;
&lt;dialogaudit></h3>

<p>The &lt;dialogaudit> element has the following attributes:

</p>
<blockquote class="text"><dl>
<dt>dialogid:</dt>
<dd>string identifying the dialog. 
The attribute is mandatory. 
</dd>
<dt>state:</dt>
<dd>string indicating the state of the dialog. Valid
values are: preparing, prepared, starting, started.  The attribute is
mandatory. 
</dd>
<dt>connectionid:</dt>
<dd>string identifying the SIP dialog connection
associated with the dialog (see Section 16.1 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). The attribute is
optional. There is no default value.
</dd>
<dt>conferenceid:</dt>
<dd>string identifying the conference associated
with the dialog (see Section 16.1 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). The attribute is
optional. There is no default value.
</dd>
</dl></blockquote><p>

</p>
<p>The &lt;dialogaudit> element has the following child element:

</p>
<blockquote class="text"><dl>
<dt>&lt;codecs></dt>
<dd>element describing codecs used in the
dialog. See <a class='info' href='#defn.codecs'>Section&nbsp;4.4.2.1<span> (</span><span class='info'>&lt;codecs></span><span>)</span></a>. The element is optional.
</dd>
</dl></blockquote><p>

</p>
<p>For example, a fragment describing a started dialog which is using
PCMU and telephony-event audio codecs:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;dialogaudit dialogid="1234" state="started" conferenceid="conf1"&gt;
 &lt;codecs&gt;
  &lt;codec name="audio"&gt;
   &lt;subtype&gt;PCMU&lt;/subtype&gt;
  &lt;/codec&gt;
  &lt;codec name="audio"&gt;
   &lt;subtype&gt;telephone-event&lt;/subtype&gt;
  &lt;/codec&gt;
 &lt;/codecs&gt;
&lt;/dialogaudit&gt;
</pre></div><p>


</p>
<a name="defn.statuscodes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Response Status Codes</h3>

<p>This section describes the response codes in <a class='info' href='#defn.table.statuscodes'>Table&nbsp;1<span> (</span><span class='info'>status codes</span><span>)</span></a> for the status attribute of dialog
management &lt;response> (<a class='info' href='#defn.response'>Section&nbsp;4.2.4<span> (</span><span class='info'>&lt;response></span><span>)</span></a>) and audit
&lt;auditresponse> (<a class='info' href='#defn.auditresponse'>Section&nbsp;4.4.2<span> (</span><span class='info'>&lt;auditresponse></span><span>)</span></a>) responses. The
MS MUST support the status response codes defined here. All other valid
but undefined values are reserved for future use, where new status codes
are assigned using the Standards Action process defined in <a class='info' href='#RFC5226'>[RFC5226]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; May&nbsp;2008.</span><span>)</span></a>. The AS MUST treat any responses it does not
recognize as being equivalent to the x00 response code for all
classes. For example, if an AS receives an unrecognized response code of
499, it can safely assume that there was something wrong with its
request and treat the response as if it had received a 400 (Syntax
error) response code. 
</p>
<p>4xx responses are definite failure responses from a particular MS.
The reason attribute in the response SHOULD identify the failure in more
detail, for example, "Mandatory attribute missing: src in media element"
for a 400 (Syntax error) response code.

</p>
<p>The AS SHOULD NOT retry the same request without modification (for
example, correcting a syntax error or changing the connectionid to use
one available on the MS).  However, the same request to a different MS
might be successful; for example, if another MS supports a capability
required in the request.

</p>
<p>4xx failure responses can be grouped into three classes: failure due
to a syntax error in the request (400); failure due to an error
executing the request on the MS (405-419); and failure due to the
request requiring a capability not supported by the MS (420-439).

</p>
<p>In cases where more than one request code could be reported for a
failure, the MS SHOULD use the most specific error code of the failure
class for the detected error. For example, if the MS detects that the
dialogid in the request is invalid, then it uses a 406 status code.
However, if the MS merely detects that an execution error occurred, then
419 is used.

</p><br /><hr class="insert" />
<a name="defn.table.statuscodes"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="10%"><col align="left" width="15%"><col align="left" width="40%"><col align="left" width="35%">
<tr><th align="left">Code</th><th align="left">Summary</th><th align="left">Description</th><th align="left">Informational: AS Possible Recovery
  Action</th></tr>
<tr>
<td align="left">200</td>
<td align="left">OK</td>
<td align="left">request has succeeded</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">400</td>
<td align="left">Syntax error</td>
<td align="left">request is syntactically invalid: it is not valid with respect to
   the XML schema specified in <a class='info' href='#schema'>Section&nbsp;5<span> (</span><span class='info'>Formal Syntax</span><span>)</span></a> or it violates a
   co-occurrence constraint for a request element defined in <a class='info' href='#defn.elements'>Section&nbsp;4<span> (</span><span class='info'>Element Definitions</span><span>)</span></a>. </td>
<td align="left">Change the request so that it is syntactically valid.</td>
</tr>
<tr>
<td align="left">405</td>
<td align="left">dialogid already exists</td>
<td align="left">request uses a dialogid identifier for a new dialog which is
   already used by another dialog on the MS (see <a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a>). </td>
<td align="left">Send a request for a new dialog without specifying the dialogid
   and let the MS generate a unique dialogid in the response. </td>
</tr>
<tr>
<td align="left">406</td>
<td align="left">dialogid does not exist</td>
<td align="left">request uses a dialogid identifier for an dialog which does not
   exist on the MS (see <a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a>). </td>
<td align="left">Send an &lt;audit> request (<a class='info' href='#defn.audit'>Section&nbsp;4.4.1<span> (</span><span class='info'>&lt;audit></span><span>)</span></a>)
   requesting the list of dialog identifiers already used by the MS and
   then use one of the listed dialog identifiers. </td>
</tr>
<tr>
<td align="left">407</td>
<td align="left">connectionid does not exist</td>
<td align="left">request uses a connectionid identifier for a connection which does
   not exist on the MS. </td>
<td align="left">Use another method to determine which connections are available on
   the MS.</td>
</tr>
<tr>
<td align="left">408</td>
<td align="left">conferenceid does not exist</td>
<td align="left">request uses a conferenceid identifier for a conference which does
   not exist on the MS. </td>
<td align="left">Use another method to determine which conferences are available on
   the MS.</td>
</tr>
<tr>
<td align="left">409</td>
<td align="left">Resource cannot be retrieved</td>
<td align="left">request use a URI to reference an external resource (e.g. dialog,
   media or grammar) which cannot be retrieved within the timeout
   interval</td>
<td align="left">Check that the resource URI is valid, can be reached from the MS,
   and that the appropriate authentication is used.</td>
</tr>
<tr>
<td align="left">410</td>
<td align="left">Dialog execution canceled</td>
<td align="left">request to prepare or start a dialog which has been terminated by
   a &lt;dialogterminate/> request (see <a class='info' href='#defn.dialogmgt'>Section&nbsp;4.2<span> (</span><span class='info'>Dialog Management Elements</span><span>)</span></a>)
   </td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">411</td>
<td align="left">Incompatible stream configuration</td>
<td align="left">request specifies a media stream configuration which is in
   conflict with itself, or the connection or conference capabilities
   (see <a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>)
   </td>
<td align="left">Change the media stream configuration to match the capabilities of
   the connection or conference </td>
</tr>
<tr>
<td align="left">412</td>
<td align="left">Media stream not available </td>
<td align="left">request specifies an operation for which a media stream is not
   available. For example, playing a video media resource on an
   connection or conference without video streams.
   </td>
<td align="left">Check the media stream capability of the connection or conference
   and use an operation which only uses these capabilities</td>
</tr>
<tr>
<td align="left">413</td>
<td align="left">Control keys with same value</td>
<td align="left">the request contains a &lt;control> element (<a class='info' href='#defn.control'>Section&nbsp;4.3.1.2<span> (</span><span class='info'>&lt;control></span><span>)</span></a>) where some keys have the same value</td>
<td align="left">Use different keys for the different control operations.</td>
</tr>
<tr>
<td align="left">419</td>
<td align="left">Other execution error</td>
<td align="left">requested operation cannot be executed by the MS.</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">420</td>
<td align="left">Unsupported URI scheme</td>
<td align="left">request specifies a URI whose scheme is not supported by the
   MS</td>
<td align="left">Use a URI scheme which is supported.</td>
</tr>
<tr>
<td align="left">421</td>
<td align="left">Unsupported dialog language</td>
<td align="left">request references an external dialog language not supported by the MS</td>
<td align="left">Send an &lt;audit> request (<a class='info' href='#defn.audit'>Section&nbsp;4.4.1<span> (</span><span class='info'>&lt;audit></span><span>)</span></a>)
   requesting the MS capabilities and then use one of the listed
   dialog languages.
   </td>
</tr>
<tr>
<td align="left">422</td>
<td align="left">Unsupported playback format</td>
<td align="left">request references a media resource for playback whose format is
   not supported by the MS</td>
<td align="left">Send an &lt;audit> request (<a class='info' href='#defn.audit'>Section&nbsp;4.4.1<span> (</span><span class='info'>&lt;audit></span><span>)</span></a>)
   requesting the MS capabilities and then use one of the listed
   playback media formats.</td>
</tr>
<tr>
<td align="left">423</td>
<td align="left">Unsupported record format</td>
<td align="left">request references a media resource for recording whose format is
   not supported by the MS</td>
<td align="left">Send an &lt;audit> request (<a class='info' href='#defn.audit'>Section&nbsp;4.4.1<span> (</span><span class='info'>&lt;audit></span><span>)</span></a>)
   requesting the MS capabilities and then use one of the listed
   record media formats.</td>
</tr>
<tr>
<td align="left">424</td>
<td align="left">Unsupported grammar format</td>
<td align="left">request references a grammar whose format is not supported by the
   MS</td>
<td align="left">Send an &lt;audit> request (<a class='info' href='#defn.audit'>Section&nbsp;4.4.1<span> (</span><span class='info'>&lt;audit></span><span>)</span></a>)
   requesting the MS capabilities and then use one of the listed grammar
   types.</td>
</tr>
<tr>
<td align="left">425</td>
<td align="left">Unsupported variable configuration</td>
<td align="left">request contains a prompt &lt;variable> element (<a class='info' href='#defn.variable'>Section&nbsp;4.3.1.1.1<span> (</span><span class='info'>&lt;variable></span><span>)</span></a>) not supported by the MS</td>
<td align="left">Send an &lt;audit> request (<a class='info' href='#defn.audit'>Section&nbsp;4.4.1<span> (</span><span class='info'>&lt;audit></span><span>)</span></a>)
   requesting the MS capabilities and then use one of the listed
   variable types.</td>
</tr>
<tr>
<td align="left">426</td>
<td align="left">Unsupported DTMF configuration</td>
<td align="left">request contains a prompt &lt;dtmf> element (<a class='info' href='#defn.dtmf'>Section&nbsp;4.3.1.1.2<span> (</span><span class='info'>&lt;dtmf></span><span>)</span></a>) not supported by the MS</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">427</td>
<td align="left">Unsupported parameter</td>
<td align="left">request contains a &lt;param> element (<a class='info' href='#defn.param'>Section&nbsp;4.2.6.1<span> (</span><span class='info'>&lt;param></span><span>)</span></a>) not supported by the MS</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">428</td>
<td align="left">Unsupported media stream configuration</td>
<td align="left">request contains a &lt;stream> element (<a class='info' href='#defn.stream'>Section&nbsp;4.2.2.2<span> (</span><span class='info'>&lt;stream></span><span>)</span></a>) whose configuration is not supported by the
   MS. </td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">429</td>
<td align="left">Unsupported playback configuration</td>
<td align="left">request contains a &lt;prompt> element (<a class='info' href='#defn.prompt'>Section&nbsp;4.3.1.1<span> (</span><span class='info'>&lt;prompt></span><span>)</span></a>) which the MS is unable to play on the
   available output media streams </td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">430</td>
<td align="left">Unsupported record configuration</td>
<td align="left">request contains a &lt;record> element (<a class='info' href='#defn.record'>Section&nbsp;4.3.1.4<span> (</span><span class='info'>&lt;record></span><span>)</span></a>) which the MS is unable to record with on the
   available input media streams</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">431</td>
<td align="left">Unsupported foreign namespace attribute or element</td>
<td align="left">the request contains attributes or elements from another namespace
   which the MS does not support</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">432</td>
<td align="left">Unsupported multiple dialog capability</td>
<td align="left">the request tries to start another dialog on the same conference
   or connection where a dialog is already running </td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">433</td>
<td align="left">Unsupported collect and record capability</td>
<td align="left">the request contains &lt;collect> and &lt;record> elements and the MS
   does support these operations simultaneously</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">434</td>
<td align="left">Unsupported VAD capability</td>
<td align="left">the request contains a &lt;record> element where Voice Activity
   Detection (VAD) is required, but the MS does not support VAD. </td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">435</td>
<td align="left">Unsupported parallel playback</td>
<td align="left">the request contains a prompt &lt;par> element 
   whose configuration is not supported by the MS. </td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">439</td>
<td align="left">Other unsupported capability</td>
<td align="left">request requires another capability not supported by the MS</td>
<td align="left">&nbsp;</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: status codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="defn.types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Type Definitions</h3>

<p>This section defines types referenced in attribute and element
definitions. 
</p>
<a name="defn.boolean"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.1"></a><h3>4.6.1.&nbsp;
Boolean</h3>

<p>The value space of boolean is the set {true, false, 1, 0} as
        defined in Section 3.2.2 of <a class='info' href='#XMLSchema:Part2'>[XMLSchema:Part2]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
        In accordance with this definition, the concept of false can be
        lexically represented by the strings "0" and "false" and the
        concept of true by the strings "1" and "true"; implementations
        MUST support both styles of lexical representation. 
</p>
<a name="defn.dtmfchar"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.2"></a><h3>4.6.2.&nbsp;
DTMFChar</h3>

<p>A DTMF character. The value space is the set
            {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, #, *, A, B, C, D}. 
        
</p>
<a name="defn.dtmfstring"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.3"></a><h3>4.6.3.&nbsp;
DTMFString</h3>

<p>A String composed of one or more <a class='info' href='#defn.dtmfchar'>DTMFChar<span> (</span><span class='info'>DTMFChar</span><span>)</span></a>s. 
</p>
<a name="defn.nonneginteger"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.4"></a><h3>4.6.4.&nbsp;
Non-Negative Integer</h3>

<p>The value space of non-negative integer is the infinite set
        {0,1,2,...} as defined in Section 3.3.20 of <a class='info' href='#XMLSchema:Part2'>[XMLSchema:Part2]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
        
</p>
<a name="defn.posinteger"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.5"></a><h3>4.6.5.&nbsp;
Positive Integer</h3>

<p>The value space of positive integer is the infinite
        set {1,2,...} as defined in Section 3.3.25 of <a class='info' href='#XMLSchema:Part2'>[XMLSchema:Part2]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
</p>
<a name="defn.string"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.6"></a><h3>4.6.6.&nbsp;
String</h3>

<p>A string in the character encoding associated with the XML
        element as defined in Section 3.2.1 of <a class='info' href='#XMLSchema:Part2'>[XMLSchema:Part2]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
        
</p>
<a name="defn.timedesignation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.7"></a><h3>4.6.7.&nbsp;
Time Designation</h3>

<p>A time designation consists of a non-negative real number
        followed by a time unit identifier. 
</p>
<p>The time unit identifiers are: "ms" (milliseconds) and "s"
            (seconds). 
</p>
<p>Examples include: "3s", "850ms", "0.7s", ".5s" and "+1.5s". 
</p>
<a name="defn.percentage"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.8"></a><h3>4.6.8.&nbsp;
Percentage</h3>

<p>A percentage consists of a <a class='info' href='#defn.posinteger'>Positive Integer<span> (</span><span class='info'>Positive Integer</span><span>)</span></a> followed by "%". 
</p>
<p>Examples include: "100%", "500%" and "10%". 
</p>
<a name="defn.uri"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.9"></a><h3>4.6.9.&nbsp;
URI</h3>

<p>Uniform Resource Indicator as defined in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>. 
        
</p>
<a name="defn.mimetype"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.10"></a><h3>4.6.10.&nbsp;
MIME Media Type</h3>

<p>A string formated as an IANA MIME media type (<a class='info' href='#MIME.mediatypes'>[MIME.mediatypes]<span> (</span><span class='info'>, &ldquo;IANA registry for MIME Media Types,&rdquo; .</span><span>)</span></a>). The ABNF (<a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>) production for the string is: 
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
type-name "/" subtype-name *(";" parameter-name)
</pre></div><p>


          where "type-name" and "subtype-name" are defined in Section
          4.2, and "parameter-name" in Section 4.3, of <a class='info' href='#RFC4288'>[RFC4288]<span> (</span><span class='info'>Freed, N. and J. Klensin, &ldquo;Media Type Specifications and Registration Procedures,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
          
</p>
<a name="defn.langid"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.11"></a><h3>4.6.11.&nbsp;
Language Identifier</h3>

<p>A language identifier labels information content as being
          of a particular human language variant. Following the XML
          specification for language identification <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C M., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Third Edition),&rdquo; February&nbsp;2004.</span><span>)</span></a>, a legal language identifier is identified by a
          RFC5646 (<a class='info' href='#RFC5646'>[RFC5646]<span> (</span><span class='info'>Phillips, A. and M. Davis, &ldquo;Tags for Identifying Languages,&rdquo; September&nbsp;2009.</span><span>)</span></a>) and RFC4647 (<a class='info' href='#RFC4647'>[RFC4647]<span> (</span><span class='info'>Phillips, A. and M. Davis, &ldquo;Matching of Language Tags,&rdquo; September&nbsp;2006.</span><span>)</span></a>) code where the language code is required
          and a country code or other subtag identifier is optional.
          
</p>
<a name="defn.dateTime"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6.12"></a><h3>4.6.12.&nbsp;
DateTime</h3>

<p>A string formated according to the XML schema definition of a
        dateTime type (<a class='info' href='#XMLSchema:Part2'>[XMLSchema:Part2]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>).
        
</p>
<a name="schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Formal Syntax</h3>

<p>This section defines the XML schema for IVR Control Package. The
schema is normative.
</p>
<p>The schema defines datatypes, attributes, dialog management and IVR
dialog elements in the urn:ietf:params:xml:ns:msc-ivr namespace. In most
elements the order of child elements is significant. The schema is
extensible: elements allow attributes and child elements from other
namespaces.  Elements from outside this package's namespace can occur
after elements defined in this package.

</p>
<p>
The schema is dependent upon the schema (framework.xsd) defined in
Section 16.1 of the Control Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>. It is also
dependent upon the W3C (xml.xsd) schema for definitions of XML
attributes (e.g. xml:base).

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsd:schema targetNamespace="urn:ietf:params:xml:ns:msc-ivr"
 elementFormDefault="qualified" blockDefault="#all"
 xmlns="urn:ietf:params:xml:ns:msc-ivr"
 xmlns:fw="urn:ietf:params:xml:ns:control:framework-attributes"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;

 &lt;xsd:annotation&gt;
  &lt;xsd:documentation&gt;
   IETF MediaCtrl IVR 1.0 (20101020)

   This is the schema of the IETF MediaCtrl IVR control
   package.

   The schema namespace is urn:ietf:params:xml:ns:msc-ivr

  &lt;/xsd:documentation&gt;
 &lt;/xsd:annotation&gt;


 &lt;!--
  #############################################################

  SCHEMA IMPORTS

  #############################################################
 --&gt;

 &lt;xsd:import namespace="http://www.w3.org/XML/1998/namespace"
  schemaLocation="http://www.w3.org/2001/xml.xsd"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This import brings in the XML attributes for
    xml:base, xml:lang, etc

    See http://www.w3.org/2001/xml.xsd for latest version
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
 &lt;/xsd:import&gt;

 &lt;xsd:import
  namespace="urn:ietf:params:xml:ns:control:framework-attributes"
  schemaLocation="framework.xsd"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This import brings in the framework attributes for
    conferenceid and connectionid.
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
 &lt;/xsd:import&gt;


 &lt;!--
  #####################################################

  Extensible core type

  #####################################################
 --&gt;


 &lt;xsd:complexType name="Tcore"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This type is extended by other (non-mixed) component types to
    allow attributes from other namespaces.
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
  &lt;xsd:sequence/&gt;
  &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
 &lt;/xsd:complexType&gt;


 &lt;!--
  #####################################################

  TOP LEVEL ELEMENT: mscivr

  #####################################################
 --&gt;

 &lt;xsd:complexType name="mscivrType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
      &lt;xsd:element ref="dialogprepare" /&gt;
      &lt;xsd:element ref="dialogstart" /&gt;
      &lt;xsd:element ref="dialogterminate" /&gt;
      &lt;xsd:element ref="response" /&gt;
      &lt;xsd:element ref="event" /&gt;
      &lt;xsd:element ref="audit" /&gt;
      &lt;xsd:element ref="auditresponse" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="version" type="version.datatype"
     use="required" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="mscivr" type="mscivrType" /&gt;


 &lt;!--
  #####################################################

  DIALOG MANAGEMENT TYPES

  #####################################################
 --&gt;

 &lt;!--  dialogprepare --&gt;

 &lt;xsd:complexType name="dialogprepareType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="dialog" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="params" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="src" type="xsd:anyURI" /&gt;
    &lt;xsd:attribute name="type" type="mime.datatype"/&gt;
    &lt;xsd:attribute name="maxage" type="xsd:nonNegativeInteger"/&gt;
    &lt;xsd:attribute name="maxstale" type="xsd:nonNegativeInteger"/&gt;
    &lt;xsd:attribute name="fetchtimeout"
     type="timedesignation.datatype" default="30s" /&gt;
    &lt;xsd:attribute name="dialogid"
     type="dialogid.datatype" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dialogprepare" type="dialogprepareType" /&gt;

 &lt;!--  dialogstart --&gt;

 &lt;xsd:complexType name="dialogstartType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="dialog" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="subscribe" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="params" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="stream" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="src" type="xsd:anyURI" /&gt;
    &lt;xsd:attribute name="type" type="mime.datatype"/&gt;
    &lt;xsd:attribute name="maxage" type="xsd:nonNegativeInteger"/&gt;
    &lt;xsd:attribute name="maxstale" type="xsd:nonNegativeInteger"/&gt;
    &lt;xsd:attribute name="fetchtimeout"
     type="timedesignation.datatype" default="30s" /&gt;
    &lt;xsd:attribute name="dialogid"
     type="dialogid.datatype" /&gt;
    &lt;xsd:attribute name="prepareddialogid"
     type="dialogid.datatype" /&gt;
    &lt;xsd:attributeGroup ref="fw:framework-attributes" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dialogstart" type="dialogstartType" /&gt;

 &lt;!--  dialogterminate --&gt;

 &lt;xsd:complexType name="dialogterminateType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="dialogid"
     type="dialogid.datatype" use="required" /&gt;
    &lt;xsd:attribute name="immediate"
     type="xsd:boolean" default="false" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dialogterminate" type="dialogterminateType" /&gt;

 &lt;!--  response --&gt;

 &lt;xsd:complexType name="responseType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="status" type="status.datatype"
     use="required" /&gt;
    &lt;xsd:attribute name="reason" type="xsd:string" /&gt;
    &lt;xsd:attribute name="dialogid"
     type="dialogid.datatype" use="required" /&gt;
    &lt;xsd:attributeGroup ref="fw:framework-attributes" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="response" type="responseType" /&gt;

 &lt;!--  event --&gt;

 &lt;xsd:complexType name="eventType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
      &lt;xsd:element ref="dialogexit" minOccurs="0"
       maxOccurs="1" /&gt;
      &lt;xsd:element ref="dtmfnotify" minOccurs="0"
       maxOccurs="1" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="dialogid"
     type="dialogid.datatype" use="required" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="event" type="eventType" /&gt;

 &lt;!--  dialogexit--&gt;

 &lt;xsd:complexType name="dialogexitType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="promptinfo" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="controlinfo" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="collectinfo" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="recordinfo" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="params" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="status"
     type="xsd:nonNegativeInteger" use="required" /&gt;
    &lt;xsd:attribute name="reason" type="xsd:string" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dialogexit" type="dialogexitType" /&gt;


 &lt;!--  dtmfnotify--&gt;

 &lt;xsd:complexType name="dtmfnotifyType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="matchmode"
     type="matchmode.datatype" default="all" /&gt;
    &lt;xsd:attribute name="dtmf" type="dtmfstring.datatype"
     use="required" /&gt;
    &lt;xsd:attribute name="timestamp" type="xsd:dateTime"
     use="required" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dtmfnotify" type="dtmfnotifyType" /&gt;


 &lt;!-- promptinfo --&gt;

 &lt;xsd:complexType name="promptinfoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="duration"
     type="xsd:nonNegativeInteger" /&gt;
    &lt;xsd:attribute name="termmode"
     type="prompt_termmode.datatype" use="required" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="promptinfo" type="promptinfoType" /&gt;



 &lt;!-- controlinfo --&gt;

 &lt;xsd:complexType name="controlinfoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="controlmatch" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="controlinfo" type="controlinfoType" /&gt;


 &lt;!-- controlmatch --&gt;

 &lt;xsd:complexType name="controlmatchType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="dtmf"
     type="dtmfstring.datatype" /&gt;
    &lt;xsd:attribute name="timestamp" type="xsd:dateTime" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="controlmatch" type="controlmatchType" /&gt;


 &lt;!--  collectinfo --&gt;

 &lt;xsd:complexType name="collectinfoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="dtmf"
     type="dtmfstring.datatype" /&gt;
    &lt;xsd:attribute name="termmode"
     type="collect_termmode.datatype" use="required" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="collectinfo" type="collectinfoType" /&gt;


 &lt;!-- recordinfo --&gt;

 &lt;xsd:complexType name="recordinfoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="mediainfo" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="duration"
     type="xsd:nonNegativeInteger" /&gt;
    &lt;xsd:attribute name="termmode"
     type="record_termmode.datatype" use="required" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="recordinfo" type="recordinfoType" /&gt;

 &lt;!--  mediainfo --&gt;

 &lt;xsd:complexType name="mediainfoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="loc" type="xsd:anyURI"
     use="required" /&gt;
    &lt;xsd:attribute name="type" type="mime.datatype"
    use="required"/&gt;
    &lt;xsd:attribute name="size"
     type="xsd:nonNegativeInteger" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="mediainfo" type="mediainfoType" /&gt;


 &lt;!--  subscribe --&gt;

 &lt;xsd:complexType name="subscribeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="dtmfsub" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="subscribe" type="subscribeType" /&gt;


 &lt;!--  dtmfsub --&gt;

 &lt;xsd:complexType name="dtmfsubType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="matchmode"
     type="matchmode.datatype" default="all" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dtmfsub" type="dtmfsubType" /&gt;


 &lt;!-- params --&gt;
 &lt;xsd:complexType name="paramsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="param" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="params" type="paramsType" /&gt;


 &lt;!--  param --&gt;
 &lt;!--  doesn't extend tCore since its content model is mixed --&gt;
 &lt;xsd:complexType name="paramType" mixed="true"&gt;
  &lt;xsd:sequence/&gt;
  &lt;xsd:attribute name="name" type="xsd:string" use="required" /&gt;
  &lt;xsd:attribute name="type" type="mime.datatype" default="text/plain"/&gt;
     &lt;xsd:attribute name="encoding" type="xsd:string"/&gt;
  &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="param" type="paramType" /&gt;

 &lt;!--  stream --&gt;

 &lt;xsd:complexType name="streamType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="region" minOccurs="0"
      maxOccurs="1" /&gt;
    &lt;xsd:element ref="priority" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="media" type="media.datatype"
     use="required" /&gt;
    &lt;xsd:attribute name="label" type="label.datatype" /&gt;
    &lt;xsd:attribute name="direction"
     type="direction.datatype" default="sendrecv" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="stream" type="streamType" /&gt;

&lt;!--  region  --&gt;
&lt;xsd:simpleType name="regionType"&gt;
 &lt;xsd:restriction base="xsd:NMTOKEN"/&gt;
&lt;/xsd:simpleType&gt;

 &lt;xsd:element name="region" type="regionType" /&gt;


 &lt;!--  priority  --&gt;
 &lt;xsd:simpleType name="priorityType"&gt;
  &lt;xsd:restriction base="xsd:positiveInteger" /&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:element name="priority" type="priorityType" /&gt;


&lt;!-- dialog --&gt;

 &lt;xsd:complexType name="dialogType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="prompt" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="control" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="collect" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="record" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="repeatCount"
     type="xsd:nonNegativeInteger" default="1" /&gt;
    &lt;xsd:attribute name="repeatDur"
     type="timedesignation.datatype" /&gt;
    &lt;xsd:attribute name="repeatUntilComplete"
     type="xsd:boolean" default="false"/&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dialog" type="dialogType" /&gt;


 &lt;!--  prompt  --&gt;

 &lt;xsd:complexType name="promptType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:choice minOccurs="1" maxOccurs="unbounded"&gt;
     &lt;xsd:element ref="media" /&gt;
     &lt;xsd:element ref="variable" /&gt;
     &lt;xsd:element ref="dtmf" /&gt;
     &lt;xsd:element ref="par" /&gt;
     &lt;xsd:any namespace="##other"
      processContents="lax" /&gt;
    &lt;/xsd:choice&gt;
    &lt;xsd:attribute ref="xml:base" /&gt;
    &lt;xsd:attribute name="bargein" type="xsd:boolean"
     default="true" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="prompt" type="promptType" /&gt;


 &lt;!--  media --&gt;

 &lt;xsd:complexType name="mediaType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="loc" type="xsd:anyURI"
     use="required" /&gt;
    &lt;xsd:attribute name="type" type="mime.datatype" /&gt;
    &lt;xsd:attribute name="fetchtimeout"
     type="timedesignation.datatype" default="30s" /&gt;
    &lt;xsd:attribute name="soundLevel"
     type="percentage.datatype" default="100%" /&gt;
    &lt;xsd:attribute name="clipBegin"
     type="timedesignation.datatype" default="0s" /&gt;
     &lt;xsd:attribute name="clipEnd"
     type="timedesignation.datatype"/&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="media" type="mediaType" /&gt;

 &lt;!--  variable --&gt;

 &lt;xsd:complexType name="variableT"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="value" type="xsd:string"
     use="required" /&gt;
    &lt;xsd:attribute name="type" type="xsd:string"
     use="required" /&gt;
    &lt;xsd:attribute name="format" type="xsd:string" /&gt;
    &lt;xsd:attribute name="gender" type="gender.datatype" /&gt;
    &lt;xsd:attribute ref="xml:lang" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="variable" type="variableT" /&gt;

 &lt;!-- dtmf --&gt;

 &lt;xsd:complexType name="dtmfType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="digits"
     type="dtmfstring.datatype" use="required" /&gt;
    &lt;xsd:attribute name="level" type="xsd:integer"
     default="-6" /&gt;
    &lt;xsd:attribute name="duration"
     type="timedesignation.datatype" default="100ms" /&gt;
    &lt;xsd:attribute name="interval"
     type="timedesignation.datatype" default="100ms" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dtmf" type="dtmfType" /&gt;


 &lt;!--  par  --&gt;

 &lt;xsd:complexType name="parType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:choice minOccurs="1" maxOccurs="unbounded"&gt;
     &lt;xsd:element ref="media" /&gt;
     &lt;xsd:element ref="variable" /&gt;
     &lt;xsd:element ref="dtmf" /&gt;
           &lt;xsd:element ref="seq" /&gt;
     &lt;xsd:any namespace="##other"
      processContents="lax" /&gt;
    &lt;/xsd:choice&gt;
    &lt;xsd:attribute name="endsync" type="endsync.datatype"
    default="last"/&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="par" type="parType" /&gt;

 &lt;!--  seq  --&gt;

 &lt;xsd:complexType name="seqType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:choice minOccurs="1" maxOccurs="unbounded"&gt;
     &lt;xsd:element ref="media" /&gt;
     &lt;xsd:element ref="variable" /&gt;
     &lt;xsd:element ref="dtmf" /&gt;
     &lt;xsd:any namespace="##other"
      processContents="lax" /&gt;
    &lt;/xsd:choice&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="seq" type="seqType" /&gt;

 &lt;!-- control --&gt;

 &lt;xsd:complexType name="controlType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="skipinterval"
     type="timedesignation.datatype" default="6s" /&gt;
    &lt;xsd:attribute name="ffkey" type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="rwkey" type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="pauseinterval"
     type="timedesignation.datatype" default="10s" /&gt;
    &lt;xsd:attribute name="pausekey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="resumekey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="volumeinterval"
     type="percentage.datatype" default="10%" /&gt;
    &lt;xsd:attribute name="volupkey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="voldnkey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="speedinterval"
     type="percentage.datatype" default="10%" /&gt;
    &lt;xsd:attribute name="speedupkey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="speeddnkey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="gotostartkey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="gotoendkey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="external"
     type="dtmfstring.datatype" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="control" type="controlType" /&gt;


 &lt;!-- collect --&gt;

 &lt;xsd:complexType name="collectType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="grammar" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="cleardigitbuffer"
     type="xsd:boolean" default="true" /&gt;
    &lt;xsd:attribute name="timeout"
     type="timedesignation.datatype" default="5s" /&gt;
    &lt;xsd:attribute name="interdigittimeout"
     type="timedesignation.datatype" default="2s" /&gt;
    &lt;xsd:attribute name="termtimeout"
     type="timedesignation.datatype" default="0s" /&gt;
    &lt;xsd:attribute name="escapekey"
     type="dtmfchar.datatype" /&gt;
    &lt;xsd:attribute name="termchar"
     type="dtmfchar.datatype" default="#" /&gt;
    &lt;xsd:attribute name="maxdigits"
     type="xsd:positiveInteger" default="5" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="collect" type="collectType" /&gt;

 &lt;!--  grammar --&gt;
 &lt;!--  doesn't extend tCore since its content model is mixed --&gt;
 &lt;xsd:complexType name="grammarType" mixed="true"&gt;
  &lt;xsd:sequence&gt;
   &lt;xsd:any namespace="##other" minOccurs="0"
    maxOccurs="unbounded" processContents="lax" /&gt;
  &lt;/xsd:sequence&gt;
  &lt;xsd:attribute name="src" type="xsd:anyURI" /&gt;
  &lt;xsd:attribute name="type" type="mime.datatype" /&gt;
  &lt;xsd:attribute name="fetchtimeout"
   type="timedesignation.datatype" default="30s" /&gt;
  &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="grammar" type="grammarType" /&gt;

 &lt;!-- record --&gt;

 &lt;xsd:complexType name="recordType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="media" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="timeout"
     type="timedesignation.datatype" default="5s" /&gt;
    &lt;xsd:attribute name="beep" type="xsd:boolean"
     default="false" /&gt;
    &lt;xsd:attribute name="vadinitial"
     type="xsd:boolean" default="false" /&gt;
    &lt;xsd:attribute name="vadfinal"
     type="xsd:boolean" default="false" /&gt;
    &lt;xsd:attribute name="dtmfterm"
     type="xsd:boolean" default="true" /&gt;
    &lt;xsd:attribute name="maxtime"
     type="timedesignation.datatype" default="15s" /&gt;
    &lt;xsd:attribute name="finalsilence"
     type="timedesignation.datatype" default="5s" /&gt;
    &lt;xsd:attribute name="append" type="xsd:boolean"
     default="false" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="record" type="recordType" /&gt;

 &lt;!--
  #####################################################

  AUDIT TYPES

  #####################################################
 --&gt;


 &lt;!-- audit --&gt;

 &lt;xsd:complexType name="auditType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;xsd:attribute name="capabilities"
     type="xsd:boolean" default="true" /&gt;
   &lt;xsd:attribute name="dialogs"
     type="xsd:boolean" default="true" /&gt;
      &lt;xsd:attribute name="dialogid"
     type="dialogid.datatype"/&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="audit" type="auditType" /&gt;

 &lt;!-- auditresponse --&gt;

 &lt;xsd:complexType name="auditresponseType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="capabilities" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="dialogs" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="status" type="status.datatype"
     use="required" /&gt;
    &lt;xsd:attribute name="reason" type="xsd:string" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="auditresponse" type="auditresponseType" /&gt;

 &lt;!-- codec --&gt;

 &lt;xsd:complexType name="codecType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="subtype" minOccurs="1"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="params" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="name" type="xsd:string"
     use="required" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="codec" type="codecType" /&gt;

 &lt;!-- subtype --&gt;

 &lt;xsd:simpleType name="subtypeType"&gt;
  &lt;xsd:restriction base="xsd:string" /&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:element name="subtype" type="subtypeType" /&gt;


 &lt;!-- codecs --&gt;

 &lt;xsd:complexType name="codecsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="codec" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="codecs" type="codecsType" /&gt;


 &lt;!-- capabilities --&gt;

 &lt;xsd:complexType name="capabilitiesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="dialoglanguages" minOccurs="1"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="grammartypes" minOccurs="1"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="recordtypes" minOccurs="1"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="prompttypes" minOccurs="1"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="variables" minOccurs="1"
      maxOccurs="1" /&gt;
      &lt;xsd:element ref="maxpreparedduration" minOccurs="1"
      maxOccurs="1" /&gt;
      &lt;xsd:element ref="maxrecordduration" minOccurs="1"
      maxOccurs="1" /&gt;
     &lt;xsd:element ref="codecs" minOccurs="1"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="capabilities" type="capabilitiesType" /&gt;


 &lt;!-- mimetype --&gt;

 &lt;xsd:element name="mimetype" type="mime.datatype" /&gt;


 &lt;!-- dialoglanguages --&gt;

 &lt;xsd:complexType name="dialoglanguagesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="mimetype" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dialoglanguages" type="dialoglanguagesType" /&gt;

 &lt;!-- grammartypes --&gt;

 &lt;xsd:complexType name="grammartypesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="mimetype" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="grammartypes" type="grammartypesType" /&gt;


 &lt;!-- recordtypes --&gt;

 &lt;xsd:complexType name="recordtypesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="mimetype" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="recordtypes" type="recordtypesType" /&gt;


    &lt;!-- prompttypes --&gt;

 &lt;xsd:complexType name="prompttypesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="mimetype" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="prompttypes" type="prompttypesType" /&gt;

&lt;!--  variables --&gt;

 &lt;xsd:complexType name="variablesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="variabletype" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="variables" type="variablesType" /&gt;


 &lt;xsd:complexType name="variabletypeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="format" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="type" type="xsd:string" use="required" /&gt;
    &lt;xsd:attribute name="desc" type="xsd:string"/&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="variabletype" type="variabletypeType" /&gt;

&lt;!--  format  --&gt;
&lt;!--  doesn't extend tCore since its content model is mixed --&gt;
 &lt;xsd:complexType name="formatType" mixed="true"&gt;
  &lt;xsd:sequence&gt;
   &lt;xsd:any namespace="##other" minOccurs="0"
    maxOccurs="unbounded" processContents="lax" /&gt;
  &lt;/xsd:sequence&gt;
  &lt;xsd:attribute name="desc" type="xsd:string" /&gt;
  &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="format" type="formatType" /&gt;

&lt;!--  maxpreparedduration --&gt;

 &lt;xsd:element name="maxpreparedduration"
type="timedesignation.datatype"/&gt;


&lt;!--  maxrecordduration --&gt;

 &lt;xsd:element name="maxrecordduration"
type="timedesignation.datatype"/&gt;


 &lt;!-- dialogs --&gt;

 &lt;xsd:complexType name="dialogsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="dialogaudit" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dialogs" type="dialogsType" /&gt;


 &lt;!-- dialogaudit --&gt;

 &lt;xsd:complexType name="dialogauditType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="codecs" minOccurs="0"
      maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="dialogid"
     type="dialogid.datatype" use="required" /&gt;
    &lt;xsd:attribute name="state" type="state.datatype"
     use="required" /&gt;
    &lt;xsd:attributeGroup ref="fw:framework-attributes" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dialogaudit" type="dialogauditType" /&gt;


 &lt;!--
  ####################################################

  DATATYPES

  ####################################################
 --&gt;


 &lt;xsd:simpleType name="version.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="1.0" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="mime.datatype"&gt;
  &lt;xsd:restriction base="xsd:string" /&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="dialogid.datatype"&gt;
  &lt;xsd:restriction base="xsd:string" /&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="gender.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="female" /&gt;
   &lt;xsd:enumeration value="male" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="state.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="preparing" /&gt;
   &lt;xsd:enumeration value="prepared" /&gt;
   &lt;xsd:enumeration value="starting" /&gt;
   &lt;xsd:enumeration value="started" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="status.datatype"&gt;
  &lt;xsd:restriction base="xsd:positiveInteger"&gt;
   &lt;xsd:pattern value="[0-9][0-9][0-9]" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="media.datatype"&gt;
  &lt;xsd:restriction base="xsd:string" /&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="label.datatype"&gt;
  &lt;xsd:restriction base="xsd:string" /&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="direction.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="sendrecv" /&gt;
   &lt;xsd:enumeration value="sendonly" /&gt;
   &lt;xsd:enumeration value="recvonly" /&gt;
   &lt;xsd:enumeration value="inactive" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="timedesignation.datatype"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    Time designation following Time in CSS2
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
  &lt;xsd:restriction base="xsd:string"&gt;
   &lt;xsd:pattern value="(\+)?([0-9]*\.)?[0-9]+(ms|s)" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="dtmfchar.datatype"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    DTMF character [0-9#*A-D]
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
  &lt;xsd:restriction base="xsd:string"&gt;
   &lt;xsd:pattern value="[0-9#*A-D]" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="dtmfstring.datatype"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    DTMF sequence [0-9#*A-D]
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
  &lt;xsd:restriction base="xsd:string"&gt;
   &lt;xsd:pattern value="([0-9#*A-D])+" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;
 &lt;xsd:simpleType name="percentage.datatype"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    whole integer followed by '%'
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
  &lt;xsd:restriction base="xsd:string"&gt;
   &lt;xsd:pattern value="([0-9])+%" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="prompt_termmode.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="completed" /&gt;
   &lt;xsd:enumeration value="bargein" /&gt;
   &lt;xsd:enumeration value="stopped" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="collect_termmode.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="match" /&gt;
   &lt;xsd:enumeration value="noinput" /&gt;
   &lt;xsd:enumeration value="nomatch" /&gt;
   &lt;xsd:enumeration value="stopped" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="record_termmode.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="noinput" /&gt;
   &lt;xsd:enumeration value="dtmf" /&gt;
   &lt;xsd:enumeration value="maxtime" /&gt;
   &lt;xsd:enumeration value="finalsilence" /&gt;
   &lt;xsd:enumeration value="stopped" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="matchmode.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="all" /&gt;
   &lt;xsd:enumeration value="collect" /&gt;
   &lt;xsd:enumeration value="control" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="endsync.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="first" /&gt;
   &lt;xsd:enumeration value="last" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

&lt;/xsd:schema&gt;
</pre></div>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Examples</h3>

<p>This section provides examples of the IVR Control package. 
</p>
<a name="examples.protocol"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
AS-MS Dialog Interaction Examples</h3>

<p>The following example assume a control channel has been established
and synced as described in the Media Control Channel Framework (<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). 
</p>
<p>The XML messages are in angled brackets (with the root &lt;mscivr>
omitted); the REPORT status is in round brackets. Other aspects of the
protocol are omitted for readability.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
Starting an IVR dialog</h3>

<p>An IVR dialog is started successfully, and dialogexit notification
    &lt;event> is sent from the MS to the AS when the dialog exits
    normally.  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

          Application Server (AS)                   Media Server (MS)
             |                                             |
             |       (1) CONTROL: &lt;dialogstart&gt;            |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (2) 202                               |
             |  &lt;---------------------------------------   |
             |                                             |
             |                                             |
             |       (3) REPORT: &lt;response status="200"/&gt;  |
             |                   (terminate)               |
             |  &lt;----------------------------------------  |
             |                                             |
             |       (4) 200                               |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (5) CONTROL: &lt;event ... /&gt;            |
             |                                             |
             |  &lt;----------------------------------------  |
             |                                             |
             |       (6) 200                               |
             |  ----------------------------------------&gt;  |
             |                                             |
</pre></div>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
IVR dialog fails to start</h3>

<p>An IVR dialog fails to start due to an unknown dialog language. The
&lt;response> is reported in a framework 200 message.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

          Application Server (AS)                   Media Server (MS)
             |                                             |
             |       (1) CONTROL: &lt;dialogstart&gt;            |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (2) 200: &lt;response status="421"/&gt;     |
             |  &lt;----------------------------------------  |
             |                                             |

</pre></div>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.3"></a><h3>6.1.3.&nbsp;
Preparing and starting an IVR dialog</h3>

<p>An IVR dialog is prepared and started successfully, and then the
    dialog exits normally.  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

          Application Server (AS)                   Media Server (MS)
             |                                             |
             |       (1) CONTROL: &lt;dialogprepare&gt;          |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (2) 202                               |
             |  &lt;---------------------------------------   |
             |                                             |
             |       (3) REPORT: &lt;response status="200"/&gt;  |
             |                   (terminate)               |
             |  &lt;----------------------------------------  |
             |                                             |
             |       (4) 200                               |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (5) CONTROL: &lt;dialogstart&gt;            |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (6) 202                               |
             |  &lt;---------------------------------------   |
             |                                             |
             |       (7) REPORT: &lt;response status="200"/&gt;  |
             |                   (terminate)               |
             |  &lt;----------------------------------------  |
             |                                             |
             |       (8) 200                               |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (9) CONTROL: &lt;event .../&gt;             |
             |  &lt;----------------------------------------  |
             |                                             |
             |       (10) 200                              |
             |  ----------------------------------------&gt;  |
             |                                             |
</pre></div>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.4"></a><h3>6.1.4.&nbsp;
Terminating a dialog</h3>

<p>An IVR dialog is started successfully, and then terminated by the
AS. The dialogexit event is sent to the AS when the dialog exits.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

          Application Server (AS)                   Media Server (MS)
             |                                             |
             |       (1) CONTROL: &lt;dialogstart&gt;            |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (2) 202                               |
             |  &lt;---------------------------------------   |
             |                                             |
             |       (3) REPORT: &lt;response status="200"/&gt;  |
             |                   (terminate)               |
             |  &lt;----------------------------------------  |
             |                                             |
             |       (4) 200                               |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (5) CONTROL: &lt;dialogterminate&gt;        |
             |  ----------------------------------------&gt;  |
             |                                             |
             |       (6) 200: &lt;response status="200"/&gt;     |
             |  &lt;----------------------------------------  |
             |                                             |
             |       (7) CONTROL: &lt;event .../&gt;             |
             |  &lt;----------------------------------------  |
             |                                             |
             |       (8) 200                               |
             |  ----------------------------------------&gt;  |
             |                                             |


</pre></div>
<p>Note that in (6) the &lt;response> payload to the
&lt;dialogterminate/> request is carried on a framework 200 response
since it could complete the requested operation before the transaction
timeout.

</p>
<a name="examples.templates"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
IVR Dialog Examples</h3>

<p>The following examples show how &lt;dialog> is used with
&lt;dialogprepare>, &lt;dialogstart> and &lt;event> elements to play
prompts, set runtime controls, collect DTMF input and record user
input. 
</p>
<p>The examples do not specify all messages between the AS and MS. 
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Playing announcements</h3>

<p>This example prepares an announcement composed of two prompts where
the dialog repeatCount set to 2. 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
&lt;dialogprepare&gt;
   &lt;dialog repeatCount="2"&gt;
    &lt;prompt&gt;
      &lt;media loc="http://www.example.com/media/Number_09.wav"/&gt;
      &lt;media loc="http://www.example.com/media/Number_11.wav"/&gt;
    &lt;/prompt&gt;
   &lt;/dialog&gt;
&lt;/dialogprepare&gt;
&lt;/mscivr&gt;

</pre></div>
<p>If the dialog is prepared successfully, a &lt;response> is returned
with status 200 and a dialog identifier assigned by the MS:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
  &lt;response status="200" dialogid="vxi78"/&gt;
&lt;/mscivr&gt;
</pre></div>
<p>The prepared dialog is then started on a conference playing the
prompts twice:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart prepareddialogid="vxi78" conferenceid="conference11"/&gt;
&lt;/mscivr&gt;
</pre></div>
<p>In the case of a successful dialog, the output is provided in
&lt;event&gt;; for example 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="vxi78"&gt;
    &lt;dialogexit status="1"&gt;
       &lt;promptinfo termmode="completed" duration="24000"/&gt;
    &lt;/dialogexit&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.2"></a><h3>6.2.2.&nbsp;
Prompt and collect</h3>

<p>In this example, a prompt is played and then the MS waits for 30s for
a two digit sequence:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="7HDY839:HJKSkyHS~HUwkuh7ns"&gt;
 &lt;dialog&gt;
  &lt;prompt&gt;
   &lt;media loc="http://www.example.com/prompt1.wav"/&gt;
  &lt;/prompt&gt;
  &lt;collect timeout="30s" maxdigits="2"/&gt;
 &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div>
<p>If no user input is collected within 30s, then following notification
event would be returned:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="vxi81"&gt;
    &lt;dialogexit status="1" &gt;
       &lt;promptinfo termmode="completed" duration="4000"/&gt;
       &lt;collectinfo termmode="noinput"/&gt;
    &lt;/dialogexit&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div>
<p>The collect operation can be specified without a prompt. Here the MS
just waits for DTMF input from the user (the maxdigits attribute of
&lt;collect> defaults to 5):

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="7HDY839:HJKSkyHS~HUwkuh7ns"&gt;
  &lt;dialog&gt;
   &lt;collect/&gt;
  &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div>
<p>If the dialog is successful, then dialogexit &lt;event&gt; contains
the dtmf collected in its result parameter: 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="vxi80"&gt;
    &lt;dialogexit status="1"&gt;
       &lt;collectinfo dtmf="12345" termmode="match"/&gt;
    &lt;/dialogexit&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div>
<p>And finally in this example, one of the input parameters is invalid:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
&lt;dialogstart connectionid="7HDY839:HJKSkyHS~HUwkuh7ns"&gt;
 &lt;dialog repeatCount="two"&gt;
   &lt;prompt&gt;
     &lt;media loc="http://www.example.com/prompt1.wav"/&gt;
   &lt;/prompt&gt;
   &lt;collect cleardigitbuffer="true"
   timeout="4s" interdigittimeout="2s"
   termtimeout="0s" maxdigits="2"/&gt;
 &lt;/dialog&gt;
&lt;/dialogstart&gt;
&lt;/mscivr&gt;

</pre></div>
<p>The error is reported in the response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;response status="400" dialogid="vxi82"
  reason="repeatCount attribute value invalid: two"/&gt;
&lt;/mscivr&gt;
</pre></div>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.3"></a><h3>6.2.3.&nbsp;
Prompt and record</h3>

<p>In this example, the user is prompted, then their input is recorded
for a maximum of 30 seconds.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
&lt;dialogstart connectionid="7HDY839:HJKSkyHS~HUwkuh7ns"&gt;
    &lt;dialog&gt;
      &lt;prompt&gt;
       &lt;media loc="http://www.example.com/media/sayname.wav"/&gt;
      &lt;/prompt&gt;
      &lt;record dtmfterm="false" maxtime="30s" beep="true"/&gt;
    &lt;/dialog&gt;
&lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div>
<p>If successful and the recording is terminated by DTMF, the following
is returned in a dialogexit &lt;event&gt;:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="vxi83"&gt;
  &lt;dialogexit status="1"&gt;
   &lt;recordinfo termmode="dtmf"&gt;
    &lt;mediainfo type="audio/x-wav"
      loc="http://www.example.com/recording1.wav"/&gt;
   &lt;/recordinfo&gt;
  &lt;/dialogexit&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.4"></a><h3>6.2.4.&nbsp;
Runtime controls</h3>

<p>In this example, a prompt is played with collect and runtime controls
are activated.

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="7HDY839:HJKSkyHS~HUwkuh7ns"&gt;
 &lt;dialog&gt;
  &lt;prompt bargein="true"&gt;
   &lt;media loc="http://www.example.com/prompt1.wav"/&gt;
  &lt;/prompt&gt;
  &lt;control ffkey="5" rwkey="6" speedupkey="3"
           speeddnkey="4"/&gt;
  &lt;collect maxdigits="2"/&gt;
 &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>Once the dialog is active, the user can press keys 3, 4, 5 and 6 to
execute runtime controls on the prompt queue. The keys do not cause
bargein to occur. If the user presses any other key, then the prompt is
interrupted and DTMF collect begins. Note that runtime controls are not
active during the collect operation. 
</p>
<p>When the dialog is completed successfully, then both control and
collect information is reported.

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="vxi81"&gt;
    &lt;dialogexit status="1"&gt;
       &lt;promptinfo termmode="bargein"/&gt;
       &lt;controlinfo&gt;
        &lt;controlmatch dtmf="4" timestamp="2008-05-12T12:13:14Z"/&gt;
        &lt;controlmatch dtmf="3" timestamp="2008-05-12T12:13:15Z"/&gt;
        &lt;controlmatch dtmf="5" timestamp="2008-05-12T12:13:16Z"/&gt;
       &lt;/controlinfo&gt;
       &lt;collectinfo termmode="match" dtmf="14"/&gt;
    &lt;/dialogexit&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.5"></a><h3>6.2.5.&nbsp;
Subscriptions and notifications</h3>

<p>In this example, a looped dialog is started with subscription for
notifications each time the user input matches the collect grammar:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="7HDY839:HJKSkyHS"&gt;
  &lt;dialog repeatCount="0"&gt;
   &lt;collect maxdigits="2"/&gt;
  &lt;/dialog&gt;
  &lt;subscribe&gt;
   &lt;dtmfsub matchmode="collect"/&gt;
  &lt;/subscribe&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>Each time the user input the DTMF matching the grammar, the following
notification event would be sent:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="vxi81"&gt;
    &lt;dtmfnotify matchmode="collect" dtmf="12"
     timestamp="2008-05-12T12:13:14Z"/&gt;
 &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>

If no user input was provided, or the input did not match the grammar,
the dialog would continue to loop until terminated (or an error
occurred).

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.6"></a><h3>6.2.6.&nbsp;
Dialog repetition until DTMF collection complete</h3>

<p> This example is a prompt and collect dialog to collect the PIN from
the user. The repeatUntilComplete attribute in the &lt;dialog> is set to
true in this case so that when the grammar collection is complete, the
MS automatically terminates the dialog repeat cycle and reports the
results in a &lt;dialogexit> event.
 
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
    &lt;dialogstart connectionid="7HDY839:HJKSkyHS"&gt;
     &lt;dialog repeatCount="3" repeatUntilComplete="true"&gt;
      &lt;prompt bargein="true"&gt;
        &lt;media loc="http://example.com/please_enter_your_pin.vox"/&gt;
      &lt;/prompt&gt;
      &lt;collect maxdigits="4"/&gt;
     &lt;/dialog&gt;
    &lt;/dialogstart&gt;
   &lt;/mscivr&gt;
</pre></div><p>


</p>
<p>If the user barges in on the prompt and &lt;collect> receives DTMF
input matching the grammar, the dialog cycle is considered complete and
the MS returns the following:
 
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
    &lt;event dialogid="vxi81"&gt;
      &lt;dialogexit status="1"&gt;
        &lt;promptinfo duration="3654" termmode="bargein"/&gt;
        &lt;collectinfo dtmf="1234" termmode="match"/&gt;
      &lt;/dialogexit&gt;
    &lt;/event&gt;
   &lt;/mscivr&gt;
</pre></div><p>


</p>
<p>If no user input was provided, or the input did not match the
grammar, the dialog would loop for a maximum of 3 times.

</p>
<a name="examples.otherdialoglanguages"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Other Dialog Languages</h3>

<p>The following example requests that a VoiceXML dialog is started:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart dialogid="d2"
              connectionid="7HDY839:HJKSkyHS"
              type="application/voicexml+xml"
              src="http://www.example.com/mydialog.vxml"
              fetchtimeout="15s"&gt;
  &lt;params&gt;
   &lt;param name="prompt1"&gt;nfs://nas01/media1.3gp&lt;/param&gt;
   &lt;param name="prompt2"&gt;nfs://nas01/media2.3gp&lt;/param&gt;
  &lt;/params&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>If the MS does not support this dialog language, then the response
would have the status code 421 (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). However, if it does support the VoiceXML
dialog language, it would respond with a 200 status, activate the
VoiceXML dialog and make the &lt;params> available to the VoiceXML
script as described in <a class='info' href='#voicexml'>Section&nbsp;9<span> (</span><span class='info'>Using VoiceXML as a dialog language</span><span>)</span></a>.

</p>
<p>When the VoiceXML dialog exits, exit namelist parameters are
specified using &lt;params> in the dialogexit event:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;event dialogid="d2"&gt;
   &lt;dialogexit status="1"&gt;
    &lt;params&gt;
     &lt;param name="username"&gt;peter&lt;/param&gt;
     &lt;param name="pin"&gt;1234&lt;/param&gt;
    &lt;/params&gt;
   &lt;/dialogexit&gt;
  &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<a name="examples.foreignnamespaces"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Foreign Namespace Attributes and Elements</h3>

<p>An MS can support attributes and elements from foreign namespaces
within the &lt;mscivr> element. For example, the MS could support a
&lt;listen> element (in a foreign namespace) for speech recognition by
analogy to how &lt;collect> support DTMF collection. 
</p>
<p>In the following example, a prompt and collect request is extended
with a &lt;listen> element:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"
 xmlns:ex="http://www.example.com/mediactrl/extensions/1"&gt;
 &lt;dialogstart connectionid="7HDY839:HJKSkyHS~HUwkuh7ns"&gt;
 &lt;dialog&gt;
  &lt;prompt&gt;
   &lt;media loc="http://www.example.com/prompt1.wav"/&gt;
  &lt;/prompt&gt;
  &lt;collect timeout="30s" maxdigits="4"/&gt;
  &lt;ex:listen maxtimeout="30s" &gt;
    &lt;ex:grammar src="http://example.org/pin.grxml"/&gt;
  &lt;/ex:listen&gt;
 &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p> In the &lt;mscivr> root element, the xmlns:ex attribute declares
that "ex" is associated with the foreign namespace URI
"http://www.example.com/mediactrl/extensions/1". The &lt;ex:listen>, its
attributes and child elements are associated with this namespace. This
&lt;listen> could be defined so that it activates an SRGS grammar and
listens for user input matching the grammar in a similar manner to DTMF
collection. 
</p>
<p>If an MS receives this request but does not support the &lt;listen>
element, then it would send a 431 response:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;response status="431" dialogid="d560"
  reason="unsupported foreign listen element"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>If the MS does support this foreign element, it would send a 200
response and start the dialog with speech recognition. When the dialog
exits, it provides information about the &lt;listen> execution within
&lt;dialogexit>, again using elements in a foreign namespace such as
&lt;listeninfo> below:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"
 xmlns:ex="http://www.example.com/mediactrl/extensions/1"&gt;
 &lt;event dialogid="d560"&gt;
   &lt;dialogexit status="1"&gt;
    &lt;ex:listeninfo speech="1 2 3 4" termmode="match"/&gt;
   &lt;/dialogexit&gt;
  &lt;/event&gt;
&lt;/mscivr&gt;
</pre></div><p>


Note that in reply the AS sends a Control Framework 200 response even
though the notification event contains an element in a foreign namespace
which it might not understand.

</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>As this control package processes XML markup, implementations MUST
address the security considerations of <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a>.
  
</p>
<p>Implementations of this control package MUST address security,
confidentiality and integrity of messages transported over the control
channel as described in Section 11 of the Media Control channel
Framework (<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>),
including Transport Level Protection, Control Channel Policy Management
and Session Establishment. 

In addition, implementations MUST address security, confidentiality and
integrity of User Agent sessions with the MS, both in terms of SIP
signaling and associated RTP media flow; see <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a> for further details
on this topic.

Finally, implementations MUST address security, confidentiality and
integrity of sessions where, following a URI scheme, an MS uploads
recordings or retrieves documents and resources (e.g. fetching a grammar
document from a web server using HTTPS).


</p>
<p>Adequate transport protection and authentication are critical,
especially when the implementation is deployed in open networks.  If the
implementation fails to correctly address these issues, it risks
exposure to malicious attacks, including (but not limited to):

  </p>
<blockquote class="text"><dl>
<dt>Denial of Service:</dt>
<dd>An attacker could insert a request
  message into the transport stream causing specific dialogs on the MS
  to be terminated immediately. For example, &lt;dialogterminate
  dialogid="XXXX" immediate="true">, where the value of "XXXX" could be
  guessed or discovered by auditing active dialogs on the MS using an
  &lt;audit> request. Likewise, an attacker could impersonate the MS and
  insert error responses into the transport stream so denying the AS
  access to package capabilities.
  
</dd>
<dt>Resource Exhaustion:</dt>
<dd>An attacker could insert into the
  control channel new request messages (or modify existing ones) with,
  for instance, &lt;dialogprepare> elements with a very long
  fetchtimeout attribute and a bogus source URL. At some point this will
  exhaust the number of connections that the MS is able to make.
  
</dd>
<dt>Phishing:</dt>
<dd>An attacker with access to the control channel
  could modify the "loc" attribute of the &lt;media> element in a dialog
  to point to some other audio file that had different information from
  the original. This modified file could include a different phone
  number for people to call if they want more information or need to
  provide additional information (such as governmental, corporate or
  financial information).
  
</dd>
<dt>Data Theft:</dt>
<dd>An attacker could modify a &lt;record>
  element in the control channel so as to add a new recording location:

<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart&gt;
  &lt;dialog&gt;
   &lt;record&gt;
      &lt;media type="audio/x-wav" loc="(Good URI)"/&gt;
      &lt;media type="audio/x-wav" loc="(Attacker's URI)"/&gt;
   &lt;/record&gt;
  &lt;/dialog&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div>
The recorded data would be uploaded to two locations indicated by the
"{Good URI}" and the "{Attacker's URI}".  This allows the attacker to steal
the recorded audio (which could include sensitive or confidential
information) without the originator of the request necessarily being
aware of the theft.

</dd>
</dl></blockquote><p>

</p>
<p>The Media Control Channel Framework permits additional security
policy management, including resource access and control channel usage,
to be specified at the control package level beyond that specified for
the Media Control Channel Framework (see Section 11.3 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). 
</p>
<p>Since creation of IVR dialogs is associated with media processing
resources (e.g. DTMF detectors, media playback and recording, etc) on
the MS, the security policy for this control package needs to address
how such dialogs are securely managed across more than one control
channels. Such a security policy is only useful for secure, confidential
and integrity protected channels. The identity of control channels is
determined by the channel identifier: i.e. the value of the cfw-id
attribute in the SDP and Dialog-ID header in the channel protocol (see
<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). Channels are
the same if they have the same identifier; otherwise, they are
different. This control package imposes the following additional
security policies:

</p>
<blockquote class="text"><dl>
<dt>Responses:</dt>
<dd>The MS MUST only send a response to a dialog
management or audit request using the same control channel as the one
used to send the request. 
</dd>
<dt>Notifications:</dt>
<dd>The MS MUST only send notification events
for a dialog using the same control channel as it received the request
creating the dialog. 
</dd>
<dt>Auditing:</dt>
<dd>The MS MUST only provide audit information about
dialogs which have been created on the same control channel as the one
upon the &lt;audit> request is sent. 
</dd>
<dt>Rejection:</dt>
<dd>The MS SHOULD reject requests to audit or
manipulate an existing dialog on the MS if the channel is not the same
as the one used when the dialog was created. The MS rejects a request by
sending a Control Framework 403 response (see Section 7.4 and Section
11.3 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). For
example, if a channel with identifier 'cfw1234' has been used to send a
request to create a particular dialog and the MS receives on channel
'cfw98969' a request to audit or terminate the dialog, then the MS sends
a 403 framework response.

</dd>
</dl></blockquote><p>
 
</p>
<p>There can be valid reasons why an implementation does not reject an
audit or dialog manipulation request on a different channel from the one
which created the dialog. For example, a system administrator might
require a separate channel to audit dialog resources created by system
users and to terminate dialogs consuming excessive system
resources. Alternatively, a system monitor or resource broker might
require a separate channel to audit dialogs managed by this package on a
MS. However, the full implications need to be understood by the
implementation and carefully weighted before accepting these reasons as
valid. If the reasons are not valid in their particular circumstances,
the MS rejects such requests.

</p>
<p>There can also be valid reasons for 'channel handover' including high
availability support or where one AS needs to take over management of
dialogs after the AS which created them has failed. This could be
achieved by the control channels using the same channel identifier, one
after another. For example, assume a channel is created with the
identifier 'cfw1234' and the channel is used to create dialogs on the
MS. This channel (and associated SIP dialog) then terminates due to a
failure on the AS. As permitted by the Control Framework, the channel
identifier 'cfw1234' could then be reused so that another channel is
created with the same identifier 'cfw1234', allowing it to 'take over'
management of the dialogs on the MS. Again, the implementation needs to
understand the full implications and carefully weight them before
accepting these reasons as valid. If the reasons are not valid for their
particular circumstances, the MS uses the appropriate SIP mechanisms to
prevent session establishment when the same channel identifier is used
in setting up another control channel (see Section 4 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>). 
</p>
<a name="sec:IANA_Considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>This specification instructs IANA to register a new Media Control
Channel Framework Package, a new XML namespace, a new XML schema and a
new MIME type.
</p>
<p>This section further instructs IANA to create a new registry for IVR
prompt variable types. 
</p>
<a name="sec:Control_Package_Reg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Control Package Registration</h3>

<p>This section registers a new Media Control Channel Framework package,
per the instructions in Section 12.1 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; September&nbsp;2010.</span><span>)</span></a>.

</p>
<p>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   Package Name: msc-ivr/1.0
     [NOTE TO IANA/RFC-EDITOR: Please replace XXXX
     with the RFC number for this specification.]
   Published Specification(s): RFCXXXX
   Person &amp; email address to contact for further information:
   IETF, MEDIACTRL working group, (mediactrl@ietf.org),
   Scott McGlashan (smcg.stds01@mcglashan.org).
</pre></div><p>


</p>
<a name="sec:URN_Reg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
URN Sub-Namespace Registration</h3>

<p>This section registers a new XML namespace,
"urn:ietf:params:xml:ns:msc-ivr", per the guidelines in <a class='info' href='#RFC3688'>RFC 3688<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a> [RFC3688].
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      URI: urn:ietf:params:xml:ns:msc-ivr
      Registrant Contact: IETF, MEDIACTRL working group,
      (mediactrl@ietf.org), Scott McGlashan (smcg.stds01@mcglashan.org).
      XML:
         BEGIN
         &lt;?xml version="1.0"?&gt;
         &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
          &lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"&gt;
           &lt;head&gt;
            &lt;title&gt;Media Control Channel Framework IVR
                   Package attributes&lt;/title&gt;
           &lt;/head&gt;
           &lt;body&gt;
            &lt;h1&gt;Namespace for Media Control Channel
                Framework IVR Package attributes&lt;/h1&gt;
            &lt;h2&gt;urn:ietf:params:xml:ns:msc-ivr&lt;/h2&gt;
     [NOTE TO IANA/RFC-EDITOR: Please replace XXXX
     with the RFC number for this specification.]
              &lt;p&gt;See RFCXXXX&lt;/p&gt;
           &lt;/body&gt;
          &lt;/html&gt;
         END
</pre></div>
<a name="sec:XML_SCHEMA_IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
XML Schema Registration</h3>

<p>This section registers an XML schema as per the guidelines in <a class='info' href='#RFC3688'>RFC 3688<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a> [RFC3688].
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   URI:  urn:ietf:params:xml:ns:msc-ivr
   Registrant Contact: IETF, MEDIACTRL working group,
      (mediactrl@ietf.org), Scott McGlashan (smcg.stds01@mcglashan.org).
   Schema:  The XML for this schema can be found in
      Section 5 of this document.
</pre></div>
<a name="sec:MIME_Reg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4"></a><h3>8.4.&nbsp;
MIME Media Type Registration for 
'application/msc-ivr+xml'</h3>

<p>This section registers the "application/msc-ivr+xml" MIME type.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  To:  ietf-types@iana.org
   Subject:  Registration of MIME media type
             application/msc-ivr+xml
   MIME media type name:  application
   MIME subtype name:  msc-ivr+xml
   Required parameters:  (none)
   Optional parameters:  charset
      Indicates the character encoding of enclosed XML.  Default is
      UTF-8.
   Encoding considerations:  Uses XML, which can employ 8-bit
      characters, depending on the character encoding used.  See RFC
      3023 [RFC3023], section 3.2.
   Security considerations:  No known security considerations outside
      of those provided by the Media Control Channel Framework IVR
      Package.
   Interoperability considerations:  This content type provides
      constructs for the Media Control Channel Framework IVR package.
   Published specification:  RFC XXXX [NOTE TO IANA/RFC-EDITOR: Please
      replace XXXX with the RFC number for this specification.]
   Applications which use this media type:  Implementations of
      the Media Control Channel Framework IVR package.
   Additional Information:  Magic Number(s): (none)
      File extension(s): (none)
      Macintosh File Type Code(s): (none)
   Person &amp; email address to contact for further information:  Scott
      McGlashan &lt;smcg.stds01@mcglashan.org&gt;
   Intended usage:  LIMITED USE
   Author/Change controller:  The IETF
   Other information:  None.
</pre></div>
<a name="sec:Prompt_Variable_Type_Reg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5"></a><h3>8.5.&nbsp;
IVR Prompt Variable Type Registration Information</h3>

<p>This specification establishes an IVR Prompt Variable Type registry
for Control Packages and initiates its population as follows.  New
entries in this registry must be published in an RFC (either as an IETF
submission or RFC Editor submission), using the IANA policy <a class='info' href='#RFC5226'>[RFC5226]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; May&nbsp;2008.</span><span>)</span></a> "RFC Required".

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
[NOTE TO IANA/RFC-EDITOR: Please
      replace XXXX with the RFC number for this specification.]
Variable Type      Reference       Control Package
-------------      ---------       ---------------
    date           [RFCXXXX]         msc-ivr/1.0
    time           [RFCXXXX]         msc-ivr/1.0
    digits         [RFCXXXX]         msc-ivr/1.0
</pre></div><p>


</p>
<p>The following information MUST be provided in an RFC publication in
order to register a new Prompt Variable type: 

</p>
<blockquote class="text"><dl>
<dt>Variable Type:</dt>
<dd>The value for the &lt;variable> type
attribute (<a class='info' href='#defn.variable'>Section&nbsp;4.3.1.1.1<span> (</span><span class='info'>&lt;variable></span><span>)</span></a>). The RFC MUST specify
permitted values (if any) for the format attribute of &lt;variable> and
how the value attribute is rendered for different values of the format
attribute. The RFC MUST NOT weaken but MAY strengthen the valid values
of &lt;variable> attributes defined in <a class='info' href='#defn.variable'>Section&nbsp;4.3.1.1.1<span> (</span><span class='info'>&lt;variable></span><span>)</span></a> of
this specification.

</dd>
<dt>Reference:</dt>
<dd>The RFC number in which the variable type is
registered.
</dd>
<dt>Control Package:</dt>
<dd>The Control Package associated with the
IVR variable type.
</dd>
<dt>Person and address to contact for further information:</dt>
<dd>

</dd>
</dl></blockquote><p>


</p>
<a name="voicexml"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Using VoiceXML as a dialog language</h3>

<p>The IVR control package allows, but does not require, the MS to
support other dialog languages by referencing an external dialog
document. This section provides MS implementations which support the
VoiceXML dialog language (<a class='info' href='#VXML20'>[VXML20]<span> (</span><span class='info'>McGlashan, S., Burnett, D., Carter, J., Danielsen, P., Ferrans, J., Hunt, A., Lucas, B., Porter, B., Rehor, K., and S. Tryphonas, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 2.0,&rdquo; March&nbsp;2004.</span><span>)</span></a>, <a class='info' href='#VXML21'>[VXML21]<span> (</span><span class='info'>Oshry, M., Auburn, RJ., Baggia, P., Bodell, M., Burke, D., Burnett, D., Candell, E., Carter, J., McGlashan, S., Lee, A., Porter, B., and K. Rehor, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 2.1,&rdquo; June&nbsp;2007.</span><span>)</span></a>, <a class='info' href='#VXML30'>[VXML30]<span> (</span><span class='info'>McGlashan, S., Burnett, D., Akolkar, R., Auburn, RJ., Baggia, P., Barnett, J., Bodell, M., Carter, J., Oshry, M., Rehor, K., Young, M., and R. Hosn, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 3.0,&rdquo; August&nbsp;2010.</span><span>)</span></a>) with additional details
about using these dialogs in this package. This section is normative for
an MS which supports the VoiceXML dialog language.  
</p>
<p>This section covers preparing (<a class='info' href='#vxml.dialogprepare'>Section&nbsp;9.1<span> (</span><span class='info'>Preparing a VoiceXML dialog</span><span>)</span></a>),
starting (<a class='info' href='#vxml.dialogstart'>Section&nbsp;9.2<span> (</span><span class='info'>Starting a VoiceXML dialog</span><span>)</span></a>), terminating (<a class='info' href='#vxml.dialogterminate'>Section&nbsp;9.3<span> (</span><span class='info'>Terminating a VoiceXML dialog</span><span>)</span></a>) and exiting (<a class='info' href='#vxml.dialogexit'>Section&nbsp;9.4<span> (</span><span class='info'>Exiting a VoiceXML dialog</span><span>)</span></a>) VoiceXML dialogs as well as handling
VoiceXML call transfer (<a class='info' href='#vxml.transfer'>Section&nbsp;9.5<span> (</span><span class='info'>Call Transfer</span><span>)</span></a>). 
</p>
<a name="vxml.dialogprepare"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Preparing a VoiceXML dialog</h3>

<p>A VoiceXML dialog is prepared by sending the MS a request containing
a &lt;dialogprepare> element (<a class='info' href='#defn.dialogprepare'>Section&nbsp;4.2.1<span> (</span><span class='info'>&lt;dialogprepare></span><span>)</span></a>).  The
type attribute is set to "application/voicexml+xml" and the src
attribute to the URI of the VoiceXML document which is to be prepared by
the MS. For example:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogprepare type="application/voicexml+xml"
                src="http://www.example.com/mydialog.vxml"
                fetchtimeout="15s"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>The VoiceXML dialog environment uses the &lt;dialogprepare> request
as an opportunity to fetch and validate the initial document indicated
by the src attribute along with any resources referenced in the VoiceXML
document marked as prefetchable. The maxage and maxstale attributes, if
specified, control how the initial VoiceXML document is fetched using
HTTP (see <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>).  Note that the fetchtimeout
attribute is not defined in VoiceXML for an initial document but the MS
MUST support this attribute in its VoiceXML environment.
</p>
<p> If a &lt;params> child element of &lt;dialogprepare> is specified,
then the MS MUST map the parameter information into a VoiceXML session
variable object as described in <a class='info' href='#vxml.params'>Section&nbsp;9.2.3<span> (</span><span class='info'>Session parameter information</span><span>)</span></a>.
</p>
<p>The success or failure of the VoiceXML document preparation is
reported in the MS response. For example, if the VoiceXML document
cannot be retrieved, then a 409 error response is returned. If the
document is syntactically invalid according to VoiceXML, then a 400
response is returned. If successful, the response includes a dialogid
attribute whose value the AS can use in &lt;dialogstart> element to
start the prepared dialog. 
</p>
<a name="vxml.dialogstart"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
Starting a VoiceXML dialog</h3>

<p>A VoiceXML dialog is started by sending the MS a request containing a
&lt;dialogstart> element (<a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>). If a
VoiceXML dialog has already been prepared using &lt;dialogprepare>, then
the MS starts the dialog indicated by the prepareddialogid
attribute. Otherwise, a new VoiceXML dialog can be started by setting
the type attribute to "application/voicexml+xml" and the src attribute
to the URI of the VoiceXML document. For example:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="ssd3r3:sds345b"
              type="application/voicexml+xml"
              src="http://www.example.com/mydialog.vxml"
              fetchtimeout="15s"/&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>The maxage and maxstale attributes, if specified, control how the
initial VoiceXML document is fetched using HTTP (see <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>). Note that the fetchtimeout attribute is not defined
in VoiceXML for an initial document but the MS MUST support this
attribute in its VoiceXML environment. Note also that support for
&lt;dtmfsub> subscriptions (<a class='info' href='#defn.dtmfsub'>Section&nbsp;4.2.2.1.1<span> (</span><span class='info'>&lt;dtmfsub></span><span>)</span></a>) and their
associated dialog notification events is not defined in VoiceXML. If
such a subscription is specified in a &lt;dialogstart> request, then the
MS sends a 439 error response (see <a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>). 
</p>
<p>The success or failure of starting a VoiceXML dialog is reported in
the MS response as described in <a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>.
</p>
<p>When the MS starts a VoiceXML dialog, the MS MUST map session
information into a VoiceXML session variable object. There are 3 types
of session information: protocol information (<a class='info' href='#vxml.protocol'>Section&nbsp;9.2.1<span> (</span><span class='info'>Session protocol information</span><span>)</span></a>), media stream information (<a class='info' href='#vxml.streams'>Section&nbsp;9.2.2<span> (</span><span class='info'>Session media stream information</span><span>)</span></a>) and parameter information (<a class='info' href='#vxml.params'>Section&nbsp;9.2.3<span> (</span><span class='info'>Session parameter information</span><span>)</span></a>). 
</p>
<a name="vxml.protocol"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2.1"></a><h3>9.2.1.&nbsp;
Session protocol information</h3>

<p>If the connectionid attribute is specified, the MS assigns protocol
information from the SIP dialog associated with the connection to the
following session variables in VoiceXML:

</p>
<blockquote class="text"><dl>
<dt>session.connection.local.uri</dt>
<dd>Evaluates to the SIP URI
specified in the To: header of the initial INVITE 
</dd>
<dt>session.connection.remote.uri</dt>
<dd>Evaluates to the SIP URI
specified in the From: header of the initial INVITE
</dd>
<dt>session.connection.originator</dt>
<dd>Evaluates to the value of
session.connection.remote (MS receives inbound connections but does not
create outbound connections)
</dd>
<dt>session.connection.protocol.name</dt>
<dd>Evaluates to "sip".  Note
that this is intended to reflect the use of SIP in general, and does not
distinguish between whether the connection accesses the MS via SIP or
SIPS procedures. 
</dd>
<dt>session.connection.protocol.version</dt>
<dd>Evaluates to
"2.0".
</dd>
<dt>session.connection.redirect</dt>
<dd> This array is populated by
information contained in the History-Info (<a class='info' href='#RFC4244'>[RFC4244]<span> (</span><span class='info'>Barnes, M., &ldquo;An Extension to the Session Initiation Protocol (SIP) for Request History Information,&rdquo; November&nbsp;2005.</span><span>)</span></a>)
header in the initial INVITE or is otherwise undefined.  Each entry
(hi-entry) in the History-Info header is mapped, in the order it
appeared in the History-Info header, into an element of the
session.connection.redirect array.  Properties of each element of the
array are determined as follows:

   
<blockquote class="text"><dl>
<dt>uri</dt>
<dd>Set to the hi-targeted-to-uri value of the
     History-Info entry
</dd>
<dt>pi</dt>
<dd>Set to 'true' if hi-targeted-to-uri contains a
     'Privacy=history' parameter, or if the INVITE Privacy header
     includes 'history'; 'false' otherwise
</dd>
<dt>si</dt>
<dd>Set to the value of the 'si' parameter if it exists,
         undefined otherwise
</dd>
<dt>reason</dt>
<dd>Set verbatim to the value of the 'Reason' parameter of
         hi-targeted-to-uri
</dd>
</dl></blockquote>

</dd>
<dt>session.connection.aai</dt>
<dd> Evaluates to the value of a SIP
header with the name "aai" if present; otherwise undefined.

</dd>
<dt>session.connection.protocol.sip.requesturi</dt>
<dd>This is an
associative array where the array keys and values are formed from the
URI parameters on the SIP Request-URI of the initial INVITE.  The array
key is the URI parameter name.  The corresponding array value is
obtained by evaluating the URI parameter value as a string.  In
addition, the array's toString() function returns the full SIP
Request-URI. 

</dd>
<dt>session.connection.protocol.sip.headers</dt>
<dd>This is an
associative array where each key in the array is the non-compact name of
a SIP header in the initial INVITE converted to lower-case (note the
case conversion does not apply to the header value).  If multiple header
fields of the same field name are present, the values are combined into
a single comma-separated value.  Implementations MUST at a minimum
include the Call-ID header and MAY include other headers.  For example,
session.connection.protocol.sip.headers["call-id"] evaluates to the
Call-ID of the SIP dialog.

</dd>
</dl></blockquote><p>

</p>
<p>If a conferenceid attribute is specified, then the MS populates the following
session variables in VoiceXML:

</p>
<blockquote class="text"><dl>
<dt>session.conference.name</dt>
<dd>Evaluates to the value of the
conferenceid attribute 
</dd>
</dl></blockquote><p>

</p>
<a name="vxml.streams"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2.2"></a><h3>9.2.2.&nbsp;
Session media stream information</h3>

<p>The media streams of the connection or conference to use for the
dialog are described in <a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>, including use
of &lt;stream> elements (<a class='info' href='#defn.stream'>Section&nbsp;4.2.2.2<span> (</span><span class='info'>&lt;stream></span><span>)</span></a>) if specified.


The MS maps media stream information into the VoiceXML session variable
session.connection.protocol.sip.media for a connection, and
session.conference.media for a conference. In both variables, the value
of the variable is an array where each array element is an object with
the following properties:

</p>
<blockquote class="text"><dl>
<dt>type</dt>
<dd>This required property indicates the type of
      the media associated with the stream (see <a class='info' href='#defn.stream'>Section&nbsp;4.2.2.2<span> (</span><span class='info'>&lt;stream></span><span>)</span></a> &lt;stream> type attribute definition)
      
</dd>
<dt>direction</dt>
<dd>This required property indicates the
      directionality of the media relative to the endpoint of the dialog
      (see <a class='info' href='#defn.stream'>Section&nbsp;4.2.2.2<span> (</span><span class='info'>&lt;stream></span><span>)</span></a> &lt;stream> direction attribute
      definition).
      
</dd>
<dt>format</dt>
<dd>This property is optional.  If defined, the
      value of the property is an array.  Each array element is an
      object which specifies information about one format of the media
      stream.  The object contains at least one property called name
      whose value is the subtype name of the media format (<a class='info' href='#RFC4855'>[RFC4855]<span> (</span><span class='info'>Casner, S., &ldquo;Media Type Registration of RTP Payload Formats,&rdquo; February&nbsp;2007.</span><span>)</span></a>).  Other properties may be defined with string
      values; these correspond to required and, if defined, optional
      parameters of the format.
      
</dd>
</dl></blockquote><p>

</p>
<p>As a consequence of this definition, when a connectionid is specified
there is an array entry in session.connection.protocol.sip.media for
each media stream used by the VoiceXML dialog. For an example, consider
a connection with bi-directional G.711 mu-law audio sampled at 8kHz
where the dialog is started with

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="ssd3r3:sds345b"
              type="application/voicexml+xml"
              src="http://www.example.com/mydialog.vxml"
              fetchtimeout="15s"&gt;
  &lt;stream media="audio" direction="recvonly"/&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>In this case, session.connection.protocol.sip.media[0].type evaluates
to "audio", session.connection.protocol.sip.media[0].direction to
"recvonly" (i.e. the endpoint only receives media from the dialog - the
endpoint does not send media to the dialog), and
session.connection.protocol.sip.media[0].format[0].name evaluates to
"PCMU" and session.connection.protocol.sip.media[0].format[0].rate
evaluates to "8000".

</p>
<p>Note that the session variable is updated if the connection or
conference media session characteristics for the VoiceXML dialog change
(e.g. due to a SIP re-INVITE).

</p>
<a name="vxml.params"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2.3"></a><h3>9.2.3.&nbsp;
Session parameter information</h3>

<p>Parameter information is specified in the &lt;params> child element
of &lt;dialogprepare> and &lt;dialogstart> elements, where each
parameter is specified using a &lt;param> element. The MS maps parameter
information into VoiceXML session variables as follows:

</p>
<blockquote class="text"><dl>
<dt>session.values</dt>
<dd>This is an associative array mapped to the
&lt;params> element. It is undefined if no &lt;params> element is
specified. If a &lt;params> element is specified in both
&lt;dialogprepare> and &lt;dialogstart> elements for the same dialog,
then the array is first initialized with the &lt;params> specified in
the &lt;dialogprepare> element and then updated with the &lt;params>
specified in the &lt;dialogstart> element; in cases of conflict, the
&lt;dialogstart> parameter value take priority. Array keys and values
are formed from &lt;param> children of the &lt;params> element.  Each
array key is the value of the name attribute of a &lt;param> element. If
the same name is used in more than one &lt;param> element, then the
array key is associated with the last &lt;param> in document order. The
corresponding value for each key is an object with two required
properties: a "type" property evaluating to the value of the type
attribute; and a "content" property evaluating to the content of the
&lt;param>. In addition, this object's toString() function returns the
value of the "content" property as a string.

</dd>
</dl></blockquote><p>

</p>
<p>For example, a VoiceXML dialog started with one parameter:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;mscivr version="1.0" xmlns="urn:ietf:params:xml:ns:msc-ivr"&gt;
 &lt;dialogstart connectionid="ssd3r3:sds345b"
              type="application/voicexml+xml"
              src="http://www.example.com/mydialog.vxml"
              fetchtimeout="15s"&gt;
  &lt;params&gt;
   &lt;param name="mode"&gt;playannouncement&lt;/param&gt;
  &lt;/params&gt;
 &lt;/dialogstart&gt;
&lt;/mscivr&gt;
</pre></div><p>


</p>
<p>In this case, session.values would be defined with one item in the
array where session.values['mode'].type evaluates to "text/plain" (the
default value), session.values['mode'].content evaluates to
"playannouncement" and session.values['mode'].toString() also evaluates
to "playannouncement".

</p>
<p>The MS sends an error response (see <a class='info' href='#defn.dialogstart'>Section&nbsp;4.2.2<span> (</span><span class='info'>&lt;dialogstart></span><span>)</span></a>) if a &lt;param> is not supported by the MS
(e.g. the parameter type is not supported).

</p>
<a name="vxml.dialogterminate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.3"></a><h3>9.3.&nbsp;
Terminating a VoiceXML dialog</h3>

<p>
When the MS receives a request with a &lt;dialogterminate> element
(<a class='info' href='#defn.dialogterminate'>Section&nbsp;4.2.3<span> (</span><span class='info'>&lt;dialogterminate></span><span>)</span></a>), the MS throws a
'connection.disconnect.hangup' event into the specified VoiceXML dialog.
Note that if the immediate attribute has the value true, then the MS
MUST NOT return &lt;params> information when the VoiceXML dialog exits
(even if the VoiceXML dialog provides such information) - see <a class='info' href='#vxml.dialogexit'>Section&nbsp;9.4<span> (</span><span class='info'>Exiting a VoiceXML dialog</span><span>)</span></a>.

</p>
<p>If the connection or conference associated with the VoiceXML dialog
terminates, then the MS throws a 'connection.disconnect.hangup' event
into the specified VoiceXML dialog. 
</p>
<a name="vxml.dialogexit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.4"></a><h3>9.4.&nbsp;
Exiting a VoiceXML dialog</h3>

<p>The MS sends a &lt;dialogexit> notification event (<a class='info' href='#defn.dialogexit'>Section&nbsp;4.2.5.1<span> (</span><span class='info'>&lt;dialogexit></span><span>)</span></a>) when the VoiceXML dialog is complete, has
been terminated or because it exits due to an error. The &lt;dialogexit>
status attribute specifies the status of the VoiceXML dialog when it
exits and its &lt;params> child element specifies information, if any,
returned from the VoiceXML dialog.
</p>
<p>A VoiceXML dialog exits when it processes a &lt;disconnect> element,
a &lt;exit> element or an implicit exit according to the VoiceXML FIA.
If the VoiceXML dialog executes a &lt;disconnect> and then subsequently
executes an &lt;exit> with namelist information, the namelist
information from the &lt;exit> element is discarded.

</p>
<p>The MS reports namelist variables in the &lt;params> element of the
&lt;dialogexit>. Each &lt;param> reports on a namelist variable. The MS
set the &lt;param> name attribute to the name of the VoiceXML variable.
The MS sets the &lt;param> type attribute according to the type of the
VoiceXML variable. 

The MS sets the &lt;param> type to 'text/plain' when the VoiceXML
variable is a simple ECMAScript value.

If the VoiceXML variable is a recording, the MS sets the &lt;param> type
to the MIME media type of the recording and encodes the recorded content
as CDATA in the &lt;param> (see <a class='info' href='#defn.param'>Section&nbsp;4.2.6.1<span> (</span><span class='info'>&lt;param></span><span>)</span></a> for an
example).

If the VoiceXML variable is a complex ECMAScript value (e.g. object,
array, etc), the MS sets the &lt;param> type to 'application/json' and
converts the variable value to its JSON value equivalent (<a class='info' href='#RFC4627'>[RFC4627]<span> (</span><span class='info'>Crockford, D., &ldquo;The application/json Media Type for JavaScript Object Notation (JSON),&rdquo; July&nbsp;2006.</span><span>)</span></a>). The behavior resulting from specifying an
ECMAScript object with circular references is not defined.

</p>
<p>If the expr attribute is specified on the VoiceXML &lt;exit> element
instead of the namelist attribute, the MS creates a &lt;param> element
with the reserved name '__exit'.  If the value is an ECMAScript literal,
the &lt;param> type is 'text/plain' and the content is the literal
value. If the value is a variable, the &lt;param> type and content are
set in the same way as a namelist variable; for example, an expr
attribute referencing a variable with a simple ECMAScript value has the
type 'text/plain' and the content is set to the ECMAScript value. To
allow the AS to differentiate between a &lt;dialogexit> notification
event resulting from a VoiceXML &lt;disconnect> from one resulting from
an &lt;exit>, the MS creates a &lt;param> with the reserved name
'__reason', the type 'text/plain', and a value of "disconnect" (without
brackets) to reflect the use of VoiceXML's &lt;disconnect> element, and
the value of "exit" (without brackets) to an explicit &lt;exit> in the
VoiceXML dialog.  If the VoiceXML session terminates for other reasons
(such as encountering an error), this parameter MAY be omitted or take
on platform-specific values prefixed with an underscore.

</p>
<p><a class='info' href='#vxml.table.exit'>Table&nbsp;2<span> (</span><span class='info'>VoiceXML &lt;exit> mapping examples</span><span>)</span></a> provides some examples of VoiceXML
&lt;exit> usage and the corresponding &lt;params> element in the
&lt;dialogexit> notification event. It assumes the following VoiceXML
variable names and values: userAuthorized=true, pin=1234 and errors=0.
The &lt;param> type attributes ('text/plain') are omitted for clarity.

</p><br /><hr class="insert" />
<a name="vxml.table.exit"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="25%"><col align="left" width="75%">
<tr><th align="left">&lt;exit> Usage</th><th align="left">&lt;params> Result</th></tr>
<tr>
<td align="left">&lt;exit></td>
<td align="left">
&lt;params>
 &lt;param name="__reason">exit&lt;/param>
&lt;/params>
</td>
</tr>
<tr>
<td align="left">&lt;exit expr="5"></td>
<td align="left">
&lt;params>
 &lt;param name="__reason">exit&lt;/param>
 &lt;param name="__exit">5&lt;/param>
&lt;/params>
</td>
</tr>
<tr>
<td align="left">&lt;exit expr="'done'"></td>
<td align="left">
&lt;params>
 &lt;param name="__reason">exit&lt;/param>
 &lt;param name="__exit">'done'&lt;/param>
&lt;/params>
</td>
</tr>
<tr>
<td align="left">&lt;exit expr="userAuthorized"></td>
<td align="left">
&lt;params>
 &lt;param name="__reason">exit&lt;/param>
 &lt;param name="__exit">true&lt;/param>
&lt;/params>
</td>
</tr>
<tr>
<td align="left">&lt;exit namelist="pin errors"></td>
<td align="left">
&lt;params>
 &lt;param name="__reason">exit&lt;/param>
 &lt;param name="pin">1234&lt;/param>
 &lt;param name="errors">0&lt;/param>
&lt;/params>
</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: VoiceXML &lt;exit> mapping examples&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="vxml.transfer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.5"></a><h3>9.5.&nbsp;
Call Transfer</h3>

<p>While VoiceXML is at its core a dialog language, it also provides
optional call transfer capability. It is NOT RECOMMENDED to use
VoiceXML's call transfer capability in networks involving Application
Servers.  Rather, the AS itself can provide call routing functionality
by taking signaling actions based on the data returned to it, either
through VoiceXML's own data submission mechanisms or through the
mechanism described in <a class='info' href='#vxml.dialogexit'>Section&nbsp;9.4<span> (</span><span class='info'>Exiting a VoiceXML dialog</span><span>)</span></a>.  


If the MS encounters a VoiceXML dialog requesting call transfer
capability, the MS SHOULD raise an error event in the VoiceXML dialog
execution context: an error.unsupported.transfer.blind event if blind
transfer is requested, error.unsupported.transfer.bridge if bridge
transfer is requested, or error.unsupported.transfer.consultation if
consultation transfer is requested. 
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Change Summary</h3>

<p>Note to RFC Editor:  Please remove this whole section.
</p>
<p> The following are the changes between the -09 and -08 versions
(primarily addressing IESG DISCUSS, comments and nits):

</p>
<ul class="text">
<li>3.1: Aligned Control Package Name/Version with last Control Framework
verbage. 
</li>
<li>4.0: Modified communications protocol requirements so that a MS MUST
support both HTTP and HTTPS for fetching resources and uploading
recordings. Added statement to relevant element definitions. 
</li>
<li>4.2.1: Corrected error code from 409 to 421 in last paragraph in
section. 
</li>
<li>4.2.1, 4.2.2, 4.3.1.3.1, 4.3.4, 4.3.5: Modified the specification of
src and location attributes in &lt;dialogprepare>, &lt;dialogstart>,
&lt;grammar>, &lt;record> and &lt;media> so that there is no mention of
authentication information in the URI (the URI RFC 3986 already covers
this). 

</li>
<li>4.0: Clarified that while some elements contain attributes whose
value is descriptive text, this descriptive text is for diagnostic use
only and does not require a language indicator such as a language tag.

</li>
<li>4.2.2.2: Clarified that the media attribute of &lt;stream> is a MIME
type-name with reference to RFC 4288.
</li>
<li>4.2.6.1: Added encoding attribute to &lt;param> to allow for
specification of content-transfer-encoding schema. Updated XML
schema.
</li>
<li>4.2.6.1: Simplified content model of &lt;param> to be text
only. Updated XML schema.
</li>
<li>4.3.1.1.1, 4.4.2.2.5, 8.5: Tighten up definition of &lt;variable>
date, time and digits types (and &lt;variables>) and added IANA
instruction to establish a prompt variable type registry. 
</li>
<li>4.3.1.4: Clarified that in the &lt;record> the mapping of the append
operation to the upload protocol scheme is implementation-specific. 
</li>
<li>4.6.10: Clarified MIME media type format with ABNF production
referencing RFC 4288.
</li>
<li>5: Stated that the schema is normative.
</li>
<li>5: Corrected &lt;par> definition in XML Schema by adding 'endsync'
attribute.
</li>
<li>5: Corrected &lt;grammartypes> definition in XML Schema by making
mimetype child element optional.
</li>
<li>Moved VoiceXML section (Appendix A) to main body and clarified that
it is normative for implementations supporting VoiceXML. Updated
VoiceXML references to normative except (VoiceXML 3.0 which is still a
Working Draft). 
</li>
<li>9.2.2: Corrected example so that the subtype-name (whose value
should be the subtype of the media format) is "PCMU" rather than
"audio/PCMU".
</li>
<li>9.4: VoiceXML &lt;exit> with expr attribute: clarified that if the
value is an ECMAScript variable, the &lt;param> type and content is
processed in the same way as a namelist variable.
</li>
<li>4.2.2.2.1: clarified the definition of &lt;region> as an area in a
video layout and added a reference to the mixer package
</li>
<li>4.3.1.4: clarified sentence "If no &lt;media> child element is
specified, the MS MUST provide a recording location where the recording
format is implementation- specific." 
</li>
<li>Introduction: Clarified that Control Framework is an equivalent term
for the Media Control Channel Framework. Expanded DTMF acronym. 
</li>
<li>4.2.5.1, 4.5: replaced reference to standards-tracks RFC for
assignment of new values, with reference to using Standards Action
process defined in RFC 5226. 
</li>
<li>4.3.1.1.3: Added recommendation that a &lt;par> element contains only
one &lt;media> element of the same media type (i.e. same type-name as
defined in <a class='info' href='#defn.mimetype'>Section&nbsp;4.6.10<span> (</span><span class='info'>MIME Media Type</span><span>)</span></a>).
</li>
<li>4.4.2.1.1: changed &lt;codec> to include name attribute; aligned
definition with RFC4288; updated schema.
</li>
<li>4.6: Type definitions; added references to XML Schema datatypes where
appropriate; changed definition of boolean to match W3C definition and
updated boolean type in schema. 
</li>
<li>Typos: in 4.2.2.1, replaced "rewkey" with "rwkey" in first example;
in 4.3.1.1.3, added closing "&gt;" to example; in 4.3.1.1.3.1, added
closing "&gt;" to example; in 4.6.11, corrected RFC 5646 reference

</li>
<li>Validated all examples against XML schema and corrected where
necessary.
</li>
</ul><p>

</p>
<p> The following are the changes between the -08 and -07 versions
(addressing IETF Last Call comments):

</p>
<ul class="text">
<li>4.2: Changed recommended maximum duration value for a prepared dialog
from 30s to 300s. 
</li>
<li>4.2: Changed the dialog state machine so that when a PREPARED dialog
is terminated, the MS always sends a &lt;dialogexit> notification
event. 
</li>
<li>4.2.1/4.2.2: Clarified that dialog preparation covers retrieval of
external resources (e.g. media, grammar, etc) when they are referenced
by an inline &lt;dialog> element. 
</li>
<li>4.2.2.1.1: Fixed example replacing &lt;dtmfnotify> with &lt;dtmfsub>
in &lt;subscribe> element
</li>
<li>4.3.1: Added repeatUntilComplete attribute to &lt;dialog> to allow
repetition of an dialog until input (DTMF or recording) is completed
successfully. Updated XML schema. Added example in 6.2.6.
</li>
<li>4.3.1.1.3: Clarified that in the case of &lt;par>, it is
responsibility of the MS to assign the appropriate stream(s) for
playback of each &lt;media>. 
</li>
<li>4.3.1.2: Clarified that DTMF matching &lt;control>s are consumed and
not added to the digit buffer. 
</li>
<li>4.3.1.3: Clarified that &lt;collect>'s maxdigits attribute is ignored
if a custom grammar is specified.

</li>
<li>4.3.1.3: Clarified that when a DTMF input can match more than one of
{termchar, escapekey, grammar}, then the priority of matching is:
termchar, escapekey and then grammar.

</li>
<li>4.3.1.3: Clarified that the behavior of the escapekey: the MS
discards collected DTMFs already matched against the grammar, and the MS
attempts to match incoming DTMF (including any pending in the digit
buffer) as described in Step 5 of the &lt;collect> execution model.
</li>
<li>12.2.1: Changed mapping between SIP History-Info and VoiceXML
session.connection.redirect to align with RFC5552 reported Errata. 
</li>
</ul><p>

</p>
<p> The following are the changes between the -07 and -06 versions
(primarily addressing AD Review comments):

</p>
<ul class="text">
<li>Generally corrected references from Section 17.1 to Section 16.1 of
Control Channel Framework.
</li>
<li>4.2.2.1.1: corrected syntax error in example 
</li>
<li>4.2.3.1: corrected example by adding conferenceid attribute. 
</li>
<li>12.1: corrected error code from 407 to 409 in example when vxml
document cannot be retrieved.
</li>
<li>6.2.2: corrected example by removing bargein="true"; clarified that
maxdigits defaults to 5.
</li>
<li>4.5: Changed the recovery action for a 405 ('dialogid already
exists') error response. The AS can always recover by not specifying the
id in the creation command and let the MS generate a unique id in the
response.

</li>
<li>8.1: Removed the To: and Subject: header fields  
</li>
<li>Corrected miscellanous typos.
</li>
<li>4.2.1, 4.2.2 and 4.3.1.3.1: Added authentication information to the
definition of src attribute in &lt;dialogprepare>, &lt;dialogstart> and
&lt;grammar>. 
</li>
<li>7: Added Security Consideration that uploading/retrieving documents
and resources should be secured. 
</li>
<li>8.4: Changed file extension from '.xml' to (none) 
</li>
<li>Changed "~" to a ":" for connectionid 
</li>
<li>4.2.6.1: Clarified that &lt;param> can contain an XML value.
</li>
<li>4.2.1, 4.2.2, 12.1,12.2, schema: added maxage and maxstale attributes
(optional) to &lt;dialogprepare>, &lt;dialogstart> for HTTP VoiceXML use
case. 
</li>
<li>4.2.2.1: Clarified that a request containing &lt;subscribe> with no
child elements is equivalent to a request without a &lt;subscribe>
element. 
</li>
<li>4.2.5.1: Changed &lt;dialogexit> status codes so that only 0-4 defined
and all others are reserved for future use requiring a standard-track
RFC.

</li>
<li>4.5: Changed status code for &lt;response> and &lt;auditresponse> so
that certain codes are defined and all others are reserved for future
use requiring a standard-track RFC.

</li>
<li>4.2.2.2, 12.2.2, various examples: Changed the media &lt;stream>
direction so that it is relative to the endpoint, not the dialog. Now
aligned with VoiceXML mapping in RFC 5552. 
</li>
</ul><p>


</p>
<p> The following are the changes between the -06 and -05 versions.

</p>
<ul class="text">
<li>Corrected typo in introduction
</li>
<li>4.2.1: Added &lt;params> to &lt;dialogprepare>. Updated VoiceXML
appendix to describe how these parameters are mapped to the session
object. 
</li>
<li>4.3.1.3: &lt;collect>: clarified definitions of interdigittimeout and
termtimeout attributes and tightened up the collect execution
model. 
</li>
<li>8: IANA Considerations: Updated IANA registration information and
added registration for the XML Schema 
</li>
</ul><p>


</p>
<p> The following are the changes between the -05 and -04 versions.

</p>
<ul class="text">
<li>Corrected syntax errors in examples: 4.1, 6.2.2, 6.2.5, 6.3 
</li>
<li>6.3: Corrected error status code for unsupported dialog 
</li>
<li>4.4.2.2.2: &lt;grammartypes>: corrected text to reflect that no
additional grammar types need be specified. 
</li>
<li>Schema: corrected schema to allow &lt;grammartypes> with no children,
and renamed &lt;mediatypes> to &lt;prompttypes> to align with
text. Fixed problem with non-deterministic content models. 
</li>
<li>7. Security Considerations: Added requirement that implementations
need to secure SIP and RTP sessions with User Agents. 
</li>
</ul><p>


</p>
<p> The following are the changes between the -04 and -03 versions.

</p>
<ul class="text">
<li>4.2.2.2: Clarified that media stream direction is relative to the
dialog (the examples showed this but not the definition). 
</li>
<li>4.3.1.2: Clarified that speed. volume and seek &lt;control>
operations beyond the platform's capability are automatically limited to
the platform's minimum/maximum. Also clarified that when the output is
paused, then the MS resumes output automatically on speed, volume and
seek control operations.
 
</li>
<li>6.2.5: Corrected syntax error in example
</li>
<li>7 Security: Added a denial of service example where the attacker
impersonates the MS. 
</li>
<li>7 Security: Clarified that the package security policy for multiple
channels is only useful if the channels themselves are secured. 
</li>
<li>Added reference for VoiceXML 3.0
</li>
<li>Updated acknowledgements. 
</li>
<li>Appendix A: 12.2: Corrected syntax error in example
</li>
<li>Appendix A: 12.2.1: Changed behavior for how VoiceXML session
information is populated for a conference; session.conference.name is
specified. Added session.connection.originator variable for a connection
(MS receives inbound connections but does not create outbound
connections). 
</li>
<li>Appendix A: 12.2.2: Added session.conference.media for conference
media information. Clarified that direction is relative to the
dialog.
</li>
<li>Appendix A: 12.2.2: Corrected syntax error in example
</li>
<li>Appendix A: 12.2.3: Changed session parameter mapping to
session.values using an associative array.
</li>
<li>Appendix A: 12.5: Changed behavior for handling VoiceXML Call
Transfer requests to raising an error.unsupported.transfer event.
</li>
</ul><p>


</p>
<p> The following are the major changes between the -03 and -02
versions.

</p>
<ul class="text">
<li>Conformance language: Removed unnecessary MUSTs, especially for error
codes.  Removed lowercase 'should', 'must' and 'may'. 
</li>
<li>Introduction: Clarified which MediaCtrl IVR Requirements are
satisfied by this package. Added link to Security Considerations Section
(also in Section 4.0 and 4.4). 
</li>
<li>4.0: Element definitions. Changed RECOMMENDED to MUST for MS support
of communication protocols in URIs. 
</li>
<li>4.2.2:&lt;dialogstart>: Changed RECOMMENDED to MAY for MS support of
multiple dialogs on same connection or conference. Changed RECOMMENDED
to MUST for using &lt;stream> in cases where connection has multiple
streams of the same type.
</li>
<li>4.2.2.2:&lt;stream>: Changed RECOMMENDED to MUST for use of common
media attribute values.

</li>
<li>4.2.2.1: &lt;subscribe>: Clarified that if the MS does not support a
subscription specified in a foreign namespace, then the MS generates a
431 error response. 
</li>
<li>4.2.4: &lt;response>: Clarified that a dialogid with an empty string
value is used when the request is syntactically invalid. 
</li>
<li>4.2.5.1: &lt;dialogexit>: Added reserved range of status
codes, and tightened up the wording. 
</li>
<li>4.3.1.3:&lt;collect>: Clarified that termtimeout attribute default of
0s meaning no delay. 
</li>
<li>4.3.1.1.1: &lt;variable>: Changed RECOMMENDED to MAY for MS support
of date, time and digits &lt;variable>s. Clarified value attribute
format for date, time and digits. 
</li>
<li>4.3.1.1.3: &lt;par>: Removed RECOMMENDED for MS support of parallel
playback of different media. Added error response code (435) if MS does
not support parallel playback configuraton. 
</li>
<li>4.3.1.1.3.1: &lt;seq>: Removed RECOMMENDED for MS support of
sequential playback of same media within a &lt;par> (error case already
covered by &lt;par> configuration not supported response code). 
</li>
<li>4.3.1.4:&lt;record>: Removed RECOMMENDED for MS support of parallel
recording of different media. Clarified wording around uploading
recording data to a media resource location.  
</li>
<li>4.3.1.4: &lt;record>: Clarified the definition of vadinitial and
vadfinal. Changed the default values to false. Added a response error
(434) for when the MS does not support VAD. 
</li>
<li>4.3.1.5: &lt;media>. Removed unnecesaary SHOULD for MS ignoring
fetchtimeout, soundLevel, clipBegin and clipEnd when &lt;media> used for
recording.  Clarified definition of loc and type attributes with
stronger conformance language. Similar clarifications of type attributes
in &lt;dialogprepare>, &lt;dialogstart> and &lt;grammar>.

</li>
<li>4.3.2.4.1: &lt;mediainfo>: Clarified usage and strengthen conformance
language. 
</li>
<li>4.4.2.22: &lt;grammartypes>: Changed MUST to MUST NOT for inclusion
of mandatory SRGS grammar format. Updated examples. 
</li>
<li>Updated schema.
</li>
<li>Security Considerations: Major update. Added examples showing
malicious attacks when channel security is not correctly
addressed. Added more details on multiple channel cases including
administrator and monitor channels as well as channel handover. 
</li>
<li>Removed affliations in Contributors and Acknowledgements
sections. 
</li>
<li>Added Appendix A describing how to use VoiceXML with this package if
it is supported by the MS. 
</li>
<li>Corrected typos and nits.
</li>
</ul><p>

</p>
<p> The following are the major changes between the -02 and -01
versions.

</p>
<ul class="text">
<li>corrected typos.
</li>
<li>Section 3: Aligned Control Package definitions with requirements in
Section 8 of the Control Framework. 
</li>
<li>Section 4.2.2.2: Added &lt;priority> child element to &lt;stream>
element (alignment with mixer package).

</li>
<li>Following October Interim meeting discussion on response codes,
generally clarified usage of error status codes, modified some codes and
re-organized the response codes section (<a class='info' href='#defn.statuscodes'>Section&nbsp;4.5<span> (</span><span class='info'>Response Status Codes</span><span>)</span></a>) with more guidance and details.

</li>
<li>Section 4.3.1.5: Following October Interim meeting request for
parallel playback and record, created a generalized version of
&lt;media> used for both playback and record. The 'src' attribute is
renamed to 'loc'.  Updated &lt;prompt> and &lt;record> definitions as
described below. 
</li>
<li>Sections 4.3.1.1/4.3.1.1.4: &lt;prompt>: Added &lt;par> child element
to allow parallel playback of separate media resources. The &lt;par>
element has a &lt;seq> child element to allow a sequence of media
resources to be played at the same time as other resources are played in
parallel.
</li>
<li>Sections 4.3.1.4/4.3.1.4.1: &lt;record>: Removed 'dest' and 'type'
attributes. Added &lt;media> child elements to support parallel
recording to separate media resource locations. 
</li>
<li>Sections 4.3.2.4/4.3.2.4.1: &lt;recordinfo>: Removed 'dest', 'type'
and 'size' attribute. Added &lt;mediainfo> child elements with 'loc',
'type' and 'size' attributes. 
</li>
<li>Section 4.4.2.2.4: Renamed &lt;mediatypes> to &lt;prompttypes> to
clarify distinction with &lt;recordtypes>. 
</li>
<li>Sections 4.3.1.4: &lt;record>: Clarified RFC2119 language around
vadinitial and vadfinal behavior. 
</li>
<li>Updated schema. Removed some element-specific syntactic constraint
statements which are already covered in the schema. 
</li>
<li>4.3.1: occurrence of &lt;control> without a &lt;prompt> no longer
treated as a syntax error - instead runtime controls are simply
ignored. 
</li>
<li>
</li>
</ul><p>


</p>
<p> The following are the major changes between the -01 and -00
versions.

</p>
<ul class="text">
<li>7: Updated security section referencing control framework security
and adding policy requirement to address dialog resource management over
multiple channels. 
</li>
<li>corrected typos and example errors
</li>
<li>4.2: [IVR-200] Added state machine for dialog lifecycle.
</li>
<li>4.2: clarified dialog identifier assignment and use, including MS
assignment of dialogid in &lt;dialogprepare> and &lt;dialogstart>. 
</li>
<li>4.2/4.2.3: clarified &lt;dialogterminate> behavior when dialog is not
in a STARTED state. 
</li>
<li>1/4.2: Clarified concept of dialog language and replaced references
to 'dialog types' with dialog languages. Replaced 'dialogtypes' with
'dialoglanguages' in auditing. Clarified that IVR &lt;dialog> is inline
and other supported dialog languages are specified by reference.
Removed default type values for &lt;dialogprepare> and
&lt;dialogstart>. 
</li>
<li>4.4.2.2.1: clarified that the inline dialog language (&lt;dialog>)
must not be listed as an additional supported dialog language. 
</li>
<li>4.2.2.2: [IVR-201] Added &lt;region> element to &lt;stream> so that
dialog video output can be directed to a specific region a conference
video layout. 
</li>
<li>4.3.1.1.2:[IVR-202]: removed ndn format and clarified gen format for
digits. 
</li>
<li>4.4.2.1.1:[IVR-203]: added &lt;params> to &lt;codec> to allow
additional codec information to be specified. 
</li>
<li>4.5: added error status code for unsupported URI (415), invalid
region identifier (416), fetchtimeout exceeded (417), syntactic
constraint violation (418), unsupported media format (419), unsupported
grammar format (420), unsupported variable announcement (421),
unsupported DTMF tone generation (422), conflict with control key values
(423), unsupported recording format (424). 
</li>
<li>Generally, replaced 'it is an error ...' language with RFC2119
language, making error codes more explicit.
</li>
<li>4.3.1: Clarified that an MS MAY support &lt;record> and &lt;collect>
elements co-occurring in a &lt;dialog> element, but the MS MUST send an
error response if they are not supported. Clarified that MS MUST send an
error response if &lt;control> is specified without a &lt;prompt>
element. 
</li>
<li>4.2.5.2: clarified that the timestamp in &lt;dtmfnotify> is that of
the last DTMF in a matching input sequence.
</li>
<li>References: more references now normative.
</li>
<li>4.3: Replaced passive voice language with active voice language in
the description of execution models. 
</li>
<li>1/2: Clarified that the term 'dialog' refers to IVR dialog and is
completely unrelated to the term 'SIP dialog'. 
</li>
<li>4: Added clarification that elements with URI attributes are
recommended to support one or more communication protocols suitable for
fetching resources. 
</li>
<li>4.3.1.4: &lt;record> clarified MS MAY support upload of recording
data during recording, and that upload errors (e.g. authentication
failures, communication errors, etc) are execution errors. Added
'append' attribute to control behavior when a recorded resource already
exists at the recording location. 
</li>
<li>4.2.2: Clarified that an error is reported if &lt;dialogstart> with
&lt;params> contains parameters which the MS cannot process for the
given dialog language. 
</li>
<li>4.2.6.1: &lt;param> removed 'valuetype' attribute and clarified that
the type attribute indicates the MIME media type associated with the
inline value.
</li>
<li>4.3.1.4: Added append attribute to &lt;record> to control whether
recordings are appended or not to the recording location resource. 
</li>
<li>4.3.1.1.1: Added clipEnd attribute to &lt;media> to control when
playback of the media ends. 
</li>
<li>4.3.1: Clarified that when there are multiple iterations of a dialog
(using repeatCount attribute) only the results of the last dialog
iteration are reported. 
</li>
<li>4.4.2.2: Added ability to audit &lt;variable> capability, as well as
maximum duration of prepared dialogs and of recordings. 
</li>
<li>4.3.1/4.3.1.1: Clarified the sequence of dialog operations in
&lt;dialog> and how &lt;prompt> reports its status.
</li>
<li>4: Changed handling of unsupported foreign namespace elements and
attributes. The MS send a 426 error response if it encounters foreign
elements and attributes it does not support. 
</li>
</ul><p>


</p>
<p> The following are the major changes between the -00 of this work
group item draft and the individual submission -05 version.

</p>
<ul class="text">
<li>[IVR01] When the MS sends a notification event in a CONTROL, the AS
  sends mandatory 200 response (no extended transaction). 
</li>
<li>[IVR23] Added a top-level container element, &lt;mscivr>, with version
  attribute.
</li>
<li>Removed term 'basic' in title, description, elements and IANA
  registration. Control package name is now 'msc-ivr/1.0'. Namespace is
  now 'urn:ietf:params:xml:ns:msc-ivr'. Mime type is now
  'application/msc-ivr+xml'. Renamed 'basicivr' element to 'dialog' and
  moved version attribute to mscivr element.
</li>
<li>[IVR15] Updated and simplified XML schema. Ordering of child
  elements is significant. 
</li>
<li>[IVR06] Removed 'volume' and 'offset' from prompt element. Added
  'soundLevel' and 'clipBegin' to media element. 
</li>
<li>[IVR17]/[IVR06] Removed 'iterations' and 'duration' from
  prompt. Added 'repeatCount' and 'repeatDur' to dialog element. 
</li>
<li>Moved VCR commands from &lt;collect> into separate &lt;control>
  element. Defined controlinfo element to report runtime control match
  information. 
</li>
<li>[IVR05] Added &lt;subscribe> to &lt;dialogstart> where AS can
  subscribe to DTMF key presses (all, control match only, collect match
  only). Extended &lt;event> to support associated notification. 
</li>
<li>Moved definition of &lt;stream> into a separate section. 
</li>
<li>[IVR21] Added audit capability: auditing of package capabilities
  and managed dialogs 
</li>
<li>[IVR21] Explicitly stated that an error must be reported if the
  connection or conference referenced in a &lt;dialogstart> is not
  available at the time the request is processed on the MS. 
</li>
<li>Clarified that the &lt;variable> rendering mechanism is MS
  implementation specific. 
</li>
<li>[IVR09]/[IVR10] Clarified &lt;variable> attribute definitions and
  added 'gender' attribute. 
</li>
<li>[IVR16] Clarified that info must be reported in dialogexit, if the
  corresponding element is specified in a &lt;dialog>. For example, if
  &lt;prompt> is specified, then &lt;promptinfo> must be specified if
  the dialog terminates normally. 
</li>
<li>[IVR18] Added 'inactive' value for direction attribute of
  &lt;stream>.
</li>
<li>[IVR19] Clarified case of &lt;dialogstart> on connection/conference
  with multiple streams of the same type: recommended to be set
  explicitly with &lt;stream>s. 
</li>
<li>[IVR02] Clarified that multiple dialogs may started simultaneously
  on the same connection or conference. 
</li>
<li>[IVR20] Added maximum duration (10 minutes) for a dialog to remain
  in the PREPARED state. 
</li>
<li>Added &lt;params> in &lt;dialogstart> and &lt;dialogexit> for
  input/output in other dialog types
</li>
<li>[IVR22] Added fetchtimeout parameter to dialogprepare, dialogstart,
  media and grammar elements. 
</li>
<li>[IVR04] Added dialogexit status to indicate the connection or
  conference has been terminated. Added others status errors. 
</li>
<li>[IVR08] Clarified that the &lt;control> operation does not
  interrupt playing prompts and that matched DTMF is not available to
  &lt;collect> or &lt;record> operations during prompt playback. 
</li>
<li>[IVR11] Added runtime controls for speed, goto start/end and
  external controls. 
</li>
<li>Clarified that recordings can be uploaded to dest during or after
  the recording operation. 
</li>
<li>&lt;record>/&lt;collect>: clarified timer handling - timeout refers
  to waiting time for collect/record to begin. 
  
</li>
<li>Clarified behavior of immediate attribute on &lt;dialogterminate>.
  
</li>
<li>clarified dialogid lifecycle: dialogids can be re-cycled. 
</li>
<li>Clarified error handling. 
</li>
<li>Editorial tidy up of sections. 
</li>
<li>dialogid attribute on &lt;response> is now mandatory. 
</li>
<li>Clarified that the duration specified in finalsilence attribute of
  &lt;record> is not part of the final recording. 
</li>
<li>Clarified that the SRGS XML grammar format is mandatory 
</li>
</ul><p>

</p>
<p> The following are the major changes between the -06 of the draft and
the -05 version.

</p>
<ul class="text">
<li>Event notifications are sent in CONTROL messages with the MS acting
  as Control Framework Client. Compared with the previous approach, this
  means that a &lt;dialogstart> transaction is now complete when the MS
  sends a &lt;response>. A new transaction is initiated by the MS each
  time the MS sends a notification &lt;event> to the AS. 
</li>
<li>Changed conf-id to conferenceid and connection-id to
  connectionid.
</li>
<li>Clarification of the state model for dialogs
</li>
<li>&lt;dialogprepare>: modified definition of src attribute to allow
	reference to external dialog documents; added (MIME) type attribute;
	removed &lt;data> child element.
	
</li>
<li>&lt;dialogstart>: modified definition of src attribute to allow
	reference to external dialog documents; added (MIME) type attribute;
	removed &lt;data> child element;
	
</li>
<li>&lt;dialogterminate>: modified so that a dialogexit event is
	always sent for active dialogs (i.e. the dialogexit event is a
	terminating notification)
</li>
<li>&lt;event> notification simplified and make more
    extensible. Manual notifications (via &lt;subscribe> element) are
    removed from the basic package. A &lt;dialogexit> event is defined
    as &lt;event> child and it can be extended with additional child
    elements
</li>
<li>&lt;data> element is removed.
</li>
<li>&lt;subscribe> element removed. 
</li>
<li>Replaced dialog templates with a general &lt;dialog> element.
    It has child elements for playing media resource (&lt;prompt>),
    collecting DTMF (&lt;collect>) and recording (&lt;record>). The
    functionality is largely unchanged.
    
</li>
<li>&lt;dialogprepare> and &lt;dialogstart> are extended with
    &lt;dialog> child element. 
</li>
<li>&lt;event> is extended with a &lt;dialogexit> element which
    contains status and reported information (replacement for output
    parameters in template dialogs) 
</li>
<li>Prompts: now structured as a &lt;prompt> element with &lt;media>,
    &lt;variable> and &lt;dtmf> children. The &lt;prompt> element has
    xml:base attribute, bargein, iterations, duration, volume and offset
    attributes. The speed attribute is removed.  A &lt;media> element
    has src and type attributes. The maxage and maxstale attributes are
    removed.
    
</li>
<li>DTMF input: parameters now specified as attributes of a
    &lt;collect> element. Custom grammar specified with a &lt;grammar>
    element as child of &lt;collect> element.  Added 'escapekey' to
    allow the dialog to be retried. Added 'pauseinterval', 'pausekey'
    and 'resumekey' to allow the prompts to paused/resumed. Added
    'volumeinterval', 'volupkey' and voldnkey' to add prompt volume to
    be increased/decreased. Moved 'bargein' attribute to prompt.
</li>
<li>Recording: parameters now specified as attributes of &lt;record>
    element. Added 'dest' and 'beep' attributes. 
</li>
</ul><p>



</p>
<p> The following are the major changes between the -05 of the draft and
the -04 version.

</p>
<ul class="text">
<li>Mainly an alignment/evaluation exercise with requirements
	produced by MEDIACTRL IVR design team.
</li>
<li>playannouncement parameters from Table 7 of '04' version are now
	reflected in text - schema to be updated.
</li>
<li>Added VCR commands based on MSCML.
</li>
</ul><p>



</p>
<p> The following are the major changes between the -04 of the draft and
the -03 version.

</p>
<ul class="text">
<li>None.
</li>
</ul><p>



</p>
<p> The following are the major changes between the -03 of the draft and
the -02 version.

</p>
<ul class="text">
<li>added "basicivr:" protocol to template dialog types which must be
    supported as values of the "src" attribute in &lt;dialogprepare> and
    &lt;dialogstart>. Note alternative: "/basicivr/playannouncement"
    offered in <a class='info' href='#RFC4240'>[RFC4240]<span> (</span><span class='info'>Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;Basic Network Media Services with SIP,&rdquo; December&nbsp;2005.</span><span>)</span></a>. 
    
</li>
<li>added "basicivr:" URI schema to IANA considerations
</li>
<li>Added mimetype, vadinitial and vadfinal parameters to
    'promptandrecord' dialog type
</li>
<li>updated references 
</li>
</ul><p>

</p>
<p> The following are the major changes between the -02 of the draft and the
-01 version.

</p>
<ul class="text">
<li>added version 1.0 to package name 
</li>
<li>separate section for element definitions
</li>
<li>dialogterminate treated as request rather than notification
</li>
<li>simplified responses: single element &lt;response> 
</li>
<li>removed response elements: &lt;dialogprepared>, &lt;dialogstarted>,
       &lt;errordialognotprepared>,  &lt;errordialognotstarted> 
</li>
<li>simplified event notifications to single &lt;event> element
    carried in a REPORT  
</li>
<li>&lt;dialogexit> element replaced with &lt;event name="dialogexit">
</li>
<li>removed &lt;dialoguser> element 
</li>
<li>added &lt;stream> element as child of &lt;dialogstart>
</li>
<li>removed 'type' attribute from &lt;dialogprepare> and &lt;dialogstart>
</li>
<li>added dialogid attribute to &lt;dialogprepare> and
    &lt;dialogstart>
</li>
<li>removed template "Sample Implementation" section
</li>
<li>renamed &lt;namelist> to &lt;data> 
</li>
<li>re-organized so that template details after general package
        framework and element description. 
</li>
</ul><p>


</p>
<p>
The following are the primary changes between the -01 of the draft and
the -00 version. 

</p>
<ul class="text">
<li>Removed requirement for VoiceXML dialog support
</li>
<li>Added requirement for template dialog support
</li>
</ul><p>


</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Contributors</h3>

<p> Asher Shiratzky provided valuable support and contributions to the
early versions of this document. 
</p>
<p>The authors would like to thank the IVR design team consisting of
Roni Even, Lorenzo Miniero, Adnan Saleem, Diego Besprosvan, Mary Barnes
and Steve Buko who provided valuable feedback, input and text to this
document. 
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Acknowledgments</h3>

<p>The authors would like to thank Adnan Saleem, Gene Shtirmer, Dave
Burke, Dan York, Steve Buko, Jean-Francois Bertrand, Henry Lum and
Lorenzo Miniero for expert reviews of this work.

</p>
<p>Ben Campbell carried out the RAI expert review on this specification
and provided a great deal of invaluable input.  Donald Eastlake carried
out a thorough security review.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-sip-control-framework">[I-D.ietf-mediactrl-sip-control-framework]</a></td>
<td class="author-text">Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-sip-control-framework-12.txt">Media Control Channel Framework</a>,&rdquo; draft-ietf-mediactrl-sip-control-framework-12 (work in progress), September&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-sip-control-framework-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2045">[RFC2045]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a>,&rdquo; RFC&nbsp;2045, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2045.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2818">[RFC2818]</a></td>
<td class="author-text">Rescorla, E., &ldquo;<a href="http://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>,&rdquo; RFC&nbsp;2818, May&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2818.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3023">[RFC3023]</a></td>
<td class="author-text">Murata, M., St. Laurent, S., and D. Kohn, &ldquo;<a href="http://tools.ietf.org/html/rfc3023">XML Media Types</a>,&rdquo; RFC&nbsp;3023, January&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3023.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4288">[RFC4288]</a></td>
<td class="author-text">Freed, N. and J. Klensin, &ldquo;<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>,&rdquo; BCP&nbsp;13, RFC&nbsp;4288, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4288.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4574">[RFC4574]</a></td>
<td class="author-text">Levin, O. and G. Camarillo, &ldquo;<a href="http://tools.ietf.org/html/rfc4574">The Session Description Protocol (SDP) Label Attribute</a>,&rdquo; RFC&nbsp;4574, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4574.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4647">[RFC4647]</a></td>
<td class="author-text">Phillips, A. and M. Davis, &ldquo;<a href="http://tools.ietf.org/html/rfc4647">Matching of Language Tags</a>,&rdquo; BCP&nbsp;47, RFC&nbsp;4647, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4647.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5226">[RFC5226]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;5226, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5226.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5646">[RFC5646]</a></td>
<td class="author-text">Phillips, A. and M. Davis, &ldquo;<a href="http://tools.ietf.org/html/rfc5646">Tags for Identifying Languages</a>,&rdquo; BCP&nbsp;47, RFC&nbsp;5646, September&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5646.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="SRGS">[SRGS]</a></td>
<td class="author-text">Hunt, A. and S. McGlashan, &ldquo;Speech Recognition Grammar Specification Version
        1.0,&rdquo; W3C&nbsp;Recommendation, March&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="VXML20">[VXML20]</a></td>
<td class="author-text">McGlashan, S., Burnett, D., Carter, J., Danielsen, P., Ferrans, J., Hunt, A., Lucas, B., Porter, B., Rehor, K., and S. Tryphonas, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 2.0,&rdquo; W3C&nbsp;Recommendation, March&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="VXML21">[VXML21]</a></td>
<td class="author-text">Oshry, M., Auburn, RJ., Baggia, P., Bodell, M., Burke, D., Burnett, D., Candell, E., Carter, J., McGlashan, S., Lee, A., Porter, B., and K. Rehor, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 2.1,&rdquo; W3C&nbsp;Recommendation, June&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-SMIL2-20051213">[W3C.REC-SMIL2-20051213]</a></td>
<td class="author-text">Koivisto, A., Bulterman, D., Michel, T., Layada, N., Zucker, D., Jansen, J., Mullender, S., and G. Grassel, &ldquo;<a href="http://www.w3.org/TR/2005/REC-SMIL2-20051213">Synchronized Multimedia Integration Language (SMIL 2.1)</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-SMIL2-20051213, December&nbsp;2005 (<a href="http://www.w3.org/TR/2005/REC-SMIL2-20051213">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XML">[XML]</a></td>
<td class="author-text">Bray, T., Paoli, J., Sperberg-McQueen, C M., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Third Edition),&rdquo; W3C&nbsp;Recommendation, February&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="XMLSchema:Part2">[XMLSchema:Part2]</a></td>
<td class="author-text">Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; W3C&nbsp;Recommendation, October&nbsp;2004.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="CCXML10">[CCXML10]</a></td>
<td class="author-text">Auburn, R J., &ldquo;Voice Browser Call Control: CCXML Version 1.0,&rdquo; W3C&nbsp;Candidate Recommendation (work in progress), April&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="H.248.9">[H.248.9]</a></td>
<td class="author-text">&ldquo;Gateway control protocol: Advanced media server packages,&rdquo; ITU-T Recommendation&nbsp;H.248.9.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-mixer-control-package">[I-D.ietf-mediactrl-mixer-control-package]</a></td>
<td class="author-text">McGlashan, S., Melanchuk, T., and C. Boulton, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-mixer-control-package-11.txt">A Mixer Control Package for the Media Control Channel Framework</a>,&rdquo; draft-ietf-mediactrl-mixer-control-package-11 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-mixer-control-package-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-xcon-common-data-model">[I-D.ietf-xcon-common-data-model]</a></td>
<td class="author-text">Novo, O., Camarillo, G., Morgan, D., and J. Urpalainen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-xcon-common-data-model-20.txt">Conference Information Data Model for Centralized Conferencing (XCON)</a>,&rdquo; draft-ietf-xcon-common-data-model-20 (work in progress), October&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-xcon-common-data-model-20.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="IANA">[IANA]</a></td>
<td class="author-text">&ldquo;<a href="http://www.iana.org/assignments/rtp-parameters">IANA registry for RTP Payload Types</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="MIME.mediatypes">[MIME.mediatypes]</a></td>
<td class="author-text">&ldquo;<a href="http://www.iana.org/assignments/media-types/">IANA registry for MIME Media Types</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2277">[RFC2277]</a></td>
<td class="author-text"><a href="mailto:Harald.T.Alvestrand@uninett.no">Alvestrand, H.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2277">IETF Policy on Character Sets and Languages</a>,&rdquo; BCP&nbsp;18, RFC&nbsp;2277, January&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2277.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2277.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2277.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2897">[RFC2897]</a></td>
<td class="author-text">Cromwell, D., &ldquo;<a href="http://tools.ietf.org/html/rfc2897">Proposal for an MGCP Advanced Audio Package</a>,&rdquo; RFC&nbsp;2897, August&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2897.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4240">[RFC4240]</a></td>
<td class="author-text">Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;<a href="http://tools.ietf.org/html/rfc4240">Basic Network Media Services with SIP</a>,&rdquo; RFC&nbsp;4240, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4240.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4244">[RFC4244]</a></td>
<td class="author-text">Barnes, M., &ldquo;<a href="http://tools.ietf.org/html/rfc4244">An Extension to the Session Initiation Protocol (SIP) for Request History Information</a>,&rdquo; RFC&nbsp;4244, November&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4244.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4267">[RFC4267]</a></td>
<td class="author-text">Froumentin, M., &ldquo;<a href="http://tools.ietf.org/html/rfc4267">The W3C Speech Interface Framework Media Types: application/voicexml+xml, application/ssml+xml, application/srgs, application/srgs+xml, application/ccxml+xml, and application/pls+xml</a>,&rdquo; RFC&nbsp;4267, November&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4267.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4281">[RFC4281]</a></td>
<td class="author-text">Gellens, R., Singer, D., and P. Frojdh, &ldquo;<a href="http://tools.ietf.org/html/rfc4281">The Codecs Parameter for "Bucket" Media Types</a>,&rdquo; RFC&nbsp;4281, November&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4281.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4627">[RFC4627]</a></td>
<td class="author-text">Crockford, D., &ldquo;<a href="http://tools.ietf.org/html/rfc4627">The application/json Media Type for JavaScript Object Notation (JSON)</a>,&rdquo; RFC&nbsp;4627, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4627.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4730">[RFC4730]</a></td>
<td class="author-text">Burger, E. and M. Dolly, &ldquo;<a href="http://tools.ietf.org/html/rfc4730">A Session Initiation Protocol (SIP) Event Package for Key Press Stimulus (KPML)</a>,&rdquo; RFC&nbsp;4730, November&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4730.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4733">[RFC4733]</a></td>
<td class="author-text">Schulzrinne, H. and T. Taylor, &ldquo;<a href="http://tools.ietf.org/html/rfc4733">RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals</a>,&rdquo; RFC&nbsp;4733, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4733.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4855">[RFC4855]</a></td>
<td class="author-text">Casner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4855">Media Type Registration of RTP Payload Formats</a>,&rdquo; RFC&nbsp;4855, February&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4855.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5022">[RFC5022]</a></td>
<td class="author-text">Van Dyke, J., Burger, E., and A. Spitzer, &ldquo;<a href="http://tools.ietf.org/html/rfc5022">Media Server Control Markup Language (MSCML) and Protocol</a>,&rdquo; RFC&nbsp;5022, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5022.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5167">[RFC5167]</a></td>
<td class="author-text">Dolly, M. and R. Even, &ldquo;<a href="http://tools.ietf.org/html/rfc5167">Media Server Control Protocol Requirements</a>,&rdquo; RFC&nbsp;5167, March&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5167.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5707">[RFC5707]</a></td>
<td class="author-text">Saleem, A., Xin, Y., and G. Sharratt, &ldquo;<a href="http://tools.ietf.org/html/rfc5707">Media Server Markup Language (MSML)</a>,&rdquo; RFC&nbsp;5707, February&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5707.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="VXML30">[VXML30]</a></td>
<td class="author-text">McGlashan, S., Burnett, D., Akolkar, R., Auburn, RJ., Baggia, P., Barnett, J., Bodell, M., Carter, J., Oshry, M., Rehor, K., Young, M., and R. Hosn, &ldquo;Voice Extensible Markup Language (VoiceXML) Version 3.0,&rdquo; W3C&nbsp;Working Draft, August&nbsp;2010.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Scott McGlashan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hewlett-Packard</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:smcg.stds01@mcglashan.org">smcg.stds01@mcglashan.org</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tim Melanchuk</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Rain Willow Communications</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tim.melanchuk@gmail.com">tim.melanchuk@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chris Boulton</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NS-Technologies</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:chris@ns-technologies.com">chris@ns-technologies.com</a></td></tr>
</table>
</body></html>
