

  Detecting Network Attachment                           S. Daniel Park 
  Internet-Draft                                    SAMSUNG Electronics 
  Category: Informational                                  Youn-Hee Han 
  Expires : April 2004                                      SAMSUNG AIT 
                                                           October 2003 
   
                 IPv6 DAD Optimization Goals and Requirements 
                <draft-park-dna-ipv6dadopt-requirement-00.txt> 
      
      
  Status of this Memo 
      
     This document is an Internet-Draft and is in full conformance with 
     all provisions of Section 10 of RFC2026 except that the right to 
     produce derivative works is not granted [RFC 2026]. 
      
     Internet-Drafts are working documents of the Internet Engineering     
     Task Force (IETF), its areas, and its working groups.  Note that     
     other groups may also distribute working documents as Internet-     
     Drafts. 
      
     Internet-Drafts are draft documents valid for a maximum of six 
     months and may be updated, replaced, or obsoleted by other 
     documents at any time.  It is inappropriate to use Internet-
     Drafts as reference material or to cite them other than as "work 
     in progress". 
      
     The list of current Internet-Drafts can be accessed at 
     http://www.ietf.org/ietf/1id-abstracts.txt  
      
     The list of Internet-Draft Shadow Directories can be accessed at 
     http://www.ietf.org/shadow.html. 
      
      
  Abstract 
      
     In order to generate unique address, an IPv6 node has to perform DAD 
     procedure when the IPv6 node tries to make its own IPv6 address 
     including link-local and global address.  The current procedure for 
     detecting duplicate addresses consumes time delays and does not 
     consider a node to have a fast handover in mobile environment.  A 
     proper support for a node to send or receive packets immediately 
     after attaching to a link is undermined by the disruption imposed by 
     the current DAD.  Therefore, some considerations are required to be 
     suggested for reducing delay due to the detection of IPv6 address 


   
   
   
   
  Park, Han                  Expires - April 2004               [Page 1] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
     collision.  This document outlines the goals expected from IPv6 DAD 
     Optimization support and defines the requirements that must be met 
     by IPv6 DAD Optimization solutions in DNA Working Group. 
      
      
  Table of Contents 
      
     1.  Introduction.................................................2 
     2.  Terminology..................................................3 
     3.  Current Problem Statements in IPv6 DAD.......................3 
     4.  IPv6 DAD Optimization Goals..................................4 
     5.  Requirements for IPv6 DAD Optimization.......................6 
     6.  IANA Considerations..........................................8 
     7.  Security Considerations......................................8 
     8.  References...................................................8 
     9.  Authors Addresses............................................8 
     10. Acknowledgements.............................................9 
     11. Full Copyright Statement.....................................9 
      
   
   
  1. Introduction 
      
     The current specifications for detecting duplicate IPv6 addresses 
     are described in [RFC 2461] with use of Neighbor Solicitation and 
     Neighbor Advertisement messages [RFC 2462].  In the current 
     specifications, an IPv6 node has to perform a DAD procedure before 
     it tries to assign its a unicast address to its interface, 
     regardless of whether it is obtained through stateful, stateless or 
     manual configuration.  This utility is one of IPv6 advantages 
     against IPv4, however, this procedure prevents an IPv6 node from 
     transmitting and receiving a packet with a new address on a link 
     within the first second of attachment.  Real-time services require 
     layer 3 handovers between IPv6 networks to be completed quickly and 
     with minimal packet loss.  However, the DAD described in [RFC 2461] 
     is a time consuming process, particularly when nodes in need of 
     seamless handover run it and all IPv6 nodes must perform DAD every 
     time they handover between IPv6 networks.  During DAD time, any 
     active communications of nodes are interrupted, and this is 
     especially unsuitable for real-time services. 



   
   
   
  Park, Han                  Expires - April 2004               [Page 2] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
      
     Recently, some considerations and alternatives are being suggested 
     for DAD optimization mechanisms to provide fast handover when a 
     mobile node is connected to the new networks in MOBILEIP Working 
     Group for a while and this issue will be discussed in DNA (Detecting 
     Network Attachment) Working Group as work item. 
      
     This document outlines the goals expected from IPv6 DAD Optimization  
     support and defines the requirements that must be met by IPv6 DAD 
     Optimization solutions in DNA Working Group. 
      
      
  2. Terminology 
      
     The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
     "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
     document are to be interpreted as described in RFC 2119 [KEYWORDS]. 
      
      
     o DAD                         Duplicate Address Detection,  
                                   detecting duplicated IPv6 addresses  
                                   prior to assign its interface. 
      
     o IPv6 DAD Optimization       optimized procedure for DAD when an 
                                   IPv6 node generates its own addresses. 
      
      
     Most related terminologies in this document are described in [RFC 
     2461] [RFC 2462]. 
      
      
  3. Current Problem Statements in IPv6 DAD 
      
     This section tries to clarify the problems in the current DAD.  The 
     problems are restricted within the limits of the DNA Working Group  
     charter.  Note that this document is only considering the DAD 
     latency except other latencies involved in connecting to a new 
     network such as Router Discovery, DHCP Server latency, AAA latency, 
     etc., which will be discussed in a separate document as well. 
      



   
   
   
  Park, Han                  Expires - April 2004               [Page 3] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
      
     PS 1: Time consuming by Random Delay  
      
     If a node's interface is attached to a link, the Neighbor 
     Solicitation is the first message to be sent from the interface.  So, 
     the node should delay sending the message by a random delay between 
     0 and MAX_RTR_SOLICITATION_DELAY (default: 1000 ms) as specified in 
     [RFC 2462] to reduce congestion when many nodes start up on the link 
     at the same time, such as after a power failure, and may help to 
     avoid race conditions when more than one node is trying to solicit 
     for the same address at the same time.  The impact of this 
     constraint on the performance of DAD can be severe.  If a node 
     abides by this constraint, the completion of DAD is delayed by some 
     random amount, increasing the amount of time before a node sends or 
     receives packets immediately after attaching to a link. 
      
     PS 2: Time consuming by Autoconfiguration-related Variables 
      
     An address is Tentative while it is tested for its uniqueness.  It 
     is considered unique if none of tests indicates the presence of a 
     duplicate address within RetransTimer (default: 1000 ms) 
     milliseconds after having sent DupAddrDetectTransmits (default: one) 
     Neighbor Solicitations. Once an address is determined to be unique, 
     it may be assigned to an interface. A tentative address that is 
     determined to be a duplicate address must not be assigned to an 
     interface.  If DupAddrDetectTransmits value is more than one, each 
     Neighbor Solicitation message should be sent by RetransTimer time 
     without assigning the address to its interface.  When a node 
     attaches to a link, consequently, it has to wait for 2000 ms at the 
     worst case (with only defalt values for MAX_RTR_SOLICITATION_DELAY, 
     RetransTimer, and DupAddrDetectTransmit). 
      
      
  4. IPv6 DAD Optimization Goals 
      
     A proper support for a node to send or receive packets immediately 
     after attaching to a link is undermined by the disruption imposed by 
     the current DAD.  The goal of this section is to make an offer some 
     hints to develop a DAD optimization protocol.  As one of solutions, 
     we can think that the RetransTimer value can be simply reduced in a 



   
   
   
  Park, Han                  Expires - April 2004               [Page 4] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
     constrained address domain with proper justification.  Also, a node 
     can leave out random delay if the implementation already has a 
     behavior that desynchronizes the steps that happen before DAD in the 
     case that multiple nodes experience handover at the same time.  Such 
     desynchronizing behaviors might be due to random delays in the L2 
     protocols or device drivers. 
      
     A full-fledged DAD optimization may reveal two distinct strategies: 
     Stateless DAD and Stateful DAD, which may be used to develop new DAD 
     schemes.  Such classification of strategies is determined according 
     to whether the DAD states of addresses are stored in a node until 
     they are allocated. 
      
     o Stateless DAD Optimization 
      
     In this strategy, the DAD states of addresses are not stored in a 
     node.  This strategy attempt to detect duplicate addresses without 
     relying on a centralized server or router to keep track of the DAD 
     states of addresses, instead relying on the already configured nodes 
     to cooperate in the DAD process.  A DAD optimization protocol can be 
     developed based on the premise that DAD is far more likely to 
     succeed than fail. Although an address is even randomly auto-
     configured, DAD is far more likely to succeed than fail by a factor 
     of at least 10,000,000,000 to one [RANDOM].  So, a DAD optimization 
     protocol can make DupAddrDetectTransmit zero.  But, it must propose 
     a sophisticated recovery mechanism by way of precaution against the 
     address collision. 
      
     o Stateful DAD Optimization 
      
     Stateful DAD optimization can maintain knowledge of the DAD states 
     of addresses by monitoring or brokering address usages.  Nodes which 
     centrally store the states are then queried by other nodes which 
     desire a quick resolution to DAD procedures.  In order to support 
     this strategy, the mechanism which is used to collect the DAD states 
     must therefore be supported by all nodes on the link, even if they 
     do not support the DAD optimization protocol. 
      
      




   
   
   
  Park, Han                  Expires - April 2004               [Page 5] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
  5. Requirements for IPv6 DAD Optimization 
      
     This section describes the requirements for IPv6 DAD Optimization 
     and following requirements are referred to as IPv6 DAD Optimization 
     solutions hereafter. 
      
     RQ 1: Comparison with Original DAD 
      
     When an original DAD is performed to verify address duplication, 
     there happened to be some delays (is defined in [RFC 2462]) in this 
     case. In order to reduce delays, optimized DAD should be required to 
     provide faster handover in the IPv6 mobility. Though, at the same 
     time, it should be noted that the DAD optimization MUST NOT break 
     the original DAD mechanism. 
      
      
     RQ 2: IPv6 Neighbor Cache 
      
     The IPv6 Neighbor Cache entries MUST NOT be modified in a way which 
     is unrecoverable through original DAD operation [RFC 2462]. For 
     effective DAD optimization, there are no restrictive requirements to 
     modify Neighbor Cache entry in the specific cases. Immediately on 
     completing the appropriate DAD procedure for either original DAD or 
     DAD optimization, all Neighbor∆ NC (Neighbor Cache) MUST be updated 
     appropriately. 
      
      
     RQ 3: Host Modifications 
      
     The DAD optimization SHOULD allow for the use of original DAD and 
     NDP (Neighbor Discovery Protocol) to a host even if a host wants to 
     be modified for DAD optimization. For DAD optimization, a host 
     including neighbor MUST recognize modifications such as specific 
     fields, flags, values, etc. 
      
      
     RQ 4: Router Modifications 
      
     The DAD optimization SHOULD allow for the use of original DAD and 
     NDP to a router even if a router wants to be modified for DAD 



   
   
   
  Park, Han                  Expires - April 2004               [Page 6] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
     optimization. For DAD optimization, a router MUST provide host 
     requirements. 
      
      
     RQ 5: Interoperability with SEND 
      
     The optimized DAD mechanism SHOULD work when SEND (Secure Neighbor 
     Discovery) is used.  It is desirable that the SEND and DAD 
     optimization work are closely coordinated so that it DAD 
     optimization could benefit from SEND and vice versa. 
      
      
     RQ 6: Simultaneous Operation with DNA 
      
     It SHOULD be possible to use optimized DAD addresses even before the 
     DNA process has been completed.  In other words, the hosts SHOULD be 
     allowed to send packets to a newly attached link with the assumption 
     that the link may be the same one that was previously used, without 
     needing to wait for the DAD and/or DNA procedures to complete.  Such 
     practice MAY result in packet loss, and it MUST NOT cause packet 
     storms or excessive traffic in the case the newly attached link is 
     not the previously used one. 
      
      
     RQ 7: Address Duplication Considerations 
      
     In the simplest collision case, the address being configured by the 
     new node is already in use by another node, and present in the 
     Neighbor Caches of neighbors which are communicating with this node. 
     At this case, all nodes MUST detect address duplication either 
     original DAD or DAD optimization. 
      
      
     RQ 8: Layer 2 Considerations 
      
     Generally, address duplication is happened to the same Interface ID 
     which is composed of 48bit/64bit MAC address. Therefore, when same 
     MAC address is existed in the same link, one of these nodes can not 
     make its IPv6 address using address autoconfiguration mechanism. At 
     this case, all nodes MUST be allowed to generate new addresses by 



   
   
   
  Park, Han                  Expires - April 2004               [Page 7] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
     another mechanism. It should be clarified that the mechanisms should 
     be more discussed in the near future. 
      
      
  6. IANA Considerations 
      
     There are no IANA considerations in this document. 
      
      
  7. Security Considerations 
      
     The DAD optimization scheme SHOULD NOT introduce any new attacks on 
     Neighbor Discovery and the resulting schemes should be no worse than 
     existing DAD [RFC 2462]. There are existing security concerns with 
     Neighbor Discovery and Stateless Address Autoconfiguration. These 
     schemes SHOULD interoperate with Secure Neighbor DAD mechanisms as 
     defined in SEND Working Group. 
      
      
  8. References 
      
     [RFC 2026]  Bradner, S., "The Internet Standards Process - Revision 
                 3", BCP 9, RFC 2026, October 1996. 
      
     [KEYWORDS]  Bradner, S., "Key words for use in RFCs to Indicate  
                 Requirement Levels", BCP 14, RFC 2119, March 1997. 
         
     [RFC 2462]  Thomson, S., Narten, T., "IPv6 Stateless Address  
                 Autoconfiguration" RFC 2462, December 1998. 
      
     [RFC 2461]  Narten, T. et. al., "Neighbor Discovery for IPv6" RFC  
                 2461, December 1998. 
      
     [RANDOM]    M. Bagnulo, I. Soto, A. Garcia-Martinez, A. Azcorra,  
                 Ramdon generation of interface identifier, January 2002. 
      
      
  9. Authors Addresses 
      
     Soohong Daniel Park 



   
   
   
  Park, Han                  Expires - April 2004               [Page 8] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
     Mobile Platform Laboratory, SAMSUNG Electronics 
     EMail: soohong.park@samsung.com 
      
     Youn-Hee Han 
     SAMSUNG Advanced Institute of Technology 
     i-Networking Laboratory 
     EMail: yh21.han@samsung.com 
      
      
  10.  Acknowledgements 
      
     Specially thanks are due to Greg Delay, Pekka Nikander, Pyungsoo Kim 
     and Jinhyeock Choi for many useful comments. 
      
      
  11.  Full Copyright Statement 
      
     Copyright (C) The Internet Society (2003). All Rights Reserved. 
      
     This document and translations of it may be copied and furnished to 
     others, and derivative works that comment on or otherwise explain it 
     or assist in its implementation may be prepared, copied, published 
     and distributed, in whole or in part, without restriction of any 
     kind, provided that the above copyright notice and this paragraph 
     are included on all such copies and derivative works. However, this 
     document itself may not be modified in any way, such as by removing 
     the copyright notice or references to the Internet Society or other 
     Internet organizations, except as needed for the purpose of 
     developing Internet standards in which case the procedures for 
     copyrights defined in the Internet Standards process must be 
     followed, or as required to translate it into languages other than 
     English. 
      
     The limited permissions granted above are perpetual and will not be 
     revoked by the Internet Society or its successors or assignees. 
      
     This document and the information contained herein is provided on an 
     "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
     TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
     BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 



   
   
   
  Park, Han                  Expires - April 2004               [Page 9] 
   
  IPv6 DAD Optimization Goals and Requirements              October 2003 
   
   
   
   
   
     HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
     MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
      
     Funding for the RFC editor function is currently provided by the 
     internet Society. 






































   
   
   
  Park, Han                  Expires - April 2004              [Page 10] 