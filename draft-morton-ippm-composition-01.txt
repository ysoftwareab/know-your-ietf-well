

Network Working Group                                  A.Morton,Editor 
Internet Draft                                                AT&T Labs 
Document: <draft-morton-ippm-composition-01.txt>              E.Stephan 
                                                          FranceTelecom 
Category: Individual                                                    
                                                                        
                                                                        
                                                                        
                                                                        
 
 
                      Spatial Composition of Metrics 
 
 
Status of this Memo 
 
   By submitting this Internet-Draft, each author represents that any 
   applicable patent or other IPR claims of which he or she is aware 
   have been or will be disclosed, and any of which he or she becomes 
   aware will be disclosed, in accordance with Section 6 of BCP 79. 
    
   This document is an Internet-Draft and is subject to all provisions 
   of section 3 of BCP 78.  
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet- 
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other documents 
   at any time.  It is inappropriate to use Internet-Drafts as 
   reference material or to cite them other than as "work in progress."  
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt  
    
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
Copyright Notice 
    
   Copyright (C) The Internet Society (2005). 
    
Abstract 
    
   This memo utilizes IPPM metrics that are applicable to both complete 
   paths and sub-paths, and defines relationships to compose a complete 
   path metric from the sub-path metrics with some accuracy w.r.t. the 
   actual metrics.  This is called Spatial Composition in RFC 2330. The 
   current version of the memo gives some background and proposes 
   wording for a Scope and Application section to define this new work. 
   The description of several example metrics and statistics follow. 
  
Morton, et al.        Individual  exp. April 2006               Page 1 
 
Spatial Composition of Metrics                            October 2005 
 
 
    
    
Contents 
 
   Status of this Memo................................................1 
   Copyright Notice...................................................1 
   Abstract...........................................................1 
   Authors/Contributors...............................................3 
   1. Conventions used in this document...............................3 
   2. Introduction....................................................3 
   2.1  Motivation....................................................4 
   3. Proposed Scope and Application..................................5 
   3.1  Scope of Work.................................................5 
   3.2  Application...................................................6 
   3.3  Terminology...................................................6 
   4. One-way Delay Composition Metrics and Statistics................7 
   4.1 Name: Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream......7 
   4.1.1 Metric Parameters:...........................................7 
   4.1.2 Definition:..................................................7 
   4.1.3 Discussion and other details.................................7 
   4.1.4 Mean Statistic...............................................7 
   4.1.5 Composition Relationship: Sum of Mean Delays.................8 
   4.1.6 Statement of Conjecture......................................8 
   4.1.7 Justification for the composite relationship.................8 
   4.1.8 Sources of Error.............................................8 
   4.1.9 Specific cases where the conjecture might fail...............9 
   4.1.10 Application of Measurement Methodology......................9 
   5. Loss Metrics/Statistics.........................................9 
   5.1 Name: Type-P-One-way-Packet-Loss-Poisson/Periodic-Stream.......9 
   5.1.1 Metric Parameters:..........................................10 
   5.1.2 Metric Units:...............................................10 
   5.1.3 Discussion and other details................................10 
   5.1.4 Statistic: Type-P-One-way-Packet-Loss-Empirical-Probability 10 
   5.1.5 Composition Relationship: Combination of Empirical 
   Probabilities.....................................................11 
   5.1.6 Statement of Conjecture.....................................11 
   5.1.7 Justification for the composite relationship................11 
   5.1.8 Sources of Error............................................11 
   5.1.9 Specific cases where the conjecture might fail..............12 
   5.1.10 Application of Measurement Methodology.....................12 
   6. Delay Variation Metrics/Statistics.............................12 
   7. Other Metrics/Statistics: One-way combined Metric..............12 
   7.1 Metric Name...................................................13 
   7.1.1 Metric Parameters:..........................................13 
   7.1.2 Definition:.................................................13 
   7.1.3 Discussion and other details................................13 
   7.1.4 Type-P-One-way-Combo-subpathes-stream.......................13 
   7.1.5 Type-P-One-way-composition..................................14 
   7.1.6 Type-P-One-way-composition-stream...........................14 
   7.1.7 Statement of Conjecture.....................................15 
   7.1.8 Justification for the composite relationship................15 
   7.1.9 Sources of Error............................................15 
  
Morton, et al.        Individual exp. April 2006                Page 2 
 
Spatial Composition of Metrics                            October 2005 
 
 
   7.1.10 Specific cases where the conjecture might fail.............15 
   7.1.11 Application of Measurement Methodology.....................15 
   8. Security Considerations........................................15 
   8.1 Denial of Service Attacks.....................................15 
   8.2 User data confidentiality.....................................16 
   8.3 Interference with the metric..................................16 
   9. IANA Considerations............................................16 
   10. Normative References..........................................16 
   11. Informative References........................................17 
   12. Open issues...................................................18 
   13. Acknowledgments...............................................18 
   14. Author's Addresses............................................18 
   Full Copyright Statement..........................................18 
   Intellectual Property.............................................19 
   Acknowledgement...................................................19 
    
Authors/Contributors 
    
   Thus far, the following people have contributed useful ideas, 
   suggestions, or the text of sections that have been incorporated 
   into this memo: 
    
   - Phil Chimento <vze275m9@verizon.net> 
   - Reza Fardid <RFardid@Covad.COM> 
   - Roman Krzanowski <roman.krzanowski@verizon.com> 
   - Maurizio Molina <maurizio.molina@dante.org.uk> 
   - Al Morton <acmorton@att.com> 
   - Emile Stephan <emile.stephan@francetelecom.com> 
   - Lei Liang <L.Liang@surrey.ac.uk> 
    
    
1. Conventions used in this document 
 
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC 2119 [RFC2119]. 
   Although RFC 2119 was written with protocols in mind, the key words 
   are used in this document for similar reasons.  They are used to 
   ensure the results of measurements from two different 
   implementations are comparable, and to note instances when an 
   implementation could perturb the network.  
    
   In this memo, the characters "<=" should be read as "less than or 
   equal to" and ">=" as "greater than or equal to". 
 
    
2. Introduction 
    
   The IPPM framework RFC 2330 [RFC2330] describes two forms of metric 
   composition, spatial and temporal. Spatial composition encompasses 
   the definitions of performance metrics that are applicable to the 
   complete path, and to various sub-paths. Also, the text suggests 
  
Morton, et al.        Individual exp. April 2006                Page 3 
 
Spatial Composition of Metrics                            October 2005 
 
 
   that the concepts of the analytical framework (or A-frame) would 
   help to define useful relationships between the complete path 
   metrics and the sub-path metrics. The effectiveness of such metrics 
   is dependent on their usefulness in analysis and applicability with 
   practical measurement methods. 
    
   The relationships may involve conjecture, and [RFC2330] lists four 
   points that the metric definitions should include: 
    
   +  the specific conjecture applied to the metric, 
   +  a justification of the practical utility of the composition in 
      terms of making accurate measurements of the metric on the path, 
   +  a justification of the usefulness of the composition in terms of 
      making analysis of the path using A-frame concepts more 
      effective, and 
   +  an analysis of how the conjecture could be incorrect. 
    
   RFC 2330 also gives an example where a conjecture that the delay of 
   a path is very nearly the sum of the delays of the exchanges and 
   clouds of the corresponding path digest. This example is 
   particularly relevant to those who wish to assess the performance of 
   an Inter-domain path without direct measurement, and the performance 
   estimate of the complete path is related to the measured results for 
   various sub-paths instead.  
    
   Approximate relationships between the sub-path and complete path 
   metrics are useful, with knowledge of the circumstances where the 
   relationships are/are not applicable. For example, we would not 
   expect that delay singletons from each sub-path would sum to produce 
   an accurate estimate of a delay singleton for the complete path 
   (unless all the delays were essentially constant - very unlikely). 
   However, other delay statistics (based on a reasonable sample size) 
   may have a sufficiently large set of circumstances where they are 
   applicable. 
    
2.1  Motivation 
    
   One-way metrics defined in other IPPM RFCs all assume that the 
   measurement can be practically carried out between the source and 
   the destination of the interest. Sometimes there are reasons that 
   the measurement can not be executed from the source to the 
   destination. For instance, the measurement path may cross several 
   independent domains that have conflicting policies, measurement 
   tools and methods, and measurement timeslot assignment. and the 
   simple One-way measurement can not be carried out. The solution then 
   may be the composition of several sub-path measurements. That means 
   each domain performs the One-way measurement on a sub path between 
   two nodes that are involved in the complete path following it own 
   policy, using its own measurement tools and methods, and within its 
   own measurement timeslot. One can combine all the sub-path One-way 
   mmetric results to estimate the complete path One-way measurement 
   metric with some accuracy. 
  
Morton, et al.        Individual exp. April 2006                Page 4 
 
Spatial Composition of Metrics                            October 2005 
 
 
    
    
    
   >>>>>>>>>>>>Open issue:  
   What is the relationship between the decomposition and composition 
   metrics? Should we put both kinds in one draft to make up a 
   framework? The motivation of decomposition is as follows:   
    
   The One-way measurement can provide result to show what the network 
   performance between two end hosts is and whether it meets operator 
   expectations or not. It cannot provide further information to 
   engineers where and how to improve the performance between the 
   source and the destination. For instance, if the network performance 
   is not acceptable in terms of the One-way measurement, in which part 
   of the network the engineers should put their efforts. This question 
   can to be answered by decompose the One-way measurement to sub-path 
   measurement to investigate the performance of different part of the 
   network.  
    
   Editor’s Questions for clarification: 
   What additional information would be provided to the decomposition 
   process, beyond the measurement of the complete path? 
    
   Is the decomposition described above intended to estimate a metric 
   for some/all disjoint sub-paths involved in the complete path?  
    
   >>>>>>>>>>>>>>>>>>> 
    
    
3. Proposed Scope and Application 
    
3.1  Scope of Work 
    
   For the primary IPPM metrics (currently Loss, Delay, and Delay 
   Variation), this memo gives a set of complete path metrics that can 
   be composed from the same or similar sub-path metrics. This means 
   that the complete path metric may be composed from: 
    
   +  the same metric for each sub-path; 
    
   +  multiple metrics for each sub-path (possibly one that is the same  
      as the complete path metric); 
    
   +  a single sub-path metrics that is different from the complete  
      path metric; 
    
   + different measurement techniques like active and passive 
     (recognizing that PSAMP WG will define capabilities to sample 
     packets to support measurement). 
    
   Each metric will clearly state: 
    
  
Morton, et al.        Individual exp. April 2006                Page 5 
 
Spatial Composition of Metrics                            October 2005 
 
 
   -  the definition (and statistic, where appropriate); 
    
   -  the composition relationship; 
    
   -  the specific conjecture on which the relationship is based; 
    
   -  a justification of practical utility or usefulness for analysis 
      using the A-frame concepts; 
    
   -  one or more examples of how the conjecture could be incorrect and  
      lead to inaccuracy; 
    
   -  the information to be reported; 
    
3.2  Application 
    
   For each metric, the applicable circumstances are defined, in terms 
   of whether the composition: 
    
   Requires the same test packets to traverse all sub-paths, or may use 
   similar packets sent and collected separately in each sub-path. 
    
   Requires homogeneity of measurement methodologies, or can allow a 
   degree of flexibility (e.g., active or passive methods produce the 
   "same" metric). Also, the applicable sending streams will be 
   specified, such as Poisson, Periodic, or both. 
    
   Needs information or access that will only be available within an 
   operator's domain, or is applicable to Inter-domain composition. 
    
   Requires synchronized measurement time intervals in all sub-paths, 
   or largely overlapping, or no timing requirements. 
    
   Requires assumption of sub-path independence w.r.t. the metric being 
   defined/composed, or other assumptions. 
    
   Has known sources of inaccuracy/error, and identifies the sources. 
    
3.3  Terminology 
    
   This section will define the terminology applicable to both complete 
   path and sub-path metrics. 
    
   Measurement Points: 
    
   <there must be a suitable definition for this in IPPM’s literature> 
    
   Equivalent measure:  
    
   The equivalent measure is the end-to-end metric that a composite 
   metric is estimating. 
    
  
Morton, et al.        Individual exp. April 2006                Page 6 
 
Spatial Composition of Metrics                            October 2005 
 
 
   Equivalent path: 
    
   The Equivalent path is the list of sub path that is equivalent to 
   the path of the end-to-end measure the composition measure is 
   estimating. 
    
    
4. One-way Delay Composition Metrics and Statistics 
    
    
4.1 Name: Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream 
    
    
4.1.1 Metric Parameters: 
    
   +  Src, the IP address of a host 
    
   +  Dst, the IP address of a host 
    
   +  T, a time (start of test interval) 
    
   +  Tf, a time (end of test interval) 
    
   +  lambda, a rate in reciprocal seconds (for Poisson Streams) 
    
   +  incT, the nominal duration of inter-packet interval, first bit to 
      first bit (for Periodic Streams) 
    
   +  T0, a time that MUST be selected at random from the interval 
      [T, T+dT] to start generating packets and taking measurements 
      (for Periodic Streams) 
    
   +  TstampSrc, the wire time of the packet as measured at MP(Src) 
    
   +  TstampDst, the wire time of the packet as measured at MP(Dst), 
      assigned to packets that arrive within a "reasonable" time. 
    
4.1.2 Definition: 
    
   Using the parameters above, we obtain the value of Type-P-One-way-
   Delay singleton as per RFC 2679 [RFC2679]. For each packet [i] that 
   has a finite One-way Delay (in other words, excluding packets which 
   have undefined, or infinite one-way delay):  
    
   Type-P-Finite-One-way-Delay-Poisson/Periodic-Stream[i] =  
                  FiniteDelay[i] = TstampDst - TstampSrc 
    
4.1.3 Discussion and other details... 
    
4.1.4 Mean Statistic 
    
   +  L,  the total number of packets received at Dst (sent between T0 
  
Morton, et al.        Individual exp. April 2006                Page 7 
 
Spatial Composition of Metrics                            October 2005 
 
 
      and Tf)  
    
   The 
    
   Type-P-Finite-One-way-Delay-Mean =  
    
              MeanDelay = (1/L)Sum(from i=1 to L, FiniteDelay[i]) 
    
   where all packets i= 1 through L have finite singleton delays. 
    
4.1.5 Composition Relationship: Sum of Mean Delays 
    
   The Type-P-Finite—Composite-One-way-Delay-Mean, or MeanDelay for the 
   complete Source to Destination path can be calculated from sum of 
   the Mean Delays of all its S constituent sub-paths. 
    
   +  S,  the number of sub-paths involved in the complete Src-Dst path  
    
   Then the 
    
   Type-P-Finite-Composite-One-way-Delay-Mean =  
    
              CompMeanDelay = (1/S)Sum(from i=1 to S, MeanDelay[i]) 
    
    
    
4.1.6 Statement of Conjecture 
    
   The mean of a sufficiently large stream of packets measured on each 
   sub-path during the interval [T, Tf] will be representative of the 
   true mean of the delay distribution (and the distributions 
   themselves are sufficiently independent), such that the means may be 
   added to produce an estimate of the complete path mean delay. 
    
4.1.7 Justification for the composite relationship 
    
   It is sometimes impractical to conduct active measurements between 
   every Src-Dst pair. For example, it may not be possible to collect 
   the desired sample size in each test interval when access link speed 
   is limited, because of the potential for measurement traffic to 
   degrade the user traffic performance. The conditions on a low-speed 
   access link may be understood well-enough to permit use of a small 
   sample size/rate, while a larger sample size/rate may be used on 
   other sub-paths. 
    
   Also, since measurement operations have a real monetary cost, there 
   is value in re-using measurements where they are applicable, rather 
   than launching new measurements for every possible source-
   destination pair. 
    
4.1.8 Sources of Error 
    
  
Morton, et al.        Individual exp. April 2006                Page 8 
 
Spatial Composition of Metrics                            October 2005 
 
 
   The measurement packets, each having source and destination 
   addresses intended for collection at edges of the sub-path, may take 
   a different specific path through the network equipment and parallel 
   exchanges than packets with the source and destination addresses of 
   the complete path. Therefore, the sub-path measurements may differ 
   from the performance experienced by packets on the complete path. 
   Multiple measurements employing sufficient sub-path address pairs 
   might produce bounds on the extent of this error. 
    
   others... 
    
4.1.9 Specific cases where the conjecture might fail 
    
   If any of the sub-path distributions are bimodal, then the measured 
   means may not be stable, and in this case the mean will not be a 
   particularly useful statistic when describing the delay distribution 
   of the complete path. 
    
   The mean may not be sufficiently robust statistic to produce a 
   reliable estimate, or to be useful even if it can be measured. 
    
   others... 
    
4.1.10 Application of Measurement Methodology 
    
   The methodology: 
    
   SHOULD use similar packets sent and collected separately in each 
   sub-path. 
    
   Allows a degree of flexibility (e.g., active or passive methods can 
   produce the "same" metric, but timing and correlation of passive 
   measurements is much more challenging). 
    
   Poisson and/or Periodic streams are RECOMMENDED. 
    
   Applicable to both Inter-domain and Intra-domain composition. 
    
   SHOULD have synchronized measurement time intervals in all sub-
   paths, but largely overlapping intervals MAY suffice. 
    
   REQUIRES assumption of sub-path independence w.r.t. the metric being 
   defined/composed. 
    
5. Loss Metrics/Statistics  
 
   >>>>>>>>>>>>>>>>> 
   Editor’s note: there is considerable redundancy between the material 
   in sections 5.1 and 4.1, need to determine how best to reduce it. 
    
5.1 Name: Type-P-One-way-Packet-Loss-Poisson/Periodic-Stream 
    
  
Morton, et al.        Individual exp. April 2006                Page 9 
 
Spatial Composition of Metrics                            October 2005 
 
 
    
5.1.1 Metric Parameters: 
    
   +  Src, the IP address of a host 
    
   +  Dst, the IP address of a host 
    
   +  T, a time (start of test interval) 
    
   +  Tf, a time (end of test interval) 
    
   +  lambda, a rate in reciprocal seconds (for Poisson Streams) 
    
   +  incT, the nominal duration of inter-packet interval, first bit to 
      first bit (for Periodic Streams) 
    
   +  T0, a time that MUST be selected at random from the interval 
      [T, T+dT] to start generating packets and taking measurements 
      (for Periodic Streams) 
    
   +  TstampSrc, the wire time of the packet as measured at MP(Src) 
    
   +  TstampDst, the wire time of the packet as measured at MP(Dst), 
      assigned to packets that arrive within a "reasonable" time. 
    
   +  Tmax, a maximum waiting time for packets at the destination 
    
    
5.1.2 Metric Units: 
    
   Using the parameters above, we obtain the value of Type-P-One-way-
   Packet-Loss singleton and stream as per RFC 2680 [RFC2680]. We 
   obtain a sequence of pairs with elements as follows: 
    
   +  TstampSrc, as above  
    
   +  L, either zero or one, where L=1 indicates loss and L=0 indicates 
     arrival at the destination within TstampSrc + Tmax.  
    
    
5.1.3 Discussion and other details... 
    
5.1.4  Statistic: Type-P-One-way-Packet-Loss-Empirical-Probability 
    
   Given the following stream parameter 
    
   +  N,  the total number of packets sent between T0 and Tf 
    
   We can define the Empirical Probability of Loss Statistic (Ep), 
   consistent with Average Loss in [RFC2680], as follows: 
    
   Type-P-One-way-Packet-Loss-Empirical-Probability = 
  
Morton, et al.        Individual exp. April 2006               Page 10 
 
Spatial Composition of Metrics                            October 2005 
 
 
                                   Ep = (1/N)Sum(from i=1 to N, L[i]) 
    
   where all packets i= 1 through N have a value for L. 
    
5.1.5 Composition Relationship: Combination of Empirical Probabilities 
    
   The Type Type-P-One-way-Composite-Packet-Loss-Empirical-Probability, 
   or CompEp for the complete Source to Destination path can be 
   calculated by combining Ep of all its constituent sub-paths (Ep1, 
   Ep2, Ep3, ... Epn) as  
    
   Type-P-One-way-Composite-Packet-Loss-Empirical-Probability = 
   CompEp = 1 – {(1 - Ep1) x (1 – Ep2) x (1 – Ep3) x ... x (1 – Epn)} 
    
    
5.1.6 Statement of Conjecture 
    
   The empirical probability of loss calculated on a sufficiently large 
   stream of packets measured on each sub-path during the interval [T, 
   Tf] will be representative of the true loss probability (and the 
   probabilities themselves are sufficiently independent), such that 
   the sub-path probabilities may be combined to produce an estimate of 
   the complete path loss probability. 
    
5.1.7 Justification for the composite relationship 
    
   It is sometimes impractical to conduct active measurements between 
   every Src-Dst pair. For example, it may not be possible to collect 
   the desired sample size in each test interval when access link speed 
   is limited, because of the potential for measurement traffic to 
   degrade the user traffic performance. The conditions on a low-speed 
   access link may be understood well-enough to permit use of a small 
   sample size/rate, while a larger sample size/rate may be used on 
   other sub-paths. 
    
   Also, since measurement operations have a real monetary cost, there 
   is value in re-using measurements where they are applicable, rather 
   than launching new measurements for every possible source-
   destination pair. 
    
5.1.8 Sources of Error 
    
   The measurement packets, each having source and destination 
   addresses intended for collection at edges of the sub-path, may take 
   a different specific path through the network equipment and parallel 
   exchanges than packets with the source and destination addresses of 
   the complete path. Therefore, the sub-path measurements may differ 
   from the performance experienced by packets on the complete path. 
   Multiple measurements employing sufficient sub-path address pairs 
   might produce bounds on the extent of this error. 
    
   others... 
  
Morton, et al.        Individual exp. April 2006               Page 11 
 
Spatial Composition of Metrics                            October 2005 
 
 
    
5.1.9 Specific cases where the conjecture might fail 
    
   A concern for loss measurements combined in this way is that root 
   causes may be correlated to some degree.  
    
   For example, if the links of different networks follow the same 
   physical route, then a single event like a tunnel fire could cause 
   an outage or congestion on remaining paths in multiple networks. 
   Here it is important to ensure that measurements before the event 
   and after the event are not combined to estimate the composite 
   performance. 
    
   Or, when traffic volumes rise due to the rapid spread of an email-
   born worm, loss due to queue overflow in one network may help 
   another network to carry its traffic without loss. 
    
   others...  
    
5.1.10 Application of Measurement Methodology 
    
   The methodology: 
    
   SHOULD use similar packets sent and collected separately in each 
   sub-path. 
    
   Allows a degree of flexibility (e.g., active or passive methods can 
   produce the "same" metric, but timing and correlation of passive 
   measurements is much more challenging). 
    
   Poisson and/or Periodic streams are RECOMMENDED. 
    
   Applicable to both Inter-domain and Intra-domain composition. 
    
   SHOULD have synchronized measurement time intervals in all sub-
   paths, but largely overlapping intervals MAY suffice. 
    
   REQUIRES assumption of sub-path independence w.r.t. the metric being 
   defined/composed. 
    
6. Delay Variation Metrics/Statistics  
    
   >>>>>>>>>>>>> 
   Editor’s note:  We have studied various approaches and have at least 
   one proposal for this section. We plan to add the text in the next 
   version. 
   >>>>>>>>>>>>> 
    
7. Other Metrics/Statistics: One-way combined Metric  
    


  
Morton, et al.        Individual exp. April 2006               Page 12 
 
Spatial Composition of Metrics                            October 2005 
 
 
   This definition may be the common part for the definition of "Loss 
   Metrics/Statistics" and for the definition of "One-way Delay 
   Composition Metrics and Statistics".  
    
    
7.1 Metric Name 
    
   Type-P-One-way-Combo-mean 
    
7.1.1 Metric Parameters: 
    
   Editorial notes (ES): parameters list to be completed 
    
   <P1,T1,dt1>...<Pn,Tn,dtn>:  
         
        It is a stream of One-way delay corresponding either to an end 
        to end measure of a sub-path, or to the spatial measure of the 
        sub-path: 
         
        - Type-P-One-way-Delay-Poisson-Stream as per [RFC2679]; 
        - Type-P-One-way-Delay-Periodic-Stream a per [RFC3432]; 
        - Type-P-One-way-Composition-Stream as defined below; 
        - Type-P-subpath-One-way-Delay-Stream as per [I-D.stephan-ippm-
          multimetrics]. 
    
    
7.1.2 Definition: 
    
   Using the value <P1,T1,dt1>...<Pn,Tn,dtn> of one of the One-way 
   delay Stream listed above, we define Type-P-One-way-Combo as the 
   couple (D,L) where D is the mean of the delay of the packets that 
   have a finite One-way, and where L is the average of lost of packets 
   (which have undefined, or infinite one-way delay). 
    
   D corresponds to the Type-P-Finite-One-way-Delay-Mean defined above. 
    
   L corresponds to the Type-P-One-way-Packet-Loss-Empirical-
   Probability defined above. 
    
    
7.1.3 Discussion and other details... 
    
7.1.4 Type-P-One-way-Combo-subpathes-stream 
 
   Parameters: 
 
    
   + dT1,..., dTn a list of delay. 
    
    
   + <Src, H1, H2,..., Hn, Dst>, the equivalent path. 
    
  
Morton, et al.        Individual exp. April 2006               Page 13 
 
Spatial Composition of Metrics                            October 2005 
 
 
    
    
   Definition: 
    
   Using Type-P-One-way-Combo-mean of each sub-path in the equivalent 
   path we define a Type-P-One-way-subpathes-stream as the list of 
   couples (D,L) of the sub-path list; 
    
   Results: {<D0,L0>,  <D1,L1>,  <D2,L2>, … <Dn,Ln>} 
    
    
7.1.5 Type-P-One-way-composition 
    
   The composition over a path gives D and L which give an estimation 
   of the end-to-end delay and end-to-end packet lost over this path. 
    
   Parameters: 
    
    
    
   + <Src, H1, H2,..., Hn, Dst>, the equivalent path. 
    
   + {<D0,L0>,  <D1,L1>,  <D2,L2>, … <Dn,Ln>}, the composition stream 
   of the sub-pathes of a path. 
    
   Definition: 
    
   Using Type-P-One-way-subpathes-stream we define Type-P-One-way-
   composition as the couple <D,L> where D is the mean of the delays Di 
   and where L is the average of lost of Li. 
    
    
   Results: <D,L>,  where D is a delay and L is the lost 
    
7.1.6 Type-P-One-way-composition-stream 
    
   The sample of Type-P-One-way-composition is defined to permit the 
   usage of the results of Type-P-One-way-composition measure in 
   computation of Type-P-One-way-Combo-mean composition. 
    
   Parameters: 
    
   +  T1,..., Tn,  a list of time; 
    
   +  <D,L>, the delay and the lost computed by composition. 
    
   Definition: 
    
   Using Type-P-One-way-composition we define Type-P-One-way-
   composition-stream as the stream of couples <D,L> over time.  
    
   Results: <T1,D1,L1>...<Tn,Dn,Ln> 
  
Morton, et al.        Individual exp. April 2006               Page 14 
 
Spatial Composition of Metrics                            October 2005 
 
 
    
    
7.1.7 Statement of Conjecture 
    
    
    
7.1.8 Justification for the composite relationship 
    
   Combo metric is very easy to measure and to compose.  
    
   It gives the delay and the lost, so most of the need. 
    
   Combo metric may be performed on com metric too. 
    
    
7.1.9 Sources of Error 
    
   Packets may cross different sub path than the equivalent end-to-end 
   measure because Type-P differ. 
    
   Packets may experiment different behavior than the equivalent end-
   to-end measure because of access classification based on packet 
   addresses.   
    
7.1.10 Specific cases where the conjecture might fail 
    
   When  
    
   +  Sum of subpath differ from the equivalent path. 
    
   +  Type-P differ. 
    
   +  Size differ. 
    
    
7.1.11 Application of Measurement Methodology 
    
   The methodology: 
    
   Is applicable to Intra and interdomain; 
    
   SHOULD report the context of the measure;  
    
    
8. Security Considerations  
 
8.1 Denial of Service Attacks  
 
   This metric requires a stream of packets sent from one host (source) 
   to another host (destination) through intervening networks.  This 
   method could be abused for denial of service attacks directed at 

  
Morton, et al.        Individual exp. April 2006               Page 15 
 
Spatial Composition of Metrics                            October 2005 
 
 
   destination and/or the intervening network(s).  
    
   Administrators of source, destination, and the intervening 
   network(s) should establish bilateral or multi-lateral agreements 
   regarding the timing, size, and frequency of collection of sample 
   metrics.  Use of this method in excess of the terms agreed between 
   the participants may be cause for immediate rejection or discard of 
   packets or other escalation procedures defined between the affected 
   parties.  
    
8.2 User data confidentiality  
 
   Active use of this method generates packets for a sample, rather 
   than taking samples based on user data, and does not threaten user 
   data confidentiality. Passive measurement must restrict attention to 
   the headers of interest. Since user payloads may be temporarily 
   stored for length analysis, suitable precautions MUST be taken to 
   keep this information safe and confidential. In most cases, a 
   hashing function will produce a value suitable for payload 
   comparisons. 
    
8.3 Interference with the metric  
 
   It may be possible to identify that a certain packet or stream of 
   packets is part of a sample. With that knowledge at the destination 
   and/or the intervening networks, it is possible to change the 
   processing of the packets (e.g. increasing or decreasing delay) that 
   may distort the measured performance.  It may also be possible to 
   generate additional packets that appear to be part of the sample 
   metric. These additional packets are likely to perturb the results 
   of the sample measurement.  
    
   To discourage the kind of interference mentioned above, packet 
   interference checks, such as cryptographic hash, may be used.  
    
9. IANA Considerations 
    
   Metrics defined in this memo will be registered in the IANA IPPM 
   METRICS REGISTRY as described in initial version of the registry 
   [RFC4148]. 
 
10. Normative References 
    
   [RFC791]   Postel, J., "Internet Protocol", STD 5, RFC 791, 
              September 1981.  
              Obtain via: http://www.rfc-editor.org/rfc/rfc791.txt 
    
   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate 
              Requirement Levels", RFC 2119, March 1997. 
              Obtain via: http://www.rfc-editor.org/rfc/rfc2119.txt 
    

  
Morton, et al.        Individual exp. April 2006               Page 16 
 
Spatial Composition of Metrics                            October 2005 
 
 
   [RFC2330]  Paxson, V., Almes, G., Mahdavi, J., and Mathis, M., 
              "Framework for IP Performance Metrics", RFC 2330, May 
              1998. 
              Obtain via: http://www.rfc-editor.org/rfc/rfc2330.txt 
    
   [RFC2679]  Almes, G., Kalidindi, S. and M. Zekauskas, "A one-way 
              delay metric for IPPM", RFC 2679, September 1999.   
              Obtain via: http://www.rfc-editor.org/rfc/rfc2679.txt 
    
   [RFC2680]  Almes, G., Kalidindi, S. and M. Zekauskas, "A one-way 
              packet loss metric for IPPM", RFC 2680, September 1999.   
              Obtain via: http://www.rfc-editor.org/rfc/rfc2680.txt 
    
   [RFC3148]  Mathis, M. and Allman, M., "A Framework for Defining 
              Empirical Bulk Transfer Capacity Metrics", RFC 3148, July 
              2001. 
              Obtain via: http://www.rfc-editor.org/rfc/rfc3148.txt 
    
   [RFC3432]  Raisanen, V., Grotefeld, G., and Morton, A., "Network 
              performance measurement with periodic streams", RFC 3432, 
              November 2002. 
    
   [RFC4148]  Stephan, E., "IP Performance Metrics (IPPM) Metrics 
              Registry", BCP 108, RFC 4148, August 2005. 
    
    
11. Informative References 
 
    
   [I.356]    ITU-T Recommendation I.356, "B-ISDN ATM layer cell 
              transfer performance", March 2000. 
    
    
   [Pax98]    V.Paxson, "Measurements and Analysis of End-to-End 
              Internet Dynamics," Ph.D. dissertation, U.C. Berkeley, 
              1997, ftp://ftp.ee.lbl.gov/papers/vp-thesis/dis.ps.gz. 
    
    
   [RFC3393]  Demichelis, C., and Chimento, P., "IP Packet Delay 
              Variation Metric for IP Performance Metrics (IPPM)", RFC 
              3393, November 2002. 
    
   [Y.1540]   ITU-T Recommendation Y.1540, "Internet protocol data 
              communication service - IP packet transfer and 
              availability performance parameters", December 2002. 
    
    
    
    
   [I-D.stephan-ippm-multimetrics] 
              Stephan, E., "IP Performance Metrics (IPPM) for spatial 
              and multicast", draft-stephan-ippm-multimetrics-01 (work 
  
Morton, et al.        Individual exp. April 2006               Page 17 
 
Spatial Composition of Metrics                            October 2005 
 
 
              in progress), July 2005. 
    
    
12. Open issues 
    
   Point1:  
    
      
    
    
    
13. Acknowledgments 
    
   The authors would like to acknowledge many helpful discussions with 
   . . . (lots of people, eventually).  
 
14. Author's Addresses 
    
   Al Morton          
   AT&T Labs                 
   Room D3 - 3C06            
   200 Laurel Ave. South 
   Middletown, NJ 07748 USA 
   Phone  +1 732 420 1571    
   EMail: <acmorton@att.com>  
    
   Need addresses for: 
   - Phil Chimento <vze275m9@verizon.net> 
   - Reza Fardid <RFardid@Covad.COM> 
   - Roman Krzanowski <roman.krzanowski@verizon.com> 
   - Maurizio Molina <maurizio.molina@dante.org.uk> 
    
   - Emile Stephan <emile.stephan@francetelecom.com> 
      Stephan Emile 
      France Telecom Division R&D 
      2 avenue Pierre Marzin 
      Lannion,   F-22307 
    
      Fax:   +33 2 96 05 18 52 
      Email: emile.stephan@francetelecom.com 
    
   - Lei Liang <L.Liang@surrey.ac.uk> 
    
    
 
Full Copyright Statement 
 
   Copyright (C) The Internet Society (2005).   
    
   This document is subject to the rights, licenses and restrictions 
   contained in BCP 78, and except as set forth therein, the authors 
   retain all their rights. 
  
Morton, et al.        Individual exp. April 2006               Page 18 
 
Spatial Composition of Metrics                            October 2005 
 
 
    
   This document and the information contained herein are provided on 
   an "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE 
   REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE 
   INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR 
   IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF 
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
    
Intellectual Property 
    
   The IETF takes no position regarding the validity or scope of any 
   Intellectual Property Rights or other rights that might be claimed 
   to pertain to the implementation or use of the technology described 
   in this document or the extent to which any license under such 
   rights might or might not be available; nor does it represent that 
   it has made any independent effort to identify any such rights.  
   Information on the procedures with respect to rights in RFC 
   documents can be found in BCP 78 and BCP 79. 
    
   Copies of IPR disclosures made to the IETF Secretariat and any 
   assurances of licenses to be made available, or the result of an 
   attempt made to obtain a general license or permission for the use 
   of such proprietary rights by implementers or users of this 
   specification can be obtained from the IETF on-line IPR repository 
   at http://www.ietf.org/ipr. 
    
   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights that may cover technology that may be required to implement 
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org. 
    
Acknowledgement 
    
   Funding for the RFC Editor function is currently provided by the 
   Internet Society. 















  
Morton, et al.        Individual exp. April 2006               Page 19 
 
