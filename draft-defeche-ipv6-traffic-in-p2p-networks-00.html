<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Measuring IPv6 Traffic in BitTorrent Networks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Measuring IPv6 Traffic in BitTorrent Networks">
<meta name="keywords" content="IPv6 Traffic, Measurements, BitTorrent">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">IPv6 Operations</td><td class="header">M. Defeche</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">University of Liege</td></tr>
<tr><td class="header">Intended status:  Informational</td><td class="header">E. Vyncke</td></tr>
<tr><td class="header">Expires:  April 19, 2010</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 16, 2009</td></tr>
</table></td></tr></table>
<h1><br />Measuring IPv6 Traffic in BitTorrent Networks<br /><draft-defeche-ipv6-traffic-in-p2p-networks-00.txt></h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008. The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 19, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
This document summarizes a University thesis which aims to measure the evolution over time of IPv6 traffic, 
to analyze
the geographical distribution of IPv6 nodes and to compare the two Internet Protocol
versions on many different criteria (RTT, latency, MTU). 
The measurements were done during the Summer 2009 using a specific-purpose program which
connects to the BitTorrent peer-to-peer network.

</p>
<p>
The study was made in Peer-to-Peer (P2P) networks because they are responsible
for most Internet traffic and because their structure and functioning permit a rapid
discovery of a large number of nodes from all over the world. In addition, the P2P users
are more likely to be interested by IPv6 as IPv6 does not have the same NAT problems
as IPv4.

</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#bittorrent">2.</a>&nbsp;
Some explanations about BitTorrent<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#PWP">2.1.</a>&nbsp;
Peer Wire Protocol<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">2.2.</a>&nbsp;
Tracker<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#PEX">2.3.</a>&nbsp;
Peer Exchange<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#DHT">2.4.</a>&nbsp;
Distributed Hash Table<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#LSD">2.5.</a>&nbsp;
Local Service Delivery<br />
<a href="#tools">3.</a>&nbsp;
Tools used for Measurement<br />
<a href="#measures">4.</a>&nbsp;
What was measured<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">4.1.</a>&nbsp;
IPv6 BitTorrent Clients<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">4.2.</a>&nbsp;
IPv6 Addresses<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">4.2.1.</a>&nbsp;
Native IPv6<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.2.2.</a>&nbsp;
Teredo<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.2.3.</a>&nbsp;
6to4<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.2.4.</a>&nbsp;
Tunnel Brokers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.2.5.</a>&nbsp;
ISATAP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.2.6.</a>&nbsp;
Other Addresses<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.2.7.</a>&nbsp;
Summary about IPv6 Addresses<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#traffic">4.3.</a>&nbsp;
Traffic Measurements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#compare">4.4.</a>&nbsp;
Comparaison IPv4 vs. IPv6<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.5.</a>&nbsp;
Round-Trip Time<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ttl">4.6.</a>&nbsp;
Comparaison of Hops<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mtu">4.7.</a>&nbsp;
MTU Comparaison<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#evolution">4.8.</a>&nbsp;
Monthly Evolution<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#protocols">4.9.</a>&nbsp;
Protocols Used to Discover Peers<br />
<a href="#anchor12">5.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor13">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor14">7.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
An IPv6 vs. IPv4 measurement was made in Peer-to-Peer (P2P) networks because they are responsible
for most Internet traffic <a class='info' href='#TFE3'>[TFE3]<span> (</span><span class='info'>Schulze, H., &ldquo;Internet Study 2008/2009,&rdquo; 2009.</span><span>)</span></a> and because their structure and functioning permit a rapid
discovery of a large number of nodes from all over the world. 
In addition, the P2P users
are more likely to be interested by IPv6 as IPv6 does not have the same NAT problems
as IPv4.

</p>
<p>
The measurements were made in May, June, July and October 2009 to get an idea of the evolution
within a couple of months. The intend is to run the same measurements every month for
a couple of years.

</p>
<p>
Measurements include: number of IPv4 vs. IPv6 nodes, which kind of IPv6 connectivity, comparing the MTU,
RTT between the two versions of IP and geographical distribution.

</p>
<a name="bittorrent"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Some explanations about BitTorrent</h3>

<p>
Let's start with some explanations about BitTorrent.

</p>
<p>
BitTorrent is based on an hybrid decentralized network which is particularly well
suited to the transfer of large files. BitTorrent generates the largest amount of traffic
of all P2P networks and was installed on 28.20% of PCs in September 2007, and this
number is certainly higher at present. BitTorrent also includes different protocols to
discover peers, namely DHT, PEX and LSD which will be discussed later. Thanks
to these mechanisms BitTorrent can be completely decentralized. The different clients
are all compatible with the core protocol but some divergences concerning PEX, DHT
and LSD appear between Azureus and the mainline, which represents at least the
BitTorrent and ÂµTorrent clients. Swarming is one of the basis of the protocol and IPv6
specification exists although it is not implemented by all clients.
	
</p>
<p>
	Since BitTorrent is the only protocol that offers in theory a good support to IPv6,
our choice is limited. But there are other reasons why BitTorrent is the network protocol
that best matches our needs.
</p>
<ul class="text">
<li>The number of different copies of the same file(s) is far smaller than in other
networks. This leads to a larger number of peers sharing the same file(s). Therefore
swarming can be more efficient thanks to a larger number of sources.
</li>
<li>As BitTorrent is generally used to share large files, peers stay connected longer, 
	giving us more time to discover them.
</li>
<li>BitTorrent is responsible for the largest part of the P2P traffic throughout the
world.
</li>
<li>BitTorrent is widely used in most regions of the world.
</li>
<li>Thanks to many different extensions like <a class='info' href='#PEX'>PEX<span> (</span><span class='info'>Peer Exchange</span><span>)</span></a>, 
	<a class='info' href='#DHT'>DHT<span> (</span><span class='info'>Distributed Hash Table</span><span>)</span></a>
 and <a class='info' href='#LSD'>LSD<span> (</span><span class='info'>Local Service Delivery</span><span>)</span></a>, the discovery of peers is improved greatly.
</li>
</ul><p>

</p>
<a name="PWP"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Peer Wire Protocol</h3>

<p>
The Peer wire Protocol [<a class='info' href='#TFE5'>[TFE5]<span> (</span><span class='info'>Cohen, B., &ldquo;The BitTorrent Protocol Specification,&rdquo; 2008.</span><span>)</span></a>], or PWP, specifies the way peers communicate in an
asynchronous fashion with each other to exchange data and signalling messages. It is
based on TCP connections that function in Full-Duplex and Pipelining mode to get
better performances. This protocol does not define how to choose pieces to request,
nor how to select peers to download from and to upload to. Certain algorithms, which
are explained below, give some solutions to attain a good propagation of pieces in the
swarm and to make peers happy with their download rate compared to their upload
rate.

</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Tracker</h3>

<p>
The trackers [<a class='info' href='#TFE5'>[TFE5]<span> (</span><span class='info'>Cohen, B., &ldquo;The BitTorrent Protocol Specification,&rdquo; 2008.</span><span>)</span></a>] act like servers but do not deal with the transfer of files ; their only
purposes are to manage the swarm and to respond to periodic client requests for information
about peers sharing the same torrent. Since the transfer of files is completely
supported by peers, the bandwidth requirement is very low and thus a single tracker
can handle many swarms, each one containing a large number of peers.
This protocol commonly called THP is used by clients to communicate over HTTP
with trackers. As a matter of fact, the trackers run an HTTP server. Peers contact
trackers that are present in the metadata file for the following purposes :
</p>
<ul class="text">
<li>to enter a swarm
</li>
<li>to leave a swarm
</li>
<li>to inform the tracker that the download is complete
</li>
<li>to periodically give information on the download state and retrieve information
	about a random peer set. This time interval is defined by the tracker. If a peer
	misses a periodical request it can be considered as disconnected by the tracker
	and thus not present in the swarm any more
</li>
</ul><p>
This communication permits trackers to keep track of peers that are in the swarm and
to avoid referencing disconnected peers.

</p>
<p>
Tracker responses
do not support IPv6 peers without this extension [[<a class='info' href='#TFE12'>[TFE12]<span> (</span><span class='info'>Hazel, G., &ldquo;IPv6 Tracker Extension,&rdquo; May&nbsp;2008.</span><span>)</span></a>]] which means that they do not
include IPv6 peers in their responses. This extension adds two new parameters for the
tracker requests:
</p>
<ul class="text">
<li>ipv6 : the client IPv6 address. It can be added when the client contacts the tracker
	over IPv4;
</li>
<li>ipv4 : the client IPv4 address. Conversely, when communication is made over IPv6.
</li>
</ul><p>
It permits clients having a dual stack to advertize both its addresses in the swarm. The
port of the additional address is the same as the primary one.

</p>
<a name="PEX"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Peer Exchange</h3>

<p>
The Peer Exchange or PEX is a means to discover new peers through peers that the
client is already connected to. As a matter of fact, peers trade information concerning
the peers they are connected to. Only few initial peers are needed to rapidly find a
large number of peers. This mechanism permits a reduction of the tracker load and an
improvement in the robustness as the tracker dependency is decreased.

</p>
<a name="DHT"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Distributed Hash Table</h3>

<p>
The DHT technology [<a class='info' href='#TFE13'>[TFE13]<span> (</span><span class='info'>Maymounkov, P., &ldquo;Kademlia : A Peer-to-peer Information System Based on the XOR Metric,&rdquo; .</span><span>)</span></a>] is a way to store a hash table over a network, thus in a
distributed way, each peers contains a part of it. Files and nodes are identified by a
same length key, which is 20 bytes in BitTorrent. Each peer also maintains a list of
different peers to efficiently route its searches. DHT in BitTorrent is an implementation
of Kademlia which is based on the XOR metric that is the distance between two nodes
or between a node and a file can be determined by a XOR of their keys.

</p>
<p>
This technology is used to decentralize the tracking mechanism to once more decrease
the dependence on trackers. Even if the trackers are down or if no trackers are
specified in the metadata file, the DHT technology permits the discovery of peers sharing
the same torrent thanks to the info key hash as identifier. Conversely to PEX, no
initial peers are needed.

</p>
<a name="LSD"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Local Service Delivery</h3>

<p>
The Local Service Discovery or LSD permits the discovery of peers that are downloading
the same torrent in the same local network. The transfer rate is much higher
between two peers in the same local network than between two peers in different networks
since the bandwidth limitation is that of the local network and not the one of
the Internet connection which is far smaller, especially the upload stream. Briefly, LSD
works as follows : the hash of the info key is broadcasted in the local network to find
out peers sharing the same torrent.

</p>
<a name="tools"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Tools used for Measurement</h3>

<p>
As millions of pieces of information can be reached and because this information
is retrieved and handled by five different programs, the choice of a MySQL database
came naturally for effectiveness reasons and because concurrent access is managed.
Each program requests, inserts, and/or updates information in this database.

</p>
<p>
The computer that holds the database and executes the programs runs the operating
system Debian GNU/Linux 5.0 and has native IPv6 and IPv4 connectivity, which
will permit a better evaluation of the two versions than if we use Teredo, for instance.

</p>
<p>
All our programs evolved constantly to better match our needs and to improve their
performance. Most of them where rethought several times to achieve our goals. A long
time was spent to debug the LibTorrent Rasterbar library to get a full IPv6-capable
BitTorrent client and to identify problems that The Pirate Bay had with IPv6.

</p>
<p>
Our specialized BitTorrent client joins different swarms and periodically changes to other swarms.
While in a swarm we try to get connected to as many peers as possible thanks to all
protocols supported by BitTorrent. In this way we are able to easily, automatically and
efficiently discover peers. Ideally we should choose swarms with large numbers of peers
in order to effectively retrieve information. Concerning the legality issue, we can use a
trick to avoid downloading and uploading any files. In fact, we claim that we are not
interested in any pieces so we will not download anything and we will not upload either
since we have nothing to upload. So we are present in the swarm but without taking
part in the sharing of files.

</p>
<p>
As we are interested in the number of routers on the path between us and the remote
peer we must discover the value of the Time-To-Live or Hop Limit depending on the IP
version. Since the TTL or Hop Limit is initially set depending on the operating system,
for instance 64 for Linux, and because the number of routers on the path should not
exceed 32 we can easily calculate the number of times the field was decremented.

</p>
<p>
Ping and ping6 commands are used to measure the latency to all discovered peers.
Tracepath and tracepath6 commands are used to measure the TTL and the MTU between peers. 
Of course, when the IPv6 connectivity of a peer is through a transition mechanism such
as 6to4 or Teredo, then it is easy to extract the IPv4 address of the peer from
its IPv6 address and comparaison can be done.

</p>
<a name="measures"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
What was measured</h3>

<p>
The measurements were done in two periods:
</p>
<ul class="text">
<li>May 2009 to July 2009: 5,000,000 peers were discovered but we were only
  able to to establish a BitTorrent connection with 1,500,000 peers;
</li>
<li>1 day in October 2009: 100,000 peers were discovered.
</li>
</ul><p>
The number of peers to which we managed to establish a BitTorrent connection 
may seem low in comparison
with the number of discovered peers but is not. In fact, certain peers are already disconnected
when we obtain information about them. The study made by Tribler on PEX
clearly indicated that information retrieved by PEX is mostly garbage. Furthermore,
when a BitTorrent client has reached its maximum number of connections, it rejects
connection attempts made by remote peers and stops initiating new connections. These
are the two principal reasons that explain the difference between the number of discovered
peers and peers we were connected to.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
IPv6 BitTorrent Clients</h3>

<p>
Among the 621,625 peers whose client is known to us, 542,537 of them utilized
one which supports IPv6, that is 87.28%. We could adjust the percentage of peers
having IPv6 connectivity with this information. However, the IPv6 results will not be
adjusted with this value since it has no influence on the different proportion analyzed.
And among the 542,537 peers that used a BitTorrent client that supports IPv6, 53,828
were using IPv6, that is 9.92%.

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
IPv6 Addresses</h3>

<p>
We will now analyze the 142,904 distinct IPv6 addresses found via the different protocols
and classify them into different categories.
The next section will explain
the utilization of these addresses over the world in greater detail.

</p><br /><hr class="insert" />
<a name="ipv6_addresses"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left"></th><th align="left">Native</th><th align="left">Teredo</th><th align="left">6to4</th><th align="left">ISATAP</th><th align="left">Tunnel Brokers</th></tr>
<tr>
<td align="left">Number</td>
<td align="left">1,216</td>
<td align="left">99,634</td>
<td align="left">41,425</td>
<td align="left">24</td>
<td align="left">102</td>
</tr>
<tr>
<td align="left">Percentage</td>
<td align="left">0.85</td>
<td align="left">69.72</td>
<td align="left">28.99</td>
<td align="left">0.02</td>
<td align="left">0.08</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Different Types of IPv6 Addresses&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="ipv6_addresses_cont"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left"></th><th align="left">6bone</th><th align="left">Site Local</th><th align="left">IPv4 Compatible</th><th align="left">IPv4 Mapped</th><th align="left">Bogon</th></tr>
<tr>
<td align="left">Number</td>
<td align="left">436</td>
<td align="left">24</td>
<td align="left">1</td>
<td align="left">94</td>
<td align="left">74</td>
</tr>
<tr>
<td align="left">Percentage</td>
<td align="left">0.31</td>
<td align="left">0.02</td>
<td align="left">0.00</td>
<td align="left">0.07</td>
<td align="left">0.05</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: Different Types of IPv6 Addresses (Cont.)&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Native IPv6</h3>

<p>
Only 1,216 distinct native IPv6 addresses were discovered in 28 different countries
during our study. More than 73% of these addresses came from the French ISP Free.
Even if we downloaded torrents whose names contained either FRENCH or VOSTFR
we were not connected to more French peers than Italian peers, for instance. As the
high number of native IPv6 addresses from France is not due to the high number of
peers from France, this phenomenon can be explained principally because Free seems
to be the only large ISP that proposes IPv6 connectivity. We also noticed that many
Universities and institutes around the world offer IPv6 connectivity especially in Portugal
where there are nine of them, which is more than any other country.

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
Teredo</h3>

<p>
Teredo with 69.72% of IPv6 addresses found is clearly the most utilized way to get
IPv6 connectivity. This ratio is also unsually high compared to other Internet
measurements. It is probably linked to:
</p>
<ul class="text">
<li>users: BiTorrent users are mainly residential and not professional, therefore
Teredo is allowed to traverse the firewall while most enterprises block all
outbound UDP traffic (and blocking Teredo in the same shot);
</li>
<li>application: Teredo is only used by Windows to connect to an IPv6 which
does not have any IPv4 address (in other word <a class='info' href='#RFC3484'>[RFC3484]<span> (</span><span class='info'>Draves, R., &ldquo;Default Address Selection for Internet Protocol version 6 (IPv6),&rdquo; February&nbsp;2003.</span><span>)</span></a> 
severelly limits
the normal use of Teredo), but, with BitTorrent the peers appear always as
single stack.
</li>
</ul><p>

</p>
<p>
When we analyze the servers employed to configure these addresses we notice that
only three servers represent more than 99% of the utilized ones. Their addresses are as
follows :
</p>
<ol class="text">
<li>213.199.162.214 : is deployed by Microsoft (46.12%);
</li>
<li>65.55.158.80 : is also set up by Microsoft (41.33%);
</li>
<li>207.46.48.150 : is once more owned by Microsoft (12.41%).
</li>
</ol><p>
Thus more than 99% of the peers that were using Teredo were likely to be using one of
the Microsoft Operating Systems. A test on my personal computer showed that Miredo,
which is a type of Teredo IPv6 tunneling software for Linux, does not use one of the
Microsoft Teredo servers.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.3"></a><h3>4.2.3.&nbsp;
6to4</h3>

<p>
6to4 is also broadly used to provide IPv6 connectivity as 28.99% of the addresses
found were created by this transition mechanism. Nevertheless, it is still far behind
Teredo. As 6to4 is designed to provide IPv6 connectivity to many hosts with a single
public IPv4 address, we checked if many 6to4 hosts were using the same 6to4 router.
The result is not very satisfactory since 99.47% of the 6to4 hosts employ a distinct
6to4 router. However, we noticed that 9 hosts were using the same 6to4 router which
is quite high. It seems that the 6to4 mechanism is mostly used for small LAN and not
by large sites.

</p>
<p>
6to4 is more commonly used than native IPv6. 
We found 6to4 users in almost every country in Europe. The USA
has far more 6to4 users than other countries.

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.4"></a><h3>4.2.4.&nbsp;
Tunnel Brokers</h3>

<p>
We can determine, via the list of Tunnel Brokers
of the SixXS service [<a class='info' href='#TFE28'>[TFE28]<span> (</span><span class='info'>SixXs, &ldquo;List of Tunnel Brokers,&rdquo; .</span><span>)</span></a>] and 
IPv6 Task Force [<a class='info' href='#TFE29'>[TFE29]<span> (</span><span class='info'>IPv6 Task Force, &ldquo;List of Tunnel Brokers,&rdquo; .</span><span>)</span></a>] websites, whether an ISP is a tunnel
broker. Unfortunately, these lists are not exhaustive so we may have missed a peer
using a Tunnel Broker. However, as we are aware of the largest Tunnel Broker, those
we missed should be small and thus cannot really influence the result. No dynamic
identification of the Tunnel Broker was implemented due to the difficulty of identifying
them all. The Tunnel Brokers in <a class='info' href='#tunnel_brokers'>Table&nbsp;3<span> (</span><span class='info'>List of Tunnel Brokers</span><span>)</span></a> 
that we discovered represent only 0.08% of
the IPv6 addresses found.

</p><br /><hr class="insert" />
<a name="tunnel_brokers"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left">Tunnel Broker</th><th align="left">Region</th><th align="left">Number</th><th align="left">Percentage</th></tr>
<tr>
<td align="left">Hurricane Electric</td>
<td align="left">Worldwide</td>
<td align="left">25</td>
<td align="left">24.51</td>
</tr>
<tr>
<td align="left">Internode</td>
<td align="left">Australia</td>
<td align="left">2</td>
<td align="left">1.96</td>
</tr>
<tr>
<td align="left">Hexago</td>
<td align="left">Canada</td>
<td align="left">22</td>
<td align="left">21.57</td>
</tr>
<tr>
<td align="left">SixXs</td>
<td align="left">Worldwide</td>
<td align="left">49</td>
<td align="left">48.04</td>
</tr>
<tr>
<td align="left">XS4ALL</td>
<td align="left">Netherlands</td>
<td align="left">4</td>
<td align="left">3.92</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 3: List of Tunnel Brokers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
Only 5 different Tunnel Brokers were found. The most widely used one is SixXS
with 48.04% of the total Tunnel Broker utilization. We noticed that 61% of the peers
that were using this Tunnel Broker came from the Czech Republic. Hexago is rather
popular for a Tunnel Broker that operates only in Canada.

</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.5"></a><h3>4.2.5.&nbsp;
ISATAP</h3>

<p>
We only discovered 24 different peers that used ISATAP (<a class='info' href='#RFC4212'>[RFC4212]<span> (</span><span class='info'>Blinov, M. and C. Adams, &ldquo;Alternative Certificate Formats for the Public-Key Infrastructure Using X.509 (PKIX) Certificate Management Protocols,&rdquo; October&nbsp;2005.</span><span>)</span></a>)
to get IPv6 connectivity in
a non IPv6-capable infrastructure. Half of these addresses have a global unicast prefix
and the other half have a 6to4 prefix. This mechanism is less common than Teredo (<a class='info' href='#RFC4380'>[RFC4380]<span> (</span><span class='info'>Huitema, C., &ldquo;Teredo: Tunneling IPv6 over UDP through Network Address Translations (NATs),&rdquo; February&nbsp;2006.</span><span>)</span></a>)
and 6to4 (<a class='info' href='#RFC3056'>[RFC3056]<span> (</span><span class='info'>Carpenter, B. and K. Moore, &ldquo;Connection of IPv6 Domains via IPv4 Clouds,&rdquo; February&nbsp;2001.</span><span>)</span></a>). However, this bad result can be moderated by the fact that ISATAP is mostly
destined to enterprises which often have a strict control on applications used by their
employees. Thus installing a BitTorrent client is not often possible, and even if it is the
firewall can filter its traffic.

</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.6"></a><h3>4.2.6.&nbsp;
Other Addresses</h3>

<p>
Although IPv6 addresses with the 6bone prefix should not exist anymore we found
up to 436 addresses with this prefix. In fact, all these addresses have the old Teredo
prefix 3ffe:831f::/32 which was used in the 6bone network.

</p>
<p>
We found 94 IPv4-mapped addresses that were all discovered by PEX.

</p>
<p>
Bogons are IP blocks that are reserved for private or special uses plus those that
are not yet allocated by the IANA. Thus a bogon is an illegal IP address that must not
appear on the Internet since they are theoretically unroutable. At present, the IPv6
unicast space is limited to the 2000::/3 prefix.
During our study we discovered up to 74 bogons via PEX, most of which had the
b524::/16 prefix.

</p>
<p>
We found 24 site-local addresses via PEX. These addresses came from peers that
were connected to other peers in their site that they found via LSD. These addresses
are obviously useless to us since we are not in the same site.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.7"></a><h3>4.2.7.&nbsp;
Summary about IPv6 Addresses</h3>

<p>
The most impressive results are those of Teredo and 6to4 that represent together
98.71% of IPv6 addresses discovered. The native IPv6 addresses form only a very small
fraction of the total.

</p>
<p>
Another important conclusion is that PEX is not ideally implemented in many
BitTorrent clients since they exchange data that cannot be used by the remote peers
like bogons or addresses reserved for the private-use networks. Filtering the addresses
to send via PEX avoids wasting processing time to initiate connections that cannot be
established and limits the number of addresses to send which saves bandwidth.

</p>
<a name="traffic"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Traffic Measurements</h3>

<p>
Most of the European countries have at least 3% of their peers using IPv6 with
better results for Sweden, Portugal and Latvia. Another surprising fact is that China
has only 2.64% of its peers using IPv6 which seems strange since China is one of the
leading countries in IPv6 deployment. This result may be negatively affected by the
filter set up in this country. Even if they have many free IPv4 block left, the USA still
has more than 4.8% of their peers using IPv6 which is more than their current policy
supposes.

</p>
<p>
As explained in the analysis of IPv6 addresses section, we only found few native IPv6
addresses. This analysis confirms what we discussed previously, which
is that Japan and France have the highest rate with 1.09% and 0.65% respectively.
China with 0.65%, has a good percentage in comparison with other countries. This
is explained by its interest to widely deploy native IPv6. Thus China has particularly
poor results concerning 6to4 and Teredo traffic.

</p>
<a name="compare"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Comparaison IPv4 vs. IPv6</h3>

<p>
In this section we will compare the two IP versions with different IT statistics
to find out whether the new version is really better. Of course, we must take into
account the fact that IPv6 transition mechanisms have a structure that can considerably
influence certain statistics. We will thus treat the IPv6 peers differently according to
the mechanism they use, if they use one at all.

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Round-Trip Time</h3>

<p>
First of all, even if we tried to obtain RTT statistics about each peer we did not
get it all because some were disconnected when we did the test and others were not
reachable via ICMP as many routers do not forward this type of ICMP message. We
obtained this information for approximately 36% of the IPv4 peers and 18% of the
IPv6 ones.

</p>
<p>
As we tested it for IPv4 addresses embedded in IPv6 ones we will compare the two
results. We have the RTT information of 32% of the embedded IPv4 addresses, most of
which come from 6to4. As a matter of fact, many NAT devices block the ICMP traffic
which explains why we have so little RTT information about IPv4 addresses embedded
in Teredo ones.

</p>
<p>
<a class='info' href='#rtt'>Table&nbsp;4<span> (</span><span class='info'>Global RTT Information in msec</span><span>)</span></a> indicates at first sight that IPv4 is two times faster than IPv6. This global
result is not representative of the new IP version speed as it is greatly influenced
by the transition mechanisms that are normally much slower than native connectivity.
The standard deviation average concerns the average of the standard deviation of all
peers made thanks to the three different attempts.

</p><br /><hr class="insert" />
<a name="rtt"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Global</th><th align="left">IPv4</th><th align="left">IPv6</th></tr>
<tr>
<td align="left">Average</td>
<td align="left">324.8</td>
<td align="left">812.8</td>
</tr>
<tr>
<td align="left">Standard Deviation</td>
<td align="left">403.6</td>
<td align="left">890.8</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 4: Global RTT Information in msec&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
<a class='info' href='#rtt_native'>Table&nbsp;5<span> (</span><span class='info'>Native IPv6 RTT Information in msec</span><span>)</span></a>
shows the results of the native IPv6 peers in comparison with those
of the IPv6 (all kind of connectivity) and IPv4 peers. 
We can immediately see that the IPv6 RTT average is
clearly smaller than the global IPv6 RTT average.
However, the IPv6 RTT average is still higher than that of IPv4 but this
difference can be explained by the current structure of the Internet: where even if the
peer has native IPv6 connectivity, it does not mean that the IPv6 peering agreements
of his/her ISP are as good as their IPv4 ones.
This inconvenience should be reduced by the IPv6 deployment evolution. The average
of the standard deviation of IPv6 peers is particularly high which implies that different
attempts gave highly different results.

</p><br /><hr class="insert" />
<a name="rtt_native"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left"></th><th align="left">Native IPv6 connectivity</th><th align="left">All IPv6 connectivity</th><th align="left">IPv4</th></tr>
<tr>
<td align="left">Average</td>
<td align="left">493.1</td>
<td align="left">812.8</td>
<td align="left">324.8</td>
</tr>
<tr>
<td align="left">Standard Deviation</td>
<td align="left">646.3</td>
<td align="left">890.8</td>
<td align="left">403.6</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 5: Native IPv6 RTT Information in msec&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="ttl"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Comparaison of Hops</h3>

<p>
We will analyze the TTL and Hop Limit on the path from the remote peers
to us for which we obtained more than 1,300,000 statistics about IPv4 peers and more
than 90,000 about IPv6 peers. We observe in <a class='info' href='#ttl_table'>Table&nbsp;6<span> (</span><span class='info'>Native IPv6 RTT Information in msec</span><span>)</span></a> that the number of routers on
the path from IPv4 peers is superior to the number of routers from IPv6 peers but not
to that of native IPv6 which is quite coherent. As a matter of fact, as the Hop Limit
is not decremented in the tunnel, its value arrives higher at the destination. The fact
that there is a higher number of routers between native IPv6 peers and us also seems
logical as the number of interconnections in the IPv6 Internet is smaller than in the
IPv4 Internet and that may result in a longer path.

</p><br /><hr class="insert" />
<a name="ttl_table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left">Hop count</th><th align="left">IPv4</th><th align="left">IPv6</th><th align="left">Native IPv6</th></tr>
<tr>
<td align="left">Average</td>
<td align="left">15.10</td>
<td align="left">11.93</td>
<td align="left">18.12</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 6: Native IPv6 RTT Information in msec&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="mtu"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
MTU Comparaison</h3>

<p>
We obtained more than 190,000 MTU statistics about IPv6 peers and more than
1,800,000 about IPv4 peers, which gives us a sufficient sample.

</p>
<p>
<a class='info' href='#mtu_table'>Table&nbsp;7<span> (</span><span class='info'>Native IPv6 RTT Information in msec</span><span>)</span></a> shows the different MTU results depending on the IP version and whether
the path MTU discovery reached the destination. Unsurprisingly, the global IPv6
MTU is far smaller than the IPv4 one as more than 98% of the addresses where formed
thanks to a tunneling mechanism. The results of the native IPv6 peers are much higher
but are still inferior to those of IPv4.

</p><br /><hr class="insert" />
<a name="mtu_table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left">MTU</th><th align="left">IPv4</th><th align="left">IPv6</th><th align="left">Native IPv6</th></tr>
<tr>
<td align="left">Average</td>
<td align="left">1,497.6</td>
<td align="left">1,288.9</td>
<td align="left">1,468.0</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 7: Native IPv6 RTT Information in msec&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="evolution"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.8"></a><h3>4.8.&nbsp;
Monthly Evolution</h3>

<p>
The monthly analysis done in 2009, shown in <a class='info' href='#evolution_tab'>Table&nbsp;8<span> (</span><span class='info'>Monthly Evolution of IPv6 vs IPv4 peers</span><span>)</span></a>, 
allows us to see this decrease more
clearly with 1.7% lost between the month of June and July. As July is a holiday month,
the sharing habits may be different. As a matter of fact, most downloaders are students.
However, this hypothesis does not explain why the IPv6 traffic decreases. The fact that
Universities, which may have IPv6 connectivity, may be closed during the holidays
and thus prevent students from using their bandwidth cannot explain this reduction as
the percentage of IPv6 traffic coming from Universities is very low. Nevertheless, this
decline from the Universities exists as IPv6 traffic in July diminished by more than
three times when compared to results in June. 

</p>
<p>
Once more the peers
that were solely discovered via DHT are not taken into account in the IPv6 evolution
analysis.

</p><br /><hr class="insert" />
<a name="evolution_tab"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left"></th><th align="left">May 2009</th><th align="left">June 2009</th><th align="left">July 2009</th><th align="left">October 2009</th></tr>
<tr>
<td align="left">%-age of IPv6 peers</td>
<td align="left">4.50</td>
<td align="left">4.79</td>
<td align="left">3.10</td>
<td align="left">2.30</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 8: Monthly Evolution of IPv6 vs IPv4 peers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="protocols"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.9"></a><h3>4.9.&nbsp;
Protocols Used to Discover Peers</h3>

<p>
In this section we will look at the effectiveness of the different protocols to discover
peers. As we can see in <a class='info' href='#protocols_tab'>Table&nbsp;9<span> (</span><span class='info'>Number of Valid Peers Discovered by Protocol</span><span>)</span></a>, PEX is globally far more effective to find peers than
other means. It is even more efficient for IPv6 in comparison with the performance of
trackers.

</p><br /><hr class="insert" />
<a name="protocols_tab"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left">Source</th><th align="left">IPv4</th><th align="left">IPv6</th><th align="left">Total</th></tr>
<tr>
<td align="left">Tracker</td>
<td align="left">1,550,023</td>
<td align="left">37,745</td>
<td align="left">1,587,768</td>
</tr>
<tr>
<td align="left">PEX</td>
<td align="left">3,558,648</td>
<td align="left">167,606</td>
<td align="left">3,726,254</td>
</tr>
<tr>
<td align="left">DHT</td>
<td align="left">843,353</td>
<td align="left">0</td>
<td align="left">843,353</td>
</tr>
<tr>
<td align="left">LSD</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 9: Number of Valid Peers Discovered by Protocol&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
Concerning DHT, we have never been able to get IPv6 peers by this means because
of incompatibilities between BitTorrent clients and because of problems in the LibTorrent
Rasterbar library. But if we look at the <a class='info' href='#protocols_tab'>Table&nbsp;9<span> (</span><span class='info'>Number of Valid Peers Discovered by Protocol</span><span>)</span></a>, 
the DHT results are not as good as
the other means.

</p>
<p>
The good performance of PEX can be explained by its exponential way of functioning.
As a matter of fact, via a small number of peers a large number of peers can
be reached. However, as already explained, the proportion of disposable information is
very important.

</p>
<p>
We did not receive any peers via LSD either since no other computer was running
a BitTorrent client in the local network. Nevertheless, it was functioning during all our
study.

</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>There are no extra IANA consideration for this document.
   
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>This I-D does not describe any specific protocol, so, the security section is mostly irrelevant.   
   The measures were done with the specific security issues in mind:
   </p>
<ul class="text">
<li>copyrighted content: only a first fragment is downloaded and never stored on long term storage,
			so, it is assumed that even if copyrighted content is actually received it will never be
			user or propagated further to other peers;
</li>
<li>denial of services: timers and rate limiters are used when getting the list of torrents
		from our directory, when contacting other peers, and so on
</li>
</ul><p>
   
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>
  Many thanks to Professor Guy Leduc of the University of Liege 
  and his research assistants, Cyril Soldani and Sylvain Martin.
  Martin is also grateful to Arvid Norberg who implemented the LibTorrent Rasterbar
library [<a class='info' href='#TFE23'>[TFE23]<span> (</span><span class='info'>Norberg, Arvid., &ldquo;LibTorrent Rasterbar Library,&rdquo; .</span><span>)</span></a>]. We also exchanged ideas with Nathan Ward.
  
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="TFE12">[TFE12]</a></td>
<td class="author-text">Hazel, G., &ldquo;<a href="http://www.bittorrent.org/beps/bep_0007.html">IPv6 Tracker Extension</a>,&rdquo; May&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="TFE13">[TFE13]</a></td>
<td class="author-text">Maymounkov, P., &ldquo;Kademlia : A Peer-to-peer Information System Based on the XOR Metric.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="TFE28">[TFE28]</a></td>
<td class="author-text">SixXs, &ldquo;<a href="http://www.sixxs.net/tools/aiccu/brokers/">List of Tunnel Brokers</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="TFE29">[TFE29]</a></td>
<td class="author-text">IPv6 Task Force, &ldquo;<a href="http://www.ipv6tf.org/index.php?page=using/connectivity/test">List of Tunnel Brokers</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="TFE5">[TFE5]</a></td>
<td class="author-text">Cohen, B., &ldquo;<a href="http://www.bittorrent.org/beps/bep_0003.html">The BitTorrent Protocol Specification</a>,&rdquo; 2008.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3056">[RFC3056]</a></td>
<td class="author-text">Carpenter, B. and K. Moore, &ldquo;<a href="http://tools.ietf.org/html/rfc3056">Connection of IPv6 Domains via IPv4 Clouds</a>,&rdquo; RFC&nbsp;3056, February&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3056.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3484">[RFC3484]</a></td>
<td class="author-text">Draves, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3484">Default Address Selection for Internet Protocol version 6 (IPv6)</a>,&rdquo; RFC&nbsp;3484, February&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3484.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4212">[RFC4212]</a></td>
<td class="author-text">Blinov, M. and C. Adams, &ldquo;<a href="http://tools.ietf.org/html/rfc4212">Alternative Certificate Formats for the Public-Key Infrastructure Using X.509 (PKIX) Certificate Management Protocols</a>,&rdquo; RFC&nbsp;4212, October&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4212.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4380">[RFC4380]</a></td>
<td class="author-text">Huitema, C., &ldquo;<a href="http://tools.ietf.org/html/rfc4380">Teredo: Tunneling IPv6 over UDP through Network Address Translations (NATs)</a>,&rdquo; RFC&nbsp;4380, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4380.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="TFE23">[TFE23]</a></td>
<td class="author-text">Norberg, Arvid., &ldquo;<a href="http://www.rasterbar.com/products/libtorrent/">LibTorrent Rasterbar Library</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="TFE3">[TFE3]</a></td>
<td class="author-text">Schulze, H., &ldquo;Internet Study 2008/2009,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="THESIS">[THESIS]</a></td>
<td class="author-text">Defeche, M., &ldquo;Measure and Analysis of IPv6
Traffic in Peer-to-Peer Networks.
Master Thesis,&rdquo; August&nbsp;2009.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Defeche</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Liege</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Institut Montefiore</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bat. B28 Reseaux informatiques</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Grande Traverse 10</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Liege  4000</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Belgium</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:martin.defeche@gmail.com">martin.defeche@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Eric Vyncke</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">De Kleetlaan 6a</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Diegem  1831</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Belgium</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+32 2 778 4677</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:evyncke@cisco.com">evyncke@cisco.com</a></td></tr>
</table>
</body></html>
