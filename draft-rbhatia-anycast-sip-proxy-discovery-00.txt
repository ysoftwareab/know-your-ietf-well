

IETF SIP Working Group                              
INTERNET-DRAFT                                          Ravideep Bhatia 
Category: Information                                       Mike Coulas 
Expires: May 10, 2007                                     Motorola Inc. 
                                                      November 10, 2006 
                                                                        
    
    
                 SIP Proxy Discovery using Anycast Address 
             draft-rbhatia-anycast-sip-proxy-discovery-00.txt 
                                      
    
Status of this Memo 
    
   By submitting this Internet-Draft, each author represents that any 
   applicable patent or other IPR claims of which he or she is aware 
   have been or will be disclosed, and any of which he or she becomes 
   aware will be disclosed, in accordance with Section 6 of BCP 79. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet 
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time. It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 
    
   To view the list of Internet-Draft Shadow Directories, see 
   http://www.ietf.org/shadow.html. 
    
   This Internet-Draft will expire on May 01, 2007. 
    
    
Copyright Notice 
    
   Copyright (C) The Internet Society (2006). 
 
 
Abstract 
    
   SIP is an application-layer control protocol that can establish, 
   modify, and terminate multimedia sessions. SIP makes use of elements 
   called proxy servers to help route requests to and from the user's 
   current location. Before a SIP request can be sent by a SIP client, 
 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 1] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
   an outbound SIP proxy (first hop proxy) has to be discovered to which 
   the SIP request can be forwarded. This draft proposes a new method 
   for discovering the address of first hop outbound SIP proxy server 
   based on the use of anycast addressing and the SIP OPTIONS request. 
   This new method can be used with either IPv4 or IPv6, however the 
   description and examples given in this draft are for IPv6 only. 
     
 
TABLE OF CONTENTS 
 
   1. TERMINOLOGY....................................................3 
   2. INTRODUCTION...................................................3 
   3. DEFINITIONS....................................................4 
   4. OVERVIEW.......................................................4 
      4.1 Background.................................................4 
         4.1.1 DHCP..................................................4 
         4.1.2 Static or DM provisioning.............................5 
         4.1.3 IP-CAN specific (3GPP)................................5 
      4.2 Proposed method............................................5 
         4.2.1 Using source IP address...............................6 
         4.2.2 Using SIP OPTIONS request.............................6 
   5. DETAILS........................................................6 
      5.1 Description of Mechanism based on using source address.....6 
         5.1.1 Sending REGISTER request..............................6 
         5.1.2 Processing at SIP proxy server........................6 
         5.1.3 Processing at SIP client..............................7 
      5.2 Description of Mechanism based on using OPTIONS request....7 
         5.2.1 Sending OPTIONS request...............................7 
         5.2.2 Processing at SIP proxy server........................8 
         5.2.3 Processing at SIP client..............................8 
      5.3 Lost connectivity and Proxy Server re-selection............8 
   6. EXAMPLES.......................................................8 
      6.1 Example of OPTIONS request sent by SIP client..............8 
      6.2 Example of OPTIONS response returned by outbound SIP proxy 
      server.........................................................9 
   7. SECURITY CONSIDERATIONS........................................9 
   8. IANA CONSIDERATIONS...........................................10 
   9. REFERENCES....................................................11 
      9.1 NORMATIVE REFERENCES......................................11 
      9.2 INFORMATIVE REFERENCES....................................11 
   10. AUTHORS' ADDRESSES...........................................12 
   11. IPR STATEMENTS...............................................12 
   12. COPYRIGHT NOTICE.............................................13 
   13. DISCLAIMER OF VALIDITY.......................................13 
   14. ACKNOWLEDGEMENTS.............................................13 
   APPENDIX A: Anycast Addresses....................................14 
      Constructing IPv6 anycast address.............................14 
   APPENDIX B: Discovering prefix of the SIP proxy server network...15 
 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 2] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
      Using assigned prefix.........................................15 
      Using DNS query...............................................15 
      Using manual configuration....................................15 
 
 
1. TERMINOLOGY 
    
   In this document, the key words "MUST", "MUST NOT", "REQUIRED", 
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT 
   RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as 
   described in BCP 14, RFC 2119 [2] and indicate requirement levels 
   for compliant SIP implementations. 
    
    
2. INTRODUCTION 
    
   SIP is an application-layer control protocol that can establish, 
   modify, and terminate multimedia sessions. SIP makes use of elements 
   called proxy servers to help route requests to the user's current 
   location, authenticate and authorize users for services, implement 
   provider call-routing policies, and provide application services to 
   users. Any SIP request that is originated by a SIP client needs to be 
   routed through an outbound SIP proxy server (first hop proxy). The 
   outbound SIP proxy server is typically an edge SIP proxy server of 
   the SIP network being directly accessed by the SIP client. A SIP 
   client has to discover the outbound SIP proxy server before sending 
   any SIP requests. This draft proposes a new method for discovering 
   the address of first hop outbound SIP proxy server based on the use 
   of anycast addressing and the SIP OPTIONS request. This new method is 
   intended to supplement but not replace existing outbound SIP proxy 
   discovery methods. 
    
   The advantages offered by our proposed method over existing methods 
   are: 
 
   - The proposed method does not require nor use DHCP services for 
     locating SIP servers in the network. 
    
   - This method does not require a DHCP client in the terminal. 
 
   - This method is considerably simpler to implement than the DHCP-
     based method. 
 
   - This method provides more flexibility than static or DM 
     provisioning of the outbound proxy in the terminal which can 
     impose restrictions on the SIP networks that the SIP client can 
     access thus restricting mobility. 
 
 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 3] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
   - Immediate IP connectivity to the outbound SIP proxy server is 
     established upon successful completion of this method. 
 
 
3. DEFINITIONS 
    
   Anycast Address 
 
      An identifier for a set of interfaces, typically belonging to 
      different nodes. A packet sent to an anycast address is delivered 
      to one of the interfaces identified by that address, i.e., the 
      "nearest" one, according to the routing protocols' measure of 
      distance. 
 
   SIP 
 
      An application-layer control (signaling) protocol for creating, 
      modifying, and terminating sessions with one or more 
      participants. These sessions include Internet telephone calls, 
      multimedia distribution, and multimedia conferences. 
 
   Outbound SIP Proxy 
 
      A SIP proxy that receives SIP requests from a client and routes 
      them towards their destination. A stateful outbound SIP proxy 
      also maintains the SIP transactions between itself and the SIP 
      client. 
    
    
4. OVERVIEW 
    
4.1 Background 
    
   Any SIP request that is originated by a SIP client needs to be 
   routed through an outbound SIP proxy server (first hop proxy). Thus, 
   before sending a SIP request, a SIP client has to discover the 
   address of an outbound proxy server.  
    
   Current methods for discovering the outbound SIP proxy server are: 
    
4.1.1 DHCP 
    
   A DHCP option (option 120 for DHCPv4 and options 21/22 for DHCPv6) 
   is defined for returning SIP proxy servers. With these options, SIP 
   clients can either request IP address(es) or domain name(s) of 
   outbound SIP proxy server(s). In case of domain name(s) being 
   returned, subsequent NAPTR, SRV and A/AAAA DNS queries are required 

 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 4] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
   to resolve the domain name(s) to an IP address(s). Refer to [5] and 
   [6]. 
    
4.1.2 Static or DM provisioning 
    
   The outbound SIP proxy address(es) (IP address(es) or FQDN(s)) may 
   be statically provisioned in the SIP client. Alternatively, 
   provisioning may be accomplished using some Device Management 
   mechanism. If FQDN(s) is provisioned, then DNS queries are required 
   to resolve the FQDN(s) to an IP address(s). 
    
4.1.3 IP-CAN specific (3GPP) 
    
   Sometimes, discovery of the outbound proxy server address(es) may be 
   integrated into the IP-CAN specific procedures used to establish an 
   IP connection enabling access to the SIP core metwork. For example, 
   the 3GPP GPRS network supports a P-CSCF discovery option in PDP 
   context activations. The device requests and receives the address of 
   the IMS outbound proxy server (i.e., the P-CSCF) as a result of a 
   successful PDP context activation. Refer to [7] and [8].  
    
   In the absence of a DHCP service for obtaining SIP proxy servers and 
   without a provisioned outbound SIP proxy server, the SIP client will 
   not have any means of obtaining an outbound SIP proxy server for 
   routing its SIP requests. Consequently, this draft proposes a new 
   method of discovering the outbound SIP proxy server that may be used 
   as an alternative to the methods described above. This new method 
   can be used with either IPv4 or IPv6, however the description and 
   examples given in this draft are for IPv6 only. 
 
4.2 Proposed method 
    
   The proposed method uses an anycast address (for a description of 
   anycast addresses, refer to Appendix A and also to [4]), the SIP 
   proxy server anycast address, to identify SIP proxy servers that can 
   act as outbound SIP proxy servers to SIP clients. Every such SIP 
   proxy server SHOULD configure this anycast address on the IP 
   interface that it uses to communicate with SIP clients. In a network 
   there can be multiple SIP proxy servers that are configured to act 
   as outbound proxy servers and all of these servers SHOULD configure 
   this anycast address on the appropriate IP interface. An SIP proxy 
   server with an IP interface configured with the SIP proxy server 
   anycast address MUST be able to accept packets addressed to that 
   address.  
    
   We are proposing two different mechanisms for discovering the 
   address of an outbound SIP proxy (i.e., IP address or FQDN) using 
 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 5] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
   the anycast address for outbound SIP proxies. 
    
4.2.1 Using source IP address 
    
   The first mechanism uses the source IP address of IP packets 
   returned by the selected outbound SIP proxy server. When the first 
   SIP response to a SIP request sent to the SIP proxy server anycast 
   address is received from an outbound SIP proxy server, the SIP 
   client takes the source IP address of the IP packet in which SIP 
   response is received and then uses it as the address of the outbound 
   SIP proxy server for all future communication.  
    
4.2.2 Using SIP OPTIONS request 
    
   The second mechanism for obtaining the address of an outbound SIP 
   proxy server is based on the use of the OPTIONS SIP Request (defined 
   in [2]). Specifically, a SIP OPTIONS request is sent to the SIP 
   proxy server anycast address and the unicast address of the 
   discovered outbound SIP proxy server is returned in the Contact 
   header of the response. This is the preferred and RECOMMENDED 
   mechanism. 
 
    
5. DETAILS 
    
5.1 Description of Mechanism based on using source address 
    
5.1.1 Sending REGISTER request 
    
   When the SIP client sends the first SIP request (normally REGISTER, 
   but could be any other SIP request) to the SIP core network, it MUST 
   set the destination address of the IP packet that contains the SIP 
   request to the SIP proxy anycast address proposed in this document 
   (refer to Appendix B for information on discovering the IPv6 prefix 
   of the sip proxy server network). When this packet is received by 
   the IP router of the network, it will find a single outbound SIP 
   proxy server that is “nearest” to this user. After selecting a SIP 
   proxy server, the router will forward the packet to that server. 
   Since the proxy server is listening on the anycast address it will 
   accept the packet and pass it to the SIP layer for processing.  
    
5.1.2 Processing at SIP proxy server 
    
   When a SIP proxy server gets the first SIP request (e.g., REGISTER 
   request) from a SIP client, it processes the request and forwards it 
   towards the destination addressed in the Request URI (e.g., could be 
   a SIP UA or SIP registrar server or SIP application server). When 
 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 6] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
   the first non-100 trying response is received from the destination, 
   the SIP proxy server forwards it to the SIP client that originated 
   the SIP request. While forwarding the request, the SIP proxy server 
   MUST make sure that the source address of the IP packet, in which 
   SIP request is carried, is set to the unicast address (i.e., not the 
   anycast address) of the interface on which the proxy server wants to 
   receive SIP requests from the SIP clients. Note that in order for 
   this method to work, the outbound SIP proxy server must be a  
   stateful proxy.  
 
5.1.3 Processing at SIP client 
    
   When SIP client receives a non-100 Trying response from the SIP 
   proxy server, it MUST save the unicast address from the source 
   address of the IP packet in which the response was received (the 
   “100 Trying” response is normally only returned for INVITE 
   transactions). This unicast address MUST be used for all subsequent 
   communication with the outbound SIP proxy server. For example, this 
   address may be converted to SIP URI format for inclusion in an 
   initial route set. 
    
5.2 Description of Mechanism based on using OPTIONS request 
    
5.2.1 Sending OPTIONS request 
    
   The SIP OPTIONS method allows a SIP User Agent (UA) to query a SIP 
   UA or server as to its capabilities. This enables a client to 
   discover information about the addressed SIP entity, in this case an 
   outbound SIP proxy server.  
    
   A SIP client using this method to discover the address of an 
   outbound SIP proxy server MUST construct an OPTIONS request with the 
   Request-URI set to the SIP proxy server anycast address and the 
   default SIP port. In addition, a Max-Forwards header with a value of 
   0 is used to ensure that the proxy server does not forward the 
   request. For example, 
    
      SIP:<SIP proxy server anycast address>:5060 
    
   After constructing the OPTIONS request, the SIP client sends the 
   request to the anycast address and port specified in the Request 
   URI, i.e., as a result of resolving the address in the Request-URI. 
   When this packet is received by the router of the network it will 
   find a single outbound SIP proxy server that is “nearest” to this 
   user and route it to that server. Since the proxy server is 
   listening on the anycast address it will accept the packet and pass 
   it to the SIP layer for processing. 
 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 7] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
    
5.2.2 Processing at SIP proxy server 
    
   When a SIP proxy server receives an OPTIONS request from a SIP 
   client addressed to the SIP proxy server anycast address and with 
   Max-Forwards set to 0, it knows that it has to process the request 
   and return a response to the SIP client. After processing the 
   OPTIONS requests, the proxy server returns a 200(OK) response to the 
   SIP client listing the capabilities of the server, as specified in 
   [2]. This response MUST include one or more Contact headers 
   containing address(es) of the proxy server. These addresses can 
   either be unicast IP address(es) or FQDN(s). While sending the 
   response, the SIP proxy server SHOULD set the source address in the 
   IP packet to the unicast source address of the interface on which 
   the proxy server wants to receive SIP requests from the SIP clients. 
    
5.2.3 Processing at SIP client 
    
   When the SIP client receives a 200 (OK) response for the OPTIONS 
   request from the selected SIP proxy server, it MUST parse the 
   Contact header(s) and store at least one of the contact addresses to 
   be used in the initial route set of subsequent SIP requests. 
   Outbound SIP proxy server address is typically placed in the topmost 
   Route header of outbound SIP requests. 
    
5.3 Lost connectivity and Proxy Server re-selection 
    
   If, at any time, connectivity with a discovered outbound SIP proxy 
   server is lost, the SIP client can simply re-use one the 
   aforementioned mechanisms to discover and establish connectivity 
   with a new outbound SIP proxy server. 
    
   It may be desirable for a mobile SIP client to monitor outbound SIP 
   proxy servers by periodically executing the outbound SIP proxy 
   discovery mechanism based on using the OPTIONS request. The IMS 
   client could then have the option to re-connect to a “nearer” 
   outbound SIP proxy server if one is discovered. 
    
    
6. EXAMPLES 
    
6.1 Example of OPTIONS request sent by SIP client 
    
     Request-URI of OPTIONS request is addressed to the outbound SIP 
     proxy anycast address. 
      
     OPTIONS sip:[5555::FDFF:FFFF:FFFF:FFFD]:5060 SIP/2.0 
 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 8] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
     Via: SIP/2.0/UDP [5555::a:b:c:d]:1357; 
          comp=sigcomp;branch=z9hG4bKnashds7 
     Max-Forwards: 0 
     From: <sip:user1_public1@home1.net>;tag=4fa3 
     To: <sip:[5555::FDFF:FFFF:FFFF:FFFD]> 
     Contact: <sip:[5555::a:b:c:d]:1357;comp=sigcomp> 
     Call-ID: apb03a0s09dkjdfglkj49111 
     CSeq: 1 OPTIONS 
     Supported: path, sec-agree 
     Content-Length: 0 
      
6.2 Example of OPTIONS response returned by outbound SIP proxy server 
    
     Contact addresses (unicast IP address or FQDN) of selected SIP 
     outbound proxy are returned in Contact headers of 200 (OK) 
     response to OPTIONS request: 
      
     SIP/2.0 200 Ok 
     Via: SIP/2.0/UDP [5555::a:b:c:d]:1357; 
     comp=sigcomp;branch=z9hG4bKnashds7 
     From: <sip:user1_public1@home1.net>;tag=4fa3 
     To: <sip:[5555::FDFF:FFFF:FFFF:FFFD]>;tag=5ef4 
     Call-ID: apb03a0s09dkjdfglkj49111 
     Contact: <sip:proxy1.visited1.net:5060:comp=sigcomp> 
     Contact: <sip:[5555::c:d:e:f]:5060;comp=sigcomp> 
     CSeq: 1 OPTIONS 
     Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, MESSAGE, NOTIFY, PRACK, 
     REFER, UPDATE 
     Accept-Language: en 
     Supported: path, sec-agree 
     Content-Length: 0 
 
    
7. SECURITY CONSIDERATIONS 
    
   A discussion of the security issues impacting anycast addressing is 
   given in [11]. In it, three fundamental security requirements are 
   identified: 
    
     1. Access to anycast group membership must be controlled. Routers 
        must advertise routes of legitimate anycast servers only. 
    
     2. An anycast client has no way of knowing whether the source 
        address of a response to an anycast requests is that of a 
 
 
Bhatia, et al.          Expires - May 10, 2007                [Page 9] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
        legitimate anycast server or not. Therefore, responses to 
        anycast requests may need to be authenticated. 
 
     3. Secure communication between anycast clients and servers may be 
        required. Anycast communications may need to be confidential, 
        authenticated and protected from replay attacks. 
    
   As the purpose of the method described in this draft is to discover 
   an outbound SIP proxy that will be used for subsequent communication 
   with a SIP core, the first two requirements are of particular 
   importance. Once the outbound proxy has been discovered, standard 
   mechanisms can be used to provide secure communication between the 
   client and the outbound proxy as well as the SIP core being 
   accessed. A good example of this are the security mechanisms 
   specified for accessing the 3GPP IMS core network [9][10]. Also, a 
   secure IP connection is often used to access the subnet of the 
   outbound SIP proxy server (e.g., IPsec VPN tunnel or 3GPP PDP 
   context). 
    
   To address the first security requirement, [11] proposes that an 
   anycast server registration mechanism be used during which access 
   control functions can be performed. Access control functions could 
   be based on usage of Access Control Lists or alternatively, 
   authorization certificates. 
    
   To address the second security requirement, [11] proposes the use of 
   digital signature with authorization certificates proving that the 
   response to an anycast request was generated by a server belong to 
   that anycast group. In the case of requests sent to the SIP proxy 
   server anycast address, the certificate would be used to prove that 
   the SIP response was generated by a legitimate outbound SIP proxy 
   server. 
    
   Use of anycast addressing may make SIP proxy servers more 
   universally accessible for denial of service attacks. However, SIP 
   proxy servers discovered using other methods, such as DHCP with SIP 
   server option for example, are no less susceptible to denial of 
   service attacks than are proxies discovered using anycast 
   addressing. 
 
    
8. IANA CONSIDERATIONS 
    
   This section is to provide the Internet Assigned Numbers Authority 
   (IANA) with guidelines to allow assignment of identifier related to 
   the anycast address. 
     

 
 
Bhatia, et al.          Expires - May 10, 2007               [Page 10] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
   The method described in this document requires a new anycast 
   identifier to be assigned by the IANA for constructing a new anycast 
   address. This new anycast address will be assigned to all nodes that 
   can act as outbound SIP proxy server for a SIP client. For 
   discovering the SIP proxy servers, a SIP client will address the 
   first SIP request to the SIP proxy server anycast address and the 
   request will be sent with the destination in the IP packet set to 
   this anycast address. 
    
 
9. REFERENCES 
    
9.1 NORMATIVE REFERENCES 
 
   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement 
        Levels", BCP 14, RFC 2119, March 1997. 
    
   [2]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., 
        Peterson, J., Sparks, R., Handley, M., and E. Schooler, "SIP: 
        Session Initiation Protocol", RFC 3261, June 2002. 
    
   [3]  Deering, S. and R. Hinden, "Internet Protocol, Version 6 (IPv6) 
        Specification", RFC 2460, December 1998. 
    
   [4]  Hinden, R., Deering S., "IP Version 6 Addressing Architecture", 
        RFC 4291, February 2006. 
 
9.2 INFORMATIVE REFERENCES 
    
   [5]  Schulzrinne, H., "Dynamic Host Configuration Protocol (DHCP- 
        for-IPv4) Option for Session Initiation Protocol (SIP) 
        Servers", RFC 3361, August 2002. 
    
   [6]  Schulzrinne, H., Volz, B, "Dynamic Host Configuration Protocol 
        (DHCPv6) Option for Session Initiation Protocol (SIP) Servers", 
        RFC 3319, July 2003. 
    
   [7]  3GPP TS 24.008, v6.1.10, “Mobile radio interface layer 3 
        specification; Core Network Protocols” 
    
   [8]  3GPP TS 24.228, V5.13.0, “Signaling flows for the IP Multimedia 
        call control based on SIP and SDP” 
    
   [9]  3GPP TS 24.229, V7.2.0, “IP multimedia call control protocol 
        based on SIP and SDP” 
 
   [10] 3GPP TS 33.203, V7.0.0, “Access security for IP-based services” 
    
 
 
Bhatia, et al.          Expires - May 10, 2007               [Page 11] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
   [11] Dondeti, L., Hardjono, T., Haberman, B., “Security Requirements 
        of IPv6 Anycast”, draft-dondeti-ipv6-anycast-security-00.txt, 
        June 2001. 
 
    
10. AUTHORS' ADDRESSES 
    
       Ravideep Bhatia 
       600 North US Hwy 45 
       Motorola Inc. 
       Libertyville, IL 60048, USA 
    
       Phone: +1 847-523-0246 
       Email: ravideep.bhatia@motorola.com 
    
       Michael F. Coulas 
       Motorola Inc. 
       600 North US Hwy 45 
       Libertyville, IL 60048, USA 
    
       Phone: +1 847-523-1827 
       Email: mcoulas1@motorola.com 
    
    
11. IPR STATEMENTS 
    
   The IETF takes no position regarding the validity or scope of any 
   Intellectual Property Rights or other rights that might be claimed 
   to pertain to the implementation or use of the technology described 
   in this document or the extent to which any license under such 
   rights might or might not be available; nor does it represent that 
   it has made any independent effort to identify any such rights.  
   Information on the procedures with respect to rights in RFC 
   documents can be found in BCP 78 and BCP 79. 
    
   Copies of IPR disclosures made to the IETF Secretariat and any 
   assurances of licenses to be made available, or the result of an 
   attempt made to obtain a general license or permission for the use 
   of such proprietary rights by implementers or users of this   
   specification can be obtained from the IETF on-line IPR repository 
   at http://www.ietf.org/ipr. 
    
   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights that may cover technology that may be required to implement 
   this standard.  Please address the information to the IETF at    
   ietf-ipr@ietf.org. 
    
 
 
Bhatia, et al.          Expires - May 10, 2007               [Page 12] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
    
12. COPYRIGHT NOTICE 
    
   Copyright (C) The Internet Society (2006).  This document is subject 
   to the rights, licenses and restrictions contained in BCP 78, and 
   except as set forth therein, the authors retain all their rights. 
    
    
13. DISCLAIMER OF VALIDITY 
       
   This document and the information contained herein are provided on an 
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, (THE IETF TRUST) 
   AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, 
   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT 
   THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY 
   IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR 
   PURPOSE. 
    
    
14. ACKNOWLEDGEMENTS 
    
   Funding for the RFC Editor function is currently provided by the 
   Internet Society. 
























 
 
Bhatia, et al.          Expires - May 10, 2007               [Page 13] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
    
APPENDIX A: Anycast Addresses 
 
   The idea behind anycast addressing is that a client would like to 
   send packets to a server offering a particular service or 
   application, but it is not important which server is chosen. An 
   anycast address identifies a set of interfaces, but only one of the 
   interfaces, the nearest, receives the packet. The routing 
   infrastructure forwards packets that are addressed to an anycast 
   address to the nearest interface to which the anycast address is 
   assigned. To facilitate delivery, the routing infrastructure must 
   track the interfaces that have been assigned anycast addresses and 
   their distance in terms of routing metrics. 
    
   Anycast addresses are allocated from the unicast address space and 
   do not look any different from ordinary unicast addresses. By being 
   assigned to more than one interface, a unicast address becomes an 
   anycast address. 
    
Constructing IPv6 anycast address 
    
   The global unicast addresses are required to have 64-bit interface 
   identifiers in EUI-64 format. The interface identifier field is 
   formed from a 7-bit anycast identifier with the remaining highest 
   order bits filled with all ones, except for the universal/local bit 
   which is set to 0 (local) to indicate that the interface identifier 
   in the address is not globally unique. 
    
   The reserved subnet anycast address is constructed as follows: 
    
      --------------------------------------------------------------  
      |           64 bits          |      57 bits        |  7 bits  | 
      |           prefix           |  111111011…111111   |anycast ID| 
      --------------------------------------------------------------- 
     
    
   The current IPv6 reserved subnet anycast identifiers are listed 
   below. 
    
            Value       Description 
            -----       ----------- 
            0x7F        Reserved 
            0x7E        Mobile IPv6 Home Agents anycast 
            0x00        Reserved 
    
    
    
    
 
 
Bhatia, et al.          Expires - May 10, 2007               [Page 14] 
 
Internet-Draft SIP Proxy Discovery using Anycast Address November 2006 
 
 
    
    
APPENDIX B: Discovering prefix of the SIP proxy server network 
 
   Before using the IPv6 anycast address defined in this draft, a SIP 
   client needs to determine the IPv6 prefix that should be used for 
   constructing it. This prefix should belong to the SIP core network 
   that the SIP client wishes to access, i.e., the IP network where the 
   SIP proxy servers are available. For example, if the SIP client is 
   in mobile device that is roaming in a visited network, then the 
   prefix assigned to the mobile for accessing that network belongs to 
   the visited network. Whether or not that prefix can be used by the 
   SIP client to construct a SIP proxy server anycast address depends 
   on: 
    
  . Whether SIP proxy servers are available in the visited network. 
   
  . Even if SIP proxy servers are available, policy in the visited 
     network may not allow the visiting client to use the SIP proxy 
     servers of the network. 
      
   Therefore, a method is required whereby a SIP client can discover an 
   appropriate IPv6 prefix that can be used to construct the SIP proxy 
   server anycast address.  
    
   We are suggesting following methods to discover the prefix: 
 
Using assigned prefix 
    
   SIP client uses the same prefix as the IP address assigned to it by 
   the network. This will work if the SIP client has an IP connection 
   to same subnet as the outbound SIP proxy server that it wishes to 
   access. This will normally be the case for many SIP access scenarios 
   including IMS access. 
    
Using DNS query 
    
   We are suggesting that a fixed name, like “sip-proxy-anycast@<home-
   domain-name>”, could be defined for each domain. This name would 
   resolve to the prefix that would be used by SIP clients to construct 
   the anycast address for the requested domain.  
    
Using manual configuration 
    
   Through manual configuration (or static provisioning), a SIP client 
   can be indicated to use a particular prefix (e.g. prefix of home 
   network) irrespective of the location. 
 
 
 
Bhatia, et al.          Expires - May 10, 2007               [Page 15] 
 
