<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Sieve Notification Mechanism: mailto</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Sieve Notification Mechanism: mailto">
<meta name="keywords" content="Sieve, email, filter, notifications">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Sieve Working Group</td><td class="header">B. Leiba</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">IBM T.J. Watson Research Center</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">M. Haardt</td></tr>
<tr><td class="header">Expires: April 4, 2009</td><td class="header">freenet AG</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 01, 2008</td></tr>
</table></td></tr></table>
<h1><br />Sieve Notification Mechanism: mailto<br />draft-ietf-sieve-notify-mailto-09</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 4, 2009.</p>

<h3>Abstract</h3>

<p>
            This document describes a profile of the Sieve extension for
            notifications, to allow notifications to be sent by electronic mail.
          
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#overview">1.1.</a>&nbsp;
Overview<br />
<a href="#anchor1">1.2.</a>&nbsp;
Conventions used in this document<br />
<br />
<a href="#definition">2.</a>&nbsp;
Definition<br />
<a href="#tag-method">2.1.</a>&nbsp;
Notify parameter "method"<br />
<a href="#tag-test">2.2.</a>&nbsp;
Test notify_method_capability<br />
<a href="#tag-from">2.3.</a>&nbsp;
Notify tag ":from"<br />
<a href="#tag-importance">2.4.</a>&nbsp;
Notify tag ":importance"<br />
<a href="#tag-options">2.5.</a>&nbsp;
Notify tag ":options"<br />
<a href="#tag-message">2.6.</a>&nbsp;
Notify tag ":message"<br />
<a href="#otherdef">2.7.</a>&nbsp;
Other Definitions<br />
<a href="#autosubmit">2.7.1.</a>&nbsp;
The Auto-Submitted header field<br />
<br />
<a href="#examples">3.</a>&nbsp;
Examples<br />
<br />
<a href="#i18n">4.</a>&nbsp;
Internationalization Considerations<br />
<br />
<a href="#security">5.</a>&nbsp;
Security Considerations<br />
<br />
<a href="#iana-considerations">6.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor2">6.1.</a>&nbsp;
Registration of notification mechanism<br />
<a href="#anchor3">6.2.</a>&nbsp;
New registry for Auto-Submitted header field keywords<br />
<a href="#a-s-initial">6.3.</a>&nbsp;
Initial registration of Auto-Submitted header field keywords<br />
<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
<a href="#rfc.references2">7.2.</a>&nbsp;
Non-Normative References<br />
<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<a name="overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Overview</h3>

<p>
              The <a class='info' href='#Notify'>[Notify]<span> (</span><span class='info'>Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; December&nbsp;2007.</span><span>)</span></a> extension to the <a class='info' href='#Sieve'>[Sieve]<span> (</span><span class='info'>Guenther, P., Ed. and T. Showalter, Ed., &ldquo;Sieve: An Email Filtering Language,&rdquo; January&nbsp;2008.</span><span>)</span></a>
              mail filtering language is a framework for providing notifications
              by employing URIs to specify the notification mechanism.
              This document defines how <a class='info' href='#mailto'>[mailto]<span> (</span><span class='info'>Hoffman, P., Masinter, L., and J. Zawinski, &ldquo;The mailto URL scheme,&rdquo; July&nbsp;1998.</span><span>)</span></a> URIs are
              used to generate notifications by e-mail.
            
</p>
<p>
            
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Conventions used in this document</h3>

<p>
              Conventions for notations are as in <a class='info' href='#Sieve'>[Sieve]<span> (</span><span class='info'>Guenther, P., Ed. and T. Showalter, Ed., &ldquo;Sieve: An Email Filtering Language,&rdquo; January&nbsp;2008.</span><span>)</span></a> section 1.1, including
              the use of <a class='info' href='#Kwds'>[Kwds]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
            
</p>
<p>
              The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
              "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
              document are to be interpreted as described in <a class='info' href='#Kwds'>[Kwds]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
            
</p>
<a name="definition"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definition</h3>

<p>
            The mailto mechanism results in the sending of a new email message
            (a "notification message") to notify a recipient about a "triggering message".
          
</p>
<a name="tag-method"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Notify parameter "method"</h3>

<p>
              The mailto notification mechanism uses standard mailto URIs
              as specified in <a class='info' href='#mailto'>[mailto]<span> (</span><span class='info'>Hoffman, P., Masinter, L., and J. Zawinski, &ldquo;The mailto URL scheme,&rdquo; July&nbsp;1998.</span><span>)</span></a>.
            
</p>
<a name="tag-test"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Test notify_method_capability</h3>

<p>
              The notify_method_capability test for "online" may return "yes" or "no"
              only if the Sieve processor can determine with certainty whether or
              not the recipients of the notification message are online and logged in.
              Otherwise, the test returns "maybe" for this notification method.
            
</p>
<a name="tag-from"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Notify tag ":from"</h3>

<p>
              The :from tag overrides the default sender of
              the notification message.  "Sender", here, refers to the value
              used in the <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a> "From" header.  Implementations
              MAY also use this value in the <a class='info' href='#RFC2821'>[RFC2821]<span> (</span><span class='info'>Klensin, J., Ed., &ldquo;Simple Mail Transfer Protocol,&rdquo; April&nbsp;2001.</span><span>)</span></a> "MAIL FROM"
              command (the "envelope sender"), or they may prefer to establish a mailbox that receives
              bounces from notification messages.
            
</p>
<a name="tag-importance"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Notify tag ":importance"</h3>

<p>
              The :importance tag has no special meaning for this notification mechanism,
              and this specification puts no restriction on its use.
              Implementations MAY use the value of :importance to set a
              priority or importance indication on the notification message (perhaps
              a visual indication, or perhaps making use of one of the non-standard
              but commonly used message headers).
            
</p>
<a name="tag-options"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Notify tag ":options"</h3>

<p>
              This tag is not used by the mailto method.
            
</p>
<a name="tag-message"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.6"></a><h3>2.6.&nbsp;
Notify tag ":message"</h3>

<p>
              The value of this tag, if it is present, is used as the subject of the notification
              message, and overrides all other mechanisms for determining the subject (as described below).
              Its value SHOULD NOT normally be truncated, though it may be sensible
              to truncate an excessively long value.
            
</p>
<a name="otherdef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.7"></a><h3>2.7.&nbsp;
Other Definitions</h3>

<p>
              Because the receipt of an email message is generating another
              email message, implementations MUST take steps to avoid mail loops.
              The REQUIRED inclusion of an "Auto-Submitted:" field,
              as described in the message composition guidelines, will also help
              in loop detection and avoidance.
            
</p>
<p>
              Implementations SHOULD NOT trigger notifications for messages containing
              "Auto-Submitted:" header fields with any value other than "No".
            
</p>
<p>
              Implementations MUST allow messages with empty envelope
              senders to trigger notifications.
            
</p>
<p>
              Because this notification method uses a store-and-forward system
              for delivery of the notification message, the Sieve processor should not
              have a need to retry notifications.  Therefore, implementations of this method SHOULD
              use normal mechanisms for submitting SMTP messages and for retrying
              the initial submission.  Once the notification message is submitted, implementations
              MUST NOT resubmit it, as this is likely to result in multiple notifications, and
              increases the danger of message loops.
            
</p>
<p>
              The overall notification message is composed using the following
              guidelines (see <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a> for references to message header fields):
              </p>
<ul class="text">
<li>
                  If the envelope sender of the triggering message is
                  empty, the envelope sender of the notification
                  message MUST be empty as well, to avoid message loops.
				  Otherwise, the envelope sender of the notification
				  message SHOULD be set to the value of the ":from" parameter
				  to the notify action, if one is specified, has email address
				  syntax and is valid according to the implementation specific
				  security checks (see Section 3.3 of <a class='info' href='#Notify'>[Notify]<span> (</span><span class='info'>Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; December&nbsp;2007.</span><span>)</span></a>).
				  If ":from" is not specified or is not valid,
				  the envelope sender of the notification
				  message SHOULD be set either to the envelope "to" field from the triggering
				  message, as used by Sieve, or to an email address associated with
                  the notification system, at the
                  discretion of the implementation.  This MAY NOT be overridden
                  by a "from" URI header, and any such URI header MUST be ignored.
                
</li>
<li>
                  The envelope recipient(s) of the notification message SHOULD be set to the
                  address(es) specified in the URI (including any URI headers where the hname
                  is "to" or "cc").
                
</li>
<li>
                  The header field "Auto-Submitted: auto-notified" MUST be included in
                  the notification message (see <a class='info' href='#autosubmit'>Section&nbsp;2.7.1<span> (</span><span class='info'>The Auto-Submitted header field</span><span>)</span></a>).  This is to
                  reduce the likelihood of message loops, by tagging this as an automatically
                  generated message.  Among other results, it will inform other notification
                  systems not to generate further notifications.  mailto URI headers with
                  hname "auto-submitted" are considered unsafe and MUST be ignored.
                
</li>
<li>
				  The "From:" header field of the notification message
				  SHOULD be set to the value of the ":from" parameter
				  to the notify action, if one is specified, has email address
				  syntax and is valid according to the implementation specific
				  security checks (see Section 3.3 of <a class='info' href='#Notify'>[Notify]<span> (</span><span class='info'>Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; December&nbsp;2007.</span><span>)</span></a>).
				  If ":from" is not specified or is not valid,
				  the "From:" header field of the notification
				  message SHOULD be set either to the envelope "to" field from the triggering
				  message, as used by Sieve, or to an email address associated
                  with the notification system, at the
                  discretion of the implementation.  This MAY NOT be overridden
                  by a "from" URI header, and any such URI header MUST be ignored.
                
</li>
<li>
                  The "To:" header field of the notification message
                  SHOULD be set to the address(es) specified in the URI (including any URI headers
                  where the hname is "to").
                
</li>
<li>
                  The "Subject:" field of the notification message SHOULD contain the
                  value defined by the :message notify tag, as described in <a class='info' href='#Notify'>[Notify]<span> (</span><span class='info'>Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; December&nbsp;2007.</span><span>)</span></a>.
                  If there is no :message tag and there is a "subject" header on the
                  URI, then that value SHOULD be used.  If that is also absent,
                  the subject SHOULD be retained from the triggering message.
                  Note that Sieve <a class='info' href='#Variables'>[Variables]<span> (</span><span class='info'>Homme, K., &ldquo;Sieve Extension: Variables,&rdquo; January&nbsp;2008.</span><span>)</span></a> can be used to advantage here, as shown
                  in the example in <a class='info' href='#examples'>Section&nbsp;3<span> (</span><span class='info'>Examples</span><span>)</span></a>.
                
</li>
<li>
                  The "References:" field of the notification message MAY be set to refer to 
                  the triggering message, and MAY include references from the triggering message.
                
</li>
<li>
                  If the mailto URI contains a "body" header, the value of
                  that header SHOULD be used as the body of the notification message.
                  If there is no "body" header, it is up to the implementation
                  whether to leave the body empty or to use an excerpt of the original
                  message.
                
</li>
<li>
                  The "Received:" fields from the triggering message MAY be retained
                  in the notification message, as these could provide useful trace/history/diagnostic
                  information.  The "Auto-Submitted" header field MUST be placed above
                  these (see <a class='info' href='#autosubmit'>Section&nbsp;2.7.1<span> (</span><span class='info'>The Auto-Submitted header field</span><span>)</span></a>).
                  URI headers with hname "received" are considered unsafe, and MUST be ignored.
                
</li>
<li>
                  Other header fields of the notification message that are normally related to
                  an individual new message (such as "Message-ID" and "Date") are generated
                  for the notification message in the normal manner, and MUST NOT be copied
                  from the triggering message.  Any URI headers with
                  those names MUST be ignored.  Further, the "Date" header serves as the
                  notification timestamp defined in <a class='info' href='#Notify'>[Notify]<span> (</span><span class='info'>Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; December&nbsp;2007.</span><span>)</span></a>.
                
</li>
<li>
                  All other header fields of the notification message either are as
                  specified by URI headers, or have implementation-specific values;
                  their values are not defined here.  It is suggested that the
                  implementation capitalize the first letter of URI headers
                  and add a space character after the colon between the
                  mail header name and value when adding URI headers to the
                  message, to be consistent with common practice in email headers.
                
</li>
</ul><p>
            
</p>
<a name="autosubmit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.7.1"></a><h3>2.7.1.&nbsp;
The Auto-Submitted header field</h3>

<p>
                  The header field "Auto-Submitted: auto-notified" MUST be included in
                  the notification message (see <a class='info' href='#RFC3834'>[RFC3834]<span> (</span><span class='info'>Moore, K., &ldquo;Recommendations for Automatic Responses to Electronic Mail,&rdquo; August&nbsp;2004.</span><span>)</span></a>).
                  The "Auto-Submitted" header field is considered a "trace field", similar to
                  "Received" header fields (see <a class='info' href='#RFC2821'>[RFC2821]<span> (</span><span class='info'>Klensin, J., Ed., &ldquo;Simple Mail Transfer Protocol,&rdquo; April&nbsp;2001.</span><span>)</span></a>).  If the implementation
                  retains the "Received" fields from the triggering message (see above), the
                  "Auto-Submitted" field MUST be placed above those "Received" fields, serving as
                  a boundary between the ones from the triggering message and those that will be part
                  of the notification message.
                
</p>
<p>
                  The auto-notified Auto-Submitted field MAY include one or both of
                  the following OPTIONAL parameters:
                  </p>
<ul class="text">
<li>
                      owner-email - specifies an email address of the owner of the Sieve script
                      that generated this notification.  If specified, it might be used to identify
                      or contact the script's owner.
                      The parameter attribute is "owner-email", and
                      the parameter value is a quoted string containing an email address, as defined
                      by "addr-spec" in <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a>.
                      Example:
                      <br />

                      <br />

                      &nbsp; Auto-Submitted: auto-notified; owner-email="me@example.com"
                    
</li>
<li>
                      owner-token - specifies an opaque token that the administrative domain of
                      the owner of the Sieve script that generated this notification can identify
                      the owner with.  This might be used to allow identification of the owner
                      while protecting the owner's privacy.
                      The parameter attribute is "owner-token", and
                      the parameter value is as defined by "token" in <a class='info' href='#RFC3834'>[RFC3834]<span> (</span><span class='info'>Moore, K., &ldquo;Recommendations for Automatic Responses to Electronic Mail,&rdquo; August&nbsp;2004.</span><span>)</span></a>.
                      Example:
                      <br />

                      <br />

                      &nbsp; Auto-Submitted: auto-notified; owner-token=af3NN2pK5dDXI0W
                    
</li>
</ul><p>
                
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Examples</h3>

<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Triggering message (received by recipient@example.org):

   Return-Path: &lt;knitting-bounces@example.com&gt;
   Received: from mail.example.com by mail.example.org
     for &lt;recipient@example.org&gt;; Wed, 7 Dec 2005 05:08:02 -0500
   Received: from hobbies.example.com by mail.example.com
     for &lt;knitting@example.com&gt;; Wed, 7 Dec 2005 02:00:26 -0800
   Message-ID: &lt;1234567.89ABCDEF@example.com&gt;
   Date: Wed, 07 Dec 2005 10:59:19 +0100
   Precedence: list
   List-Id: Knitting Mailing List &lt;knitting.example.com&gt;
   Sender: knitting-bounces@example.com
   Errors-To: knitting-bounces@example.com
   From: "Jeff Smith" &lt;jeff@hobbies.example.com&gt;
   To: "Knitting Mailing List" &lt;knitting@example.com&gt;
   Subject: [Knitting] A new sweater

   I just finished a great new sweater!


Sieve script (run on behalf of recipient@example.org):

   require ["notify", "variables"];

   if header :contains "list-id" "knitting.example.com" {
     if header :matches "Subject" "[*] *" {
       notify :message "From ${1} list: ${2}"
           :importance "3"
           "mailto:0123456789@sms.example.net?to=backup@example.com";
     }
   }


Notification message:

   Auto-Submitted: auto-notified; owner-email="recipient@example.org"
   Received: from mail.example.com by mail.example.org
     for &lt;recipient@example.org&gt;; Wed, 7 Dec 2005 05:08:02 -0500
   Received: from hobbies.example.com by mail.example.com
     for &lt;knitting@example.com&gt;; Wed, 7 Dec 2005 02:00:26 -0800
   Date: Wed, 7 Dec 2005 05:08:55 -0500
   Message-ID: &lt;A2299BB.FF7788@example.org&gt;
   From: recipient@example.org
   To: 0123456789@sms.example.net, backup@example.com
   Subject: From Knitting list: A new sweater
</pre></div><p>

          
</p>
<p>
            Note that:
            </p>
<ul class="text">
<li>
                Fields such as "Message-ID:" and "Date:" were generated
                afresh for the notification message, and do not relate to
                the triggering message.
              
</li>
<li>
                Additional "Received:" fields will be added to the
                notification message in transit; the ones shown were
                copied from the triggering message.  New ones will be added above the
                "Auto-Submitted:" field.
              
</li>
<li>
                If this message should appear at the mail.example.org
                server again, the server can use the presence of a
                "mail.example.org" received line to recognize that.
                The Auto-Submitted header field is also present to tell
                the server to avoid sending another notification, and
                it includes an optional owner-email parameter for identification.
              
</li>
</ul><p>
          
</p>
<a name="i18n"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Internationalization Considerations</h3>

<p>
            This specification introduces no specific internationalization
            issues that are not already addressed
            in <a class='info' href='#Sieve'>[Sieve]<span> (</span><span class='info'>Guenther, P., Ed. and T. Showalter, Ed., &ldquo;Sieve: An Email Filtering Language,&rdquo; January&nbsp;2008.</span><span>)</span></a>
            and in <a class='info' href='#Notify'>[Notify]<span> (</span><span class='info'>Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; December&nbsp;2007.</span><span>)</span></a>.
          
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
            Sending a notification is comparable with forwarding mail to the
            notification recipient.  Care must be taken when forwarding mail
            automatically, to ensure that confidential information is not sent
            into an insecure environment.
          
</p>
<p>
            The automated sending of email messages exposes the system to
            mail loops, which can cause operational problems.  Implementations
            of this specification MUST protect themselves against mail loops; see <a class='info' href='#otherdef'>Section&nbsp;2.7<span> (</span><span class='info'>Other Definitions</span><span>)</span></a>
            for discussion of this and some suggestions.  Other possible mitigations for mail loops
            involve types of service limitations.  For example, the number of notifications generated
            for a single user might be limited to no more than, say, 30 in a 60-minute period.
            Of course, this technique presents its own problems, in that the actual rate limit must
            be selected carefully, to allow most legitimate situations in the given environment, and
            even with careful selection it's inevitable that there will be false positives -- and
            false negatives.
          
</p>
<p>
            Ultimately, human intervention may be necessary to re-enable notifications that have been
            disabled because a loop was detected, or to terminate a very slow loop that's under the
            automatic-detection radar.  Administrative mechanisms MUST be available to handle these
            sorts of situations.
          
</p>
<p>
            Additional security considerations are discussed
            in <a class='info' href='#Sieve'>[Sieve]<span> (</span><span class='info'>Guenther, P., Ed. and T. Showalter, Ed., &ldquo;Sieve: An Email Filtering Language,&rdquo; January&nbsp;2008.</span><span>)</span></a>
            and in <a class='info' href='#Notify'>[Notify]<span> (</span><span class='info'>Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; December&nbsp;2007.</span><span>)</span></a>.
          
</p>
<a name="iana-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Registration of notification mechanism</h3>

<p>
              The following template specifies the IANA registration of the
              Sieve notification mechanism specified in this document:
            
</p>
<p>
              To: iana@iana.org
              <br />

              Subject: Registration of new Sieve notification mechanism
              <br />

              Mechanism name: mailto
              <br />

              Mechanism URI: RFC2368
              <br />

              Mechanism-specific tags: none
              <br />

              Standards Track/IESG-approved experimental RFC number: this RFC
              <br />

              Person and email address to contact for further information:
              <br />

              &nbsp; &nbsp; Michael Haardt &lt;michael.haardt@freenet.ag&gt;
            
</p>
<p>
              This information should be added to the list of sieve notification
              mechanisms given on http://www.iana.org/assignments/sieve-notification.
            
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
New registry for Auto-Submitted header field keywords</h3>

<p>
              Because <a class='info' href='#RFC3834'>[RFC3834]<span> (</span><span class='info'>Moore, K., &ldquo;Recommendations for Automatic Responses to Electronic Mail,&rdquo; August&nbsp;2004.</span><span>)</span></a> does not define a registry for new
              keywords used in the Auto-Submitted header field, we define one here, to be 
              created as http://www.iana.org/assignments/auto-submitted-keywords.
              Keywords are registered using the "Specification Required" policy <a class='info' href='#IANA'>[IANA]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; October&nbsp;1998.</span><span>)</span></a>.
            
</p>
<p>
              This defines the template to be used to register new keywords.  Initial entries
              to this registry follow in <a class='info' href='#a-s-initial'>Section&nbsp;6.3<span> (</span><span class='info'>Initial registration of Auto-Submitted header field keywords</span><span>)</span></a>.
            
</p>
<p>
              To: iana@iana.org
              <br />

              Subject: Registration of new auto-submitted header field keyword
              <br />

              Keyword value: [the text value of the field]
              <br />

              Description: [a brief explanation of the purpose of this value]
              <br />

              Parameters: [list any keyword-specific parameters, specify their meanings,
              specify whether they are required or optional; use "none" if there are none]
              <br />

              Standards Track/IESG-approved experimental RFC number: [identifies
              the specification that defines the value being registered]
              <br />

              Contact: [name and email address to contact for further information]
            
</p>
<a name="a-s-initial"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Initial registration of Auto-Submitted header field keywords</h3>

<p>
              The following are the initial keywords to be registered for the Auto-Submitted
              header field, to be entered in http://www.iana.org/assignments/auto-submitted-keywords.
            
</p>
<p>
              Keyword value: no
              <br />

              Description: Indicates that a message was NOT automatically generated,
              but was created by a human.  It is the equivalent to the absence of an
              Auto-Submitted header altogether.
              <br />

              Parameters: none
              <br />

              Standards Track/IESG-approved experimental RFC number: RFC3834
              <br />

              Contact: Keith Moore &lt;moore@network-heretics.com&gt;
            
</p>
<p>
              Keyword value: auto-generated
              <br />

              Description: Indicates that a message was generated by an automatic
              process, and is not a direct response to another message.
              <br />

              Parameters: none
              <br />

              Standards Track/IESG-approved experimental RFC number: RFC3834
              <br />

              Contact: Keith Moore &lt;moore@network-heretics.com&gt;
            
</p>
<p>
              Keyword value: auto-replied
              <br />

              Description: Indicates that a message was automatically generated as a 
              direct response to another message.
              <br />

              Parameters: none
              <br />

              Standards Track/IESG-approved experimental RFC number: RFC3834
              <br />

              Contact: Keith Moore &lt;moore@network-heretics.com&gt;
            
</p>
<p>
              Keyword value: auto-notified
              <br />

              Description: Indicates that a message was generated by a Sieve
              notification system.
              <br />

              Parameters: owner-email, owner-token.  Both optional, both refer to the
              owner of the Sieve script that generated this message.  See the relevant
              RFC for details.
              <br />

              Standards Track/IESG-approved experimental RFC number: this RFC
              <br />

              Contact: Michael Haardt &lt;michael.haardt@freenet.ag&gt;
            
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Kwds">[Kwds]</a></td>
<td class="author-text">Bradner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; RFC&nbsp;2119, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="Notify">[Notify]</a></td>
<td class="author-text">Melnikov, A., Ed., Leiba, B., Ed., Segmuller, W., and T. Martin, &ldquo;Sieve Extension: Notifications,&rdquo; work in progress,&nbsp;draft-ietf-sieve-notify, December&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2822">[RFC2822]</a></td>
<td class="author-text">Resnick, P., Ed., &ldquo;<a href="http://tools.ietf.org/html/rfc2822">Internet Message Format</a>,&rdquo; RFC&nbsp;2822, April&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3834">[RFC3834]</a></td>
<td class="author-text">Moore, K., &ldquo;<a href="http://tools.ietf.org/html/rfc3834">Recommendations for Automatic Responses to Electronic Mail</a>,&rdquo; RFC&nbsp;3834, August&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="Sieve">[Sieve]</a></td>
<td class="author-text">Guenther, P., Ed. and T. Showalter, Ed., &ldquo;<a href="http://tools.ietf.org/html/rfc5228">Sieve: An Email Filtering Language</a>,&rdquo; RFC&nbsp;5228, January&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="mailto">[mailto]</a></td>
<td class="author-text">Hoffman, P., Masinter, L., and J. Zawinski, &ldquo;<a href="http://tools.ietf.org/html/rfc2368">The mailto URL scheme</a>,&rdquo; RFC&nbsp;2368, July&nbsp;1998.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Non-Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="IANA">[IANA]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc2434">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;2434, October&nbsp;1998.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2821">[RFC2821]</a></td>
<td class="author-text">Klensin, J., Ed., &ldquo;<a href="http://tools.ietf.org/html/rfc2821">Simple Mail Transfer Protocol</a>,&rdquo; RFC&nbsp;2821, April&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="Variables">[Variables]</a></td>
<td class="author-text">Homme, K., &ldquo;<a href="http://tools.ietf.org/html/rfc5229">Sieve Extension: Variables</a>,&rdquo; RFC&nbsp;5229, January&nbsp;2008.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Barry Leiba</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">IBM T.J. Watson Research Center</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">19 Skyline Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hawthorne, NY  10532</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 914 784 7941</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:leiba@watson.ibm.com">leiba@watson.ibm.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Michael Haardt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">freenet AG</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Willstaetter Str. 13</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Duesseldorf, NRW  40549</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 241 53087 520</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:michael.haardt@freenet.ag">michael.haardt@freenet.ag</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
