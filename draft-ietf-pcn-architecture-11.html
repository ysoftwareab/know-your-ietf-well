<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Pre-Congestion Notification (PCN)
    Architecture</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Pre-Congestion Notification (PCN)
    Architecture">
<meta name="keywords" content="Quality of Service, QoS, Congestion Control, Differentiated Services, Admission Control, Termination">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Congestion and Pre-Congestion</td><td class="header">Philip. Eardley (Editor)</td></tr>
<tr><td class="header">Notification Working
    Group</td><td class="header">BT</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">April 07, 2009</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">&nbsp;</td></tr>
<tr><td class="header">Expires: October 9, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Pre-Congestion Notification (PCN)
    Architecture<br />draft-ietf-pcn-architecture-11</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008. The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on October 9, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document describes a general architecture for flow admission and
      termination based on pre-congestion information in order to protect the
      quality of service of established inelastic flows within a single
      Diffserv domain.
</p>
<h3>Status</h3>

<p>
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Overview of PCN<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Example use case for PCN <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.3.</a>&nbsp;
Applicability of PCN<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">1.4.</a>&nbsp;
Documents about PCN<br />
<a href="#anchor6">2.</a>&nbsp;
Terminology<br />
<a href="#anchor7">3.</a>&nbsp;
High-level functional architecture<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.1.</a>&nbsp;
Flow admission<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.2.</a>&nbsp;
Flow termination<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.3.</a>&nbsp;
Flow admission and/or flow termination when there are only two PCN encoding states<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.4.</a>&nbsp;
Information transport<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.5.</a>&nbsp;
PCN-traffic<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.6.</a>&nbsp;
Backwards compatibility<br />
<a href="#detailed-arch">4.</a>&nbsp;
Detailed Functional architecture<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">4.1.</a>&nbsp;
PCN-interior-node functions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">4.2.</a>&nbsp;
PCN-ingress-node functions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">4.3.</a>&nbsp;
PCN-egress-node functions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">4.4.</a>&nbsp;
Admission control functions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">4.5.</a>&nbsp;
Flow termination functions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.6.</a>&nbsp;
Addressing<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">4.7.</a>&nbsp;
Tunnelling<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">4.8.</a>&nbsp;
Fault handling<br />
<a href="#anchor22">5.</a>&nbsp;
Operations and Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">5.1.</a>&nbsp;
Configuration Operations and Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">5.1.1.</a>&nbsp;
System options<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">5.1.2.</a>&nbsp;
Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">5.2.</a>&nbsp;
Performance &amp; Provisioning Operations and Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">5.3.</a>&nbsp;
Accounting Operations and Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">5.4.</a>&nbsp;
Fault Operations and Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">5.5.</a>&nbsp;
Security Operations and Management<br />
<a href="#anchor30">6.</a>&nbsp;
Applicability of PCN<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">6.1.</a>&nbsp;
Benefits<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#deployment-scenarios">6.2.</a>&nbsp;
Deployment scenarios<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor32">6.3.</a>&nbsp;
Assumptions and constraints on scope<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor33">6.3.1.</a>&nbsp;
Assumption 1: Trust and support of PCN - controlled environment<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor34">6.3.2.</a>&nbsp;
Assumption 2: Real-time applications<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor35">6.3.3.</a>&nbsp;
Assumption 3: Many flows and additional load<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor36">6.3.4.</a>&nbsp;
Assumption 4: Emergency use out of scope<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor37">6.4.</a>&nbsp;
Challenges<br />
<a href="#anchor38">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor39">8.</a>&nbsp;
Security considerations<br />
<a href="#anchor40">9.</a>&nbsp;
Conclusions<br />
<a href="#anchor41">10.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor42">11.</a>&nbsp;
Comments Solicited (to be removed by RFC Editor)<br />
<a href="#anchor43">12.</a>&nbsp;
Changes (to be removed by RFC Editor)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor44">12.1.</a>&nbsp;
Changes from -10 to -11<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor45">12.2.</a>&nbsp;
Changes from -09 to -10<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor46">12.3.</a>&nbsp;
Changes from -08 to -09<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor47">12.4.</a>&nbsp;
Changes from -07 to -08<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor48">12.5.</a>&nbsp;
Changes from -06 to -07<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor49">12.6.</a>&nbsp;
Changes from -05 to -06<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor50">12.7.</a>&nbsp;
Changes from -04 to -05<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor51">12.8.</a>&nbsp;
Changes from -03 to -04<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor52">12.9.</a>&nbsp;
Changes from -02 to -03<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor53">12.10.</a>&nbsp;
Changes from -01 to -02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor54">12.11.</a>&nbsp;
Changes from -00 to -01<br />
<a href="#rfc.references1">13.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">13.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">13.2.</a>&nbsp;
Informative References<br />
<a href="#anchor57">Appendix&nbsp;A.</a>&nbsp;
Possible future work items<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor58">A.1.</a>&nbsp;
Probing<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor59">A.1.1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor60">A.1.2.</a>&nbsp;
Probing functions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor61">A.1.3.</a>&nbsp;
Discussion of rationale for probing, its downsides and open issues<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Overview of PCN</h3>

<p>The objective of Pre-Congestion Notification (PCN) is to protect
        the quality of service (QoS) of inelastic flows within a Diffserv
        domain, in a simple, scalable and robust fashion. Two mechanisms are
        used: admission control, to decide whether to admit or block a new
        flow request, and (in abnormal circumstances) flow termination to
        decide whether to terminate some of the existing flows. To achieve
        this, the overall rate of PCN traffic is metered on every link in the
        domain, and PCN packets are appropriately marked when certain
        configured rates are exceeded. These configured rates are below the
        rate of the link thus providing notification to boundary nodes about
        overloads before any congestion occurs (hence &ldquo;pre-congestion
        notification&rdquo;). The level of marking allows boundary nodes to
        make decisions about whether to admit or terminate.
</p>
<p>Within a PCN-domain, PCN-traffic is forwarded in a prioritised
        Diffserv traffic class. Every link in the PCN-domain is configured
        with two rates (PCN-threshold-rate and PCN-excess-rate). If the
        overall rate of PCN-traffic on a link exceeds a configured rate, then
        a PCN-interior-node marks PCN-packets appropriately. The
        PCN-egress-nodes use this information to make admission control and
        flow termination decisions. Flow admission control determines whether
        a new flow can be admitted without any impact, in normal
        circumstances, on the QoS of existing PCN-flows. However, in abnormal
        circumstances, for instance a disaster affecting multiple nodes and
        causing traffic re-routes, then the QoS on existing PCN-flows may
        degrade even though care was exercised when admitting those flows. The
        flow termination mechanism removes sufficient traffic in order to
        protect the QoS of the remaining PCN-flows. All PCN-boundary-nodes and
        PCN-interior-nodes are PCN-enabled and are trusted for correct PCN
        operation. PCN-ingress-nodes police arriving packets to check that
        they are part of an admitted PCN-flow that keeps within its agreed
        flowspec, and hence they maintain per flow state. PCN-interior-nodes
        meter all PCN traffic, and hence do not need to maintain any per flow
        state. Decisions about flow admission and termination are made for a
        particular pair of PCN-boundary-nodes, and hence PCN-egress-nodes must
        be able to identify which PCN-ingress-node sent each PCN-packet.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Example use case for PCN </h3>

<p>This section outlines an end-to-end QoS scenario that uses the PCN
        mechanisms within one domain. The parts outside the PCN-domain are out
        of scope for PCN, but are included to help clarify how PCN could be
        used. Note that the section is only an example &ndash; in particular
        there are other possibilities (see later) for how the
        PCN-boundary-nodes perform admission control and flow termination.
</p>
<p>As a fundamental building block, each link of the PCN-domain
        operates a <a class='info' href='#PCN08-2'>[PCN08&#8209;2]<span> (</span><span class='info'>, &ldquo;Metering and marking behaviour of PCN-nodes (work in           progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a> (Figure 1): </p>
<ul class="text">
<li>Threshold meter and marker, which marks all PCN-packets if the
            PCN traffic rate is greater than a first configured rate, the
            PCN-threshold-rate. The admission control mechanism limits the
            PCN-traffic on each link to *roughly* its PCN-threshold-rate.
</li>
<li>Excess traffic meter and marker, which marks a proportion of
            PCN-packets, such that the amount marked equals the traffic rate
            in excess of a second configured rate, the PCN-excess-rate. The
            flow termination mechanism limits the PCN-traffic on each link to
            *roughly* its PCN-excess-rate.
</li>
</ul><p>Overall the aim is to give an &ldquo;early warning&rdquo; of
        potential congestion before there is any significant build-up of
        PCN-packets in the queue on the link; we term this
        &ldquo;pre-congestion notification&rdquo; by analogy with ECN
        (Explicit Congestion Notification, <a class='info' href='#RFC3168'>[RFC3168]<span> (</span><span class='info'>Ramakrishnan, K., Floyd, S., and D. Black, &ldquo;The Addition of Explicit Congestion Notification (ECN) to IP,&rdquo; September&nbsp;2001.</span><span>)</span></a>).
        Note that the link only meters the bulk PCN-traffic (and not per
        flow). 
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                          ==   Metering &amp;    ==
                          ==Marking behaviour==       ==PCN mechanisms==
                       ^
           Rate of     ^
      PCN-traffic on   |
     bottleneck link   |
                       |
                       |       Some pkts                  Terminate some
                       |  excess-traffic-marked           admitted flows
                       |           &amp;                            &amp;
                       |     Rest of pkts                Block new flows
                       |   threshold-marked
                       |
     PCN-excess-rate  -|------------------------------------------------
(=PCN-supportable-rate)|
                       |       All pkts                  Block new flows
                       |   threshold-marked
                       |
   PCN-threshold-rate -|------------------------------------------------
 (=PCN-admissible-rate)|
                       |        No pkts                  Admit new flows
                       |      PCN-marked
                       |
</pre></div>
<p>Figure 1: Example of how the PCN admission control and
            flow termination mechanisms operate as the rate of PCN-traffic
            increases.
</p>

<p>The two forms of PCN-marking are indicated by setting of the ECN
        and DSCP (Differentiated Services Codepoint <a class='info' href='#RFC2474'>[RFC2474]<span> (</span><span class='info'>Nichols, K., Blake, S., Baker, F., and D. Black, &ldquo;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers,&rdquo; December&nbsp;1998.</span><span>)</span></a>) fields to known values, which are configured
        for the domain. Thus the PCN-egress-nodes can monitor the PCN-markings
        in order to measure the severity of pre-congestion. In addition, the
        PCN-ingress-nodes need to set the ECN and DSCP fields to that
        configured for an unmarked PCN-packet, and the PCN-egress-nodes need
        to revert to values appropriate outside the PCN-domain.
</p>
<p>For admission control, we assume end-to-end RSVP signalling
        (Resource Reservation Protocol) <a class='info' href='#RFC2205'>[RFC2205]<span> (</span><span class='info'>Braden, B., Zhang, L., Berson, S., Herzog, S., and S. Jamin, &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a>) in
        this example. The PCN-domain is a single RSVP hop. The PCN-domain
        operates Diffserv, and we assume that PCN-traffic is scheduled with
        the expedited forwarding (EF) per-hop behaviour, <a class='info' href='#RFC3246'>[RFC3246]<span> (</span><span class='info'>Davie, B., Charny, A., Bennet, J., Benson, K., Le Boudec, J., Courtney, W., Davari, S., Firoiu, V., and D. Stiliadis, &ldquo;An Expedited Forwarding PHB (Per-Hop Behavior),&rdquo; March&nbsp;2002.</span><span>)</span></a>. Hence the overall solution is in line with
        the "IntServ over Diffserv" framework defined in <a class='info' href='#RFC2998'>[RFC2998]<span> (</span><span class='info'>Bernet, Y., Ford, P., Yavatkar, R., Baker, F., Zhang, L., Speer, M., Braden, R., Davie, B., Wroclawski, J., and E. Felstaine, &ldquo;A Framework for Integrated Services Operation over Diffserv Networks,&rdquo; November&nbsp;2000.</span><span>)</span></a>, as shown in Figure 2. 
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> ___    ___    _______________________________________    ____    ___
|   |  |   |  | PCN-             PCN-            PCN- |  |    |  |   |
|   |  |   |  |ingress         interior         egress|  |    |  |   |
|   |  |   |  | -node           -nodes          -node |  |    |  |   |
|   |  |   |  |-------+  +-------+  +-------+  +------|  |    |  |   |
|   |  |   |  |       |  | PCN   |  | PCN   |  |      |  |    |  |   |
|   |..|   |..|Ingress|..|meter &amp;|..|meter &amp;|..|Egress|..|    |..|   |
|   |..|   |..|Policer|..|marker |..|marker |..|Meter |..|    |..|   |
|   |  |   |  |-------+  +-------+  +-------+  +------|  |    |  |   |
|   |  |   |  |  \                                 /  |  |    |  |   |
|   |  |   |  |   \                               /   |  |    |  |   |
|   |  |   |  |    \  PCN-feedback-information   /    |  |    |  |   |
|   |  |   |  |     \  (for admission control)  /     |  |    |  |   |
|   |  |   |  |      --&lt;-----&lt;----&lt;----&lt;-----&lt;--      |  |    |  |   |
|   |  |   |  |       PCN-feedback-information        |  |    |  |   |
|   |  |   |  |        (for flow termination)         |  |    |  |   |
|___|  |___|  |_______________________________________|  |____|  |___|

Sx     Access               PCN-domain                   Access    Rx
End    Network                                          Network   End
Host                                                              Host
                &lt;---- signalling across PCN-domain---&gt;
              (for admission control &amp; flow termination)

&lt;-------------------end-to-end QoS signalling protocol---------------&gt;

</pre></div>
<p>Figure 2: Example of possible overall QoS
            architecture
</p>

<p>A source wanting to start a new QoS flow sends an RSVP PATH
        message. Normal hop-by-hop IntServ <a class='info' href='#RFC1633'>[RFC1633]<span> (</span><span class='info'>Braden, B., Clark, D., and S. Shenker, &ldquo;Integrated Services in the Internet Architecture: an Overview,&rdquo; June&nbsp;1994.</span><span>)</span></a> is
        used outside the PCN-domain (we assume successfully). The PATH message
        travels across the PCN-domain; the PCN-egress-node reads the PHOP
        object to discover the specific PCN-ingress-node for this flow. The
        RESV message travels back from the receiver, and triggers the
        PCN-egress-node to check what fraction of the PCN-traffic, from the
        relevant PCN-ingress-node, is currently being threshold-marked. It
        adds an object with this information onto the RESV message, and hence
        the PCN-ingress-node learns about the level of pre-congestion on the
        path. If this level is below some threshold, then the PCN-ingress-node
        admits the new flow into the PCN-domain. The RSVP message triggers the
        PCN-ingress-node to install two normal IntServ items: five-tuple
        information, so that it can subsequently identify data packets that
        are part of a previously admitted PCN-flow; and a traffic profile, so
        that it can police the flow to within its contract. Similarly, the
        RSVP message triggers the PCN-egress-node to install five-tuple and
        PHOP information, so that it can identify packets as part of a flow
        from a specific PCN-ingress-node.
</p>
<p>The flow termination mechanism may happen when some abnormal
        circumstances causes a link to become so pre-congested that it
        excess-traffic-marks (and perhaps also drops) PCN-packets. In this
        example, when a PCN-egress-node observes such a packet it then, with
        some probability, terminates this PCN-flow; the probability is
        configured low enough to avoid over-termination and high enough to
        ensure rapid termination of enough flows. It also informs the relevant
        PCN-ingress-node, so it can block any further traffic on the
        terminated flow.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Applicability of PCN</h3>

<p>Compared with alternative QoS mechanisms, PCN has certain
        advantages and disadvantages that will make it appropriate in
        particular scenarios. For example, compared with hop-by-hop IntServ
        <a class='info' href='#RFC1633'>[RFC1633]<span> (</span><span class='info'>Braden, B., Clark, D., and S. Shenker, &ldquo;Integrated Services in the Internet Architecture: an Overview,&rdquo; June&nbsp;1994.</span><span>)</span></a>, PCN only requires per flow state at
        the PCN-ingress-nodes. Compared with the Diffserv architecture <a class='info' href='#RFC2475'>[RFC2475]<span> (</span><span class='info'>Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z., and W. Weiss, &ldquo;An Architecture for Differentiated Services,&rdquo; December&nbsp;1998.</span><span>)</span></a>, an operator needs to be less accurate and/or
        conservative in its prediction of the traffic matrix. The Diffserv
        architecture&rsquo;s traffic conditioning agreements are static and
        coarse; they are defined at subscription time, and they are used (for
        instance) to limit the total traffic at each ingress of the domain
        regardless of the egress for the traffic. On the other hand, PCN
        firstly uses admission control based on measurements of the current
        conditions between the specific pair of PCN-boundary-nodes, and
        secondly, in case of a disaster, PCN protects the QoS of most flows by
        terminating a few selected ones.
</p>
<p>PCN&rsquo;s admission control is a measurement-based mechanism.
        Hence it assumes that the present is a reasonable prediction of the
        future: the network conditions are measured at the time of a new flow
        request, but the actual network performance must be acceptable during
        the call some time later. Hence PCN is unsuitable in several
        circumstances: </p>
<ul class="text">
<li>If the source adapts its bit rate dependent on the level of
            pre-congestion, because then the aggregate traffic might become
            unstable. The assumption in this document is that PCN-packets come
            from real time applications generating inelastic traffic, such as
            the Controlled Load Service, <a class='info' href='#RFC2211'>[RFC2211]<span> (</span><span class='info'>Wroclawski, J., &ldquo;Specification of the Controlled-Load Network Element Service,&rdquo; September&nbsp;1997.</span><span>)</span></a>.
</li>
<li>If a potential bottleneck link has capacity for only a few
            flows, because then a new flow can move a link directly from no
            pre-congestion to being so overloaded that it has to drop packets.
            The assumption in this document is that this isn&rsquo;t a
            problem.
</li>
<li>If there is the danger of a &ldquo;flash crowd&rdquo; in which
            many admission requests arrive within the reaction time of
            PCN&rsquo;s admission mechanism, because then they all might get
            admitted and so overload the network. The assumption in this
            document is that, if it is necessary, then flash crowds are
            limited in some fashion beyond the scope of this document, for
            instance by rate limiting QoS requests.
</li>
</ul>

<p>The applicability of PCN is discussed further in Section 6.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
Documents about PCN</h3>

<p>The purpose of this document is to describe a general architecture
        for flow admission and termination based on (pre-) congestion
        information in order to protect the quality of service of flows within
        a Diffserv domain. This document describes the PCN architecture at a
        high level (Section 3) and in more detail (Section 4). It also defines
        some terminology, and considerations about operations and management,
        and security. Section 6 considers the applicability of PCN in more
        detail, covering its benefits, deployment scenarios, assumptions and
        potential challenges. The Appendix covers some potential future work
        items.
</p>
<p>Aspects of PCN are also documented elsewhere:</p>
<ul class="text">
<li>Metering and marking: <a class='info' href='#PCN08-2'>[PCN08&#8209;2]<span> (</span><span class='info'>, &ldquo;Metering and marking behaviour of PCN-nodes (work in           progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>
            standardises threshold metering and marking, and excess traffic
            metering and marking. A PCN-packet may be marked, depending on the
            metering results.
</li>
<li>Encoding: the "baseline" encoding is described in <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>, which standardises two PCN encoding
            states (PCN-marked and not PCN-marked), whilst (experimental)
            extensions to the baseline encoding can provide three encoding
            states (threshold-marked, excess-traffic-marked, not PCN-marked,
            or perhaps further encoding states as suggested in <a class='info' href='#Westberg08'>[Westberg08]<span> (</span><span class='info'>, &ldquo;LC-PCN: The Load Control PCN Solution (work in           progress),&rdquo; November&nbsp;2008.</span><span>)</span></a>). Section 3.6 considers backwards
            compatability of PCN encoding with ECN.
</li>
<li>PCN-boundary-node behaviour: how the PCN-boundary-nodes convert
            the PCN-markings into decisions about flow admission and flow
            termination, as described in Informational documents. The concept
            is that the standardised metering and marking by PCN-nodes allows
            several possible PCN-boundary-node behaviours. A number of
            possibilities are outlined in this document; detailed descriptions
            and comparisons are in <a class='info' href='#Charny07-1'>[Charny07&#8209;1]<span> (</span><span class='info'>, &ldquo;Comparison of Proposed PCN Approaches (work in           progress),&rdquo; November&nbsp;2007.</span><span>)</span></a> and <a class='info' href='#Menth08-3'>[Menth08&#8209;3]<span> (</span><span class='info'>, &ldquo;PCN-Based Admission Control and Flow Termination,&rdquo; 2008.</span><span>)</span></a>.
</li>
<li>Signalling between PCN-boundary&ndash;nodes: Signalling is
            needed to transport PCN-feedback-information between the
            PCN-boundary-nodes (in the example above, this is the fraction of
            traffic, between the pair of PCN-boundary-nodes, that is
            PCN-marked). The exact details vary for different
            PCN-boundary-node behaviours, and so should be described in those
            documents. It may require an extension to the signalling protocol
            - standardisation is out of scope of the PCN WG.
</li>
<li>The interface by which the PCN-boundary-nodes learn
            identification information about the admitted flows: the exact
            requirements vary for different PCN-boundary-node behaviours and
            for different signalling protocols, and so should be described in
            those documents. They will be similar to those described in the
            example above &ndash; a PCN-ingress-node needs to be able to
            identify that a packet is part of a previously admitted flow
            (typically from its five-tuple) and each PCN-boundary-node needs
            to be able to identify the other PCN-boundary-node for the
            flow.
</li>
</ul>

<p>
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p></p>
<ul class="text">
<li>PCN-domain: a PCN-capable domain; a contiguous set of PCN-enabled
          nodes that perform Diffserv scheduling <a class='info' href='#RFC2474'>[RFC2474]<span> (</span><span class='info'>Nichols, K., Blake, S., Baker, F., and D. Black, &ldquo;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers,&rdquo; December&nbsp;1998.</span><span>)</span></a>; the complete set of PCN-nodes that in
          principle can, through PCN-marking packets, influence decisions
          about flow admission and termination for the PCN-domain; the
          PCN-domain includes the PCN-egress-nodes, which measure these
          PCN-marks, and the PCN-ingress-nodes.
</li>
<li>PCN-boundary-node: a PCN-node that connects one PCN-domain to a
          node either in another PCN-domain or in a non PCN-domain.
</li>
<li>PCN-interior-node: a node in a PCN-domain that is not a
          PCN-boundary-node.
</li>
<li>PCN-node: a PCN-boundary-node or a PCN-interior-node
</li>
<li>PCN-egress-node: a PCN-boundary-node in its role in handling
          traffic as it leaves a PCN-domain.
</li>
<li>PCN-ingress-node: a PCN-boundary-node in its role in handling
          traffic as it enters a PCN-domain.
</li>
<li>PCN-traffic, PCN-packets, PCN-BA: a PCN-domain carries traffic of
          different Diffserv behaviour aggregates (BAs) <a class='info' href='#RFC2474'>[RFC2474]<span> (</span><span class='info'>Nichols, K., Blake, S., Baker, F., and D. Black, &ldquo;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers,&rdquo; December&nbsp;1998.</span><span>)</span></a>. The PCN-BA uses the PCN mechanisms to
          carry PCN-traffic and the corresponding packets are PCN-packets. The
          same network will carry traffic of other Diffserv BAs. The PCN-BA is
          distinguished by a combination of the Diffserv codepoint (DSCP) and
          ECN fields.
</li>
<li>PCN-flow: the unit of PCN-traffic that the PCN-boundary-node
          admits (or terminates); the unit could be a single microflow (as
          defined in <a class='info' href='#RFC2474'>[RFC2474]<span> (</span><span class='info'>Nichols, K., Blake, S., Baker, F., and D. Black, &ldquo;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers,&rdquo; December&nbsp;1998.</span><span>)</span></a>) or some identifiable
          collection of microflows.
</li>
<li>Pre-congestion: a condition of a link within a PCN-domain such
          that the PCN-node performs PCN-marking, in order to provide an
          "early warning" of potential congestion before there is any
          significant build-up of PCN-packets in the real queue. (Hence, by
          analogy with ECN we call our mechanism Pre-Congestion
          Notification.)
</li>
<li>PCN-marking: the process of setting the header in a PCN-packet
          based on defined rules, in reaction to pre-congestion; either
          threshold-marking or excess-traffic-marking.
</li>
<li>PCN-threshold-rate: a reference rate configured for each link in
          the PCN-domain, which is lower than the PCN-excess-rate. It is used
          by a metering behaviour that determines whether a packet should be
          PCN-marked with a first encoding, "threshold-marked".
</li>
<li>Threshold-metering: a metering behaviour that, if the PCN-traffic
          exceeds the PCN-threshold-rate, indicates that all PCN-traffic is to
          be threshold-marked.
</li>
<li>Threshold-marking: the setting of the header in a PCN-packet to a
          specific encoding, based on indications from the
          threshold-meter.
</li>
<li>PCN-excess-rate: a reference rate configured for each link in the
          PCN-domain, which is higher than the PCN-threshold-rate. It is used
          by a metering behaviour that determines whether a packet should be
          PCN-marked with a second encoding, "excess-traffic-marked".
</li>
<li>Excess-traffic-metering: a metering behaviour that, if the
          PCN-traffic exceeds the PCN-excess-rate, indicates that the amount
          of PCN-traffic to be PCN-marked is equal to the amount in excess of
          the PCN-excess-rate.
</li>
<li>Excess-traffic-marking: the setting of the header in a PCN-packet
          to a specific encoding, based on indications from the
          excess-traffic-meter.
</li>
<li>PCN-colouring: the process of setting the header in a PCN-packet
          by a PCN-boundary-node; performed by a PCN-ingress-node so that
          PCN-nodes can easily identify PCN-packets; performed by a
          PCN-egress-node so that the header is appropriate for nodes beyond
          the PCN-domain.
</li>
<li>Ingress-egress-aggregate: The collection of PCN-packets from all
          PCN-flows that travel in one direction between a specific pair of
          PCN-boundary-nodes.
</li>
<li>PCN-feedback-information: information signalled by a
          PCN-egress-node to a PCN-ingress-node (or a central control node),
          which is needed for the flow admission and flow termination
          mechanisms.
</li>
<li>PCN-admissible-rate: the rate of PCN-traffic on a link up to
          which PCN admission control should accept new PCN-flows.
</li>
<li>PCN-supportable-rate: the rate of PCN-traffic on a link down to
          which PCN flow termination should, if necessary, terminate already
          admitted PCN-flows.
</li>
</ul>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
High-level functional architecture</h3>

<p>The high-level approach is to split
      functionality between:
</p>
<p></p>
<ul class="text">
<li>PCN-interior-nodes 'inside' the PCN-domain, which monitor their
          own state of pre-congestion and mark PCN-packets as appropriate.
          They are not flow-aware, nor aware of ingress-egress-aggregates. The
          functionality is also done by PCN-ingress-nodes for their outgoing
          interfaces (ie those 'inside' the PCN-domain).
</li>
<li>PCN-boundary-nodes at the edge of the PCN-domain, which control
          admission of new PCN-flows and termination of existing PCN-flows,
          based on information from PCN-interior-nodes. This information is in
          the form of the PCN-marked data packets (which are intercepted by
          the PCN-egress-nodes) and not signalling messages. Generally
          PCN-ingress-nodes are flow-aware.
</li>
</ul>

<p>The aim of this split is to keep the bulk of the network simple,
      scalable and robust, whilst confining policy, application-level and
      security interactions to the edge of the PCN-domain. For example the
      lack of flow awareness means that the PCN-interior-nodes don't care
      about the flow information associated with PCN-packets, nor do the
      PCN-boundary-nodes care about which PCN-interior-nodes its
      ingress-egress-aggregates traverse.
</p>
<p>In order to generate information about the current state of the
      PCN-domain, each PCN-node PCN-marks packets if it is "pre-congested".
      Exactly when a PCN-node decides if it is "pre-congested" (the algorithm)
      and exactly how packets are "PCN-marked" (the encoding) will be defined
      in separate standards-track documents, but at a high level it is as
      follows:
</p>
<p></p>
<ul class="text">
<li>the algorithms: a PCN-node meters the amount of PCN-traffic on
          each one of its outgoing (or incoming) links. The measurement is
          made as an aggregate of all PCN-packets, and not per flow. There are
          two algorithms, one for threshold-metering and one for
          excess-traffic-metering. The meters trigger PCN-marking as
          necessary.
</li>
<li>the encoding(s): a PCN-node PCN-marks a PCN-packet by modifying a
          combination of the DSCP and ECN fields. In the "baseline" encoding
          <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>, the ECN field is set to 11 and the
          DSCP is not altered. Extension encodings may be defined that, at
          most, use a second DSCP (eg as in <a class='info' href='#Moncaster08'>[Moncaster08]<span> (</span><span class='info'>, &ldquo;A three state extended PCN encoding scheme (work in           progress),&rdquo; June&nbsp;2008.</span><span>)</span></a>) and/or set the ECN field to values
          other than 11 (eg as in <a class='info' href='#Menth08-2'>[Menth08&#8209;2]<span> (</span><span class='info'>, &ldquo;PCN Encoding for Packet-Specific Dual Marking (PSDM) (work in           progress),&rdquo; July&nbsp;2008.</span><span>)</span></a>).
</li>
</ul>

<p>In a PCN-domain the operator may have two or three encoding states
      available. The baseline encoding provides two encoding states (not
      PCN-marked, PCN-marked), whilst extended encodings can provide three
      encoding states (not PCN-marked, threshold-marked,
      excess-traffic-marked).
</p>
<p>An operator may choose to deploy either admission control or flow
      termination or both. Although designed to work together, they are
      independent mechanisms, and the use of one does not require or prevent
      the use of the other. Three encoding states naturally allows both flow
      admission and flow termination. If there are only two encoding states,
      then there are several options - see Section 3.3.
</p>
<p>
</p>
<p>The PCN-boundary-nodes monitor the PCN-marked packets in order to
      extract information about the current state of the PCN-domain. Based on
      this monitoring, a distributed decision is made about whether to admit a
      prospective new flow or whether to terminate existing flow(s). Sections
      4.4 and 4.5 mention various possibilities for how the functionality
      could be distributed.
</p>
<p>PCN-metering and PCN-marking needs to be configured on all
      (potentially pre-congested) links in the PCN-domain to ensure that the
      PCN mechanisms protect all links. The actual functionality can be
      configured on the outgoing or incoming interfaces of PCN-nodes - or one
      algorithm could be configured on the outgoing interface and the other on
      the incoming interface. The important point is that a consistent choice
      is made across the PCN-domain to ensure that the PCN mechanisms protect
      all links. See <a class='info' href='#PCN08-2'>[PCN08&#8209;2]<span> (</span><span class='info'>, &ldquo;Metering and marking behaviour of PCN-nodes (work in           progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a> for further
      discussion.
</p>
<p>The objective of threshold-marking, as triggerd by the
      threshold-metering algorithm, is to threshold-mark all PCN-packets
      whenever the rate of PCN-packets is greater than some configured rate,
      the PCN-threshold-rate. The objective of excess-traffic-metering, as
      triggered by the excess-traffic-marking algorithm, is to
      excess-traffic-mark PCN-packets at a rate equal to the difference
      between the bit rate of PCN-packets and some configured rate, the
      PCN-excess-rate. Note that this description reflects the overall intent
      of the algorithms rather than their instantaneous behaviour, since the
      rate measured at a particular moment depends on the detailed algorithm,
      its implementation, and the traffic's variance as well as its rate (eg
      marking may well continue after a recent overload even after the
      instantaneous rate has dropped). The algorithms are specified in <a class='info' href='#PCN08-2'>[PCN08&#8209;2]<span> (</span><span class='info'>, &ldquo;Metering and marking behaviour of PCN-nodes (work in           progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>.
</p>
<p>Admission and termination approaches are detailed and compared in
      <a class='info' href='#Charny07-1'>[Charny07&#8209;1]<span> (</span><span class='info'>, &ldquo;Comparison of Proposed PCN Approaches (work in           progress),&rdquo; November&nbsp;2007.</span><span>)</span></a> and <a class='info' href='#Menth08-3'>[Menth08&#8209;3]<span> (</span><span class='info'>, &ldquo;PCN-Based Admission Control and Flow Termination,&rdquo; 2008.</span><span>)</span></a>.
      The discussion below is just a brief summary. Sections 3.1 and 3.2
      assume there are three encoding states available, whilst Section 3.3
      assumes there are two encoding states available.
</p>
<p>From the perspective of the outside world, a PCN-domain essentially
      looks like a Diffserv domain, but without the Diffserv architecture's
      traffic conditioning agreements. PCN-traffic is either transported
      across it transparently or policed at the PCN-ingress-node (ie dropped
      or carried at a lower QoS). One difference is that PCN-traffic has
      better QoS guarantees than normal Diffserv traffic, because the PCN
      mechanisms better protect the QoS of admitted flows. Another difference
      may occur in the rare circumstance when there is a failure: on the one
      hand some PCN-flows may get terminated, but on the other hand other
      flows will get their QoS restored. Non PCN-traffic is treated
      transparently, ie the PCN-domain is a normal Diffserv domain.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Flow admission</h3>

<p>The objective of PCN's flow admission control mechanism is to limit
        the PCN-traffic on each link in the PCN-domain to *roughly* its
        PCN-admissible-rate, by admitting or blocking prospective new flows,
        in order to protect the QoS of existing PCN-flows. With three encoding
        states available, the PCN-threshold-rate is configured by the operator
        as equal to the PCN-admissible-rate on each link. It is set lower than
        the traffic rate at which the link becomes congested and the node
        drops packets.
</p>
<p>Exactly how the admission control decision is made will be defined
        separately in informational documents. This document describes two
        approaches (others might be possible):
</p>
<p></p>
<ul class="text">
<li>the PCN-egress-node measures (possibly as a moving average) the
            fraction of the PCN-traffic that is threshold-marked. The fraction
            is measured for a specific ingress-egress-aggregate. If the
            fraction is below a threshold value then the new flow is admitted,
            and if the fraction is above the threshold value then it is
            blocked. The fraction could be measured as an EWMA (exponentially
            weighted moving average), which has sometimes been called the
            "congestion level estimate".
</li>
<li>the PCN-egress-node monitors PCN-traffic and if it receives one
            (or several) threshold-marked packets, then the new flow is
            blocked, otherwise it is admitted. One possibility may be to react
            to the marking state of an initial flow set-up packet (eg RSVP
            PATH). Another is that after one (or several) threshold-marks then
            all flows are blocked until after a specific period of no
            congestion.
</li>
</ul>

<p>Note that the admission control decision is made for a particular
        pair of PCN-boundary-nodes. So it is quite possible for a new flow to
        be admitted between one pair of PCN-boundary-nodes, whilst at the same
        time another admission request is blocked between a different pair of
        PCN-boundary-nodes.
</p>
<p>
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Flow termination</h3>

<p>The objective of PCN's flow termination mechanism is to limit the
        PCN-traffic on each link to *roughly* its PCN-supportable-rate, by
        terminating some existing PCN-flows, in order to protect the QoS of
        the remaining PCN-flows. With three encoding states available, the
        PCN-excess-rate is configured by the operator as equal to the
        PCN-supportable-rate on each link. It may be set lower than the
        traffic rate at which the link becomes congested and the node drops
        packets.
</p>
<p>Exactly how the flow termination decision is made will be defined
        separately in informational documents. This document describes several
        approaches (others might be possible):</p>
<ul class="text">
<li>In one approach the PCN-egress-node measures the rate of
            PCN-traffic that is not excess-traffic-marked, which is the amount
            of PCN-traffic that can actually be supported, and communicates
            this to the PCN-ingress-node. Also the PCN-ingress-node measures
            the rate of PCN-traffic that is destined for this specific
            PCN-egress-node. The difference represents the excess amount that
            should be terminated.
</li>
<li>Another approach instead measures the rate of
            excess-traffic-marked traffic and terminates this amount of
            traffic. This terminates less traffic than the previous bullet if
            some nodes are dropping PCN-traffic.
</li>
<li>Another approach monitors PCN-packets and terminates some of
            the PCN-flows that have an excess-traffic-marked packet. (If all
            such flows were terminated, far too much traffic would be
            terminated, so a random selection needs to be made from those with
            an excess-traffic-marked packet, <a class='info' href='#Menth08-1'>[Menth08&#8209;1]<span> (</span><span class='info'>, &ldquo;Edge-Assisted Marked Flow Termination (work in           progress),&rdquo; February&nbsp;2008.</span><span>)</span></a>.)
</li>
</ul><p>Since flow termination is designed for "abnormal"
        circumstances, it is quite likely that some PCN-nodes are congested
        and hence packets are being dropped and/or significantly queued. The
        flow termination mechanism must accommodate this.
</p>
<p>Note also that the termination control decision is made for a
        particular pair of PCN-boundary-nodes. So it is quite possible for
        PCN-flows to be terminated between one pair of PCN-boundary-nodes,
        whilst at the same time none are terminated between a different pair
        of PCN-boundary-nodes.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Flow admission and/or flow termination when there are only two PCN encoding states</h3>

<p>If a PCN-domain has only two encoding states available (PCN-marked
        and not PCN-marked), ie it is using the baseline encoding <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>, then an operator has three options (others
        might be possible):
</p>
<p></p>
<ul class="text">
<li>admission control only: PCN-marking means threshold-marking, ie
            only the threshold-metering algorithm triggers PCN-marking. Only
            PCN admission control is available.
</li>
<li>flow termination only: PCN-marking means
            excess-traffic-marking, ie only the excess-traffic-metering
            algorithm triggers PCN-marking. Only PCN termination control is
            available.
</li>
<li>both admission control and flow termination: only the
            excess-traffic-metering algorithm triggers PCN-marking, however
            the configured rate (PCN-excess-rate) is set equal to the
            PCN-admissible-rate, as shown in Figure 3. <a class='info' href='#Charny07-2'>[Charny07&#8209;2]<span> (</span><span class='info'>, &ldquo;Pre-Congestion Notification Using Single Marking for           Admission and Termination (work in progress),&rdquo; November&nbsp;2007.</span><span>)</span></a> describes how both admission control
            and flow termination can be triggered in this case and also gives
            some of the pros and cons of this approach. The main downside is
            that admission control is less accurate.
</li>
</ul>

<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>                          ==   Metering &amp;    ==
                          ==Marking behaviour==       ==PCN mechanisms==
                       ^
           Rate of     ^
      PCN-traffic on   |
     bottleneck link   |                                  Terminate some
                       |                                  admitted flows
                       |                                         &amp;
                       |                                 Block new flows
                       |
                       |       Some pkts
   U*PCN-excess-rate  -|  excess-traffic-marked        -----------------
(=PCN-supportable-rate)|
                       |                                 Block new flows
                       |
                       |
     PCN-excess-rate  -|------------------------------------------------
 (=PCN-admissible-rate)|
                       |         No pkts                 Admit new flows
                       |       PCN-marked
                       |
</pre></div>
<p>Figure 3: Schematic of how the PCN admission control and
          flow termination mechanisms operate as the rate of PCN-traffic
          increases, for a PCN-domain with two encoding states and using the
          approach of <a class='info' href='#Charny07-2'>[Charny07&#8209;2]<span> (</span><span class='info'>, &ldquo;Pre-Congestion Notification Using Single Marking for           Admission and Termination (work in progress),&rdquo; November&nbsp;2007.</span><span>)</span></a>. Note: U is a global
          parameter for all links in the PCN-domain.
</p>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Information transport</h3>

<p>The transport of pre-congestion information from a PCN-node to a
        PCN-egress-node is through PCN-markings in data packet headers, ie
        "in-band": no signalling protocol messaging is needed. Signalling is
        needed to transport PCN-feedback-information, for example to convey
        the fraction of PCN-marked traffic from a PCN-egress-node to the
        relevant PCN-ingress-node. Exactly what information needs to be
        transported will be described in future documents about possible
        boundary mechanisms. The signalling could be done by an extension of
        RSVP or NSIS, for instance; <a class='info' href='#Lefaucheur06'>[Lefaucheur06]<span> (</span><span class='info'>, &ldquo;RSVP Extensions for Admission Control over Diffserv using           Pre-congestion Notification (PCN) (work in progress),&rdquo; June&nbsp;2006.</span><span>)</span></a>
        describes the extensions needed for RSVP.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
PCN-traffic</h3>

<p>The following are some high-level points about how PCN works:
</p>
<p></p>
<ul class="text">
<li>There needs to be a way for a PCN-node to distinguish
            PCN-traffic from other traffic. This is through a combination of
            the DSCP field and/or ECN field.
</li>
<li>It is not advised to have non PCN-traffic that competes for the
            same capacity as PCN-traffic but, if there is such traffic, there
            needs to be a mechanism to limit it. &ldquo;Capacity&rdquo; means
            the forwarding bandwidth on a link; &ldquo;competes&rdquo; means
            that non PCN-packets will delay PCN-packets in the queue for the
            link. Hence more non PCN-traffic results in poorer QoS for PCN.
            Further, the unpredictable amount of non PCN-traffic makes the PCN
            mechanisms less accurate and so reduces PCN&rsquo;s ability to
            protect the QoS of admitted PCN-flows
</li>
<li>Two examples of such non PCN-traffic (ie that competes for the
            same capacity as PCN-traffic) are:
</li>
</ul>
<ol class="text">
<li><p>traffic that is priority scheduled over PCN (perhaps a
            particular application or an operator's control messages).
</li>
<li>traffic that is scheduled at the same priority as PCN (for
            example if the Voice-Admit codepoint is used for PCN-traffic <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a> and there is non-PCN voice-admit traffic
            in the PCN-domain).
</li>
</ol></p>
<ul class="text">
<li><p>If there is such non PCN-traffic (ie that competes for the same
            capacity as PCN-traffic), then PCN&rsquo;s mechanisms should take
            account of it, in order to improve the accuracy of the decision
            about whether to admit (or terminate) a PCN-flow. For example, one
            mechanism is that such non PCN-traffic contributes to the PCN
            meters (ie is metered by the threshold-marking and
            excess-traffic-marking algorithms).
</li>
<li>There will be non PCN-traffic that doesn&rsquo;t compete for
            the same capacity as PCN-traffic, because it is forwarded at lower
            priority. Hence it shouldn&rsquo;t contribute to the PCN meters.
            Examples are best effort and assured forwarding traffic. However,
            a PCN-node should dedicate some capacity to lower priority traffic
            so that it isn't starved.
</li>
<li>The document assumes that the PCN mechanisms are applied to a
            single behaviour aggregate in the PCN-domain. However, it would
            also be possible to apply them independently to more than one
            behaviour aggregate, which are distinguished by DSCP.
</li>
</ul>
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6"></a><h3>3.6.&nbsp;
Backwards compatibility</h3>

<p>PCN specifies semantics for the ECN field that differ from the
        default semantics of <a class='info' href='#RFC3168'>[RFC3168]<span> (</span><span class='info'>Ramakrishnan, K., Floyd, S., and D. Black, &ldquo;The Addition of Explicit Congestion Notification (ECN) to IP,&rdquo; September&nbsp;2001.</span><span>)</span></a>. A particular PCN
        encoding scheme needs to describe how it meets the guidelines of BCP
        124 <a class='info' href='#RFC4774'>[RFC4774]<span> (</span><span class='info'>Floyd, S., &ldquo;Specifying Alternate Semantics for the Explicit Congestion Notification (ECN) Field,&rdquo; November&nbsp;2006.</span><span>)</span></a> for specifying alternative
        semantics for the ECN field. In summary the approach is to:
</p>
<p></p>
<ul class="text">
<li>use a DSCP to allow PCN-nodes to distinguish PCN-traffic that
            uses the alternative ECN semantics;
</li>
<li>define these semantics for use within a controlled region, the
            PCN-domain;
</li>
<li>take appropriate action if ECN capable, non-PCN traffic arrives
            at a PCN-ingress-node with the DSCP used by PCN.
</li>
</ul><p>For the baseline encoding <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>, the
        'appropriate action' is to block ECN-capable traffic that uses the
        same DSCP as PCN from entering the PCN-domain directly. Blocking means
        it is dropped or downgraded to a lower priority behaviour aggregate,
        or alternatively such traffic may be tunnelled through the PCN-domain.
        The reason that 'appropriate action' is needed is that the
        PCN-egress-node clears the ECN field to 00.
</p>
<p>Extended encoding schemes may need to take different 'appropriate
        action'.
</p>
<a name="detailed-arch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Detailed Functional architecture</h3>

<p>This section is intended to provide a systematic summary of the new
      functional architecture in the PCN-domain. First it describes functions
      needed at the three specific types of PCN-node; these are data plane
      functions and are in addition to their normal router functions. Then it
      describes further functionality needed for both flow admission control
      and flow termination; these are signalling and decision-making
      functions, and there are various possibilities for where the functions
      are physically located. The section is split into:
</p>
<p></p>
<ol class="text">
<li>functions needed at PCN-interior-nodes
</li>
<li>functions needed at PCN-ingress-nodes
</li>
<li>functions needed at PCN-egress-nodes
</li>
<li>other functions needed for flow admission control
</li>
<li>other functions needed for flow termination control
</li>
</ol><p>Note: Probing is covered in the Appendix.
</p>
<p>The section then discusses some other detailed topics:
</p>
<p></p>
<ol class="text">
<li>addressing
</li>
<li>tunnelling
</li>
<li>fault handling
</li>
</ol>

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
PCN-interior-node functions</h3>

<p>Each link of the PCN-domain is configured with the following
        functionality:
</p>
<p></p>
<ul class="text">
<li>Behaviour aggregate classification &ndash; determine whether an
            incoming packet is a PCN-packet or not.
</li>
<li>PCN-meter &ndash; measure the &lsquo;amount of
            PCN-traffic&rsquo;. The measurement is made on the overall
            PCN-traffic, and not per flow. Algorithms determine whether to
            indicate to the PCN-marking functionality that packets should be
            PCN-marked.
</li>
<li>PCN-mark &ndash; as triggered by indications from the PCN-meter
            functionality, if necessary PCN-mark packets wth the appropiate
            encoding.
</li>
<li>Drop - if the queue overflows then naturally packets are
            dropped. In addition, the link may be configured with a maximum
            rate for PCN-traffic (below the physical link rate), above which
            PCN-packets are dropped.
</li>
</ul>

<p>The functions are defined in <a class='info' href='#PCN08-2'>[PCN08&#8209;2]<span> (</span><span class='info'>, &ldquo;Metering and marking behaviour of PCN-nodes (work in           progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a> and the
        baseline encoding in <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a> (extended
        encodings are to be defined in other documents).
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                       +---------+   Result
                                    +-&gt;|Threshold|-------+
                                    |  |  Meter  |       |
                                    |  +---------+       V
         +----------+   +- - - - -+  |                +------+
         |   BA     |   |         |  |                |      |    Marked
Packet =&gt;|Classifier|==&gt;| Dropper |==?===============&gt;|Marker|==&gt; Packet
Stream   |          |   |         |  |                |      |    Stream
         +----------+   +- - - - -+  |                +------+
                                    |  +---------+       ^
                                    |  | Excess  |       |
                                    +-&gt;| Traffic |-------+
                                       |  Meter  |   Result
                                       +---------+
</pre></div>
<p>Figure 4: Schematic of PCN-interior-node
            functionality
</p>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
PCN-ingress-node functions</h3>

<p>Each ingress link of the PCN-domain is configured with the
        following functionality:
</p>
<p></p>
<ul class="text">
<li>Packet classification &ndash; determine whether an incoming
            packet is part of a previously admitted flow, by using a filter
            spec (eg DSCP, source and destination addresses, port numbers, and
            protocol).
</li>
<li>Police - police, by dropping, any packets received with a DSCP
            indicating PCN transport that do not belong to an admitted flow.
            (A prospective PCN-flow that is rejected could be blocked or
            admitted into a lower priority behaviour aggregate.) Similarly,
            police packets that are part of a previously admitted flow, to
            check that the flow keeps to the agreed rate or flowspec (eg <a class='info' href='#RFC1633'>[RFC1633]<span> (</span><span class='info'>Braden, B., Clark, D., and S. Shenker, &ldquo;Integrated Services in the Internet Architecture: an Overview,&rdquo; June&nbsp;1994.</span><span>)</span></a> for a microflow and its NSIS
            equivalent).
</li>
<li>PCN-colour &ndash; set the DSCP and ECN fields appropriately
            for the PCN-domain, for example as in <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>.
</li>
<li>Meter - some approaches to flow termination require the
            PCN-ingress-node to measure the (aggregate) rate of PCN-traffic
            towards a particular PCN-egress-node.
</li>
</ul>

<p>The first two are policing functions, needed to make sure that
        PCN-packets admitted into the PCN-domain belong to a flow that has
        been admitted and to ensure that the flow keeps to the flowspec agreed
        (eg doesn't exceed an agreed maximum rate and is inelastic traffic).
        Installing the filter spec will typically be done by the signalling
        protocol, as will re-installing the filter, for example after a
        re-route that changes the PCN-ingress-node (see <a class='info' href='#Briscoe06'>[Briscoe06]<span> (</span><span class='info'>, &ldquo;An edge-to-edge Deployment Model for Pre-Congestion           Notification: Admission Control over a Diffserv Region (work in           progress),&rdquo; October&nbsp;2006.</span><span>)</span></a> for an example using RSVP). PCN-colouring
        allows the rest of the PCN-domain to recognise PCN-packets.
</p>
<p>
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
PCN-egress-node functions</h3>

<p>Each egress link of the PCN-domain is configured with the following
        functionality:
</p>
<p></p>
<ul class="text">
<li>Packet classify &ndash; determine which PCN-ingress-node a
            PCN-packet has come from.
</li>
<li>Meter &ndash; "measure PCN-traffic" or "monitor PCN-marks".
</li>
<li>PCN-colour &ndash; for PCN-packets, set the DSCP and ECN fields
            to the appropriate values for use outside the PCN-domain.
</li>
</ul>

<p>The metering functionality of course depends on whether it is
        targeted at admission control or flow termination. Alternatives
        involve the PCN-egress-node "measuring" as an aggregate (ie not per
        flow) all PCN-packets from a particular PCN-ingress-node, or
        "monitoring" the PCN-traffic and reacting to one (or several)
        PCN-marked packets. For PCN-colouring, <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>
        specifies that the PCN-egress-node re-sets the ECN field to 00; other
        encodings may define different behaviour.
</p>
<p>
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Admission control functions</h3>

<p>As well as the functions covered above, other specific admission
        control functions need to be performed (others might be possible):
</p>
<p></p>
<ul class="text">
<li>Make decision about admission &ndash; based on the output of
            the PCN-egress-node's meter function. In the case where it
            "measures PCN-traffic", the measured traffic on the
            ingress-egress-aggregate is compared with some reference level. In
            the case where it "monitors PCN-marks", then the decision is based
            on whether one (or several) packets is (are) PCN-marked or not (eg
            the RSVP PATH message). In either case, the admission decision
            also takes account of policy and application layer requirements
            <a class='info' href='#RFC2753'>[RFC2753]<span> (</span><span class='info'>Yavatkar, R., Pendarakis, D., and R. Guerin, &ldquo;A Framework for Policy-based Admission Control,&rdquo; January&nbsp;2000.</span><span>)</span></a>.
</li>
<li>Communicate decision about admission - signal the decision to
            the node making the admission control request (which may be
            outside the PCN-domain), and to the policer (PCN-ingress-node
            function) for enforcement of the decision.
</li>
</ul><p>There are various possibilities for how the functionality
        could be distributed (we assume the operator would configure which is
        used):
</p>
<p></p>
<ul class="text">
<li>The decision is made at the PCN-egress-node and the decision
            (admit or block) is signalled to the PCN-ingress-node.
</li>
<li>The decision is recommended by the PCN-egress-node (admit or
            block) but the decision is definitively made by the
            PCN-ingress-node. The rationale is that the PCN-egress-node
            naturally has the necessary information about the amount of
            PCN-marks on the ingress-egress-aggregate, but the
            PCN-ingress-node is the policy enforcement point <a class='info' href='#RFC2753'>[RFC2753]<span> (</span><span class='info'>Yavatkar, R., Pendarakis, D., and R. Guerin, &ldquo;A Framework for Policy-based Admission Control,&rdquo; January&nbsp;2000.</span><span>)</span></a>, which polices incoming traffic to ensure
            it is part of an admitted PCN-flow.
</li>
<li>The decision is made at the PCN-ingress-node, which requires
            that the PCN-egress-node signals PCN-feedback-information to the
            PCN-ingress-node. For example, it could signal the current
            fraction of PCN-traffic that is PCN-marked.
</li>
<li>The decision is made at a centralised node (see Appendix).
</li>
</ul>

<p>Note: Admission control functionality is not performed by normal
      PCN-interior-nodes.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Flow termination functions</h3>

<p>As well as the functions covered above, other specific termination
        control functions need to be performed (others might be possible):
</p>
<p></p>
<ul class="text">
<li>PCN-meter at PCN-egress-node - similarly to flow admission,
            there are two types of possibilities: to "measure
            PCN-traffic&rdquo; on the ingress-egress-aggregate, and to
            "monitor PCN-marks" and react to one (or several) PCN-marks.
</li>
<li>(if required) PCN-meter at PCN-ingress-node - make
            &ldquo;measurements of PCN-traffic&rdquo; being sent towards a
            particular PCN-egress-node; again, this is done for the
            ingress-egress-aggregate and not per flow.
</li>
<li>(if required) Communicate PCN-feedback-information to the node
            that makes the flow termination decision. For example, as in <a class='info' href='#Briscoe06'>[Briscoe06]<span> (</span><span class='info'>, &ldquo;An edge-to-edge Deployment Model for Pre-Congestion           Notification: Admission Control over a Diffserv Region (work in           progress),&rdquo; October&nbsp;2006.</span><span>)</span></a>, communicate the PCN-egress-node's
            measurements to the PCN-ingress-node.
</li>
<li>Make decision about flow termination &ndash; use the
            information from the PCN-meter(s) to decide which PCN-flow or
            PCN-flows to terminate. The decision takes account of policy and
            application layer requirements <a class='info' href='#RFC2753'>[RFC2753]<span> (</span><span class='info'>Yavatkar, R., Pendarakis, D., and R. Guerin, &ldquo;A Framework for Policy-based Admission Control,&rdquo; January&nbsp;2000.</span><span>)</span></a>.
</li>
<li>Communicate decision about flow termination - signal the
            decision to the node that is able to terminate the flow (which may
            be outside the PCN-domain), and to the policer (PCN-ingress-node
            function) for enforcement of the decision.
</li>
</ul><p>There are various possibilities for how the functionality
        could be distributed, similar to those discussed above in the
        Admission control section.
</p>
<p>Note: Flow termination functionality is not performed by normal
        PCN-interior-nodes.
</p>
<p>
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Addressing</h3>

<p>PCN-nodes may need to know the address of other PCN-nodes. Note: in
        all cases PCN-interior-nodes don't need to know the address of any
        other PCN-nodes (except as normal their next hop neighbours, for
        routing purposes).
</p>
<p>The PCN-egress-node needs to know the address of the
        PCN-ingress-node associated with a flow, at a minimum so that the
        PCN-ingress-node can be informed to enforce the admission decision
        (and any flow termination decision) through policing. There are
        various possibilities for how the PCN-egress-node can do this, ie
        associate the received packet to the correct ingress-egress-aggregate.
        It is not the intention of this document to mandate a particular
        mechanism.</p>
<ul class="text">
<li>The addressing information can be gathered from signalling. For
            example, regular processing of an RSVP PATH message, as the
            PCN-ingress-node is the previous RSVP hop (PHOP) (<a class='info' href='#Lefaucheur06'>[Lefaucheur06]<span> (</span><span class='info'>, &ldquo;RSVP Extensions for Admission Control over Diffserv using           Pre-congestion Notification (PCN) (work in progress),&rdquo; June&nbsp;2006.</span><span>)</span></a>). Or the PCN-ingress-node could
            signal its address to the PCN-egress-node.
</li>
<li>Always tunnel PCN-traffic across the PCN-domain. Then the
            PCN-ingress-node's address is simply the source address of the
            outer packet header. The PCN-ingress-node needs to learn the
            address of the PCN-egress-node, either by manual configuration or
            by one of the automated tunnel endpoint discovery mechanisms (such
            as signalling or probing over the data route, interrogating
            routing or using a centralised broker).
</li>
</ul>

<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
Tunnelling</h3>

<p>Tunnels may originate and/or terminate within a PCN-domain (eg IP
        over IP, IP over MPLS). It is important that the PCN-marking of any
        packet can potentially influence PCN&rsquo;s flow admission control
        and termination &ndash; it shouldn&rsquo;t matter whether the packet
        happens to be tunnelled at the PCN-node that PCN-marks the packet, or
        indeed whether it&rsquo;s decapsulated or encapsulated by a subsequent
        PCN-node. This suggests that the &ldquo;uniform conceptual
        model&rdquo; described in <a class='info' href='#RFC2983'>[RFC2983]<span> (</span><span class='info'>Black, D., &ldquo;Differentiated Services and Tunnels,&rdquo; October&nbsp;2000.</span><span>)</span></a> should be
        re-applied in the PCN context. In line with this and the approach of
        <a class='info' href='#RFC4303'>[RFC4303]<span> (</span><span class='info'>Kent, S., &ldquo;IP Encapsulating Security Payload (ESP),&rdquo; December&nbsp;2005.</span><span>)</span></a> and <a class='info' href='#Briscoe08-2'>[Briscoe08&#8209;2]<span> (</span><span class='info'>, &ldquo;Tunnelling of Congestion Notification (work in           progress),&rdquo; July&nbsp;2008.</span><span>)</span></a>,
        the following rule is applied if encapsulation is done within the
        PCN-domain:
</p>
<p></p>
<ul class="text">
<li>any PCN-marking is copied into the outer header
</li>
</ul><p>Note: A tunnel will not provide this behaviour if it complies
        with <a class='info' href='#RFC3168'>[RFC3168]<span> (</span><span class='info'>Ramakrishnan, K., Floyd, S., and D. Black, &ldquo;The Addition of Explicit Congestion Notification (ECN) to IP,&rdquo; September&nbsp;2001.</span><span>)</span></a> tunnelling in either mode, but it
        will if it complies with <a class='info' href='#RFC4301'>[RFC4301]<span> (</span><span class='info'>Kent, S. and K. Seo, &ldquo;Security Architecture for the Internet Protocol,&rdquo; December&nbsp;2005.</span><span>)</span></a> IPSec
        tunnelling.
</p>
<p>Similarly, in line with the &ldquo;uniform conceptual model&rdquo;
        of <a class='info' href='#RFC2983'>[RFC2983]<span> (</span><span class='info'>Black, D., &ldquo;Differentiated Services and Tunnels,&rdquo; October&nbsp;2000.</span><span>)</span></a>, the &ldquo;full-functionality
        option&rdquo; of <a class='info' href='#RFC3168'>[RFC3168]<span> (</span><span class='info'>Ramakrishnan, K., Floyd, S., and D. Black, &ldquo;The Addition of Explicit Congestion Notification (ECN) to IP,&rdquo; September&nbsp;2001.</span><span>)</span></a>, and <a class='info' href='#RFC4301'>[RFC4301]<span> (</span><span class='info'>Kent, S. and K. Seo, &ldquo;Security Architecture for the Internet Protocol,&rdquo; December&nbsp;2005.</span><span>)</span></a>, the following rule is applied if
        decapsulation is done within the PCN-domain:
</p>
<p></p>
<ul class="text">
<li>if the outer header's marking state is more severe then it is
            copied onto the inner header.
</li>
</ul><p>Note: the order of increasing severity is: not PCN-marked;
        threshold-marked; excess-traffic-marked.
</p>
<p>An operator may wish to tunnel PCN-traffic from PCN-ingress-nodes
        to PCN-egress-nodes. The PCN-marks shouldn&rsquo;t be visible outside
        the PCN-domain, which can be achieved by the PCN-egress-node doing the
        PCN-colouring function (Section 4.3) after all the other (PCN and
        tunnelling) functions. The potential reasons for doing such tunnelling
        are: the PCN-egress-node then automatically knows the address of the
        relevant PCN-ingress-node for a flow; even if ECMP is running, all
        PCN-packets on a particular ingress-egress-aggregate follow the same
        path. (ECMP: Equal Cost Multi-Path, Section 6.4.) But it also has
        drawbacks, for example the additional overhead in terms of bandwidth
        and processing, and the cost of setting up a mesh of tunnels between
        PCN-boundary-nodes (there is an N^2 scaling issue).
</p>
<p>Potential issues arise for a &ldquo;partially PCN-capable
        tunnel&rdquo;, ie where only one tunnel endpoint is in the PCN
        domain:
</p>
<p></p>
<ol class="text">
<li>The tunnel originates outside a PCN-domain and ends inside it.
            If the packet arrives at the tunnel ingress with the same encoding
            as used within the PCN-domain to indicate PCN-marking, then this
            could lead the PCN-egress-node to falsely measure
            pre-congestion.
</li>
<li>The tunnel originates inside a PCN-domain and ends outside it.
            If the packet arrives at the tunnel ingress already PCN-marked,
            then it will still have the same encoding when it&rsquo;s
            decapsulated which could potentially confuse nodes beyond the
            tunnel egress.
</li>
</ol><p>In line with the solution for partially capable Diffserv
        tunnels in <a class='info' href='#RFC2983'>[RFC2983]<span> (</span><span class='info'>Black, D., &ldquo;Differentiated Services and Tunnels,&rdquo; October&nbsp;2000.</span><span>)</span></a>, the following rules are
        applied:
</p>
<p></p>
<ul class="text">
<li>For case (1), the tunnel egress node clears any PCN-marking on
            the inner header. This rule is applied before the &lsquo;copy on
            decapsulation&rsquo; rule above.
</li>
<li>For case (2), the tunnel ingress node clears any PCN-marking on
            the inner header. This rule is applied after the &lsquo;copy on
            encapsulation&rsquo; rule above.
</li>
</ul><p> Note that the above implies that one has to know, or
        determine, the characteristics of the other end of the tunnel as part
        of establishing it.
</p>
<p>
</p>
<p>Tunnelling constraints were a major factor in the choice of the
        baseline encoding. As explained in <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>,
        with current tunnelling endpoints only the 11 codepoint of the ECN
        field survives decapsulation, and hence the baseline encoding only
        uses the 11 codepoint to indicate PCN-marking. Extended encoding
        schemes need to explain their interactions with (or assumptions about)
        tunnelling. A lengthy discussion of all the issues associated with
        layered encapsulation of congestion notification (for ECN as well as
        PCN) is in <a class='info' href='#Briscoe08-2'>[Briscoe08&#8209;2]<span> (</span><span class='info'>, &ldquo;Tunnelling of Congestion Notification (work in           progress),&rdquo; July&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.8"></a><h3>4.8.&nbsp;
Fault handling</h3>

<p>If a PCN-interior-node (or one of its links) fails, then lower
        layer protection mechanisms or the regular IP routing protocol will
        eventually re-route around it. If the new route can carry all the
        admitted traffic, flows will gracefully continue. If instead this
        causes early warning of pre-congestion on the new route, then
        admission control based on pre-congestion notification will ensure new
        flows will not be admitted until enough existing flows have departed.
        Re-routing may result in heavy (pre-)congestion, when the flow
        termination mechanism will kick in.
</p>
<p>If a PCN-boundary-node fails then we would like the regular QoS
        signalling protocol to be responsible for taking appropriate action.
        As an example <a class='info' href='#Briscoe08-2'>[Briscoe08&#8209;2]<span> (</span><span class='info'>, &ldquo;Tunnelling of Congestion Notification (work in           progress),&rdquo; July&nbsp;2008.</span><span>)</span></a> considers what
        happens if RSVP is the QoS signalling protocol.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Operations and Management</h3>

<p>This Section considers operations and management issues, under the
      FCAPS headings: the Operations and Management of Faults, Configuration,
      Accounting, Performance and Security. Provisioning is discussed with
      performance.
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Configuration Operations and Management</h3>

<p>Threshold-metering and -marking and excess-traffic-metering and
        -marking are standardised in <a class='info' href='#PCN08-2'>[PCN08&#8209;2]<span> (</span><span class='info'>, &ldquo;Metering and marking behaviour of PCN-nodes (work in           progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>. However,
        more diversity in PCN-boundary-node behaviours is expected, in order
        to interface with diverse industry architectures. It may be possible
        to have different PCN-boundary-node behaviours for different
        ingress-egress-aggregates within the same PCN-domain.
</p>
<p>PCN metering behaviour is enabled on either the egress or the
        ingress interfaces of PCN-nodes. A consistent choice must be made
        across the PCN-domain to ensure that the PCN mechanisms protect all
        links.
</p>
<p>PCN configuration control variables fall into the following
        categories:
</p>
<p></p>
<ul class="text">
<li>system options (enabling or disabling behaviours)
</li>
<li>parameters (setting levels, addresses etc)
</li>
</ul><p>One possibility is that all configurable variables sit within
        an SNMP management framework <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>, being
        structured within a defined management information base (MIB) on each
        node, and being remotely readable and settable via a suitably secure
        management protocol (SNMPv3).
</p>
<p>Some configuration options and parameters have to be set once to
        'globally' control the whole PCN-domain. Where possible, these are
        identified below. This may affect operational complexity and the
        chances of interoperability problems between equipment from different
        vendors.
</p>
<p>It may be possible for an operator to configure some
        PCN-interior-nodes so that they don't run the PCN mechanisms, if it
        knows that these links will never become (pre-)congested.
</p>
<p>
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1"></a><h3>5.1.1.&nbsp;
System options</h3>

<p>On PCN-interior-nodes there will be very few system options:
</p>
<p></p>
<ul class="text">
<li>Whether two PCN-markings (threshold-marked and
              excess-traffic-marked) are enabled or only one. Typically all
              nodes throughout a PCN-domain will be configured the same in
              this respect. However, exceptions could be made. For example, if
              most PCN-nodes used both markings, but some legacy hardware was
              incapable of running two algorithms, an operator might be
              willing to configure these legacy nodes solely for
              excess-traffic-marking to enable flow termination as a
              back-stop. It would be sensible to place such nodes where they
              could be provisioned with a greater leeway over expected traffic
              levels.
</li>
<li>In the case where only one PCN-marking is enabled, all nodes
              must be configured to generate PCN-marks from the same meter (ie
              either the threshold meter or the excess traffic meter).
</li>
</ul><p> PCN-boundary-nodes (ingress and egress) will have more
          system options:
</p>
<p></p>
<ul class="text">
<li>Which of admission and flow termination are enabled. If any
              PCN-interior-node is configured to generate a marking, all
              PCN-boundary-nodes must be able to interpret that marking (which
              includes understanding, in a PCN-domain that uses only one type
              of PCN-marking, whether they are generated by
              PCN-interior-nodes' threshold meters or the excess traffic
              meters). Therefore all PCN-boundary-nodes must be configured the
              same in this respect.
</li>
<li>Where flow admission and termination decisions are made: at
              PCN-ingress-nodes or at PCN-egress-nodes (or at a centralised
              node, see Appendix). Theoretically, this configuration choice
              could be negotiated for each pair of PCN-boundary-nodes, but we
              cannot imagine why such complexity would be required, except
              perhaps in future inter-domain scenarios.
</li>
<li>How PCN-markings are translated into admission control and
              flow termination decisions (see Section 3.1 and Section
              3.2).
</li>
</ul><p>PCN-egress-nodes will have further system options:
</p>
<p></p>
<ul class="text">
<li>How the mapping should be established between each packet and
              its aggregate, eg by MPLS label, by IP packet filter spec; and
              how to take account of ECMP.
</li>
<li>If an equipment vendor provides a choice, there may be
              options to select which smoothing algorithm to use for
              measurements.
</li>
</ul>

<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2"></a><h3>5.1.2.&nbsp;
Parameters</h3>

<p>Like any Diffserv domain, every node within a PCN-domain will
          need to be configured with the DSCP(s) used to identify PCN-packets.
          On each interior link the main configuration parameters are the
          PCN-threshold-rate and PCN-excess-rate. A larger PCN-threshold-rate
          enables more PCN-traffic to be admitted on a link, hence improving
          capacity utilisation. A PCN-excess-rate set further above the
          PCN-threshold-rate allows greater increases in traffic (whether due
          to natural fluctuations or some unexpected event) before any flows
          are terminated, ie minimises the chances of unnecessarily triggering
          the termination mechanism. For instance, an operator may want to
          design their network so that it can cope with a failure of any
          single PCN-node without terminating any flows.
</p>
<p>Setting these rates on first deployment of PCN will be very
          similar to the traditional process for sizing an admission
          controlled network, depending on: the operator's requirements for
          minimising flow blocking (grade of service), the expected PCN
          traffic load on each link and its statistical characteristics (the
          traffic matrix), contingency for re-routing the PCN traffic matrix
          in the event of single or multiple failures, and the expected load
          from other classes relative to link capacities <a class='info' href='#Menth07'>[Menth07]<span> (</span><span class='info'>, &ldquo;PCN-Based Resilient Network Admission Control: The Impact of           a Single Bit&quot;,&rdquo; 2007.</span><span>)</span></a>. But once a domain is in operation, a PCN
          design goal is to be able to determine growth in these configured
          rates much more simply, by monitoring PCN-marking rates from actual
          rather than expected traffic (see Section 5.2 on Performance &amp;
          Provisioning).
</p>
<p>Operators may also wish to configure a rate greater than the
          PCN-excess-rate that is the absolute maximum rate that a link allows
          for PCN-traffic. This may simply be the physical link rate, but some
          operators may wish to configure a logical limit to prevent
          starvation of other traffic classes during any brief period after
          PCN-traffic exceeds the PCN-excess-rate but before flow termination
          brings it back below this rate.
</p>
<p>Threshold-metering requires a threshold token bucket depth to be
          configured, excess-traffic-metering needs a value for the MTU
          (maximum size of a PCN-packet on the link) and both require setting
          a maximum size of their token buckets. It will be preferable for
          there to be rules to set defaults for these parameters, but then
          allow operators to change them, for instance if average traffic
          characteristics change over time.
</p>
<p>The PCN-egress-node may allow configuration of the following:
</p>
<p></p>
<ul class="text">
<li>how it smooths metering of PCN-markings (eg EWMA
              parameters)
</li>
</ul><p>Whichever node makes admission and flow termination
          decisions will contain algorithms for converting PCN-marking levels
          into admission or flow termination decisions. These will also
          require configurable parameters, for instance:
</p>
<p></p>
<ul class="text">
<li>an admission control algorithm that is based on the fraction
              of marked packets will at least require a marking threshold
              setting above which it denies admission to new flows;
</li>
<li>flow termination algorithms will probably require a parameter
              to delay termination of any flows until it is more certain that
              an anomalous event is not transient;
</li>
<li>a parameter to control the trade-off between how quickly
              excess flows are terminated, and over-termination.
</li>
</ul>

<p>One particular approach, <a class='info' href='#Charny07-2'>[Charny07&#8209;2]<span> (</span><span class='info'>, &ldquo;Pre-Congestion Notification Using Single Marking for           Admission and Termination (work in progress),&rdquo; November&nbsp;2007.</span><span>)</span></a> would
          require a global parameter to be defined on all PCN-nodes, but only
          needs one PCN marking rate to be configured on each link. The global
          parameter is a scaling factor between admission and termination (the
          PCN-traffic rate on a link up to which flows are admitted vs the
          rate above which flows are terminated). <a class='info' href='#Charny07-2'>[Charny07&#8209;2]<span> (</span><span class='info'>, &ldquo;Pre-Congestion Notification Using Single Marking for           Admission and Termination (work in progress),&rdquo; November&nbsp;2007.</span><span>)</span></a> discusses in full the impact of this
          particular approach on the operation of PCN.
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Performance &amp; Provisioning Operations and Management</h3>

<p>Monitoring of performance factors measurable from *outside* the PCN
        domain will be no different with PCN than with any other packet-based
        flow admission control system, both at the flow level (blocking
        probability, etc) and the packet level (jitter <a class='info' href='#RFC3393'>[RFC3393]<span> (</span><span class='info'>Demichelis, C. and P. Chimento, &ldquo;IP Packet Delay Variation Metric for IP Performance Metrics (IPPM),&rdquo; November&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#Y.1541'>[Y.1541]<span> (</span><span class='info'>, &ldquo;Network Performance Objectives for IP-based Services,&rdquo; February&nbsp;2006.</span><span>)</span></a>, loss rate
        <a class='info' href='#RFC4656'>[RFC4656]<span> (</span><span class='info'>Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;A One-way Active Measurement Protocol (OWAMP),&rdquo; September&nbsp;2006.</span><span>)</span></a>, mean opinion score <a class='info' href='#P.800'>[P.800]<span> (</span><span class='info'>, &ldquo;Methods for subjective determination of transmission           quality,&rdquo; August&nbsp;1996.</span><span>)</span></a>, etc). The difference is that PCN is
        intentionally designed to indicate *internally* which exact
        resource(s) are the cause of performance problems and by how much.
</p>
<p>Even better, PCN indicates which resources will probably cause
        problems if they are not upgraded soon. This can be achieved by the
        management system monitoring the total amount (in bytes) of
        PCN-marking generated by each queue over a period. Given possible long
        provisioning lead times, pre-congestion volume is the best metric to
        reveal whether sufficient persistent demand has occurred to warrant an
        upgrade. Because, even before utilisation becomes problematic, the
        statistical variability of traffic will cause occasional bursts of
        pre-congestion. This 'early warning system' decouples the process of
        adding customers from the provisioning process. This should cut the
        time to add a customer when compared against admission control
        provided over native Diffserv <a class='info' href='#RFC2998'>[RFC2998]<span> (</span><span class='info'>Bernet, Y., Ford, P., Yavatkar, R., Baker, F., Zhang, L., Speer, M., Braden, R., Davie, B., Wroclawski, J., and E. Felstaine, &ldquo;A Framework for Integrated Services Operation over Diffserv Networks,&rdquo; November&nbsp;2000.</span><span>)</span></a>, because
        it saves having to verify the capacity planning process before adding
        each customer.
</p>
<p>Alternatively, before triggering an upgrade, the long term
        pre-congestion volume on each link can be used to balance traffic load
        across the PCN-domain by adjusting the link weights of the routing
        system. When an upgrade to a link&rsquo;s configured PCN-rates is
        required, it may also be necessary to upgrade the physical capacity
        available to other classes. But usually there will be sufficient
        physical capacity for the upgrade to go ahead as a simple
        configuration change. Alternatively, <a class='info' href='#Songhurst06'>[Songhurst06]<span> (</span><span class='info'>, &ldquo;Guaranteed QoS Synthesis for Admission Control with Shared           Capacity,&rdquo; Feburary&nbsp;2006.</span><span>)</span></a> describes an adaptive rather than
        preconfigured system, where the configured PCN-threshold-rate is
        replaced with a high and low water mark and the marking algorithm
        automatically optimises how physical capacity is shared using the
        relative loads from PCN and other traffic classes.
</p>
<p>All the above processes require just three extra counters
        associated with each PCN queue: threshold-markings,
        excess-traffic-markings and drop. Every time a PCN packet is marked or
        dropped its size in bytes should be added to the appropriate counter.
        Then the management system can read the counters at any time and
        subtract a previous reading to establish the incremental volume of
        each type of (pre-)congestion. Readings should be taken frequently, so
        that anomalous events (eg re-routes) can be distinguished from regular
        fluctuating demand if required.
</p>
<p>
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Accounting Operations and Management</h3>

<p>Accounting is only done at trust boundaries so it is out of scope
        of this document, which is confined to intra-domain issues. Use of PCN
        internal to a domain makes no difference to the flow signalling events
        crossing trust boundaries outside the PCN-domain, which are typically
        used for accounting.
</p>
<p>
</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Fault Operations and Management</h3>

<p>Fault Operations and Management is about preventing faults, telling
        the management system (or manual operator) that the system has
        recovered (or not) from a failure, and about maintaining information
        to aid fault diagnosis.
</p>
<p>Admission blocking and particularly flow termination mechanisms
        should rarely be needed in practice. It would be unfortunate if they
        didn't work after an option had been accidentally disabled. Therefore
        it will be necessary to regularly test that the live system works as
        intended (devising a meaningful test is left as an exercise for the
        operator).
</p>
<p><a class='info' href='#detailed-arch'>Section&nbsp;4<span> (</span><span class='info'>Detailed Functional architecture</span><span>)</span></a> describes how the PCN
        architecture has been designed to ensure admitted flows continue
        gracefully after recovering automatically from link or node failures.
        The need to record and monitor re-routing events affecting signalling
        is unchanged by the addition of PCN to a Diffserv domain. Similarly,
        re-routing events within the PCN-domain will be recorded and monitored
        just as they would be without PCN.
</p>
<p>PCN-marking does make it possible to record 'near-misses'. For
        instance, at the PCN-egress-node a 'reporting threshold' could be set
        to monitor how often - and for how long - the system comes close to
        triggering flow blocking without actually doing so. Similarly, bursts
        of flow termination marking could be recorded even if they are not
        sufficiently sustained to trigger flow termination. Such statistics
        could be correlated with per-queue counts of marking volume (Section
        5.2) to upgrade resources in danger of causing service degradation, or
        to trigger manual tracing of intermittent incipient errors that would
        otherwise have gone unnoticed.
</p>
<p>Finally, of course, many faults are caused by failings in the
        management process ('human error'): a wrongly configured address in a
        node, a wrong address given in a signalling protocol, a wrongly
        configured parameter in a queueing algorithm, a node set into a
        different mode from other nodes, and so on. Generally, a clean design
        with few configurable options ensures this class of faults can be
        traced more easily and prevented more often. Sound management practice
        at run-time also helps. For instance: a management system should be
        used that constrains configuration changes within system rules (eg
        preventing an option setting inconsistent with other nodes);
        configuration options should also be recorded in an offline database;
        and regular automatic consistency checks between live systems and the
        database should be performed. PCN adds nothing specific to this class
        of problems.
</p>
<p>
</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Security Operations and Management</h3>

<p>Security Operations and Management is about using secure
        operational practices as well as being able to track security breaches
        or near-misses at run-time. PCN adds few specifics to the general good
        practice required in this field <a class='info' href='#RFC4778'>[RFC4778]<span> (</span><span class='info'>Kaeo, M., &ldquo;Operational Security Current Practices in Internet Service Provider Environments,&rdquo; January&nbsp;2007.</span><span>)</span></a>, other
        than those below. The correct functions of the system should be
        monitored (Section 5.2) in multiple independent ways and correlated to
        detect possible security breaches. Persistent (pre-)congestion marking
        should raise an alarm (both on the node doing the marking and on the
        PCN-egress-node metering it). Similarly, persistently poor external
        QoS metrics (such as jitter or mean opinion score) should raise an
        alarm. The following are examples of symptoms that may be the result
        of innocent faults, rather than attacks, but until diagnosed they
        should be logged and trigger a security alarm:
</p>
<p></p>
<ul class="text">
<li>Anomalous patterns of non-conforming incoming signals and
            packets rejected at the PCN-ingress-nodes (eg packets already
            marked PCN-capable, or traffic persistently starving token bucket
            policers).
</li>
<li>PCN-capable packets arriving at a PCN-egress-node with no
            associated state for mapping them to a valid
            ingress-egress-aggregate.
</li>
<li>A PCN-ingress-node receiving feedback signals about the
            pre-congestion level on a non-existent aggregate, or that are
            inconsistent with other signals (eg unexpected sequence numbers,
            inconsistent addressing, conflicting reports of the pre-congestion
            level, etc).
</li>
<li>Pre-congestion marking arriving at a PCN-egress-node with
            (pre-)congestion markings focused on particular flows, rather than
            randomly distributed throughout the aggregate.
</li>
</ul>

<p>
</p>
<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Applicability of PCN</h3>

<p>
</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Benefits</h3>

<p>The key benefits of the PCN mechanisms are that they are simple,
        scalable, and robust because: </p>
<ul class="text">
<li>Per flow state is only required at the PCN-ingress-nodes
            ("stateless core"). This is required for policing purposes (to
            prevent non-admitted PCN traffic from entering the PCN-domain) and
            so on. It is not generally required that other network entities
            are aware of individual flows (although they may be in particular
            deployment scenarios).
</li>
<li>Admission control is resilient: with PCN QoS is decoupled from
            the routing system. Hence in general admitted flows can survive
            capacity, routing or topology changes without additional
            signalling. The PCN-admissible-rate on each link can be chosen
            small enough that admitted traffic can still be carried after a
            rerouting in most failure cases <a class='info' href='#Menth07'>[Menth07]<span> (</span><span class='info'>, &ldquo;PCN-Based Resilient Network Admission Control: The Impact of           a Single Bit&quot;,&rdquo; 2007.</span><span>)</span></a>.
            This is an important feature as QoS violations in core networks
            due to link failures are more likely than QoS violations due to
            increased traffic volume <a class='info' href='#Iyer03'>[Iyer03]<span> (</span><span class='info'>, &ldquo;An approach to alleviate link overload as observed on an IP           backbone,&rdquo; 2003.</span><span>)</span></a>.
</li>
<li>The PCN-metering behaviours only operate on the overall
            PCN-traffic on the link, not per flow.
</li>
<li>The information of these measurements is signalled to the
            PCN-egress-nodes by the PCN-marks in the packet headers, ie <a class='info' href='#Style'>[Style]<span> (</span><span class='info'>, &ldquo;Guardian Style,&rdquo; 2007.</span><span>)</span></a> "in-band". No additional signalling
            protocol is required for transporting the PCN-marks. Therefore no
            secure binding is required between data packets and separate
            congestion messages.
</li>
<li>The PCN-egress-nodes make separate measurements, operating on
            the aggregate PCN-traffic from each PCN-ingress-node, ie not per
            flow. Similarly, signalling by the PCN-egress-node of
            PCN-feedback-information (which is used for flow admission and
            termination decisions) is at the granularity of the
            ingress-egress-aggregate. An alternative approach is that the
            PCN-egress-nodes monitor the PCN-traffic and signal
            PCN-feedback-information (which is used for flow admission and
            termination decisions) at the granularity of one (or a few)
            PCN-marks.
</li>
<li>The admitted PCN-load is controlled dynamically. Therefore it
            adapts as the traffic matrix changes, and also if the network
            topology changes (eg after a link failure). Hence an operator can
            be less conservative when deploying network capacity, and less
            accurate in their prediction of the PCN-traffic matrix.
</li>
<li>The termination mechanism complements admission control. It
            allows the network to recover from sudden unexpected surges of
            PCN-traffic on some links, thus restoring QoS to the remaining
            flows. Such scenarios are expected to be rare but not impossible.
            They can be caused by large network failures that redirect lots of
            admitted PCN-traffic to other links, or by malfunction of the
            measurement-based admission control in the presence of admitted
            flows that send for a while with an atypically low rate and then
            increase their rates in a correlated way.
</li>
<li>Flow termination can also enable an operator to be less
            conservative when deploying network capacity. It is an alternative
            to running links at low utilisation in order to protect against
            link or node failures. This is especially the case with SRLGs
            (shared risk link groups, which are links that share a resource,
            such as a fibre, whose failure affects all those links <a class='info' href='#RFC4216'>[RFC4216]<span> (</span><span class='info'>Zhang, R. and J. Vasseur, &ldquo;MPLS Inter-Autonomous System (AS) Traffic Engineering (TE) Requirements,&rdquo; November&nbsp;2005.</span><span>)</span></a>). Fully protecting traffic against a
            single SRLG failure requires low utilisation (~10%) of the link
            bandwidth on some links before failure <a class='info' href='#Charny08'>[Charny08]<span> (</span><span class='info'>, &ldquo;Email to PCN WG mailing list,&rdquo; March&nbsp;2008.</span><span>)</span></a>.
</li>
<li>The PCN-supportable-rate may be set below the maximum rate that
            PCN-traffic can be transmitted on a link, in order to trigger
            termination of some PCN-flows before loss (or excessive delay) of
            PCN-packets occurs, or to keep the maximum PCN-load on a link
            below a level configured by the operator.
</li>
<li>Provisioning of the network is decoupled from the process of
            adding new customers. By contrast, with the Diffserv architecture
            <a class='info' href='#RFC2475'>[RFC2475]<span> (</span><span class='info'>Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z., and W. Weiss, &ldquo;An Architecture for Differentiated Services,&rdquo; December&nbsp;1998.</span><span>)</span></a> operators rely on subscription-time
            Service Level Agreements, which statically define the parameters
            of the traffic that will be accepted from a customer, and so the
            operator has to verify provision is sufficient each time a new
            customer is added to check that the Service Level Agreement can be
            fulfilled. A PCN-domain doesn't need such traffic
            conditioning.
</li>
</ul>

<p>
</p>
<a name="deployment-scenarios"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Deployment scenarios</h3>

<p>Operators of networks will want to use the PCN mechanisms in
        various arrangements, for instance depending on how they are
        performing admission control outside the PCN-domain (users after all
        are concerned about QoS end-to-end), what their particular goals and
        assumptions are, how many PCN encoding states are available, and so
        on.
</p>
<p>A PCN-domain may have three encoding states (or pedantically, an
        operator may choose to use up three encoding states for PCN): not
        PCN-marked, threshold-marked, excess-traffic-marked. Then both PCN
        admission control and flow termination can be supported. As
        illustrated in Figure 1, admission control accepts new flows until the
        PCN-traffic rate on the bottleneck link rises above the
        PCN-threshold-rate, whilst if necessary the flow termination mechanism
        terminates flows down to the PCN-excess-rate on the bottleneck
        link.
</p>
<p>On the other hand, a PCN-domain may have two encoding states (as in
        <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>) (or pedantically, an operator may
        choose to use up two encoding states for PCN): not PCN-marked,
        PCN-marked. Then there are three possibilities, as discussed in the
        following paragraphs (see also Section 3.3).
</p>
<p>First, an operator could just use PCN's admission control, solving
        heavy congestion (caused by re-routing) by 'just waiting' - as
        sessions end, PCN-traffic naturally reduces, and meanwhile the
        admission control mechanism will prevent admission of new flows that
        use the affected links. So the PCN-domain will naturally return to
        normal operation, but with reduced capacity. The drawback of this
        approach would be that, until sufficient sessions have ended to
        relieve the congestion, all PCN-flows as well as lower priority
        services will be adversely affected.
</p>
<p>Second, an operator could just rely for admission control on
        statically provisioned capacity per PCN-ingress-node (regardless of
        the PCN-egress-node of a flow), as is typical in the hose model of the
        Diffserv architecture <a class='info' href='#RFC2475'>[RFC2475]<span> (</span><span class='info'>Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z., and W. Weiss, &ldquo;An Architecture for Differentiated Services,&rdquo; December&nbsp;1998.</span><span>)</span></a>. Such traffic
        conditioning agreements can lead to focused overload: many flows
        happen to focus on a particular link and then all flows through the
        congested link fail catastrophically. PCN's flow termination mechanism
        could then be used to counteract such a problem.
</p>
<p>Third, both admission control and flow termination can be triggered
        from the single type of PCN-marking; the main downside is that
        admission control is less accurate <a class='info' href='#Charny07-2'>[Charny07&#8209;2]<span> (</span><span class='info'>, &ldquo;Pre-Congestion Notification Using Single Marking for           Admission and Termination (work in progress),&rdquo; November&nbsp;2007.</span><span>)</span></a>.
        This possibility is illustrated in Figure 3.
</p>
<p>
</p>
<p>Within the PCN-domain there is some flexibility about how the
        decision making functionality is distributed. These possibilities are
        outlined in Section 4.4 and also discussed elsewhere, such as in <a class='info' href='#Menth08-3'>[Menth08&#8209;3]<span> (</span><span class='info'>, &ldquo;PCN-Based Admission Control and Flow Termination,&rdquo; 2008.</span><span>)</span></a>.
</p>
<p>
</p>
<p>The flow admission and termination decisions need to be enforced
        through per flow policing by the PCN-ingress-nodes. If there are
        several PCN-domains on the end-to-end path, then each needs to police
        at its PCN-ingress-nodes. One exception is if the operator runs both
        the access network (not a PCN-domain) and the core network (a
        PCN-domain); per flow policing could be devolved to the access network
        and not done at the PCN-ingress-node. Note: to aid readability, the
        rest of this draft assumes that policing is done by the
        PCN-ingress-nodes.
</p>
<p>
</p>
<p>PCN admission control has to fit with the overall approach to
        admission control. For instance <a class='info' href='#Briscoe06'>[Briscoe06]<span> (</span><span class='info'>, &ldquo;An edge-to-edge Deployment Model for Pre-Congestion           Notification: Admission Control over a Diffserv Region (work in           progress),&rdquo; October&nbsp;2006.</span><span>)</span></a>
        describes the case where RSVP signalling runs end-to-end. The
        PCN-domain is a single RSVP hop, ie only the PCN-boundary-nodes
        process RSVP messages, with RSVP messages processed on each hop
        outside the PCN-domain, as in IntServ over Diffserv <a class='info' href='#RFC2998'>[RFC2998]<span> (</span><span class='info'>Bernet, Y., Ford, P., Yavatkar, R., Baker, F., Zhang, L., Speer, M., Braden, R., Davie, B., Wroclawski, J., and E. Felstaine, &ldquo;A Framework for Integrated Services Operation over Diffserv Networks,&rdquo; November&nbsp;2000.</span><span>)</span></a>. It would also be possible for the RSVP
        signalling to be originated and/or terminated by proxies, with
        application-layer signalling between the end user and the proxy (eg
        SIP signalling with a home hub). A similar example would use NSIS
        signalling instead of RSVP. (NSIS: Next Steps in Signalling, <a class='info' href='#RFC3726'>[RFC3726]<span> (</span><span class='info'>Brunner, M., &ldquo;Requirements for Signaling Protocols,&rdquo; April&nbsp;2004.</span><span>)</span></a>.)
</p>
<p>
</p>
<p>It is possible that a user wants its inelastic traffic to use the
        PCN mechanisms but also react to ECN marking outside the PCN-domain
        <a class='info' href='#Sarker08'>[Sarker08]<span> (</span><span class='info'>, &ldquo;Usecases and Benefits of end to end ECN support in PCN           Domains (work in progress),&rdquo; November&nbsp;2008.</span><span>)</span></a>. Two possible ways to do this are to
        tunnel all PCN-packets across the PCN-domain, so that the ECN marks
        are carried transparently across the PCN-domain, or to use an encoding
        like <a class='info' href='#Moncaster08'>[Moncaster08]<span> (</span><span class='info'>, &ldquo;A three state extended PCN encoding scheme (work in           progress),&rdquo; June&nbsp;2008.</span><span>)</span></a>. Tunnelling is discussed
        further in Section 4.7.
</p>
<p>
</p>
<p>Some further possible deployment models are outlined in the
        Appendix.
</p>
<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Assumptions and constraints on scope</h3>

<p>The scope is restricted by the following assumptions:
</p>
<p></p>
<ol class="text">
<li>these components are deployed in a single Diffserv domain,
            within which all PCN-nodes are PCN-enabled and are trusted for
            truthful PCN-marking and transport
</li>
<li>all flows handled by these mechanisms are inelastic and
            constrained to a known peak rate through policing or shaping
</li>
<li>the number of PCN-flows across any potential bottleneck link is
            sufficiently large that stateless, statistical mechanisms can be
            effective. To put it another way, the aggregate bit rate of
            PCN-traffic across any potential bottleneck link needs to be
            sufficiently large relative to the maximum additional bit rate
            added by one flow. This is the basic assumption of
            measurement-based admission control.
</li>
<li>PCN-flows may have different precedence, but the applicability
            of the PCN mechanisms for emergency use (911, GETS, WPS, MLPP,
            etc.) is out of scope.
</li>
</ol>

<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.1"></a><h3>6.3.1.&nbsp;
Assumption 1: Trust and support of PCN - controlled environment</h3>

<p>It is assumed that the PCN-domain is a controlled environment, ie
          all the nodes in a PCN-domain run PCN and are trusted. There are
          several reasons this assumption: </p>
<ul class="text">
<li>The PCN-domain has to be encircled by a ring of
              PCN-boundary-nodes, otherwise traffic could enter a PCN-BA
              without being subject to admission control, which would
              potentially degrade the QoS of existing PCN-flows.
</li>
<li>Similarly, a PCN-boundary-node has to trust that all the
              PCN-nodes mark PCN-traffic consistently. A node not performing
              PCN-marking wouldn't be able to alert when it suffered
              pre-congestion, which potentially would lead to too many
              PCN-flows being admitted (or too few being terminated). Worse, a
              rogue node could perform various attacks, as discussed in the
              Security Considerations section.
</li>
</ul>

<p>One way of assuring the above two points is that the entire
          PCN-domain is run by a single operator. Another possibility is that
          there are several operators that trust each other in their handling
          of PCN-traffic.
</p>
<p>Note: All PCN-nodes need to be trustworthy. However if it is
          known that an interface cannot become pre-congested then it is not
          strictly necessary for it to be capable of PCN-marking. But this
          must be known even in unusual circumstances, eg after the failure of
          some links.
</p>
<p>
</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.2"></a><h3>6.3.2.&nbsp;
Assumption 2: Real-time applications</h3>

<p>It is assumed that any variation of source bit rate is
          independent of the level of pre-congestion. We assume that
          PCN-packets come from real time applications generating inelastic
          traffic, ie sending packets at the rate the codec produces them,
          regardless of the availability of capacity <a class='info' href='#RFC4594'>[RFC4594]<span> (</span><span class='info'>Babiarz, J., Chan, K., and F. Baker, &ldquo;Configuration Guidelines for DiffServ Service Classes,&rdquo; August&nbsp;2006.</span><span>)</span></a>. For example, voice and video requiring low
          delay, jitter and packet loss, the Controlled Load Service, <a class='info' href='#RFC2211'>[RFC2211]<span> (</span><span class='info'>Wroclawski, J., &ldquo;Specification of the Controlled-Load Network Element Service,&rdquo; September&nbsp;1997.</span><span>)</span></a>, and the Telephony service class, <a class='info' href='#RFC4594'>[RFC4594]<span> (</span><span class='info'>Babiarz, J., Chan, K., and F. Baker, &ldquo;Configuration Guidelines for DiffServ Service Classes,&rdquo; August&nbsp;2006.</span><span>)</span></a>. This assumption is to help focus the
          effort where it looks like PCN would be most useful, ie the sorts of
          applications where per flow QoS is a known requirement. In other
          words we focus on PCN providing a benefit to inelastic traffic (PCN
          may or may not provide a benefit to other types of traffic).
</p>
<p>As a consequence, it is assumed that PCN-metering and PCN-marking
          is being applied to traffic scheduled with the expedited forwarding
          per-hop behaviour, <a class='info' href='#RFC3246'>[RFC3246]<span> (</span><span class='info'>Davie, B., Charny, A., Bennet, J., Benson, K., Le Boudec, J., Courtney, W., Davari, S., Firoiu, V., and D. Stiliadis, &ldquo;An Expedited Forwarding PHB (Per-Hop Behavior),&rdquo; March&nbsp;2002.</span><span>)</span></a>, or a per-hop
          behaviour with similar characteristics.
</p>
<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.3"></a><h3>6.3.3.&nbsp;
Assumption 3: Many flows and additional load</h3>

<p>It is assumed that there are many PCN-flows on any bottleneck
          link in the PCN-domain (or, to put it another way, the aggregate bit
          rate of PCN-traffic across any potential bottleneck link is
          sufficiently large relative to the maximum additional bit rate added
          by one PCN-flow). Measurement-based admission control assumes that
          the present is a reasonable prediction of the future: the network
          conditions are measured at the time of a new flow request, however
          the actual network performance must be acceptable during the call
          some time later. One issue is that if there are only a few variable
          rate flows, then the aggregate traffic level may vary a lot, perhaps
          enough to cause some packets to get dropped. If there are many flows
          then the aggregate traffic level should be statistically smoothed.
          How many flows is enough depends on a number of factors such as the
          variation in each flow's rate, the total rate of PCN-traffic, and
          the size of the "safety margin" between the traffic level at which
          we start admission-marking and at which packets are dropped or
          significantly delayed.
</p>
<p>No explicit assumptions are made about how many PCN-flows are in
          each ingress-egress-aggregate. Performance evaluation work may
          clarify whether it is necessary to make any additional assumption on
          aggregation at the ingress-egress-aggregate level.
</p>
<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.4"></a><h3>6.3.4.&nbsp;
Assumption 4: Emergency use out of scope</h3>

<p>PCN-flows may have different precedence, but the applicability of
          the PCN mechanisms for emergency use (911, GETS, WPS, MLPP, etc) is
          out of scope of this document.
</p>
<p>
</p>
<a name="anchor37"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Challenges</h3>

<p>Prior work on PCN and similar mechanisms has thrown up a number of
        considerations about PCN's design goals (things PCN should be good at)
        and some issues that have been hard to solve in a fully satisfactory
        manner. Taken as a whole it represents a list of trade-offs (it is
        unlikely that they can all be 100% achieved) and perhaps as evaluation
        criteria to help an operator (or the IETF) decide between options.
</p>
<p>The following are open issues. They are mainly taken from <a class='info' href='#Briscoe06'>[Briscoe06]<span> (</span><span class='info'>, &ldquo;An edge-to-edge Deployment Model for Pre-Congestion           Notification: Admission Control over a Diffserv Region (work in           progress),&rdquo; October&nbsp;2006.</span><span>)</span></a>, which also describes some possible
        solutions. Note that some may be considered unimportant in general or
        in specific deployment scenarios or by some operators.
</p>
<p>NOTE: Potential solutions are out of scope for this document.
</p>
<p></p>
<ul class="text">
<li>ECMP (Equal Cost Multi-Path) Routing: The level of
            pre-congestion is measured on a specific ingress-egress-aggregate.
            However, if the PCN-domain runs ECMP, then traffic on this
            ingress-egress-aggregate may follow several different paths - some
            of the paths could be pre-congested whilst others are not. There
            are three potential problems:
<ol class="text">
<li>over-admission: a new flow is admitted (because the
                pre-congestion level measured by the PCN-egress-node is
                sufficiently diluted by unmarked packets from non-congested
                paths that a new flow is admitted), but its packets travel
                through a pre-congested PCN-node.
</li>
<li>under-admission: a new flow is blocked (because the
                pre-congestion level measured by the PCN-egress-node is
                sufficiently increased by PCN-marked packets from
                pre-congested paths that a new flow is blocked), but its
                packets travel along an uncongested path.
</li>
<li>ineffective termination: a flow is terminated, but its path
                doesn't travel through the (pre-)congested router(s). Since
                flow termination is a 'last resort', which protects the
                network should over-admission occur, this problem is probably
                more important to solve than the other two.
</li>
</ol>
</li>
<li>ECMP and signalling: It is possible that, in a PCN-domain
            running ECMP, the signalling packets (eg RSVP, NSIS) follow a
            different path than the data packets, which could matter if the
            signalling packets are used as probes. Whether this is an issue
            depends on which fields the ECMP algorithm uses; if the ECMP
            algorithm is restricted to the source and destination IP
            addresses, then it will not be an issue. ECMP and signalling
            interactions are a specific instance of a general issue for
            non-traditional routing combined with resource management along a
            path <a class='info' href='#Hancock02'>[Hancock02]<span> (</span><span class='info'>, &ldquo;Slide 14 of 'NSIS: An Outline Framework for QoS           Signalling',&rdquo; May&nbsp;2002.</span><span>)</span></a>.
</li>
<li>Tunnelling: There are scenarios where tunnelling makes it
            difficult to determine the path in the PCN-domain. The problem,
            its impact, and the potential solutions are similar to those for
            ECMP.
</li>
<li>Scenarios with only one tunnel endpoint in the PCN domain may
            make it harder for the PCN-egress-node to gather from the
            signalling messages (eg RSVP, NSIS) the identity of the
            PCN-ingress-node.
</li>
<li>Bi-Directional Sessions: Many applications have bi-directional
            sessions - hence there are two microflows that should be admitted
            (or terminated) as a pair - for instance a bi-directional voice
            call only makes sense if microflows in both directions are
            admitted. However, the PCN mechanisms concern admission and
            termination of a single flow, and coordination of the decision for
            both flows is a matter for the signalling protocol and out of
            scope of PCN. One possible example would use SIP pre-conditions.
            However, there are others.
</li>
<li>Global Coordination: PCN makes its admission decision based on
            PCN-markings on a particular ingress-egress-aggregate. Decisions
            about flows through a different ingress-egress-aggregate are made
            independently. However, one can imagine network topologies and
            traffic matrices where, from a global perspective, it would be
            better to make a coordinated decision across all the
            ingress-egress-aggregates for the whole PCN-domain. For example,
            to block (or even terminate) flows on one ingress-egress-aggregate
            so that more important flows through a different
            ingress-egress-aggregate could be admitted. The problem may well
            be relatively insignificant.
</li>
<li>Aggregate Traffic Characteristics: Even when the number of
            flows is stable, the traffic level through the PCN-domain will
            vary because the sources vary their traffic rates. PCN works best
            when there is not too much variability in the total traffic level
            at a PCN-node's interface (ie in the aggregate traffic from all
            sources). Too much variation means that a node may (at one moment)
            not be doing any PCN-marking and then (at another moment) drop
            packets because it is overloaded. This makes it hard to tune the
            admission control scheme to stop admitting new flows at the right
            time. Therefore the problem is more likely with fewer, burstier
            flows.
</li>
<li>Flash crowds and Speed of Reaction: PCN is a measurement-based
            mechanism and so there is an inherent delay between packet marking
            by PCN-interior-nodes and any admission control reaction at
            PCN-boundary-nodes. For example, potentially if a big burst of
            admission requests occurs in a very short space of time (eg
            prompted by a televote), they could all get admitted before enough
            PCN-marks are seen to block new flows. In other words, any
            additional load offered within the reaction time of the mechanism
            must not move the PCN-domain directly from a no congestion state
            to overload. This 'vulnerability period' may have an impact at the
            signalling level, for instance QoS requests should be rate limited
            to bound the number of requests able to arrive within the
            vulnerability period.
</li>
<li>Silent at start: after a successful admission request the
            source may wait some time before sending data (eg waiting for the
            called party to answer). Then the risk is that, in some
            circumstances, PCN's measurements underestimate what the
            pre-congestion level will be when the source does start sending
            data.
</li>
</ul>

<a name="anchor38"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>This memo includes no request to IANA.
</p>
<a name="anchor39"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security considerations</h3>

<p>Security considerations essentially come from the Trust Assumption
      (Section 6.3.1), ie that all PCN-nodes are PCN-enabled and are trusted
      for truthful PCN-metering and PCN-marking. PCN splits functionality
      between PCN-interior-nodes and PCN-boundary-nodes, and the security
      considerations are somewhat different for each, mainly because
      PCN-boundary-nodes are flow-aware and PCN-interior-nodes are not.
</p>
<p></p>
<ul class="text">
<li>Because the PCN-boundary-nodes are flow-aware, they are trusted
          to use that awareness correctly. The degree of trust required
          depends on the kinds of decisions they have to make and the kinds of
          information they need to make them. There is nothing specific to
          PCN.
</li>
<li>The PCN-ingress-nodes police packets to ensure a PCN-flow sticks
          within its agreed limit, and to ensure that only PCN-flows that have
          been admitted contribute PCN-traffic into the PCN-domain. The
          policer must drop (or perhaps downgrade to a different DSCP) any
          PCN-packets received that are outside this remit. This is similar to
          the existing IntServ behaviour. Between them the PCN-boundary-nodes
          must encircle the PCN-domain, otherwise PCN-packets could enter the
          PCN-domain without being subject to admission control, which would
          potentially destroy the QoS of existing flows.
</li>
<li>PCN-interior-nodes are not flow-aware. This prevents some
          security attacks where an attacker targets specific flows in the
          data plane - for instance for DoS or eavesdropping.
</li>
<li>The PCN-boundary-nodes rely on correct PCN-marking by the
          PCN-interior-nodes. For instance a rogue PCN-interior-node could
          PCN-mark all packets so that no flows were admitted. Another
          possibility is that it doesn't PCN-mark any packets, even when it is
          pre-congested. More subtly, the rogue PCN-interior-node could
          perform these attacks selectively on particular flows, or it could
          PCN-mark the correct fraction overall, but carefully choose which
          flows it marked.
</li>
<li>The PCN-boundary-nodes should be able to deal with DoS attacks
          and state exhaustion attacks based on fast changes in per flow
          signalling.
</li>
<li>The signalling between the PCN-boundary-nodes must be protected
          from attacks. For example the recipient needs to validate that the
          message is indeed from the node that claims to have sent it.
          Possible measures include digest authentication and protection
          against replay and man-in-the-middle attacks. For the specific
          protocol RSVP, hop-by-hop authentication is in <a class='info' href='#RFC2747'>[RFC2747]<span> (</span><span class='info'>Baker, F., Lindell, B., and M. Talwar, &ldquo;RSVP Cryptographic Authentication,&rdquo; January&nbsp;2000.</span><span>)</span></a>, and <a class='info' href='#Behringer07'>[Behringer07]<span> (</span><span class='info'>, &ldquo;Applicability of Keying Methods for RSVP Security (work in           progress),&rdquo; Nov&nbsp;2007.</span><span>)</span></a> may
          also be useful.
</li>
</ul>

<p>Operational security advice is given in Section 5.5.
</p>
<a name="anchor40"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Conclusions</h3>

<p>The document describes a general architecture for flow admission and
      termination based on pre-congestion information in order to protect the
      quality of service of established inelastic flows within a single
      Diffserv domain. The main topic is the functional architecture. It also
      mentions other topics like the assumptions and open issues.
</p>
<a name="anchor41"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgements</h3>

<p>
</p>
<p>This document is a revised version of an earlier individual draft
      authored by: P. Eardley, J. Babiarz, K. Chan, A. Charny, R. Geib, G.
      Karagiannis, M. Menth, T. Tsou. They are therefore contributors to this
      document.
</p>
<p>Thanks to those who have made comments on this document: Lachlan
      Andrew, Joe Babiarz, Fred Baker, David Black, Steven Blake, Ron Bonica,
      Scott Bradner, Bob Briscoe, Ross Callon, Jason Canon, Ken Carlberg, Anna
      Charny, Joachim Charzinski, Andras Csaszar, Francis Dupont, Lars Eggert,
      Pasi Eronen, Adrian Farrel, Ruediger Geib, Wei Gengyu, Robert Hancock,
      Fortune Huang, Christian Hublet, Cullen Jennings, Ingemar Johansson,
      Georgios Karagiannis, Hein Mekkes, Michael Menth, Toby Moncaster,
      Dimitri Papadimitriou, Dan Romascanu, Daisuke Satoh, Ben Strulo, Tom
      Taylor, Hannes Tschofenig, Tina Tsou, David Ward, Lars Westberg, Magnus
      Westerlund, Delei Yu. Thanks to Bob Briscoe who extensively revised the
      Operations and Management section.
</p>
<p>This document is the result of discussions in the PCN WG and
      forerunner activity in the TSVWG. A number of previous drafts were
      presented to TSVWG; their authors were: B, Briscoe, P. Eardley, D.
      Songhurst, F. Le Faucheur, A. Charny, J. Babiarz, K. Chan, S. Dudley, G.
      Karagiannis, A. Bader, L. Westberg, J. Zhang, V. Liatsos, X-G. Liu, A.
      Bhargava.
</p>
<a name="anchor42"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Comments Solicited (to be removed by RFC Editor)</h3>

<p>Comments and questions are encouraged and very welcome. They can be
      addressed to the IETF PCN working group mailing list
      &lt;pcn@ietf.org&gt;.
</p>
<p>
</p>
<a name="anchor43"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Changes (to be removed by RFC Editor)</h3>

<a name="anchor44"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.1"></a><h3>12.1.&nbsp;
Changes from -10 to -11</h3>

<p>Changes to deal with IESG comments from routing area review:
</p>
<p></p>
<ul class="text">
<li>Small clarifications to Introduction
</li>
<li>the term "marking" now only used to refer only to setting the
            codepoint (not as a shorthand for 'metering and setting the
            codepoint')
</li>
<li>Added Figure 4 (Schematic of PCN-interior-node functionality)
            (from <a class='info' href='#PCN08-2'>[PCN08&#8209;2]<span> (</span><span class='info'>, &ldquo;Metering and marking behaviour of PCN-nodes (work in           progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>
</li>
<li>Appendix A brought back into the main body.
</li>
<li>Other minor clarifications
</li>
</ul>

<a name="anchor45"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.2"></a><h3>12.2.&nbsp;
Changes from -09 to -10</h3>

<p>Changes to deal with IESG comments:
</p>
<p></p>
<ul class="text">
<li>New introduction to provide gentler introduction for the PCN
            novice: quick summary of PCN&rsquo;s applicability; quick example
            of how it all hangs together in one end-to-end qos scenario; quick
            summary of PCN &ldquo;documentation&rdquo;
</li>
<li>OAM changed to Operations and Management
</li>
<li>Processed some of the minor suggestions in the Gen-ART Review
            by Francis Dupont
</li>
<li>Two wording tweaks in Sections 3.2 &amp; 3.4 (as agreed on
            mailing list)
</li>
<li>Updated boilerplate. this draft may include material pre- Nov
            10 2008 blah.
</li>
</ul>

<a name="anchor46"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.3"></a><h3>12.3.&nbsp;
Changes from -08 to -09</h3>

<p>Small changes to deal with WG Chair comments:
</p>
<p></p>
<ul class="text">
<li>tweak language in various places to make it more RFC-like and
            less that of a scholarly work, for instance from "we propose" to
            "this document describes"
</li>
<li>tweak language in various places to make it a stand alone
            architecture document rather than a discussion of the PCN WG. Now
            only mentions WG at start of Annex.
</li>
<li>References: IDs are no longer referenced to by the draft
            name
</li>
<li>References: removed some of less important references to
            IDs
</li>
</ul>

<a name="anchor47"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.4"></a><h3>12.4.&nbsp;
Changes from -07 to -08</h3>

<p>Small changes from second WG last call:
</p>
<p></p>
<ul class="text">
<li>Section 2: added definition for PCN-admissible-rate and
            PCN-supportable-rate. Small changes to use these terms as follows:
            Section 3, bullets 2 &amp; 9; S6.1 para 1; S6.2 para1; S6.3 bullet
            3; added to Figs 1 &amp; 2.
</li>
<li>added the phrase "(others might be possible") before the list
            of approaches in Section 6.3, 7.4 &amp; 7.5.
</li>
<li>added references to RFC2753 (A framework for policy-based
            admission control) in S7.4 &amp; S7.5.
</li>
<li>throughout, updated references now that marking behaviour &amp;
            baseline encoding are WG drafts.
</li>
<li>a few typos corrected
</li>
</ul>

<a name="anchor48"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.5"></a><h3>12.5.&nbsp;
Changes from -06 to -07</h3>

<p>References re-formatted to pass ID nits. No other changes.
</p>
<a name="anchor49"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.6"></a><h3>12.6.&nbsp;
Changes from -05 to -06</h3>

<p>Minor clarifications throughout, the least insignificant are as
        follows:
</p>
<p></p>
<ul class="text">
<li>Section 1: added to the list of encoding states in an
            'extended' scheme: "or perhaps further encoding states as
            suggested in draft-westberg-pcn-load-control"
</li>
<li>Section 2: added definition for PCN-colouring (to clarify that
            the term is used consistently differently from 'PCN-marking')
</li>
<li>Section 6.1 and 6.2: added "(others might be possible)" before
            the list of high level approaches for making flow admission
            (termination) decisions.
</li>
<li>Section 6.2: corrected a significant typo in 2nd bullet (more
            -&gt; less)
</li>
<li>Section 6.3: corrected a couple of significant typos in Figure
            2
</li>
<li>Section 6.5 (PCN-traffic) re-written for clarity. Non
            PCN-traffic contributing to PCN meters is now given as an example
            (there may be cases where don't need to meter it).
</li>
<li>Section 7.7: added to the text about encapsulation being done
            within the PCN-domain: "Note: A tunnel will not provide this
            behaviour if it complies with [RFC3168] tunnelling in either mode,
            but it will if it complies with [RFC4301] IPSec tunnelling."
</li>
<li>Section 7.7: added mention of [RFC4301] to the text about
            decapsulation being done within the PCN-domain.
</li>
<li>Section 8: deleted the text about design goals, since this is
            already covered adequately earlier eg in S3.
</li>
<li>Section 11: replaced the last sentence of bullet 1 by "There is
            nothing specific to PCN."
</li>
<li>Appendix: added to open issues: possibility of automatically
            and periodically probing.
</li>
<li>References: Split out Normative references (RFC2474 &amp;
            RFC3246).
</li>
</ul>

<a name="anchor50"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.7"></a><h3>12.7.&nbsp;
Changes from -04 to -05</h3>

<p>Minor nits removed as follows:
</p>
<p></p>
<ul class="text">
<li>Further minor changes to reflect that baseline encoding is
            consensus, standards track document, whilst there can be
            (experimental track) encoding extensions
</li>
<li>Traffic conditioning updated to reflect discussions in Dublin,
            mainly that PCN-interior-nodes don't police PCN-traffic (so
            deleted bullet in S7.1) and that it is not advised to have non
            PCN-traffic that shares the same capacity (on a link) as
            PCN-traffic (so added bullet in S6.5)
</li>
<li>Probing moved into Appendix A and deleted the 'third viewpoint'
            (admission control based on the marking of a single packet like an
            RSVP PATH message) - since this isn't really probing, and in any
            case is already mentioned in S6.1.
</li>
<li>Minor changes to S9 Operations and management - mainly to
            reflect that consensus on marking behaviour has simplified things
            so eg there are fewer parameters to configure.
</li>
<li>A few terminology-related errors expunged, and two pictures
            added to help.
</li>
<li>Re-phrased the claim about the natural decision point in
            S7.4
</li>
<li>Clarified that extended encoding schemes need to explain their
            interactions with (or assumptions about) tunnelling (S7.7) and how
            they meet the guidelines of BCP124 (S6.6)
</li>
<li>Corrected the third bullet in S6.2 (to reflect consensus about
            PCN-marking)
</li>
</ul>

<a name="anchor51"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.8"></a><h3>12.8.&nbsp;
Changes from -03 to -04</h3>

<p></p>
<ul class="text">
<li>Minor changes throughout to reflect the consensus call about
            PCN-marking (as reflected in <a class='info' href='#PCN08-2'>[PCN08&#8209;2]<span> (</span><span class='info'>, &ldquo;Metering and marking behaviour of PCN-nodes (work in           progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a>).
</li>
<li>Minor changes throughout to reflect the current decisions about
            encoding (as reflected in <a class='info' href='#PCN08-1'>[PCN08&#8209;1]<span> (</span><span class='info'>, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information           (work in progress),&rdquo; Oct&nbsp;2008.</span><span>)</span></a> and <a class='info' href='#Moncaster08'>[Moncaster08]<span> (</span><span class='info'>, &ldquo;A three state extended PCN encoding scheme (work in           progress),&rdquo; June&nbsp;2008.</span><span>)</span></a>).
</li>
<li>Introduction: re-structured to create new sections on Benefits,
            Deployment scenarios and Assumptions.
</li>
<li>Introduction: Added pointers to other PCN documents.
</li>
<li>Terminology: changed PCN-lower-rate to PCN-threshold-rate and
            PCN-upper-rate to PCN-excess-rate; excess-rate-marking to
            excess-traffic-marking.
</li>
<li>Benefits: added bullet about SRLGs.
</li>
<li>Deployment scenarios: new section combining material from
            various places within the document.
</li>
<li>S6 (high level functional architecture): re-structured and
            edited to improve clarity, and reflect the latest PCN-marking and
            encoding drafts.
</li>
<li>S6.4: added claim that the most natural place to make an
            admission decision is a PCN-egress-node.
</li>
<li>S6.5: updated the bullet about non-PCN-traffic that uses the
            same DSCP as PCN-traffic.
</li>
<li>S6.6: added a section about backwards compatibility with
            respect to <a class='info' href='#RFC4774'>[RFC4774]<span> (</span><span class='info'>Floyd, S., &ldquo;Specifying Alternate Semantics for the Explicit Congestion Notification (ECN) Field,&rdquo; November&nbsp;2006.</span><span>)</span></a>.
</li>
<li>Appendix A: added bullet about end-to-end PCN.
</li>
<li>Probing: moved to Appendix B.
</li>
<li>Other minor clarifications, typos etc.
</li>
</ul>

<a name="anchor52"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.9"></a><h3>12.9.&nbsp;
Changes from -02 to -03</h3>

<p></p>
<ul class="text">
<li>Abstract: Clarified by removing the term 'aggregated'.
            Follow-up clarifications later in draft: S1: expanded
            PCN-egress-nodes bullet to mention case where the
            PCN-feedback-information is about one (or a few) PCN-marks, rather
            than aggregated information; S3 clarified PCN-meter; S5 minor
            changes; conclusion.
</li>
<li>S1: added a paragraph about how the PCN-domain looks to the
            outside world (essentially it looks like a Diffserv domain).
</li>
<li>S2: tweaked the PCN-traffic terminology bullet: changed PCN
            traffic classes to PCN behaviour aggregates, to be more in line
            with traditional Diffserv jargon (-&gt; follow-up changes later in
            draft); included a definition of PCN-flows (and corrected a couple
            of 'PCN microflows' to 'PCN-flows' later in draft)
</li>
<li>S3.5: added possibility of downgrading to best effort, where
            PCN-packets arrive at PCN-ingress-node already ECN marked (CE or
            ECN nonce)
</li>
<li>S4: added note about whether talk about PCN operating on an
            interface or on a link. In S8.1 (OAM) mentioned that PCN
            functionality needs to be configured consistently on either the
            ingress or the egress interface of PCN-nodes in a PCN-domain.
</li>
<li>S5.2: clarified that signalling protocol installs flow filter
            spec at PCN-ingress-node (&amp; updates after possible
            re-route)
</li>
<li>S5.6: addressing: clarified
</li>
<li>S5.7: added tunnelling issue of N^2 scaling if you set up a
            mesh of tunnels between PCN-boundary-nodes
</li>
<li>S7.3: Clarified the "third viewpoint" of probing (always
            probe).
</li>
<li>S8.1: clarified that SNMP is only an example; added note that
            an operator may be able to not run PCN on some PCN-interior-nodes,
            if it knows that these links will never become (pre-)congested;
            added note that it may be possible to have different
            PCN-boundary-node behaviours for different
            ingress-egress-aggregates within the same PCN-domain.
</li>
<li>Appendix: Created an Appendix about "Possible work items beyond
            the scope of the current PCN WG Charter". Material moved from near
            start of S3 and elsewhere throughout draft. Moved text about
            centralised decision node to Appendix.
</li>
<li>Other minor clarifications.
</li>
</ul>

<a name="anchor53"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.10"></a><h3>12.10.&nbsp;
Changes from -01 to -02</h3>

<p></p>
<ul class="text">
<li>S1: Benefits: provisioning bullet extended to stress that PCN
            does not use RFC2475-style traffic conditioning.
</li>
<li>S1: Deployment models: mentioned, as variant of PCN-domain
            extending to end nodes, that may extend to LAN edge switch.
</li>
<li>S3.1: Trust Assumption: added note about not needing
            PCN-marking capability if known that an interface cannot become
            pre-congested.
</li>
<li>S4: now divided into sub-sections
</li>
<li>S4.1: Admission control: added second proposed method for how
            to decide to block new flows (PCN-egress-node receives one (or
            several) PCN-marked packets).
</li>
<li>S5: Probing sub-section removed. Material now in new S7.
</li>
<li>S5.6: Addressing: clarified how PCN-ingress-node can discover
            address of PCN-egress-node
</li>
<li>S5.6: Addressing: centralised node case, added that
            PCN-ingress-node may need to know address of PCN-egress-node
</li>
<li>S5.8: Tunnelling: added case of "partially PCN-capable tunnel"
            and degraded bullet on this in S6 (Open Issues)
</li>
<li>S7: Probing: new section. Much more comprehensive than old
            S5.5.
</li>
<li>S8: Operations and Management: substantially revised.
</li>
<li>other minor changes not affecting semantics
</li>
</ul>

<a name="anchor54"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.11"></a><h3>12.11.&nbsp;
Changes from -00 to -01</h3>

<p>In addition to clarifications and nit squashing, the main changes
        are:
</p>
<p></p>
<ul class="text">
<li>S1: Benefits: added one about provisioning (and contrast with
            Diffserv SLAs)
</li>
<li>S1: Benefits: clarified that the objective is also to stop
            PCN-packets being significantly delayed (previously only mentioned
            not dropping packets)
</li>
<li>S1: Deployment models: added one where policing is done at
            ingress of access network and not at ingress of PCN-domain (assume
            trust between networks)
</li>
<li>S1: Deployment models: corrected MPLS-TE to MPLS
</li>
<li>S2: Terminology: adjusted definition of PCN-domain
</li>
<li>S3.5: Other assumptions: corrected, so that two assumptions
            (PCN-nodes not performing ECN and PCN-ingress-node discarding
            arriving CE packet) only apply if the PCN WG decides to encode
            PCN-marking in the ECN-field.
</li>
<li>S4 &amp; S5: changed PCN-marking algorithm to marking
            behaviour
</li>
<li>S4: clarified that PCN-interior-node functionality applies for
            each outgoing interface, and added clarification: "The
            functionality is also done by PCN-ingress-nodes for their outgoing
            interfaces (ie those 'inside' the PCN-domain)."
</li>
<li>S4 (near end): altered to say that a PCN-node "should" dedicate
            some capacity to lower priority traffic so that it isn't starved
            (was "may")
</li>
<li>S5: clarified to say that PCN functionality is done on an
            'interface' (rather than on a 'link')
</li>
<li>S5.2: deleted erroneous mention of service level agreement
</li>
<li>S5.5: Probing: re-written, especially to distinguish probing to
            test the ingress-egress-aggregate from probing to test a
            particular ECMP path.
</li>
<li>S5.7: Addressing: added mention of probing; added that in the
            case where traffic is always tunnelled across the PCN-domain, add
            a note that he PCN-ingress-node needs to know the address of the
            PCN-egress-node.
</li>
<li>S5.8: Tunnelling: re-written, especially to provide a clearer
            description of copying on tunnel entry/exit, by adding explanation
            (keeping tunnel encaps/decaps and PCN-marking orthogonal),
            deleting one bullet ("if the inner header's marking state is more
            sever then it is preserved" - shouldn't happen), and better
            referencing of other IETF documents.
</li>
<li>S6: Open issues: stressed that "NOTE: Potential solutions are
            out of scope for this document" and edited a couple of sentences
            that were close to solution space.
</li>
<li>S6: Open issues: added one about scenarios with only one tunnel
            endpoint in the PCN domain .
</li>
<li>S6: Open issues: ECMP: added under-admission as another
            potential risk
</li>
<li>S6: Open issues: added one about "Silent at start"
</li>
<li>S10: Conclusions: a small conclusions section added
</li>
</ul>

<p>
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2474">[RFC2474]</a></td>
<td class="author-text"><a href="mailto:kmn@cisco.com">Nichols, K.</a>, <a href="mailto:slblake@torrentnet.com">Blake, S.</a>, <a href="mailto:fred@cisco.com">Baker, F.</a>, and <a href="mailto:black_david@emc.com">D. Black</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2474">Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</a>,&rdquo; RFC&nbsp;2474, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2474.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2474.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2474.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3246">[RFC3246]</a></td>
<td class="author-text">Davie, B., Charny, A., Bennet, J., Benson, K., Le Boudec, J., Courtney, W., Davari, S., Firoiu, V., and D. Stiliadis, &ldquo;<a href="http://tools.ietf.org/html/rfc3246">An Expedited Forwarding PHB (Per-Hop Behavior)</a>,&rdquo; RFC&nbsp;3246, March&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3246.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC1633">[RFC1633]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, B.</a>, <a href="mailto:ddc@LCS.MIT.EDU">Clark, D.</a>, and <a href="mailto:Shenker@PARC.XEROX.COM">S. Shenker</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1633">Integrated Services in the Internet Architecture: an Overview</a>,&rdquo; RFC&nbsp;1633, June&nbsp;1994 (<a href="http://www.rfc-editor.org/rfc/rfc1633.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc1633.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc1633.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2205">[RFC2205]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, B.</a>, <a href="mailto:lixia@cs.ucla.edu">Zhang, L.</a>, <a href="mailto:Berson@ISI.EDU">Berson, S.</a>, <a href="mailto:Herzog@WATSON.IBM.COM">Herzog, S.</a>, and <a href="mailto:jamin@EECS.UMICH.EDU">S. Jamin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2205">Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification</a>,&rdquo; RFC&nbsp;2205, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2205.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2205.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2205.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2211">[RFC2211]</a></td>
<td class="author-text"><a href="mailto:jtw@lcs.mit.edu">Wroclawski, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2211">Specification of the Controlled-Load Network Element Service</a>,&rdquo; RFC&nbsp;2211, September&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2211.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2211.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2211.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2475">[RFC2475]</a></td>
<td class="author-text"><a href="mailto:slblake@torrentnet.com">Blake, S.</a>, <a href="mailto:black_david@emc.com">Black, D.</a>, <a href="mailto:mark.carlson@sun.com">Carlson, M.</a>, <a href="mailto:elwynd@nortel.co.uk">Davies, E.</a>, <a href="mailto:zhwang@bell-labs.com">Wang, Z.</a>, and <a href="mailto:wweiss@lucent.com">W. Weiss</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2475">An Architecture for Differentiated Services</a>,&rdquo; RFC&nbsp;2475, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2475.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2475.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2475.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2747">[RFC2747]</a></td>
<td class="author-text"><a href="mailto:fred@cisco.com">Baker, F.</a>, <a href="mailto:lindell@ISI.EDU">Lindell, B.</a>, and <a href="mailto:mohitt@microsoft.com">M. Talwar</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2747">RSVP Cryptographic Authentication</a>,&rdquo; RFC&nbsp;2747, January&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2747.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2753">[RFC2753]</a></td>
<td class="author-text"><a href="mailto:raj.yavatkar@intel.com">Yavatkar, R.</a>, <a href="mailto:dimitris@watson.ibm.com">Pendarakis, D.</a>, and <a href="mailto:guerin@ee.upenn.edu">R. Guerin</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2753">A Framework for Policy-based Admission Control</a>,&rdquo; RFC&nbsp;2753, January&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2753.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2983">[RFC2983]</a></td>
<td class="author-text">Black, D., &ldquo;<a href="http://tools.ietf.org/html/rfc2983">Differentiated Services and Tunnels</a>,&rdquo; RFC&nbsp;2983, October&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2983.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2998">[RFC2998]</a></td>
<td class="author-text">Bernet, Y., Ford, P., Yavatkar, R., Baker, F., Zhang, L., Speer, M., Braden, R., Davie, B., Wroclawski, J., and E. Felstaine, &ldquo;<a href="http://tools.ietf.org/html/rfc2998">A Framework for Integrated Services Operation over Diffserv Networks</a>,&rdquo; RFC&nbsp;2998, November&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2998.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3168">[RFC3168]</a></td>
<td class="author-text">Ramakrishnan, K., Floyd, S., and D. Black, &ldquo;<a href="http://tools.ietf.org/html/rfc3168">The Addition of Explicit Congestion Notification (ECN) to IP</a>,&rdquo; RFC&nbsp;3168, September&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3168.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3270">[RFC3270]</a></td>
<td class="author-text">Le Faucheur, F., Wu, L., Davie, B., Davari, S., Vaananen, P., Krishnan, R., Cheval, P., and J. Heinanen, &ldquo;<a href="http://tools.ietf.org/html/rfc3270">Multi-Protocol Label Switching (MPLS) Support of Differentiated Services</a>,&rdquo; RFC&nbsp;3270, May&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3270.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3393">[RFC3393]</a></td>
<td class="author-text">Demichelis, C. and P. Chimento, &ldquo;<a href="http://tools.ietf.org/html/rfc3393">IP Packet Delay Variation Metric for IP Performance Metrics (IPPM)</a>,&rdquo; RFC&nbsp;3393, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3393.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3411">[RFC3411]</a></td>
<td class="author-text">Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;<a href="http://tools.ietf.org/html/rfc3411">An Architecture for Describing Simple Network Management Protocol (SNMP) Management Frameworks</a>,&rdquo; STD&nbsp;62, RFC&nbsp;3411, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3411.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3726">[RFC3726]</a></td>
<td class="author-text">Brunner, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3726">Requirements for Signaling Protocols</a>,&rdquo; RFC&nbsp;3726, April&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3726.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4216">[RFC4216]</a></td>
<td class="author-text">Zhang, R. and J. Vasseur, &ldquo;<a href="http://tools.ietf.org/html/rfc4216">MPLS Inter-Autonomous System (AS) Traffic Engineering (TE) Requirements</a>,&rdquo; RFC&nbsp;4216, November&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4216.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4301">[RFC4301]</a></td>
<td class="author-text">Kent, S. and K. Seo, &ldquo;<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>,&rdquo; RFC&nbsp;4301, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4301.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4303">[RFC4303]</a></td>
<td class="author-text">Kent, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4303">IP Encapsulating Security Payload (ESP)</a>,&rdquo; RFC&nbsp;4303, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4303.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4594">[RFC4594]</a></td>
<td class="author-text">Babiarz, J., Chan, K., and F. Baker, &ldquo;<a href="http://tools.ietf.org/html/rfc4594">Configuration Guidelines for DiffServ Service Classes</a>,&rdquo; RFC&nbsp;4594, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4594.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4656">[RFC4656]</a></td>
<td class="author-text">Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M. Zekauskas, &ldquo;<a href="http://tools.ietf.org/html/rfc4656">A One-way Active Measurement Protocol (OWAMP)</a>,&rdquo; RFC&nbsp;4656, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4656.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4774">[RFC4774]</a></td>
<td class="author-text">Floyd, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4774">Specifying Alternate Semantics for the Explicit Congestion Notification (ECN) Field</a>,&rdquo; BCP&nbsp;124, RFC&nbsp;4774, November&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4774.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4778">[RFC4778]</a></td>
<td class="author-text">Kaeo, M., &ldquo;<a href="http://tools.ietf.org/html/rfc4778">Operational Security Current Practices in Internet Service Provider Environments</a>,&rdquo; RFC&nbsp;4778, January&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4778.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5129">[RFC5129]</a></td>
<td class="author-text">Davie, B., Briscoe, B., and J. Tay, &ldquo;<a href="http://tools.ietf.org/html/rfc5129">Explicit Congestion Marking in MPLS</a>,&rdquo; RFC&nbsp;5129, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5129.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5462">[RFC5462]</a></td>
<td class="author-text">Andersson, L. and R. Asati, &ldquo;<a href="http://tools.ietf.org/html/rfc5462">Multiprotocol Label Switching (MPLS) Label Stack Entry: "EXP" Field Renamed to "Traffic Class" Field</a>,&rdquo; RFC&nbsp;5462, February&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5462.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="P.800">[P.800]</a></td>
<td class="author-text">&ldquo;Methods for subjective determination of transmission
          quality,&rdquo; ITU-T Recommendation&nbsp;P.800, August&nbsp;1996.</td></tr>
<tr><td class="author-text" valign="top"><a name="Y.1541">[Y.1541]</a></td>
<td class="author-text">&ldquo;Network Performance Objectives for IP-based Services,&rdquo; ITU-T Recommendation&nbsp;Y.1541, February&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="PCN08-1">[PCN08-1]</a></td>
<td class="author-text">&ldquo;Baseline Encoding and Transport of Pre-Congestion Information
          (work in progress),&rdquo; Oct&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="PCN08-2">[PCN08-2]</a></td>
<td class="author-text">&ldquo;Metering and marking behaviour of PCN-nodes (work in
          progress),&rdquo; Oct&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="PWE3-08">[PWE3-08]</a></td>
<td class="author-text">&ldquo;Pseudowire Congestion Control Framework (work in
          progress),&rdquo; May&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Babiarz06">[Babiarz06]</a></td>
<td class="author-text">&ldquo;SIP Controlled Admission and Preemption (work in
          progress),&rdquo; Oct&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="Behringer07">[Behringer07]</a></td>
<td class="author-text">&ldquo;Applicability of Keying Methods for RSVP Security (work in
          progress),&rdquo; Nov&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="Briscoe06">[Briscoe06]</a></td>
<td class="author-text">&ldquo;An edge-to-edge Deployment Model for Pre-Congestion
          Notification: Admission Control over a Diffserv Region (work in
          progress),&rdquo; October&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="Briscoe08-1">[Briscoe08-1]</a></td>
<td class="author-text">&ldquo;Emulating Border Flow Policing using Re-PCN on Bulk Data
          (work in progress),&rdquo; Sept&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Briscoe08-2">[Briscoe08-2]</a></td>
<td class="author-text">&ldquo;Tunnelling of Congestion Notification (work in
          progress),&rdquo; July&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Charny07-1">[Charny07-1]</a></td>
<td class="author-text">&ldquo;Comparison of Proposed PCN Approaches (work in
          progress),&rdquo; November&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="Charny07-2">[Charny07-2]</a></td>
<td class="author-text">&ldquo;Pre-Congestion Notification Using Single Marking for
          Admission and Termination (work in progress),&rdquo; November&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="Charny07-3">[Charny07-3]</a></td>
<td class="author-text">&ldquo;<a href="http://www1.ietf.org/mail-archive/web/pcn/current/msg00871.html">Email to PCN WG mailing list</a>,&rdquo; November&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="Charny08">[Charny08]</a></td>
<td class="author-text">&ldquo;<a href="http://www1.ietf.org/mail-archive/web/pcn/current/msg01359.html">Email to PCN WG mailing list</a>,&rdquo; March&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Eardley07">[Eardley07]</a></td>
<td class="author-text">&ldquo;<a href="http://www1.ietf.org/mail-archive/web/pcn/current/msg00831.html">Email to PCN WG mailing list</a>,&rdquo; October&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="Hancock02">[Hancock02]</a></td>
<td class="author-text">&ldquo;<a href="http://www-nrc.nokia.com/sua/nsis/interim/nsis-framework-outline.ppt">Slide 14 of 'NSIS: An Outline Framework for QoS
          Signalling'</a>,&rdquo; May&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="Iyer03">[Iyer03]</a></td>
<td class="author-text">&ldquo;<a href="http://www.ieee-infocom.org/2003/papers/10_04.pdf">An approach to alleviate link overload as observed on an IP
          backbone</a>,&rdquo; IEEE INFOCOM&nbsp;, 2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="Lefaucheur06">[Lefaucheur06]</a></td>
<td class="author-text">&ldquo;RSVP Extensions for Admission Control over Diffserv using
          Pre-congestion Notification (PCN) (work in progress),&rdquo; June&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="Menth07">[Menth07]</a></td>
<td class="author-text">&ldquo;<a href="http://www3.informatik.uni-wuerzburg.de/staff/menth/Publications/Menth07-PCN-Config.pdf">PCN-Based Resilient Network Admission Control: The Impact of
          a Single Bit"</a>,&rdquo; Technical Report&nbsp;, 2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="Menth08-1">[Menth08-1]</a></td>
<td class="author-text">&ldquo;Edge-Assisted Marked Flow Termination (work in
          progress),&rdquo; February&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Menth08-2">[Menth08-2]</a></td>
<td class="author-text">&ldquo;PCN Encoding for Packet-Specific Dual Marking (PSDM) (work in
          progress),&rdquo; July&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Menth08-3">[Menth08-3]</a></td>
<td class="author-text">&ldquo;<a href="http://www3.informatik.uni-wuerzburg.de/staff/menth/Publications/Menth08-PCN-Comparison.pdf">PCN-Based Admission Control and Flow Termination</a>,&rdquo; 2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Moncaster08">[Moncaster08]</a></td>
<td class="author-text">&ldquo;A three state extended PCN encoding scheme (work in
          progress),&rdquo; June&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Sarker08">[Sarker08]</a></td>
<td class="author-text">&ldquo;Usecases and Benefits of end to end ECN support in PCN
          Domains (work in progress),&rdquo; November&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Songhurst06">[Songhurst06]</a></td>
<td class="author-text">&ldquo;<a href="http://www.cs.ucl.ac.uk/staff/B.Briscoe/projects/ipe2eqos/gqs/papers/GQS_shared_tr.pdf">Guaranteed QoS Synthesis for Admission Control with Shared
          Capacity</a>,&rdquo; BT Technical Report&nbsp;TR-CXR9-2006-001, Feburary&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="Style">[Style]</a></td>
<td class="author-text">&ldquo;<a href="http://www.guardian.co.uk/styleguide/">Guardian Style</a>,&rdquo; Note: &nbsp;This document uses the abbreviations 'ie' and 'eg' (not 'i.e.' and 'e.g.'), as in many style guides, eg, 2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="Tsou08">[Tsou08]</a></td>
<td class="author-text">&ldquo;Applicability Statement for the Use of Pre-Congestion
          Notification in a Resource-Controlled Network (work in
          progress),&rdquo; November&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Westberg08">[Westberg08]</a></td>
<td class="author-text">&ldquo;LC-PCN: The Load Control PCN Solution (work in
          progress),&rdquo; November&nbsp;2008.</td></tr>
</table>

<a name="anchor57"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Possible future work items</h3>

<p>This section mentions some topics that are outside the PCN WG's
      current charter, but which have been mentioned as areas of interest.
      They might be work items for: the PCN WG after a future re-chartering;
      some other IETF WG; another standards body; an operator-specific usage
      that is not standardised.
</p>
<p>NOTE: it should be crystal clear that this section discusses
      possibilities only.
</p>
<p>The first set of possibilities relate to the restrictions described
      in Section 6.3:
</p>
<p></p>
<ul class="text">
<li>a single PCN-domain encompasses several autonomous systems that
          do not trust each other, perhaps by using a mechanism like re-PCN,
          <a class='info' href='#Briscoe08-1'>[Briscoe08&#8209;1]<span> (</span><span class='info'>, &ldquo;Emulating Border Flow Policing using Re-PCN on Bulk Data           (work in progress),&rdquo; Sept&nbsp;2008.</span><span>)</span></a>.
</li>
<li>not all the nodes run PCN. For example, the PCN-domain is a
          multi-site enterprise network. The sites are connected by a VPN
          tunnel; although PCN doesn't operate inside the tunnel, the PCN
          mechanisms still work properly because of the good QoS on the
          virtual link (the tunnel). Another example is that PCN is deployed
          on the general Internet (ie widely but not universally
          deployed).
</li>
<li>applying the PCN mechanisms to other types of traffic, ie beyond
          inelastic traffic. For instance, applying the PCN mechanisms to
          traffic scheduled with the Assured Forwarding per-hop behaviour. One
          example could be flow-rate adaptation by elastic applications that
          adapt according to the pre-congestion information.
</li>
<li>the aggregation assumption doesn't hold, because the link
          capacity is too low. Measurement-based admission control is less
          accurate, with a greater risk of over-admission for instance.
</li>
<li>the applicability of PCN mechanisms for emergency use (911, GETS,
          WPS, MLPP, etc.)
</li>
</ul><p>Other possibilities include:
</p>
<p></p>
<ul class="text">
<li>Probing. This is discussed in Section A.1 below.
</li>
<li>The PCN-domain extends to the end users. The scenario is
          described in <a class='info' href='#Babiarz06'>[Babiarz06]<span> (</span><span class='info'>, &ldquo;SIP Controlled Admission and Preemption (work in           progress),&rdquo; Oct&nbsp;2006.</span><span>)</span></a>. The end users need to
          be trusted to do their own policing. If there is sufficient traffic,
          then the aggregation assumption may hold. A variant is that the
          PCN-domain extends out as far as the LAN edge switch.
</li>
<li>indicating pre-congestion through signalling messages rather than
          in-band (in the form of PCN-marked packets)
</li>
<li>the decision-making functionality is at a centralised node rather
          than at the PCN-boundary-nodes. This requires that the
          PCN-egress-node signals PCN-feedback-information to the centralised
          node, and that the centralised node signals to the PCN-ingress-node
          the decision about admission (or termination). It may need the
          centralised node and the PCN-boundary-nodes to be configured with
          each other's addresses. The centralised case is described further in
          <a class='info' href='#Tsou08'>[Tsou08]<span> (</span><span class='info'>, &ldquo;Applicability Statement for the Use of Pre-Congestion           Notification in a Resource-Controlled Network (work in           progress),&rdquo; November&nbsp;2008.</span><span>)</span></a>.
</li>
<li>Signalling extensions for specific protocols (eg RSVP, NSIS). For
          example: the details of how the signalling protocol installs the
          flowspec at the PCN-ingress-node for an admitted PCN-flow; and how
          the signalling protocol carries the PCN-feedback-information.
          Perhaps also for other functions such as: coping with failure of a
          PCN-boundary-node (<a class='info' href='#Briscoe06'>[Briscoe06]<span> (</span><span class='info'>, &ldquo;An edge-to-edge Deployment Model for Pre-Congestion           Notification: Admission Control over a Diffserv Region (work in           progress),&rdquo; October&nbsp;2006.</span><span>)</span></a> considers what
          happens if RSVP is the QoS signalling protocol); establishing a
          tunnel across the PCN-domain if it is necessary to carry ECN marks
          transparently.
</li>
<li>Policing by the PCN-ingress-node may not be needed if the
          PCN-domain can trust that the upstream network has already policed
          the traffic on its behalf.
</li>
<li>PCN for Pseudowire: PCN may be used as a congestion avoidance
          mechanism for edge to edge pseudowire emulations <a class='info' href='#PWE3-08'>[PWE3&#8209;08]<span> (</span><span class='info'>, &ldquo;Pseudowire Congestion Control Framework (work in           progress),&rdquo; May&nbsp;2008.</span><span>)</span></a>.
</li>
<li>PCN for MPLS: <a class='info' href='#RFC3270'>[RFC3270]<span> (</span><span class='info'>Le Faucheur, F., Wu, L., Davie, B., Davari, S., Vaananen, P., Krishnan, R., Cheval, P., and J. Heinanen, &ldquo;Multi-Protocol Label Switching (MPLS) Support of Differentiated Services,&rdquo; May&nbsp;2002.</span><span>)</span></a> defines how to
          support the Diffserv architecture in MPLS networks (Multi-protocol
          label switching). <a class='info' href='#RFC5129'>[RFC5129]<span> (</span><span class='info'>Davie, B., Briscoe, B., and J. Tay, &ldquo;Explicit Congestion Marking in MPLS,&rdquo; January&nbsp;2008.</span><span>)</span></a> describes how to
          add PCN for admission control of microflows into a set of MPLS
          aggregates. PCN-marking is done in MPLS's EXP field (which <a class='info' href='#RFC5462'>[RFC5462]<span> (</span><span class='info'>Andersson, L. and R. Asati, &ldquo;Multiprotocol Label Switching (MPLS) Label Stack Entry: &quot;EXP&quot; Field Renamed to &quot;Traffic Class&quot; Field,&rdquo; February&nbsp;2009.</span><span>)</span></a> re-names the Class of Service (CoS)
          field).
</li>
<li>PCN for Ethernet: Similarly, it may be possible to extend PCN
          into Ethernet networks, where PCN-marking is done in the Ethernet
          header. NOTE: Specific consideration of this extension is outside
          the IETF's remit.
</li>
</ul>

<a name="anchor58"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Probing</h3>

<p>
</p>
<a name="anchor59"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1.1"></a><h3>A.1.1.&nbsp;
Introduction</h3>

<p>Probing is a potential mechanism to assist admission control.
</p>
<p>PCN&rsquo;s admission control, as described so far, is
          essentially a reactive mechanism where the PCN-egress-node monitors
          the pre-congestion level for traffic from each PCN-ingress-node; if
          the level rises then it blocks new flows on that
          ingress-egress-aggregate. However, it&rsquo;s possible that an
          ingress-egress-aggregate carries no traffic, and so the
          PCN-egress-node can&rsquo;t make an admission decision using the
          usual method described earlier.
</p>
<p>One approach is to be &ldquo;optimistic&rdquo; and simply admit
          the new flow. However it&rsquo;s possible to envisage a scenario
          where the traffic levels on other ingress-egress-aggregates are
          already so high that they&rsquo;re blocking new PCN-flows, and
          admitting a new flow onto this 'empty' ingress-egress-aggregate adds
          extra traffic onto a link that is already pre-congested &ndash;
          which may &lsquo;tip the balance&rsquo; so that PCN&rsquo;s flow
          termination mechanism is activated or some packets are dropped. This
          risk could be lessened by configuring on each link sufficient
          &lsquo;safety margin&rsquo; above the PCN-threshold-rate.
</p>
<p>An alternative approach is to make PCN a more proactive
          mechanism. The PCN-ingress-node explicitly determines, before
          admitting the prospective new flow, whether the
          ingress-egress-aggregate can support it. This can be seen as a
          &ldquo;pessimistic&rdquo; approach, in contrast to the
          &ldquo;optimism&rdquo; of the approach above. It involves probing: a
          PCN-ingress-node generates and sends probe packets in order to test
          the pre-congestion level that the flow would experience.
</p>
<p>One possibility is that a probe packet is just a dummy data
          packet, generated by the PCN-ingress-node and addressed to the
          PCN-egress-node.
</p>
<a name="anchor60"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1.2"></a><h3>A.1.2.&nbsp;
Probing functions</h3>

<p>The probing functions are:
</p>
<p></p>
<ul class="text">
<li>Make decision that probing is needed. As described above,
              this is when the ingress-egress-aggregate (or the ECMP path -
              Section 6.4) carries no PCN-traffic. An alternative is always to
              probe, ie probe before admitting every PCN-flow.
</li>
<li>(if required) Communicate the request that probing is needed
              &ndash; the PCN-egress-node signals to the PCN-ingress-node that
              probing is needed
</li>
<li>(if required) Generate probe traffic - the PCN-ingress-node
              generates the probe traffic. The appropriate number (or rate) of
              probe packets will depend on the PCN-metering algorithm; for
              example an excess-traffic-metering algorithm triggers fewer
              PCN-marks than a threshold-metering algorithm, and so will need
              more probe packets.
</li>
<li>Forward probe packets - as far as PCN-interior-nodes are
              concerned, probe packets are handled the same as (ordinary data)
              PCN-packets, in terms of routing, scheduling and
              PCN-marking.
</li>
<li>Consume probe packets - the PCN-egress-node consumes probe
              packets to ensure that they don't travel beyond the
              PCN-domain.
</li>
</ul>

<a name="anchor61"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1.3"></a><h3>A.1.3.&nbsp;
Discussion of rationale for probing, its downsides and open issues</h3>

<p>It is an unresolved question whether probing is really needed,
          but two viewpoints have been put forward as to why it is useful. The
          first is perhaps the most obvious: there is no PCN-traffic on the
          ingress-egress-aggregate. The second assumes that multipath routing
          ECMP is running in the PCN-domain. We now consider each in turn.
</p>
<p>The first viewpoint assumes the following:
</p>
<p></p>
<ul class="text">
<li>There is no PCN-traffic on the ingress-egress-aggregate (so a
              normal admission decision cannot be made).
</li>
<li>Simply admitting the new flow has a significant risk of
              leading to overload: packets dropped or flows terminated.
</li>
</ul><p>On the former bullet, <a class='info' href='#Eardley07'>[Eardley07]<span> (</span><span class='info'>, &ldquo;Email to PCN WG mailing list,&rdquo; October&nbsp;2007.</span><span>)</span></a>
          suggests that, during the future busy hour of a national network
          with about 100 PCN-boundary-nodes, there are likely to be
          significant numbers of aggregates with very few flows under nearly
          all circumstances.
</p>
<p>The latter bullet could occur if new flows start on many of the
          empty ingress-egress-aggregates, which together overload a link in
          the PCN-domain. To be a problem this would probably have to happen
          in a short time period (flash crowd) because, after the reaction
          time of the system, other (non-empty) ingress-egress-aggregates that
          pass through the link will measure pre-congestion and so block new
          flows. Also, flows naturally end anyway.
</p>
<p>The downsides of probing for this viewpoint are:
</p>
<p></p>
<ul class="text">
<li>Probing adds delay to the admission control process.
</li>
<li>Sufficient probing traffic has to be generated to test the
              pre-congestion level of the ingress-egress-aggregate. But the
              probing traffic itself may cause pre-congestion, causing other
              PCN-flows to be blocked or even terminated - and in the flash
              crowd scenario there will be probing on many
              ingress-egress-aggregates.
</li>
</ul>

<p>
</p>
<p>The second viewpoint applies in the case where there is multipath
          routing (ECMP) in the PCN-domain. Note that ECMP is often used on
          core networks. There are two possibilities:
</p>
<p>(1) If admission control is based on measurements of the
          ingress-egress-aggregate, then the viewpoint that probing is useful
          assumes:
</p>
<p></p>
<ul class="text">
<li>there&rsquo;s a significant chance that the traffic is
              unevenly balanced across the ECMP paths, and hence there&rsquo;s
              a significant risk of admitting a flow that should be blocked
              (because it follows an ECMP path that is pre-congested) or
              blocking a flow that should be admitted.
</li>
<li>Note: <a class='info' href='#Charny07-3'>[Charny07&#8209;3]<span> (</span><span class='info'>, &ldquo;Email to PCN WG mailing list,&rdquo; November&nbsp;2007.</span><span>)</span></a> suggests unbalanced
              traffic is quite possible, even with quite a large number of
              flows on a PCN-link (eg 1000) when Assumption 3 (aggregation) is
              likely to be satisfied.
</li>
</ul>

<p>(2) If admission control is based on measurements of
          pre-congestion on specific ECMP paths, then the viewpoint that
          probing is useful assumes:
</p>
<p></p>
<ul class="text">
<li>There is no PCN-traffic on the ECMP path on which to base an
              admission decision.
</li>
<li>Simply admitting the new flow has a significant risk of
              leading to overload.
</li>
<li>The PCN-egress-node can match a packet to an ECMP path.
</li>
<li>Note: This is similar to the first viewpoint and so similarly
              could occur in a flash crowd if a new flow starts more-or-less
              simultaneously on many of the empty ECMP paths. Because there
              are several (sometimes many) ECMP paths between each pair of
              PCN-boundary-nodes, it&rsquo;s presumably more likely that an
              ECMP path is &lsquo;empty&rsquo; than an
              ingress-egress-aggregate is. To constrain the number of ECMP
              paths, a few tunnels could be set-up between each pair of
              PCN-boundary-nodes. Tunnelling also solves the issue in the
              bullet immediately above (which is otherwise hard because an
              ECMP routing decision is made independently on each node).
</li>
</ul>

<p>The downsides of probing for this viewpoint are:
</p>
<p></p>
<ul class="text">
<li>Probing adds delay to the admission control process.
</li>
<li>Sufficient probing traffic has to be generated to test the
              pre-congestion level of the ECMP path. But there&rsquo;s the
              risk that the probing traffic itself may cause pre-congestion,
              causing other PCN-flows to be blocked or even terminated.
</li>
<li>The PCN-egress-node needs to consume the probe packets to
              ensure they don&rsquo;t travel beyond the PCN-domain, since they
              might confuse the destination end node. This is non-trivial,
              since probe packets are addressed to the destination end node,
              in order to test the relevant ECMP path (ie they are not
              addressed to the PCN-egress-node, unlike the first viewpoint
              above).
</li>
</ul>

<p>The open issues associated with this viewpoint include:
</p>
<p></p>
<ul class="text">
<li>What rate and pattern of probe packets does the
            PCN-ingress-node need to generate, so that there&rsquo;s enough
            traffic to make the admission decision?
</li>
<li>What difficulty does the delay (whilst probing is done), and
            possible packet drops, cause applications?
</li>
<li>Can the delay be alleviated by automatically and periodically
            probing on the ingress-egress-aggregate? Or does this add too much
            overhead?
</li>
<li>Are there other ways of dealing with the flash crowd scenario?
            For instance, by limiting the rate at which new flows are
            admitted; or perhaps by a PCN-egress-node blocking new flows on
            its empty ingress-egress-aggregates when its non-empty ones are
            pre-congested.
</li>
<li>(Second viewpoint only) How does the PCN-egress-node
            disambiguate probe packets from data packets (so it can consume
            the former)? The PCN-egress-node must match the characteristic
            setting of particular bits in the probe packet&rsquo;s header or
            body &ndash; but these bits must not be used by any
            PCN-interior-node&rsquo;s ECMP algorithm. In the general case this
            isn&rsquo;t possible, but it should be possible for a typical ECMP
            algorithm (which examines: the source and destination IP addresses
            and port numbers, the protocol ID, and the DSCP).
</li>
</ul>

<p>
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Philip Eardley</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">B54/77, Sirius House Adastral Park Martlesham Heath</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ipswich, Suffolk  IP5 3RE</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">United Kingdom</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:philip.eardley@bt.com">philip.eardley@bt.com</a></td></tr>
</table>
</body></html>
