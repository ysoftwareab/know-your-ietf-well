<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Geolocation Policy: A Document Format for Expressing Privacy Preferences for Location Information</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Generic Processing">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Structure of Geolocation Authorization Documents">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Rule Transport">
<link href="#rfc.section.4" rel="Chapter" title="4 Location-specific Conditions">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Geodetic Location Condition Profile">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Civic Location Condition Profile">
<link href="#rfc.section.5" rel="Chapter" title="5 Actions">
<link href="#rfc.section.6" rel="Chapter" title="6 Transformations">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Set Retransmission-Allowed">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Set Retention-Expiry">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Set Note-Well">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Keep Ruleset Reference">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 Provide Location">
<link href="#rfc.section.6.5.1" rel="Chapter" title="6.5.1 Civic Location Profile">
<link href="#rfc.section.6.5.2" rel="Chapter" title="6.5.2 Geodetic Location Profile">
<link href="#rfc.section.7" rel="Chapter" title="7 Examples">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Rule Example with Civic Location Condition">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Rule Example with Geodetic Location Condition">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Rule Example with Civic and Geodetic Location Condition">
<link href="#rfc.section.7.4" rel="Chapter" title="7.4 Rule Example with Location-based Transformations">
<link href="#rfc.section.7.5" rel="Chapter" title="7.5 Location Obfuscation Example">
<link href="#rfc.section.8" rel="Chapter" title="8 XML Schema for Basic Location Profiles">
<link href="#rfc.section.9" rel="Chapter" title="9 XML Schema for Geolocation Policy">
<link href="#rfc.section.10" rel="Chapter" title="10 XCAP Usage">
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 Application Unique ID">
<link href="#rfc.section.10.2" rel="Chapter" title="10.2 XML Schema">
<link href="#rfc.section.10.3" rel="Chapter" title="10.3 Default Namespace">
<link href="#rfc.section.10.4" rel="Chapter" title="10.4 MIME Type">
<link href="#rfc.section.10.5" rel="Chapter" title="10.5 Validation Constraints">
<link href="#rfc.section.10.6" rel="Chapter" title="10.6 Data Semantics">
<link href="#rfc.section.10.7" rel="Chapter" title="10.7 Naming Conventions">
<link href="#rfc.section.10.8" rel="Chapter" title="10.8 Resource Interdependencies">
<link href="#rfc.section.10.9" rel="Chapter" title="10.9 Authorization Policies">
<link href="#rfc.section.11" rel="Chapter" title="11 IANA Considerations">
<link href="#rfc.section.11.1" rel="Chapter" title="11.1 Geolocation Policy XML Schema Registration">
<link href="#rfc.section.11.2" rel="Chapter" title="11.2 Geolocation Policy Namespace Registration">
<link href="#rfc.section.11.3" rel="Chapter" title="11.3 Geolocation Policy Location Profile Registry">
<link href="#rfc.section.11.4" rel="Chapter" title="11.4 Basic Location Profile XML Schema Registration">
<link href="#rfc.section.11.5" rel="Chapter" title="11.5 Basic Location Profile Namespace Registration">
<link href="#rfc.section.11.6" rel="Chapter" title="11.6 XCAP Application Usage ID">
<link href="#rfc.section.12" rel="Chapter" title="12 Internationalization Considerations">
<link href="#rfc.section.13" rel="Chapter" title="13 Security Considerations">
<link href="#rfc.section.13.1" rel="Chapter" title="13.1 Introduction">
<link href="#rfc.section.13.2" rel="Chapter" title="13.2 Obfuscation">
<link href="#rfc.section.13.3" rel="Chapter" title="13.3 Usability">
<link href="#rfc.section.13.4" rel="Chapter" title="13.4 Location Obscuring Limitations">
<link href="#rfc.references" rel="Chapter" title="14 References">
<link href="#rfc.references.1" rel="Chapter" title="14.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="14.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Acknowledgments">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Pseudo-Code">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document defines an authorization policy language for controlling access to location information. It extends the Common Policy authorization framework to provide location-specific access control. More specifically, this document defines condition elements specific to location information in order to restrict access based on the current location of the Target." />
  <meta name="description" content="This document defines an authorization policy language for controlling access to location information. It extends the Common Policy authorization framework to provide location-specific access control. More specifically, this document defines condition elements specific to location information in order to restrict access based on the current location of the Target." />
  <meta name="keywords" content="Internet-Draft, Authorization Policy, Location Privacy" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">GEOPRIV</td>
<td class="right">H. Schulzrinne, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Columbia University</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">H. Tschofenig, Ed.</td>
</tr>
<tr>
<td class="left">Expires: April 16, 2012</td>
<td class="right">Nokia Siemens Networks</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">J. Cuellar</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Siemens</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">J. Polk</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Cisco</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">J. Morris</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">M. Thomson</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Commscope</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 14, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Geolocation Policy: A Document Format for Expressing Privacy Preferences for Location Information<br />
  <span class="filename">draft-ietf-geopriv-policy-25.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document defines an authorization policy language for controlling access to location information. It extends the Common Policy authorization framework to provide location-specific access control. More specifically, this document defines condition elements specific to location information in order to restrict access based on the current location of the Target.</p>
<p>Furthermore, this document defines two algorithms for reducing the granularity of returned location information.  The first algorithm is defined for usage with civic location information while the other one applies to geodetic location information.  Both algorithms come with limitations, i.e. they provide location obfuscation under certain conditions and may therefore not be appropriate for all application domains.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 16, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Generic Processing</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Structure of Geolocation Authorization Documents</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Rule Transport</a>
</li>
<li>4.   <a href="#rfc.section.4">Location-specific Conditions</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Geodetic Location Condition Profile</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Civic Location Condition Profile</a>
</li>
<li>5.   <a href="#rfc.section.5">Actions</a>
</li>
<li>6.   <a href="#rfc.section.6">Transformations</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Set Retransmission-Allowed</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Set Retention-Expiry</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Set Note-Well</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Keep Ruleset Reference</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">Provide Location</a>
</li>
<li>6.5.1.   <a href="#rfc.section.6.5.1">Civic Location Profile</a>
</li>
<li>6.5.2.   <a href="#rfc.section.6.5.2">Geodetic Location Profile</a>
</li>
<li>7.   <a href="#rfc.section.7">Examples</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Rule Example with Civic Location Condition</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Rule Example with Geodetic Location Condition</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">Rule Example with Civic and Geodetic Location Condition</a>
</li>
<li>7.4.   <a href="#rfc.section.7.4">Rule Example with Location-based Transformations</a>
</li>
<li>7.5.   <a href="#rfc.section.7.5">Location Obfuscation Example</a>
</li>
<li>8.   <a href="#rfc.section.8">XML Schema for Basic Location Profiles</a>
</li>
<li>9.   <a href="#rfc.section.9">XML Schema for Geolocation Policy</a>
</li>
<li>10.   <a href="#rfc.section.10">XCAP Usage</a>
</li>
<li>10.1.   <a href="#rfc.section.10.1">Application Unique ID</a>
</li>
<li>10.2.   <a href="#rfc.section.10.2">XML Schema</a>
</li>
<li>10.3.   <a href="#rfc.section.10.3">Default Namespace</a>
</li>
<li>10.4.   <a href="#rfc.section.10.4">MIME Type</a>
</li>
<li>10.5.   <a href="#rfc.section.10.5">Validation Constraints</a>
</li>
<li>10.6.   <a href="#rfc.section.10.6">Data Semantics</a>
</li>
<li>10.7.   <a href="#rfc.section.10.7">Naming Conventions</a>
</li>
<li>10.8.   <a href="#rfc.section.10.8">Resource Interdependencies</a>
</li>
<li>10.9.   <a href="#rfc.section.10.9">Authorization Policies</a>
</li>
<li>11.   <a href="#rfc.section.11">IANA Considerations</a>
</li>
<li>11.1.   <a href="#rfc.section.11.1">Geolocation Policy XML Schema Registration</a>
</li>
<li>11.2.   <a href="#rfc.section.11.2">Geolocation Policy Namespace Registration</a>
</li>
<li>11.3.   <a href="#rfc.section.11.3">Geolocation Policy Location Profile Registry</a>
</li>
<li>11.4.   <a href="#rfc.section.11.4">Basic Location Profile XML Schema Registration</a>
</li>
<li>11.5.   <a href="#rfc.section.11.5">Basic Location Profile Namespace Registration</a>
</li>
<li>11.6.   <a href="#rfc.section.11.6">XCAP Application Usage ID</a>
</li>
<li>12.   <a href="#rfc.section.12">Internationalization Considerations</a>
</li>
<li>13.   <a href="#rfc.section.13">Security Considerations</a>
</li>
<li>13.1.   <a href="#rfc.section.13.1">Introduction</a>
</li>
<li>13.2.   <a href="#rfc.section.13.2">Obfuscation</a>
</li>
<li>13.3.   <a href="#rfc.section.13.3">Usability</a>
</li>
<li>13.4.   <a href="#rfc.section.13.4">Location Obscuring Limitations</a>
</li>
<li>14.   <a href="#rfc.references">References</a>
</li>
<li>14.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>14.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Acknowledgments</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Pseudo-Code</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Location information needs to be protected against unauthorized access to preserve the privacy of humans. In RFC 3693 <a href="#RFC3693">[RFC3693]</a>, a protocol-independent model for access to geographic information is defined. The model includes a Location Generator (LG) that determines location information, a Location Server (LS) that authorizes access to location information, a Location Recipient (LR) that requests and receives location information, and a Rule Maker (RM) that writes authorization policies. An authorization policy is a set of rules that regulates an entity's activities with respect to privacy-sensitive information, such as location information. </p>
<p id="rfc.section.1.p.2">The data object containing location information in the context of this document is referred to as a Location Object (LO). The basic rule set defined in the Presence Information Data Format Location Object (PIDF-LO) <a href="#RFC4119">[RFC4119]</a> can restrict how long the Location Recipient is allowed to retain the information, and it can prohibit further distribution. It also contains a reference to an enhanced rule set and a human readable privacy policy. The basic rule set, however, does not allow to control access to location information based on specific Location Recipients. This document describes an enhanced rule set that provides richer constraints on the distribution of LOs.</p>
<p id="rfc.section.1.p.3">The rule set allows the entity that uses the rules defined in this document to restrict the retention and to enforce access restrictions on location data, including prohibiting any dissemination to particular individuals, during particular times or when the Target is located in a specific region. The RM can also stipulate that only certain parts of the Location Object are to be distributed to recipients or that the resolution of parts of the Location Object is reduced.</p>
<p id="rfc.section.1.p.4">The typical sequence of operations is as follows. A Location Server receives a query for location information for a particular Target. The requestor's identity will likely be revealed as part of this request for location information. The authenticated identity of the Location Recipient, together with other information provided with the request or generally available to the server, is then used for searching through the rule set. If more than one rule matches the condition element, then the combined permission is evaluated according to the description in Section 10 of <a href="#RFC4745">[RFC4745]</a>. The result of the rule evalation is applied to the location information, yielding a possibly modified Location Object that is delivered to the Location Recipient.</p>
<p id="rfc.section.1.p.5">This document does not describe the protocol used to convey location information from the Location Server to the Location Recipient. </p>
<p id="rfc.section.1.p.6">This document extends the Common Policy framework defined in <a href="#RFC4745">[RFC4745]</a>. That document provides an abstract framework for expressing authorization rules. As specified there, each such rule consists of conditions, actions and transformations. Conditions determine under which circumstances the entity executing the rules, for example a Location Server, is permitted to apply actions and transformations. Transformations regulate in a location information context how a Location Server modifies the information elements that are returned to the requestor, for example, by reducing the granularity of returned location information.</p>
<p id="rfc.section.1.p.7">This document defines two algorithms for reducing the granularity of returned location information.  The first algorithm is defined for usage with civic location information (see <a href="#civic-transformation">Section 6.5.1</a>) while the other one applies to geodetic location information (see <a href="#geodetic-transformation">Section 6.5.2</a>).  Both algorithms come with limitations, i.e. they provide location obfuscation under certain conditions and may therefore not be appropriate for all application domains. These limitations are documented within the security consideration section (see <a href="#security">Section 13</a>). It is worth pointing out that the geodetic transformation algorithm <a href="#geodetic-transformation">Section 6.5.2</a> deals with privacy risks related to targets that are stationary, as well as to moving targets. However, with respect to movement there are restriction as to what information can be hidden from an adversary. To cover applications that have more sophisticated privacy requirements additional algorithms may need to be defined. This document forsees extensions in the form of new algorithms and therefore defines a registy (see <a href="#profile-registry">Section 11.3</a>).  </p>
<p id="rfc.section.1.p.8">The XML schema defined in <a href="#schema">Section 9</a> extends the Common Policy schema by introducing new child elements to the condition and transformation elements. This document does not define child elements for the action part of a rule.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#terminology" id="terminology">Terminology</a>
</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <a href="#RFC2119">[RFC2119]</a>.</p>
<p id="rfc.section.2.p.2">This document reuses the terminology of RFC 3693 <a href="#RFC3693">[RFC3693]</a>, such as Location Server (LS), Location Recipient (LR), Rule Maker (RM), Target, Location Generator (LG) and Location Object (LO). This document uses the following terminology:</p>
<p></p>

<dl>
<dt>Presentity or Target:</dt>
<dd style="margin-left: 8">
<br><br>RFC 3693 <a href="#RFC3693">[RFC3693]</a> uses the term Target to identify the object or person of which location information is required. The presence model described in RFC 2778 <a href="#RFC2778">[RFC2778]</a> uses the term presentity to describe the entity that provides presence information to a presence service. A Presentity in a presence system is a Target in a location information system.<br><br> </dd>
<dt>Watcher or Location Recipient:</dt>
<dd style="margin-left: 8">
<br><br>The receiver of location information is the Location Recipient (LR) in the terminology of RFC 3693 <a href="#RFC3693">[RFC3693]</a>. A watcher in a presence system, i.e., an entity that requests presence information about a presentity, is a Location Recipient in a location information system.<br><br> </dd>
<dt>Authorization policy:</dt>
<dd style="margin-left: 8">
<br><br>An authorization policy is given by a rule set. A rule set contains an unordered list of (policy) rules. Each rule has a condition, an action and a transformation component. <br><br> </dd>
<dt>Permission:</dt>
<dd style="margin-left: 8">
<br><br>The term permission refers to the action and transformation components of a rule.</dd>
</dl>

<p> </p>
<p id="rfc.section.2.p.4">In this document we use the term Location Servers as the entities that evaluate the geolocation authorization policies. The geolocation privacy architecture is, as motivated in RFC 4079 <a href="#RFC4079">[RFC4079]</a>, aligned with the presence architecture and a Presence Server is therefore an entity that distributes location information along with other presence-specific XML data elements.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Generic Processing</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Structure of Geolocation Authorization Documents</h1>
<p id="rfc.section.3.1.p.1">A geolocation authorization document is an XML document, formatted according to the schema defined in <a href="#RFC4745">[RFC4745]</a>. Geolocation authorization documents inherit the MIME type of common policy documents, application/auth-policy+xml. As described in <a href="#RFC4745">[RFC4745]</a>, this document is composed of rules which contain three parts - conditions, actions, and transformations. Each action or transformation, which is also called a permission, has the property of being a positive grant of information to the Location Recipient. As a result, there is a well-defined mechanism for combining actions and transformations obtained from several sources. This mechanism is privacy safe, since the lack of any action or transformation can only result in less information being presented to a Location Recipient. </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#rule-transport" id="rule-transport">Rule Transport</a>
</h1>
<p id="rfc.section.3.2.p.1">There are two ways how the authorization rules described in this document may be conveyed between different parties:</p>
<p></p>

<ul>
<li>RFC 4119 <a href="#RFC4119">[RFC4119]</a> allows enhanced authorization policies to be referenced via a Uniform Resource Locator (URL) in the 'ruleset-reference' element.  The ruleset-reference' element is part of the basic rules that always travel with the Location Object. </li>
<li>Authorization policies might, for example, also be stored at a Location Server / Presence Server. The Rule Maker therefore needs to use a protocol to create, modify and delete the authorization policies defined in this document. Such a protocol is available with the Extensible Markup Language (XML) Configuration Access Protocol (XCAP) <a href="#RFC4825">[RFC4825]</a>.</li>
</ul>

<p> </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#conditions" id="conditions">Location-specific Conditions</a>
</h1>
<p id="rfc.section.4.p.1">This section describes the location-specific conditions of a rule. The &lt;conditions&gt; element contains zero, one or an unbounded number of &lt;location-condition&gt; child element(s). Providing more than one &lt;location-condition&gt; element may not be useful since all child elements of the &lt;conditions&gt; element must evaluate to TRUE in order for the &lt;conditions&gt; element to be TRUE. The &lt;location-condition&gt; element MUST contain at least one &lt;location&gt; child element. The &lt;location-condition&gt; element evaluates to TRUE if any of its child elements is TRUE, i.e., a logical OR. </p>
<p id="rfc.section.4.p.2">The &lt;location&gt; element has three attributes, namely 'profile', 'xml:lang' and 'label'. The 'profile' attribute allows to indicate the location profile that is included as child elements in the &lt;location&gt; element and each profile needs to describe under what conditions each &lt;location&gt; element evaluates to TRUE. This document defines two location profiles, one civic and one geodetic location profile, see <a href="#geodetic-condition">Section 4.1</a> and <a href="#civic-condition">Section 4.2</a>. The 'label' attribute allows a human readable description to be added to each &lt;location&gt; element. The 'xml:lang' attribute contains a language tag providing further information for rendering of the content of the 'label' attribute.</p>
<p id="rfc.section.4.p.3">The &lt;location-condition&gt; and the &lt;location&gt; elements provide extension points. If an extension is not understood by the entity evaluating the rules then this rule evaluates to FALSE. </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#geodetic-condition" id="geodetic-condition">Geodetic Location Condition Profile</a>
</h1>
<p id="rfc.section.4.1.p.1">The geodetic location profile is identified by the token 'geodetic-condition'. Rule Makers use this profile by placing a <a href="#GML">GML</a> <cite title="NONE">[GML]</cite> &lt;Circle&gt; element within the &lt;location&gt; element (as described in Section 5.2.3 of <a href="#RFC5491">[RFC5491]</a>). </p>
<p id="rfc.section.4.1.p.2">The &lt;location&gt; element containing the information for the geodetic location profile evaluates to TRUE if the current location of the Target is within the described location. Note that the Target's actual location might be represented by any of the location shapes described in <a href="#RFC5491">[RFC5491]</a>. If the geodetic location of the Target is unknown then the &lt;location&gt; element containing the information for the geodetic location profile evaluates to FALSE. </p>
<p id="rfc.section.4.1.p.3">Implementations are REQUIRED to support the following coordinate reference system based on WGS 84 <a href="#NIMA.TR8350.2-3e">[NIMA.TR8350.2-3e]</a> based on the European Petroleum Survey Group (EPSG) Geodetic Parameter Dataset (as formalized by the Open Geospatial Consortium (OGC)): </p>
<p></p>

<dl>
<dt>2D:</dt>
<dd style="margin-left: 8">WGS 84 (latitude, longitude), as identified by the URN "urn:ogc:def:crs:EPSG::4326". This is a two dimensional CRS.</dd>
</dl>

<p> </p>
<p id="rfc.section.4.1.p.5">A CRS MUST be specified using the above URN notation only, implementations do not need to support user-defined CRSs. </p>
<p id="rfc.section.4.1.p.6">Implementations MUST specify the CRS using the "srsName" attribute on the outermost geometry element. The CRS MUST NOT be changed for any sub-elements. The "srsDimension" attribute MUST be omitted, since the number of dimensions in these CRSs is known. </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#civic-condition" id="civic-condition">Civic Location Condition Profile</a>
</h1>
<p id="rfc.section.4.2.p.1">The civic location profile is identified by the token 'civic-condition'. Rule Makers use this profile by placing a &lt;civicAddress&gt; element, defined in <a href="#RFC5139">[RFC5139]</a>, within the &lt;location&gt; element.</p>
<p id="rfc.section.4.2.p.2">All child elements of &lt;location&gt; element that carry &lt;civicAddress&gt; elements MUST evaluate to TRUE (i.e., logical AND) in order for the &lt;location&gt; element to evaluate to TRUE. For each child element, the value of that element is compared to the value of the same element in the Target's civic location. The child element evaluates to TRUE if the two values are identical based on a bit-by-bit comparison. </p>
<p id="rfc.section.4.2.p.3">If the civic location of the Target is unknown, then the &lt;location&gt; element containing the information for the civic location profile evaluates to FALSE. This case may occur, for example, if location information has been removed by earlier transmitters of location information or if only the geodetic location is known. In general, it is RECOMMENDED behavior for a LS not to apply a translation from geodetic location to civic location (i.e., geocode the location). </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Actions</h1>
<p id="rfc.section.5.p.1">This document does not define location-specific actions. </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#transformations" id="transformations">Transformations</a>
</h1>
<p id="rfc.section.6.p.1">This document defines several elements that allow Rule Makers to specify transformations that </p>

<ul>
<li>reduce the accuracy of the returned location information, and </li>
<li>set the basic authorization policies carried inside the PIDF-LO.</li>
</ul>

<p> </p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Set Retransmission-Allowed</h1>
<p id="rfc.section.6.1.p.1">This element asks the LS to change or set the value of the &lt;retransmission-allowed&gt; element in the PIDF-LO. The data type of the &lt;set-retransmission-allowed&gt; element is a boolean. </p>
<p id="rfc.section.6.1.p.2">If the value of the &lt;set-retransmission-allowed&gt; element is set to TRUE then the &lt;retransmission-allowed&gt; element in the PIDF-LO MUST be set to TRUE. If the value of the &lt;set-retransmission-allowed&gt; element is set to FALSE, then the &lt;retransmission-allowed&gt; element in the PIDF-LO MUST be set to FALSE. </p>
<p id="rfc.section.6.1.p.3">If the &lt;set-retransmission-allowed&gt; element is absent then the value of the &lt;retransmission-allowed&gt; element in the PIDF-LO MUST be kept unchanged or, if the PIDF-LO is created for the first time, then the value MUST be set to FALSE.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> Set Retention-Expiry</h1>
<p id="rfc.section.6.2.p.1">This transformation asks the LS to change or set the value of the &lt;retention-expiry&gt; element in the PIDF-LO. The data type of the &lt;set-retention-expiry&gt; element is an integer.</p>
<p id="rfc.section.6.2.p.2">The value provided with the &lt;set-retention-expiry&gt; element indicates seconds and these seconds are added to the current date.</p>
<p id="rfc.section.6.2.p.3">If the &lt;set-retention-expiry&gt; element is absent then the value of the &lt;retention-expiry&gt; element in the PIDF-LO is kept unchanged or, if the PIDF-LO is created for the first time, then the value MUST be set to the current date.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#notewell" id="notewell">Set Note-Well</a>
</h1>
<p id="rfc.section.6.3.p.1">This transformation asks the LS to change or set the value of the &lt;note-well&gt; element in the PIDF-LO. The data type of the &lt;set-note-well&gt; element is a string.</p>
<p id="rfc.section.6.3.p.2">The value provided with the &lt;set-note-well&gt; element contains a privacy statement as a human readable text string and an 'xml:lang' attribute denotes the language of the human readable text.</p>
<p id="rfc.section.6.3.p.3">If the &lt;set-note-well&gt; element is absent, then the value of the &lt;note-well&gt; element in the PIDF-LO is kept unchanged or, if the PIDF-LO is created for the first time, then no content is provided for the &lt;note-well&gt; element.</p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> Keep Ruleset Reference</h1>
<p id="rfc.section.6.4.p.1">This transformation allows to influence whether the &lt;external-ruleset&gt; element in the PIDF-LO carries the extended authorization rules defined in <a href="#RFC4745">[RFC4745]</a>. The data type of the &lt;keep-rule-reference&gt; element is Boolean. </p>
<p id="rfc.section.6.4.p.2">If the value of the &lt;keep-rule-reference&gt; element is set to TRUE, then the &lt;external-ruleset&gt; element in the PIDF-LO is kept unchanged when included.  If the value of the &lt;keep-rule-reference&gt; element is set to FALSE, then the &lt;external-ruleset&gt; element in the PIDF-LO MUST NOT contain a reference to an external rule set. The reference to the ruleset is removed and no rules are carried as MIME bodies (in case of CID URIs). </p>
<p id="rfc.section.6.4.p.3">If the &lt;keep-rule-reference&gt; element is absent, then the value of the &lt;external-ruleset&gt; element in the PIDF-LO is kept unchanged when available or, if the PIDF-LO is created for the first time then the &lt;external-ruleset&gt; element MUST NOT be included.</p>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> <a href="#obfuscation" id="obfuscation">Provide Location</a>
</h1>
<p id="rfc.section.6.5.p.1">The &lt;provide-location&gt; element contains child elements of a specific location profile that controls the granularity of returned location information. This form of location granularity reduction is also called 'obfuscation' and is defined in <a href="#duckham05">[duckham05]</a> as </p>
<p></p>

<ul class="empty"><li>"the means of deliberately degrading the quality of information about an individual&#8217;s location in order to protect that individual&#8217;s location privacy." </li></ul>

<p> </p>
<p id="rfc.section.6.5.p.3">Location obscuring presents a number of technical challenges.  The algorithms provided in this document are provided as examples only. A discussion of the technical constraints on location obscuring is included in <a href="#limitations">Section 13.4</a>.  </p>
<p id="rfc.section.6.5.p.4">The functionality of location granularity reduction depends on the type of location provided as input. This document defines two profiles for reduction, namely:<br><br> </p>

<ul>
<li>If the &lt;provide-location&gt; element has a &lt;provide-civic&gt; child element then civic location information is disclosed as described in <a href="#civic-transformation">Section 6.5.1</a>, subject to availability.<br><br>
</li>
<li>If the &lt;provide-location&gt; element has a &lt;provide-geo&gt; child element then geodetic location information is disclosed as described in <a href="#geodetic-transformation">Section 6.5.2</a>, subject to availability.<br><br>
</li>
</ul>

<p> </p>
<p id="rfc.section.6.5.p.5">The &lt;provide-location&gt; element MUST contain the 'profile' attribute if it contains child elements and the 'profile' attribute MUST match with the contained child elements.</p>
<p id="rfc.section.6.5.p.6">If the &lt;provide-location&gt; element has no child elements then civic, as well as, geodetic location information is disclosed without reducing its granularity, subject to availability. In this case the profile attribute MUST NOT be included.</p>
<h1 id="rfc.section.6.5.1">
<a href="#rfc.section.6.5.1">6.5.1.</a> <a href="#civic-transformation" id="civic-transformation">Civic Location Profile</a>
</h1>
<p id="rfc.section.6.5.1.p.1">This profile uses the token 'civic-transformation'. This profile allows civic location transformations to be specified by means of the &lt;provide-civic&gt; element that restricts the level of civic location information the LS is permitted to disclose.  The symbols of these levels are: 'country', 'region', 'city', 'building', 'full'. Each level is given by a set of civic location data items such as &lt;country&gt; and &lt;A1&gt;, ..., &lt;POM&gt;, as defined in <a href="#RFC5139">[RFC5139]</a>.  Each level includes all elements included by the lower levels.</p>
<p id="rfc.section.6.5.1.p.2">The 'country' level includes only the &lt;country&gt; element; the 'region' level adds the &lt;A1&gt; element; the 'city' level adds the &lt;A2&gt; and &lt;A3&gt; elements; the 'building' level and the 'full' level add further civic location data as shown below.</p>
<div id="#rfc.figure.1"></div>
<pre>
                           full
   {&lt;country&gt;, &lt;A1&gt;, &lt;A2&gt;, &lt;A3&gt;, &lt;A4&gt;, &lt;A5&gt;, &lt;A6&gt;, &lt;PRD&gt;, &lt;POD&gt;,
    &lt;STS&gt;, &lt;HNO&gt;, &lt;HNS&gt;, &lt;LMK&gt;, &lt;LOC&gt;, &lt;PC&gt;, &lt;NAM&gt;, &lt;FLR&gt;,
    &lt;BLD&gt;,&lt;UNIT&gt;,&lt;ROOM&gt;,&lt;PLC&gt;, &lt;PCN&gt;, &lt;POBOX&gt;, &lt;ADDCODE&gt;, &lt;SEAT&gt;
    &lt;RD&gt;, &lt;RDSEC&gt;, &lt;RDBR&gt;, &lt;RDSUBBR&gt;, &lt;PRM&gt;, &lt;POM&gt;}
                            |
                            |
                         building
      {&lt;country&gt;, &lt;A1&gt;, &lt;A2&gt;, &lt;A3&gt;, &lt;A4&gt;, &lt;A5&gt;, &lt;A6&gt;, &lt;PRD&gt;
      &lt;POD&gt;, &lt;STS&gt;, &lt;HNO&gt;, &lt;HNS&gt;, &lt;LMK&gt;, &lt;PC&gt;,
      &lt;RD&gt;, &lt;RDSEC&gt;, &lt;RDBR&gt;, &lt;RDSUBBR&gt; &lt;PRM&gt;, &lt;POM&gt;}
                            |
                            |
                          city
                  {&lt;country&gt;, &lt;A1&gt;, &lt;A2&gt;, &lt;A3&gt;}
                            |
                            |
                          region
                     {&lt;country&gt;, &lt;A1&gt;}
                            |
                            |
                         country
                       {&lt;country&gt;}
                            |
                            |
                           none
                           {}
</pre>
<p></p>
<p id="rfc.section.6.5.1.p.4">The default value is "none".</p>
<p id="rfc.section.6.5.1.p.5">The schema of the &lt;provide-civic&gt; element is defined in <a href="#profile-schema">Section 8</a>.</p>
<h1 id="rfc.section.6.5.2">
<a href="#rfc.section.6.5.2">6.5.2.</a> <a href="#geodetic-transformation" id="geodetic-transformation">Geodetic Location Profile</a>
</h1>
<p id="rfc.section.6.5.2.p.1">This profile uses the token 'geodetic-transformation' and refers only to the Coordinate Reference System (CRS) WGS 84 (urn:ogc:def:crs:EPSG::4326, 2D). This profile allows geodetic location transformations to be specified by means of the &lt;provide-geo&gt; element that may restrict the returned geodetic location information based on the value provided in the 'radius' attribute. The value of the 'radius' attribute expresses the radius in meters.</p>
<p id="rfc.section.6.5.2.p.2">The schema of the &lt;provide-geo&gt; element is defined in <a href="#profile-schema">Section 8</a>.</p>
<div id="#rfc.figure.2"></div>
<pre>
  C1. x &lt; p and y &lt; p
  C2. p &lt;= x &lt; q and y &lt; x and y &lt; 1-x 
  C3. q &lt;= x and y &lt; p

  C4. p &lt;= y &lt; q and x &lt;= y and y &lt; 1-x 
  C5. p &lt;= y &lt; q and y &lt; x and 1-x &lt;= y 

  C6. x &lt; p and q &lt;= y
  C7. p &lt;= x &lt; q and x &lt;= y and 1-x &lt;= y 
  C8. q &lt;= x and q &lt;= y
</pre>
<div id="#rfc.figure.3"></div>
<pre>
  C1: SW
  C2: SW or SE 
  C3: SE

  C4: SW or NW 
  C5: SE or NE 

  C6: NW
  C7: NW or NE 
  C8: NE
</pre>
<p id="rfc.section.6.5.2.p.3">The algorithm proceeds in 6 steps.The first two steps are independent of the measured position to be obscured. Those two steps should be run only once or rather seldom (for every region and desired uncertainty).  The steps are: </p>

<ol>
<li>Choose a geodesic projection with Cartesian coordinates and a surface you want to cover.  The maximal distortion of the map may not be too much (see notes below).  </li>
<li>Given uncertainty "d", choose a grid of so called "landmarks" at a distance (maximal) d of each other.  </li>
<li>Given a measured location M=(m,n) in the surface, calculate its 4 closest landmarks on the grid, with coordinates: SW = (l,b), SE=(r,b), NW=(l,t), NE=(r,t).  Thus l&lt;=m&lt;r and b&lt;=n&lt;t.  See notes below.  </li>
<li>Let x=(m-l)/(r-l) and y=(n-b)/(t-b) <br><br> x and y are thus the local coordinates of the point M in the small grid square that contains it. 0&lt;=x,y&lt;1.  </li>
<li>Let P = 0.2887 (=sqrt(3)/6) and q = 0.7113 (=1-p), determine which of the following 8 cases holds: </li>
<li>Depending on the case, let C (=Center) be </li>
</ol>

<p> </p>
<p id="rfc.section.6.5.2.p.4">Return the circle with center C and radius d.</p>
<p id="rfc.section.6.5.2.p.5">Notes:</p>

<dl>
<dt>Regarding Step 1:</dt>
<dd style="margin-left: 8">
<br><br> The scale of a map is the ratio of a distance on (a straight line) on the map to the corresponding air distance on the ground. For maps covering larger areas, a map projection from a sphere (or ellipsoid) to the plane will introduce distortion and the scale of the map is not constant. Also, note that the real distance on the ground is taken along great circles, which may not correspond to straight lines in the map, depending on the projection used. Let us measure the (length) distortion of the map as the quotient between the maximal and the minimal scales in the map. The distortion MUST be below 1.5. (The minimum distortion is 1.0: If the region of the map is small, then the scale may be taken as a constant over the whole map).  </dd>
<dt>Regarding Step3:</dt>
<dd style="margin-left: 8">
<br><br> SW is mnemonic for south-west, b for bottom, l for left (SW=(l,b)), etc, but the directions of the geodesic projection may be arbitrary, and thus SW may be not south-west of M but it will be left and below M *on the map*.  </dd>
</dl>

<p> </p>
<p id="rfc.section.6.5.2.p.6">This algorithm is applied to the known location every time it changes.  Movement between the defined grid areas triggers a change in the location that is reported, which could reveal significantly more about the location than desired.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#example" id="example">Examples</a>
</h1>
<p id="rfc.section.7.p.1">This section provides a few examples for authorization rules using the extensions defined in this document. </p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> Rule Example with Civic Location Condition</h1>
<p id="rfc.section.7.1.p.1">This example illustrates a single rule that employs the civic location condition. It matches if the current location of the Target equal the content of the child elements of the &lt;location&gt; element. Requests match only if the Target is at a civic location with country set to 'Germany', state (A1) set to 'Bavaria', city (A3) set to 'Munich', city division (A4) set to 'Perlach', street name (A6) set to 'Otto-Hahn-Ring' and house number (HNO) set to '6'.</p>
<p id="rfc.section.7.1.p.2">No actions and transformation child elements are provided in this rule example. The actions and transformation could include presence specific information when the Geolocation Policy framework is applied to the Presence Policy framework (see <a href="#RFC5025">[RFC5025]</a>). </p>
<div id="#rfc.figure.4"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ruleset xmlns="urn:ietf:params:xml:ns:common-policy"
  xmlns:gp="urn:ietf:params:xml:ns:geolocation-policy"&gt;

  &lt;rule id="AA56i09"&gt;
    &lt;conditions&gt;
      &lt;gp:location-condition&gt;
        &lt;gp:location 
          profile="civic-condition"
          xml:lang="en"
          label="Siemens Neuperlach site 'Legoland'" 
          xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"&gt;
          &lt;country&gt;DE&lt;/country&gt;
          &lt;A1&gt;Bavaria&lt;/A1&gt;
          &lt;A3&gt;Munich&lt;/A3&gt;
          &lt;A4&gt;Perlach&lt;/A4&gt;
          &lt;A6&gt;Otto-Hahn-Ring&lt;/A6&gt;
          &lt;HNO&gt;6&lt;/HNO&gt;
        &lt;/gp:location&gt;
      &lt;/gp:location-condition&gt;
    &lt;/conditions&gt;
    &lt;actions/&gt;
    &lt;transformations/&gt;
  &lt;/rule&gt;
&lt;/ruleset&gt;
              </pre>
<p></p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Rule Example with Geodetic Location Condition</h1>
<p id="rfc.section.7.2.p.1">This example illustrates a rule that employs the geodetic location condition. The rule matches if the current location of the Target is inside the area specified by the polygon.  The polygon uses the EPSG 4326 coordinate reference system. No altitude is included in this example. </p>
<div id="#rfc.figure.5"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ruleset 
  xmlns="urn:ietf:params:xml:ns:common-policy"
  xmlns:gp="urn:ietf:params:xml:ns:geolocation-policy"
  xmlns:gml="http://www.opengis.net/gml"
  xmlns:gs="http://www.opengis.net/pidflo/1.0"&gt;

  &lt;rule id="BB56A19"&gt;
    &lt;conditions&gt;
      &lt;gp:location-condition&gt;
        &lt;gp:location 
          xml:lang="en"
          label="Sydney Opera House" 
          profile="geodetic-condition"&gt;          
          &lt;gs:Circle srsName="urn:ogc:def:crs:EPSG::4326"&gt;
            &lt;gml:pos&gt;-33.8570029378 151.2150070761&lt;/gml:pos&gt;
            &lt;gs:radius uom="urn:ogc:def:uom:EPSG::9001"&gt;1500
            &lt;/gs:radius&gt;
          &lt;/gs:Circle&gt;        
        &lt;/gp:location&gt;
      &lt;/gp:location-condition&gt;
    &lt;/conditions&gt;
    &lt;transformations/&gt;
  &lt;/rule&gt;
&lt;/ruleset&gt;
             </pre>
<p></p>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> Rule Example with Civic and Geodetic Location Condition</h1>
<p id="rfc.section.7.3.p.1">This example illustrates a rule that employs a mixed civic and geodetic location condition. Depending on the available type of location information, namely civic or geodetic location information, one of the location elements may match. </p>
<div id="#rfc.figure.6"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ruleset 
  xmlns="urn:ietf:params:xml:ns:common-policy"
  xmlns:gp="urn:ietf:params:xml:ns:geolocation-policy"
  xmlns:gml="http://www.opengis.net/gml"
  xmlns:gs="http://www.opengis.net/pidflo/1.0"&gt;
              
  &lt;rule id="AA56i09"&gt;
    &lt;conditions&gt;
      &lt;gp:location-condition&gt;
        &lt;gp:location profile="civic-condition"
          xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"&gt;
          &lt;country&gt;DE&lt;/country&gt;
          &lt;A1&gt;Bavaria&lt;/A1&gt;
          &lt;A3&gt;Munich&lt;/A3&gt;
          &lt;A4&gt;Perlach&lt;/A4&gt;
          &lt;A6&gt;Otto-Hahn-Ring&lt;/A6&gt;
          &lt;HNO&gt;6&lt;/HNO&gt;
        &lt;/gp:location&gt;
        &lt;gp:location profile="geodetic-condition"&gt;
          &lt;gs:Circle srsName="urn:ogc:def:crs:EPSG::4326"&gt;
             &lt;gml:pos&gt;-34.410649 150.87651&lt;/gml:pos&gt;
             &lt;gs:radius uom="urn:ogc:def:uom:EPSG::9001"&gt;1500
             &lt;/gs:radius&gt;
          &lt;/gs:Circle&gt;
        &lt;/gp:location&gt;
      &lt;/gp:location-condition&gt;
    &lt;/conditions&gt;
    &lt;actions/&gt;
    &lt;transformations/&gt;
  &lt;/rule&gt;
&lt;/ruleset&gt;
             </pre>
<p></p>
<h1 id="rfc.section.7.4">
<a href="#rfc.section.7.4">7.4.</a> Rule Example with Location-based Transformations</h1>
<p id="rfc.section.7.4.p.1">This example shows the transformations specified in this document. The &lt;provide-civic&gt; element indicates that the available civic location information is reduced to building level granularity. If geodetic location information is requested then a granularity reduction is provided as well.</p>
<div id="#rfc.figure.7"></div>
<pre>      
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ruleset xmlns="urn:ietf:params:xml:ns:common-policy"
  xmlns:gp="urn:ietf:params:xml:ns:geolocation-policy"
  xmlns:lp="urn:ietf:params:xml:ns:basic-location-profiles"&gt;

  &lt;rule id="AA56i09"&gt;
    &lt;conditions/&gt;
    &lt;actions/&gt;
    &lt;transformations&gt;
      &lt;gp:set-retransmission-allowed&gt;false
      &lt;/gp:set-retransmission-allowed&gt;
      &lt;gp:set-retention-expiry&gt;86400&lt;/gp:set-retention-expiry&gt;
      &lt;gp:set-note-well xml:lang="en"&gt;My privacy policy goes in here.
      &lt;/gp:set-note-well&gt;
      &lt;gp:keep-rule-reference&gt;false
      &lt;/gp:keep-rule-reference&gt;
      
      &lt;gp:provide-location 
        profile="civic-transformation"&gt;
        &lt;lp:provide-civic&gt;building&lt;/lp:provide-civic&gt;
      &lt;/gp:provide-location&gt;
      
      &lt;gp:provide-location 
        profile="geodetic-transformation"&gt;
        &lt;lp:provide-geo radius="500"/&gt;        
      &lt;/gp:provide-location&gt;

    &lt;/transformations&gt;
  &lt;/rule&gt;
&lt;/ruleset&gt;
              </pre>
<p></p>
<p id="rfc.section.7.4.p.3">The following rule describes the short-hand notation for making the current location of the Target available to Location Recipients without granularity reduction. </p>
<div id="#rfc.figure.8"></div>
<pre>        
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ruleset xmlns="urn:ietf:params:xml:ns:common-policy"
    xmlns:gp="urn:ietf:params:xml:ns:geolocation-policy"&gt;

    &lt;rule id="AA56ia9"&gt;
        &lt;conditions/&gt;
        &lt;actions/&gt;
        &lt;transformations&gt;
            &lt;gp:provide-location/&gt;
        &lt;/transformations&gt;
    &lt;/rule&gt;
&lt;/ruleset&gt;
          </pre>
<p></p>
<h1 id="rfc.section.7.5">
<a href="#rfc.section.7.5">7.5.</a> Location Obfuscation Example</h1>
<p id="rfc.section.7.5.p.1">Suppose you want a to obscure positions in the continental USA.</p>
<p></p>

<dl>
<dt>Step 1:</dt>
<dd style="margin-left: 8">
<br><br> First you choose a geodesic projection. If you are measuring location as latitude and longitude, a natural choice is to take a rectangular projection.  One latitudinal degree corresponds approximately to 110.6 kilometers, while a good approximation of a longitudinal degree at latitude phi is (pi/180)*M*cos(phi), where pi is approximately 3.1415, and M is the Earth's average meridional radius, approximately 6,367.5 km. For instance, one longitudinal degree at 30 degrees (say, New Orleans) is 96.39 km, while the formula given offers an estimation of 96.24, which is good for our purposes.  <br><br> We will set up a grid not only for the continental US, but for the whole earth between latitudes 25 and 50 degrees, and thus will cover also the Mediterranean, South Europe, Japan and the north of China. As will be seen below, the grid distortion (for not too large grids in this region) is approx cos(25)/cos(50), which is 1.4099.  <br><br> As origin of our grid, we choose the point at latitude 25 degrees and longitude 0 (Greenwich). The latitude 25 degrees is chosen to be just south of Florida and thus south of the continental US. (On the south hemisphere the origin should be north of the region to be covered; if the region crosses the Equator, the origin should be on the Equator.  In his way it is guaranteed that the latitudinal degree has largest distance at the latitude of the origin).  <br><br> At 25 degrees one degree in east-west direction corresponds approx to (pi/180)*M*cos(25) = 100.72 km.  <br><br> The same procedure, basically, produces grids for <ul>
<li>45 degrees south to 45 degrees north   Tropics and subtropics</li>
<li>25 to 50 degrees (both north or south) Continental US</li>
<li>35 to 55 degrees (both north or south) South and Central Europe</li>
<li>45 to 60 degrees (both north or south) Central and North Europe</li>
<li>55 to 65 degrees (both north or south) Scandinavia</li>
<li>60 to 70 degrees (both north or south)</li>
</ul>
<p> Since we do not want to often change grid system (this would leak more information about obscured locations when they are repeatedly visited), the algorithm should prefer to use the grids discussed above, with origin at the Greenwich meridian and at latitudes o=0, o=25, o=35, o=45, 0=55, and o=60 degrees (north) or at latitudes o=-25, o=-35, o=-45, 0=-55, and o=-60 degrees (the minus to indicate "south").  </p>
<br><br> Our choice for the continental USA is o=25.  <br><br> For locations close to the poles, a different projection should be used (not discussed here).  <br><br>
</dd>
<dt>Step 2:</dt>
<dd style="margin-left: 8">
<br><br> To construct the grid points, we start with our chosen origin and place the along the main axes (NS and EW) grid points at a distance d of each other.  <br><br> We will now construct a grid for a desired uncertainty of d = 100km. At our origin, 100 km correspond roughly to d1 = 100/100.72 = 0.993 degrees on east-west direction and to d2 = 100/110.6 = 0.904 degrees in north-south direction.  <br><br> The (i,j)-point in the grid (i and j are integers) has longitude d1*i and latitude 25+d2*j, measured in degrees.  More generally, if the grid has origin at coordinates (0,o), measured in degrees, the (i,j)-point in the grid has coordinates (longitude = d1*i, latitude = o+d2*j).  The grid has almost no distorsion at the latitude of the origin, but it has as we go further away from it.  <br><br> The distance between two points in the grid at 25 degrees latitude is indeed approx 100 km, but just above the Canadian border, on the 50th degree, it is 0.993*(pi/180)*M*cos(50) = 70.92km. Thus, the grid distortion is 100/70.92 = 1.41, which is acceptable (&lt;1.5).  (On north-south direction the grid has roughly no distortion, the vertical distance between two neighboring grid points is approximately 100 km).  <br><br>
</dd>
<dt>Step 3:</dt>
<dd style="margin-left: 8">
<br><br> Now suppose you measure a position at M, with longitude -105 (the minus sign is used to denote 105 degrees *west*; without minus, the point is in China, 105 degrees east) and latitude 40 degrees (just north of Denver, CO). The point M is 105 degrees west and 15 degrees north of our origin (which has longitude 0 and latitude 25).  <br><br> Let "floor" be the function that returns the largest integer smaller or equal to a floating point number. To calculate SW, the closest point of the grid on the south-west of M=(m,n), we calculate <br><br> i= floor(m/d1) = floor(-105/0.993) = -106 <br><br> j= floor(n-o/d2) = floor(15/0.904) = 16 <br><br> Those are the indexes of SW on the grid. The coordinates of SW are then: (d1*i, 25+d2*j) = (-105.242, 39.467).  <br><br> Thus: <br><br> l=d1*floor(m/d1)     = -105.243 <br><br> r=l+d1               = -105.243+0.993 =  -104.250 <br><br> b=o+d2*floor(n-o/d2) = 39.467 <br><br> t=b+d2               = 39.467+0.904 = 40.371 <br><br> These are the formulas for l,r,b, and t in the general case of Cartesian projections based on latitude and longitude.  <br><br>
</dd>
<dt>Step 4:</dt>
<dd style="margin-left: 8">
<br><br> Calculate x and y, the local coordinates of the point M in the small grid square that contains it.  This is easy: <br><br> x=(m-l)/(r-l) = [-105 -(-105.243)]/0.993 = 0.245 <br><br> y=(n-b)/(t-b) = [40 - 39.467]/0.904 = 0.590 <br><br>
</dd>
<dt>Step 5:</dt>
<dd style="margin-left: 8">
<br><br> First compare x with p (0.2887) and (0.7113). x is smaller than p. Therefore, only cases 1,4 or 6 could hold.  <br><br> Also compare y with p (0.2887) and (0.7113). y is between them: p &lt;= y &lt; q. Thus, we must be in case 4. To check, compare y (0.59) with x (0.245) and 1-x. y is larger than x and smaller than 1-x. We are in case C4 (p &lt;= y &lt; q and x &lt;= y and y &lt; 1-x).  <br><br>
</dd>
<dt>Step 6:</dt>
<dd style="margin-left: 8">
<br><br> Now we choose either SW or NW as the center of the circle.  <br><br> The obscured location is the Circle with radius 100 km and center in SW (coordinates: -105.243, 39.467), or NW (coordinates: -105.243, 40.371).  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#profile-schema" id="profile-schema">XML Schema for Basic Location Profiles</a>
</h1>
<p id="rfc.section.8.p.1">This section defines the location profiles used as child elements of the transformation element.</p>
<div id="#rfc.figure.9"></div>
<pre>      
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema 
    targetNamespace="urn:ietf:params:xml:ns:basic-location-profiles"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    elementFormDefault="qualified"
    attributeFormDefault="unqualified"&gt;

    &lt;!-- profile="civic-transformation" --&gt;

    &lt;xs:element name="provide-civic" default="none"&gt;
        &lt;xs:simpleType&gt;
            &lt;xs:restriction base="xs:string"&gt;
                &lt;xs:enumeration value="full"/&gt;
                &lt;xs:enumeration value="building"/&gt;
                &lt;xs:enumeration value="city"/&gt;
                &lt;xs:enumeration value="region"/&gt;
                &lt;xs:enumeration value="country"/&gt;
                &lt;xs:enumeration value="none"/&gt;
            &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
    &lt;/xs:element&gt;

    &lt;!-- profile="geodetic-transformation" --&gt;

    &lt;xs:element name="provide-geo"&gt;
        &lt;xs:complexType&gt;
            &lt;xs:attribute name="radius" type="xs:integer"/&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;

&lt;/xs:schema&gt;
              </pre>
<p></p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#schema" id="schema">XML Schema for Geolocation Policy</a>
</h1>
<p id="rfc.section.9.p.1">This section presents the XML schema that defines the Geolocation Policy schema described in this document. The Geolocation Policy schema extends the Common Policy schema (see <a href="#RFC4745">[RFC4745]</a>).</p>
<div id="#rfc.figure.10"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema 
  targetNamespace="urn:ietf:params:xml:ns:geolocation-policy"
  xmlns:gp="urn:ietf:params:xml:ns:geolocation-policy" 
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified" 
  attributeFormDefault="unqualified"&gt;
    
  &lt;!-- Import Common Policy--&gt;
  &lt;xs:import namespace="urn:ietf:params:xml:ns:common-policy"/&gt;
  
  &lt;!-- This import brings in the XML language attribute xml:lang--&gt;
  &lt;xs:import namespace="http://www.w3.org/XML/1998/namespace"
    schemaLocation="http://www.w3.org/2001/xml.xsd"/&gt;
  
  &lt;!-- Geopriv Conditions --&gt;
  
  &lt;xs:element name="location-condition" 
    type="gp:locationconditionType"/&gt;
  
  &lt;xs:complexType name="locationconditionType"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:choice minOccurs="1" maxOccurs="unbounded"&gt;  
          &lt;xs:element name="location" type="gp:locationType" 
            minOccurs="1" maxOccurs="unbounded"/&gt;
          &lt;xs:any namespace="##other" processContents="lax" 
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:choice&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name="locationType"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:choice minOccurs="1" maxOccurs="unbounded"&gt;
          &lt;xs:any namespace="##other" processContents="lax" 
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:choice&gt;
        &lt;xs:attribute name="profile" type="xs:string"/&gt;
        &lt;xs:attribute name="label" type="xs:string"/&gt;
        &lt;xs:attribute ref="xml:lang" /&gt;        
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;
  
  &lt;!-- Geopriv transformations --&gt;
  &lt;xs:element name="set-retransmission-allowed" 
    type="xs:boolean" default="false"/&gt;
  &lt;xs:element name="set-retention-expiry" 
    type="xs:integer" default="0"/&gt;
  &lt;xs:element name="set-note-well"
    type="gp:notewellType"/&gt;
  &lt;xs:element name="keep-rule-reference" 
    type="xs:boolean" default="false"/&gt;
  
  &lt;xs:element name="provide-location" 
    type="gp:providelocationType"/&gt;
  
  &lt;xs:complexType name="notewellType"&gt;
    &lt;xs:simpleContent&gt;
      &lt;xs:extension base="xs:string"&gt;
        &lt;xs:attribute ref="xml:lang" /&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name="providelocationType"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:choice minOccurs="0" maxOccurs="unbounded"&gt;
          &lt;xs:any namespace="##other" processContents="lax" 
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:choice&gt;
        &lt;xs:attribute name="profile" type="xs:string" /&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;
  
&lt;/xs:schema&gt;
            </pre>
<p></p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> XCAP Usage</h1>
<p id="rfc.section.10.p.1">The following section defines the details necessary for clients to manipulate geolocation privacy documents from a server using XCAP. If used as part of a presence system, it uses the same AUID as those rules. See <a href="#RFC5025">[RFC5025]</a> for a description of the XCAP usage in context with presence authorization rules. </p>
<h1 id="rfc.section.10.1">
<a href="#rfc.section.10.1">10.1.</a> Application Unique ID</h1>
<p id="rfc.section.10.1.p.1">XCAP requires application usages to define a unique application usage ID (AUID) in either the IETF tree or a vendor tree. This specification defines the "geolocation-policy" AUID within the IETF tree, via the IANA registration in <a href="#iana">Section 11</a>. </p>
<h1 id="rfc.section.10.2">
<a href="#rfc.section.10.2">10.2.</a> XML Schema</h1>
<p id="rfc.section.10.2.p.1">XCAP requires application usages to define a schema for their documents. The schema for geolocation authorization documents is described in <a href="#schema">Section 9</a>. </p>
<h1 id="rfc.section.10.3">
<a href="#rfc.section.10.3">10.3.</a> Default Namespace</h1>
<p id="rfc.section.10.3.p.1">XCAP requires application usages to define the default namespace for their documents.  The default namespace is urn:ietf:params:xml:ns:geolocation-policy. </p>
<h1 id="rfc.section.10.4">
<a href="#rfc.section.10.4">10.4.</a> MIME Type</h1>
<p id="rfc.section.10.4.p.1">XCAP requires application usages to defined the MIME type for documents they carry.  Geolocation privacy authorization documents inherit the MIME type of common policy documents, application/auth-policy+xml. </p>
<h1 id="rfc.section.10.5">
<a href="#rfc.section.10.5">10.5.</a> Validation Constraints</h1>
<p id="rfc.section.10.5.p.1">This specification does not define additional constraints.</p>
<h1 id="rfc.section.10.6">
<a href="#rfc.section.10.6">10.6.</a> Data Semantics</h1>
<p id="rfc.section.10.6.p.1">This document discusses the semantics of a geolocation privacy authorization.</p>
<h1 id="rfc.section.10.7">
<a href="#rfc.section.10.7">10.7.</a> Naming Conventions</h1>
<p id="rfc.section.10.7.p.1">When a Location Server receives a request to access location information of some user foo, it will look for all documents within http://[xcaproot]/geolocation-policy/users/foo, and use all documents found beneath that point to guide authorization policy. </p>
<h1 id="rfc.section.10.8">
<a href="#rfc.section.10.8">10.8.</a> Resource Interdependencies</h1>
<p id="rfc.section.10.8.p.1">This application usage does not define additional resource interdependencies. </p>
<h1 id="rfc.section.10.9">
<a href="#rfc.section.10.9">10.9.</a> Authorization Policies</h1>
<p id="rfc.section.10.9.p.1">This application usage does not modify the default XCAP authorization policy, which is that only a user can read, write or modify his/her own documents. A server can allow privileged users to modify documents that they do not own, but the establishment and indication of such policies is outside the scope of this document. </p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.11.p.1">There are several IANA considerations associated with this specification. </p>
<h1 id="rfc.section.11.1">
<a href="#rfc.section.11.1">11.1.</a> Geolocation Policy XML Schema Registration</h1>
<div id="#rfc.figure.11"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
</pre>
<div id="#rfc.figure.12"></div>
<pre>
&lt;/xs:schema&gt;
</pre>
<p></p>

<dl>
<dt>URI:</dt>
<dd style="margin-left: 8">urn:ietf:params:xml:schema:geolocation-policy</dd>
<dt>Registrant Contact:</dt>
<dd style="margin-left: 8">IETF Geopriv Working Group, Hannes Tschofenig (hannes.tschofenig@nsn.com).</dd>
<dt>XML:</dt>
<dd style="margin-left: 8">The XML schema to be registered is contained in <a href="#schema">Section 9</a>. Its first line is </dd>
</dl>

<p> </p>
<h1 id="rfc.section.11.2">
<a href="#rfc.section.11.2">11.2.</a> Geolocation Policy Namespace Registration</h1>
<div id="#rfc.figure.13"></div>
<pre>
BEGIN
&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
  "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
  &lt;meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/&gt;
  &lt;title&gt;Geolocation Policy Namespace&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Namespace for Geolocation Authorization Policies&lt;/h1&gt;
  &lt;h2&gt;urn:ietf:params:xml:schema:geolocation-policy&lt;/h2&gt;
&lt;p&gt;See &lt;a href="[URL of published RFC]"&gt;RFCXXXX 
    [NOTE TO IANA/RFC-EDITOR: 
     Please replace XXXX with the RFC number of this
    specification.]&lt;/a&gt;.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
END
</pre>
<p></p>

<dl>
<dt>URI:</dt>
<dd style="margin-left: 8">urn:ietf:params:xml:ns:geolocation-policy</dd>
<dt>Registrant Contact:</dt>
<dd style="margin-left: 8">IETF Geopriv Working Group, Hannes Tschofenig (hannes.tschofenig@nsn.com).</dd>
<dt>XML:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.11.3">
<a href="#rfc.section.11.3">11.3.</a> <a href="#profile-registry" id="profile-registry">Geolocation Policy Location Profile Registry</a>
</h1>
<p id="rfc.section.11.3.p.1">This document seeks to create a registry of location profile names for the Geolocation Policy framework. Profile names are XML tokens. This registry will operate in accordance with <a href="#RFC2434">RFC 2434</a> <cite title="NONE">[RFC2434]</cite>, Standards Action.</p>
<p id="rfc.section.11.3.p.2">This document defines the following profile names:</p>
<p></p>

<dl>
<dt>geodetic-condition:</dt>
<dd style="margin-left: 8">Defined in <a href="#geodetic-condition">Section 4.1</a>.</dd>
<dt>civic-condition:</dt>
<dd style="margin-left: 8">Defined in <a href="#civic-condition">Section 4.2</a>.</dd>
<dt>geodetic-transformation:</dt>
<dd style="margin-left: 8">Defined in <a href="#geodetic-transformation">Section 6.5.2</a>.</dd>
<dt>civic-transformation:</dt>
<dd style="margin-left: 8">Defined in <a href="#civic-transformation">Section 6.5.1</a>.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.11.4">
<a href="#rfc.section.11.4">11.4.</a> Basic Location Profile XML Schema Registration</h1>
<div id="#rfc.figure.14"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
</pre>
<div id="#rfc.figure.15"></div>
<pre>
&lt;/xs:schema&gt;
</pre>
<p></p>

<dl>
<dt>URI:</dt>
<dd style="margin-left: 8">urn:ietf:params:xml:schema:basic-location-profiles</dd>
<dt>Registrant Contact:</dt>
<dd style="margin-left: 8">IETF Geopriv Working Group, Hannes Tschofenig (hannes.tschofenig@nsn.com).</dd>
<dt>XML:</dt>
<dd style="margin-left: 8">The XML schema to be registered is contained in <a href="#profile-schema">Section 8</a>. Its first line is </dd>
</dl>

<p> </p>
<h1 id="rfc.section.11.5">
<a href="#rfc.section.11.5">11.5.</a> Basic Location Profile Namespace Registration</h1>
<div id="#rfc.figure.16"></div>
<pre>
BEGIN
&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
  "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
  &lt;meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/&gt;
  &lt;title&gt;Basic Location Profile Namespace&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Namespace for Basic Location Profile&lt;/h1&gt;
  &lt;h2&gt;urn:ietf:params:xml:schema:basic-location-profiles&lt;/h2&gt;
&lt;p&gt;See &lt;a href="[URL of published RFC]"&gt;RFCXXXX 
    [NOTE TO IANA/RFC-EDITOR: 
     Please replace XXXX with the RFC number of this
    specification.]&lt;/a&gt;.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
END
</pre>
<p></p>

<dl>
<dt>URI:</dt>
<dd style="margin-left: 8">urn:ietf:params:xml:ns:basic-location-profiles</dd>
<dt>Registrant Contact:</dt>
<dd style="margin-left: 8">IETF Geopriv Working Group, Hannes Tschofenig (hannes.tschofenig@nsn.com).</dd>
<dt>XML:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.11.6">
<a href="#rfc.section.11.6">11.6.</a> XCAP Application Usage ID</h1>
<p id="rfc.section.11.6.p.1">This section registers an XCAP Application Usage ID (AUID) according to the IANA procedures defined in <a href="#RFC4825">[RFC4825]</a>.</p>
<p id="rfc.section.11.6.p.2">Name of the AUID: geolocation-policy </p>
<p id="rfc.section.11.6.p.3">Description: Geolocation privacy rules are documents that describe the permissions that a Target has granted to Location Recipients that access information about his/her geographic location. </p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> Internationalization Considerations</h1>
<p id="rfc.section.12.p.1">The policies described in this document are mostly meant for machine-to-machine communications; as such, many of its elements are tokens not meant for direct human consumption. If these tokens are presented to the end user, some localization may need to occur. The policies are, however, supposed to be created with the help of humans and some of the elements and attributes are subject to internationalization considerations. The content of the &lt;label&gt; element is meant to be provided by a human (the Rule Maker) and also displayed to a human. Furthermore, the location condition element (using the civic location profile, see <a href="#civic-condition">Section 4.2</a>) and the &lt;set-note-well&gt; element (see <a href="#notewell">Section 6.3</a>) may contain non-US-ASCII letters. </p>
<p id="rfc.section.12.p.2">The geolocation polices utilize XML and all XML processors are required to understand UTF-8 and UTF-16 encodings, and therefore all entities processing these policies MUST understand UTF-8 and UTF-16 encoded XML. Additionally, geolocation policy aware entities MUST NOT encode XML with encodings other than UTF-8 or UTF-16. </p>
<h1 id="rfc.section.13">
<a href="#rfc.section.13">13.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<h1 id="rfc.section.13.1">
<a href="#rfc.section.13.1">13.1.</a> Introduction</h1>
<p id="rfc.section.13.1.p.1">This document aims to allow users to prevent unauthorized access to location information and to restrict access to information dependent on geolocation (via location based conditions).  This is accomplished through the usage of authorization policies. This work builds on a series of other documents: Security requirements are described in <a href="#RFC3693">[RFC3693]</a> and a discussion of generic security threats is available with <a href="#RFC3694">[RFC3694]</a>. Aspects of combining permissions in cases of multiple occurrence are treated in <a href="#RFC4745">[RFC4745]</a>).  </p>
<p id="rfc.section.13.1.p.2">In addition to the authorization policies mechanisms for obfuscating location information are described. A theoretical treatment of location obfuscation is provided in <a href="#duckham05">[duckham05]</a> and in <a href="#ifip07">[ifip07]</a>. <a href="#duckham05">[duckham05]</a> provides the foundation and <a href="#ifip07">[ifip07]</a> illustrates three different types of location obfuscation by enlarging the radius, by shifting the center, and by reducing the radius. This algorithm for geodetic location information obfuscation makes use of these techniques.  </p>
<p id="rfc.section.13.1.p.3">The requirements of location information with respect to privacy protection vary. While the two obfuscation algorithm in this document provide a basis for protection they have limitations. There are certainly applications that require a different level of protection and for this purpose the ability to define and use additional algorithms has been envisioned. New algorithms can be specified via the available extension mechanism. </p>
<h1 id="rfc.section.13.2">
<a href="#rfc.section.13.2">13.2.</a> Obfuscation</h1>
<p id="rfc.section.13.2.p.1">Whenever location information is returned to a location recipient then it contains the location of the Target.  This is also true when location is obfuscated, i.e. the location server does not lie about the Target's location but instead hides it within a larger location shape. However, even without the Target's movement there is danger to reveal information over time. While the target's location is hidden within the privacy region the size of that returned region matters as well as the precise location of the Target within that region. Returning location shapes that are randomly computed will over time real more and more informationa bout the Target. </p>
<p id="rfc.section.13.2.p.2">Consider the drawing in <a href="#static">Figure 17</a>, which shows three ellipses, a dotted area in the middle, and the Target's true location marked as 'x'. The ellipses illustrate the location shapes as received by a potential location recipient over time for requests of a target's location information. Collecting information about the returned location information over time allows the location recipient to narrow the potential location of the target down to the dotted area in the center of the graph.</p>
<p id="rfc.section.13.2.p.3">For this purpose the algorithm described in <a href="#geodetic-transformation">Section 6.5.2</a> uses a grid that ensures to report the same location information whenever the target remains in the same geographical area.</p>
<div id="#rfc.figure.17"></div>
<div id="#static"></div>
<pre>
                ,-----.
        ,----,-'.      `-.
     ,-'    /    `-.      \
   ,'      / _...._ `.     \
  /       ,-'......`._\     :
 ;       /|...........\:    |
 |      / :.....x......+    ;
 :     |   \...........;|  /
  \    |    \........./ | /
   `.  \     `-.....,' ,''
     '-.\       `-----'|
        ``.-----'    ,'
           `._    _,'
              `'''
      </pre>
<p></p>
<p id="rfc.section.13.2.p.5">When the Target is moving then the location transformations reveal information when switching from one privacy region to another one. For example, when a transformation indicates that civic location is provided at a 'building' level of granularity. Consequently, floor levels, room numbers, etc. would be hidden. However, when the Target moves from one building to the next one then the movement would still be recognizable as the disclosed location information would be reflected by the new civic location information indicating the new building. With additional knowledge about building entrances and floor plans it would be possible to learn additional amount of information.</p>
<p id="rfc.section.13.2.p.6">The algorithm presented in <a href="#geodetic-transformation">Section 6.5.2</a> has some measures against leaking information when moving, switching from one privacy region to another one, and also when the user is visiting regularly the same location. The first issue is the following: if you provide a different location information (privacy region) only when the previous one is not valid anymore, you will be disclosing the moment where you are in a certain border (namely: leaving the previous privacy region). The second issue is the following: Suppose a user goes home every night. If the reported obfuscated locations are all randomly different, an analysis will probably soon reveal the home location with high precision. Of course, the combination of an obscured location with public geographic information (highways, lakes, mountains, cities, etc) may render a much precise location information than desired. But even without it, just observing movements, once or in a regular repetitive way, any obscuring algorithm will leak information about velocities or positions. Suppose a user wants to disclose location information with a radius of r. The privacy region, a circle with that radius, has an area of A = pi * r^2. An opponent, observing the movements, will deduce that the information that the target is, was, or regularly visits, a region of size A1, smaller than A. The quotient of the sizes A1/A should be, even in the worst case, larger than a fixed known number, in order that the user knows what is the maximal information leakage he has. The choices of 6.5.2 are such that this maximum leakage can be established: by any statistical procedures, without using geographic information (highways, etc. as discussed above), the quotient A1/A is larger than 0.13 (= 1/(5*1.5) ). Thus, for instance, when choosing a provided location of size 1000 km^2, he will be leaking, in worst case, the location within a region of size 130 km^2.  </p>
<h1 id="rfc.section.13.3">
<a href="#rfc.section.13.3">13.3.</a> Usability</h1>
<p id="rfc.section.13.3.p.1">There is the risk that end users are specifying their location-based policies in such a way that very small changes in location yields a significantly different level of information disclosure. For example, a user might want to set authorization policies differently when they are in a specific geographical area (e.g., at home, in the office). Location might be the only factor in the policy that triggers a very different action and transformation to be executed. The accuracy of location information is not always sufficient to unequivocally determine whether a location is within a specific boundary <a href="#I-D.thomson-geopriv-uncertainty">[I-D.thomson-geopriv-uncertainty]</a>. In some situations uncertainty in location information could produce unexpected results for end users. Providing adequate user feedback about potential errors arising from these limitation can help prevent unintentional information leakage.</p>
<p id="rfc.section.13.3.p.2">Users might create policies that are non-sensical.  To avoid such cases the software used to create the authorization policies should perform consistency checks and when authorization policies are uploaded to the policy servers then further checks are performed. When XCAP is used to upload authorization policies then built-in features of XCAP can be utilized to convey error messages back to the user about an error condition. Section 8.2.5 of <a href="#RFC4825">[RFC4825]</a> indicates that some degree of application specific checking is provided when authorization policies are added, modified or deleted. The XCAP protocol may return a 409 response with a response that may contain a detailed conflict report containing the &lt;constraint-failure&gt; element. A human readable description of the problem can be indicated in the 'phrase' attribute of that element.</p>
<h1 id="rfc.section.13.4">
<a href="#rfc.section.13.4">13.4.</a> <a href="#limitations" id="limitations">Location Obscuring Limitations</a>
</h1>
<p id="rfc.section.13.4.p.1">Location obscuring attempts to remove information about the location of a Target.  The effectiveness of location obscuring is determined by how much uncertainty a Location Recipient has about the location of the Target.  A location obscuring algorithm is effective if the Location Recipient cannot recover a location with better uncertainty than the obscuring algorithm was instructed to add.</p>
<p id="rfc.section.13.4.p.2">Effective location obscuring is difficult.  The amount of information that can be recovered by a determined and resourceful Location Recipient can be considerably more than is immediately apparent.  A concise summary of the challenges is included in <a href="#duckham10">[duckham10]</a>.  </p>
<p id="rfc.section.13.4.p.3">A Location Recipient in possession of external information about the Target or geographical area that is reported can make assumptions or guesses aided by that information to recover more accurate location information.  This is true even when a single location is reported, but it is especially true when multiple locations are reported for the same Target over time.  </p>
<p id="rfc.section.13.4.p.4">Furthermore, a Location Recipient that attempts to recover past locations for a Target can use later reported locations to further refine any recovered location.  A location obscuring algorithm typically does not have any information about the future location of the Target.  </p>
<p id="rfc.section.13.4.p.5">The degree to which location information can be effectively degraded by an obscuring algorithm depends on the information that is used by the obscuring algorithm.  If the information available to the obscuring algorithm is both more extensive and more effectively employed than the information available to the Location Recipient, then location obscuring might be effective.  </p>
<p id="rfc.section.13.4.p.6">Obscured locations can still serve a purpose where a Location Recipient is willing to respect privacy.  A privacy-respecting Location Recipient can choose to interpret the existence of uncertainty as a request from a Rule Maker to not recover location.  </p>
<p id="rfc.section.13.4.p.7">Location obscuring is unlikely to be effective against a more determined or resourceful adversary.  Withholding location information entirely is perhaps the most effective method of ensuring that it is not recovered.  However, a caution: omitted data also conveys some information.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">14.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">14.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a title="Harvard University">Bradner, S.</a>, "<a>Key words for use in RFCs to Indicate Requirement Levels</a>", March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5139">[RFC5139]</b></td>
<td class="top">
<a>Thomson, M.</a> and <a>J. Winterbottom</a>, "<a href="http://tools.ietf.org/html/rfc5139">Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO)</a>", RFC 5139, February 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4745">[RFC4745]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Tschofenig, H.</a>, <a>Morris, J.</a>, <a>Cuellar, J.</a>, <a>Polk, J.</a> and <a>J. Rosenberg</a>, "<a href="http://tools.ietf.org/html/rfc4745">Common Policy: A Document Format for Expressing Privacy Preferences</a>", RFC 4745, February 2007.</td>
</tr>
<tr>
<td class="reference"><b id="GML">[GML]</b></td>
<td class="top">
<a>OpenGIS, </a>, "<a>OpenGIS Geography Markup Language (GML) Implementation Specification, Version 3.00, OGC 02 023r4</a>",  http://www.opengeospatial.org/docs/02-023r4.pdf, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="NIMA.TR8350.2-3e">[NIMA.TR8350.2-3e]</b></td>
<td class="top">
<a>OpenGIS, </a>, "<a>US National Imagery and Mapping Agency, "Department of Defense (DoD) World Geodetic System 1984 (WGS 84), Third Edition, NIMA TR8350.2</a>",   , January 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5491">[RFC5491]</b></td>
<td class="top">
<a>Winterbottom, J.</a>, <a>Thomson, M.</a> and <a>H. Tschofenig</a>, "<a href="http://tools.ietf.org/html/rfc5491">GEOPRIV Presence Information Data Format Location Object (PIDF-LO) Usage Clarification, Considerations, and Recommendations</a>", RFC 5491, March 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">14.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC4825">[RFC4825]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc4825">The Extensible Markup Language (XML) Configuration Access Protocol (XCAP)</a>", RFC 4825, May 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4119">[RFC4119]</b></td>
<td class="top">
<a>Peterson, J.</a>, "<a href="http://tools.ietf.org/html/rfc4119">A Presence-based GEOPRIV Location Object Format</a>", RFC 4119, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2778">[RFC2778]</b></td>
<td class="top">
<a href="mailto:mday@alum.mit.edu" title="SightPath, Inc.">Day, M.</a>, <a href="mailto:jdrosen@dynamicsoft.com" title="dynamicsoft">Rosenberg, J.</a> and <a href="mailto:suga@flab.fujitsu.co.jp" title="Fujitsu Laboratories Ltd.">H. Sugano</a>, "<a href="http://tools.ietf.org/html/rfc2778">A Model for Presence and Instant Messaging</a>", RFC 2778, February 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4079">[RFC4079]</b></td>
<td class="top">
<a>Peterson, J.</a>, "<a href="http://tools.ietf.org/html/rfc4079">A Presence Architecture for the Distribution of GEOPRIV Location Objects</a>", RFC 4079, July 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5025">[RFC5025]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5025">Presence Authorization Rules</a>", RFC 5025, December 2007.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.thomson-geopriv-geo-shape">[I-D.thomson-geopriv-geo-shape]</b></td>
<td class="top">
<a>Thomson, M</a>, "<a href="http://tools.ietf.org/html/draft-thomson-geopriv-geo-shape-03">Geodetic Shapes for the Representation of Uncertainty in PIDF-LO</a>", Internet-Draft draft-thomson-geopriv-geo-shape-03, December 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2434">[RFC2434]</b></td>
<td class="top">
<a href="mailto:narten@raleigh.ibm.com" title="IBM Corporation">Narten, T.</a> and <a href="mailto:Harald@Alvestrand.no" title="Maxware">H.T. Alvestrand</a>, "<a href="http://tools.ietf.org/html/rfc2434">Guidelines for Writing an IANA Considerations Section in RFCs</a>", BCP 26, RFC 2434, October 1998.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.thomson-geopriv-uncertainty">[I-D.thomson-geopriv-uncertainty]</b></td>
<td class="top">
<a>Thomson, M</a> and <a>J Winterbottom</a>, "<a href="http://tools.ietf.org/html/draft-thomson-geopriv-uncertainty-06">Representation of Uncertainty and Confidence in PIDF-LO</a>", Internet-Draft draft-thomson-geopriv-uncertainty-06, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3694">[RFC3694]</b></td>
<td class="top">
<a>Danley, M.</a>, <a>Mulligan, D.</a>, <a>Morris, J.</a> and <a>J. Peterson</a>, "<a href="http://tools.ietf.org/html/rfc3694">Threat Analysis of the Geopriv Protocol</a>", RFC 3694, February 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3693">[RFC3693]</b></td>
<td class="top">
<a>Cuellar, J.</a>, <a>Morris, J.</a>, <a>Mulligan, D.</a>, <a>Peterson, J.</a> and <a>J. Polk</a>, "<a href="http://tools.ietf.org/html/rfc3693">Geopriv Requirements</a>", RFC 3693, February 2004.</td>
</tr>
<tr>
<td class="reference"><b id="duckham05">[duckham05]</b></td>
<td class="top">
<a>Duckham, M.</a> and <a>L. Kulik</a>, "<a>A formal model of obfuscation and negotiation for location privacy. In Proc. of the 3rd International Conference PERVASIVE 2005,Munich, Germany</a>", May 2005.</td>
</tr>
<tr>
<td class="reference"><b id="duckham10">[duckham10]</b></td>
<td class="top">
<a>Duckham, M.</a>, "<a>Moving forward: Location privacy and location awareness. In Proc. 3rd ACM SIGSPATIAL GIS Workshop on Security and Privacy in GIS and LBS (SPRINGL), ACM.</a>", Nov 2010.</td>
</tr>
<tr>
<td class="reference"><b id="ifip07">[ifip07]</b></td>
<td class="top">
<a>Ardagna, C.A.</a>, <a>Cremonini, M.</a>, <a>Damiani, E.</a>, <a>De Capitani di Vimercati, S.</a> and <a>S. Samarati</a>, "<a>Location-privacy protection through obfuscation-based techniques, in: Proceedings of the 21st Annual IFIP WG 11.3 Working Conference on Data and Applications Security, Redondo Beach, CA, USA</a>", July 2007.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Acknowledgments</h1>
<p id="rfc.section.Appendix A.p.1">This document is informed by the discussions within the IETF GEOPRIV working group, including discussions at the GEOPRIV interim meeting in Washington, D.C., in 2003.</p>
<p id="rfc.section.Appendix A.p.2">We particularly want to thank Allison Mankin &lt;mankin@psg.com&gt;, Randall Gellens &lt;rg+ietf@qualcomm.com&gt;, Andrew Newton &lt;anewton@ecotroph.net&gt;, Ted Hardie &lt;hardie@qualcomm.com&gt;, Jon Peterson &lt;jon.peterson@neustar.biz&gt; for their help in improving the quality of this document.</p>
<p id="rfc.section.Appendix A.p.3">We would like to thank Christian Guenther for his help with an earlier version of this document. Furthermore, we would like to thank Johnny Vrancken for his document reviews in September 2006, December 2006 and January 2007. James Winterbottom provided a detailed review in November 2006. Richard Barnes gave a detailed review in February 2008.</p>
<p id="rfc.section.Appendix A.p.4">This document uses text from <a href="#I-D.thomson-geopriv-geo-shape">[I-D.thomson-geopriv-geo-shape]</a>. Therefore, we would like to thank Martin Thomson for his work in <a href="#I-D.thomson-geopriv-geo-shape">[I-D.thomson-geopriv-geo-shape]</a>. We would also like to thank Martin Thomson, Matt Lepinski and Richard Barnes for their comments regarding the geodetic location transformation procedure. Richard provided us with a detailed text proposal. </p>
<p id="rfc.section.Appendix A.p.5">Robert Sparks, Martin Thomson, and Warren Kumari deserve thanks for their input on the location obfuscation discussion. Robert implemented various versions of the algorithm in the graphical language "Processing" and thereby helped us tremendously to understand problems with the previously illustrated algorithm.</p>
<p id="rfc.section.Appendix A.p.6">We would like to thank Dan Romascanu, Yoshiko Chong and Jari Urpalainen for their last call comments. </p>
<p id="rfc.section.Appendix A.p.7">Finally, we would like to thank the following individuals for their feedback as part of the IESG, GenArt, and SecDir review: Jari Arkko, Eric Gray, Russ Housley, Carl Reed, Martin Thomson, Lisa Dusseault, Chris Newman, Jon Peterson, Sam Hartman, Cullen Jennings, Tim Polk, and Brian Rosen.</p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> Pseudo-Code</h1>
<p id="rfc.section.Appendix B.p.1">This section provides an informal description for the algorithm described in <a href="#geodetic-transformation">Section 6.5.2</a> in form of pseudo-code.</p>
<div id="#rfc.figure.18"></div>
<pre>
Constants

  P = sqrt(3)/6  //  approx 0.2887
  q = 1 - p      //  approx 0.7113
  
Parameters
  
  prob:  real  // prob is a parameter in the range
        //  0.5 &lt;= prob &lt;=1
        // recommended is a value for prob between 0.7 and 0.9
        // the default of prob is 0.8
  
Inputs
  
  M = (m,n) : real * real 
        // M is a pair of reals: m and n
        // m is the longitude and n the latitude,
        // respectively, of the measured location
        // The values are given as real numbers, in the
        // range: -180 &lt; m &lt;= 180; -90 &lt; n &lt; 90
        // minus values for longitude m correspond to "West"
        // minus values for latitude n correspond to "South"
  
  radius : integer // the 'radius' or uncertainity,
        // measured in meters
  
  prev-M = (prev-m1, prev-n1): real * real 
        // the *previously* provided location, if available
        // prev-m1 is the longitude and
        // prev-n1 the latitude, respectively
  
  o : real

  // this is the reference latitude for the geodesic projection
  // The value of 'o' is chosen according to the table below.
  // The area you want to project MUST be included in
  // between a minimal latitude and a maximal latitude
  // given by the two first columns of the table.
  // (Otherwise the transformation is not available).
  
  //    +------+------+--------------------------+-------+
  //    | min  | max  |                          |       | 
  //    | lat  | lat  |        Examples          |  o    | 
  //    +------+------+--------------------------+-------+
  //    |      |      | Tropics and subtropics   |       | 
  //    | -45  |  45  | Africa                   |  0    | 
  //    |      |      | Australia                |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      | Continental US           |       | 
  //    |  25  |  50  | Mediterranean            |   25  | 
  //    |      |      | most of China            |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      |                          |       | 
  //    |  35  |  55  | South and Central        |   35  | 
  //    |      |      |      Europe              |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      |                          |       | 
  //    |  45  |  60  | Central and North        |   45  | 
  //    |      |      |       Europe             |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      |                          |       | 
  //    |  55  |  65  | most of Scandinavia      |   55  | 
  //    |      |      |                          |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      |                          |       | 
  //    |  60  |  70  |                          |   60  | 
  //    |      |      |                          |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      | most of                  |       | 
  //    | -50  | -25  |    Chile and Argentina   |  -50  | 
  //    |      |      | New Zealand              |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      |                          |       | 
  //    | -35  | -55  |                          |  -35  | 
  //    |      |      |                          |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      |                          |       | 
  //    | -45  | -60  |                          |  -45  | 
  //    |      |      |                          |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      |                          |       | 
  //    | -55  | -65  |                          |  -55  | 
  //    |      |      |                          |       | 
  //    +------+------+--------------------------+-------+
  //    |      |      |                          |       | 
  //    | -60  | -70  |                          |  -60  | 
  //    |      |      |                          |       | 
  //    +------+------+--------------------------+-------+
  
Outputs
  
  M1 = (m1,n1) : real * real // longitude and latitude,
        // respectively, of the provided location

Local Variables

  d, d1, d2, l, r, b, t, x, y: real
  SW, SE, NW, NE: real * real
     // pairs of real numbers, interpreted as coordinates
     // lomgitude and latitude, respectively

  temp : Integer[1..8]

Function
  choose(Ma, Mb: real * real): real * real;
     // This function chooses either Ma or Mb
     // depending on the parameter 'prob'
     // and on prev-M1, the previous value of M1:
     // If prev-M1 == Ma choose Ma with probability 'prob'
     // If prev-M1 == Mb choose Mb with probability 'prob'
     // Else choose Ma or Mb with probability 1/2
  Begin
  rand:= Random[0,1];
     // a real random number between 0 and 1
  If     prev-M1 == Ma Then 
         If rand &lt; prob Then choose := Ma;
                        Else choose := Mb;  EndIf
  Elseif prev-M1 == Mb Then 
         If rand &lt; prob Then choose := Mb;
                        Else choose := Ma;  EndIf
  Else								  
         If rand &lt; 0.5  Then choose := Ma;
                        Else choose := Mb;  EndIf
  End // Function choose

Main  // main procedure
  Begin
  d := radius/1000;  // uncertainity, measured in km
  
  d1:= (d * 180) / (pi*M*cos(o));
  
  d2:= d / 110.6;
  
  l := d1*floor(m/d1)
        // "floor"  returns the largest integer
        // smaller or equal to a floating point number
  r := l+d1;
  b := o+d2*floor(n-o/d2);
  t := b+d2;
  
  x := (m-l)/(r-l);
  y := (n-b)/(t-b);
  
  SW := (l,b);
  SE := (r,b);
  NW := (l,t);
  NE := (r,t);
  
  If     x &lt; p and y &lt; p      Then M1 := SW;
  Elseif x &lt; p and q &lt;= y     Then M1 := NW;
  Elseif q &lt;= x and y &lt; p     Then M1 := SE;
  Elseif q &lt;= x and q &lt;= y    Then M1 := NE;
  Elseif p &lt;= x and x &lt; q and y &lt; x  and y &lt; 1-x   
         Then M1 := choose(SW,SE);
  Elseif p &lt;= y and y &lt; q and x &lt;= y and y &lt; 1-x   
         Then M1 := choose(SW,NW);
  Elseif p &lt;= y and y &lt; q and y &lt; x  and 1-x &lt;= y  
         Then M1 := choose(SE,NE);
  Elseif p &lt;= x and x &lt; q and x &lt;= y and 1-x &lt;= y  
         Then M1 := choose(NW,NE);
  Endif

  End //  Main
                </pre>
<p></p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Henning Schulzrinne</span> editor
	  <span class="n hidden">
		<span class="family-name">Schulzrinne</span>
	  </span>
	</span>
	<span class="org vcardline">Columbia University</span>
	<span class="adr">
	  <span>Department of Computer Science</span>
<span>450 Computer Science Building</span>

	  <span class="vcardline">
		<span class="locality">New York</span>,  
		<span class="region">NY</span> 
		<span class="code">10027</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 212 939 7042</span>

<span class="vcardline">EMail: <a href="mailto:schulzrinne@cs.columbia.edu">schulzrinne@cs.columbia.edu</a></span>

<span class="vcardline">URI: <a href="http://www.cs.columbia.edu/~hgs">http://www.cs.columbia.edu/~hgs</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Hannes Tschofenig</span> editor
	  <span class="n hidden">
		<span class="family-name">Tschofenig</span>
	  </span>
	</span>
	<span class="org vcardline">Nokia Siemens Networks</span>
	<span class="adr">
	  <span>Linnoitustie 6</span>

	  <span class="vcardline">
		<span class="locality">Espoo</span>,  
		<span class="region"></span>
		<span class="code">02600</span>
	  </span>
	  <span class="country-name vcardline">Finland</span>
	</span>
	<span class="vcardline">Phone: +358 (50) 4871445</span>

<span class="vcardline">EMail: <a href="mailto:Hannes.Tschofenig@gmx.net">Hannes.Tschofenig@gmx.net</a></span>

<span class="vcardline">URI: <a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jorge R. Cuellar</span> 
	  <span class="n hidden">
		<span class="family-name">Cuellar</span>
	  </span>
	</span>
	<span class="org vcardline">Siemens</span>
	<span class="adr">
	  <span>Otto-Hahn-Ring 6</span>

	  <span class="vcardline">
		<span class="locality">Munich</span>,  
		<span class="region">Bavaria</span> 
		<span class="code">81739</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:Jorge.Cuellar@siemens.com">Jorge.Cuellar@siemens.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">James Polk</span> 
	  <span class="n hidden">
		<span class="family-name">Polk</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco</span>
	<span class="adr">
	  <span>2200 East President George Bush Turnpike</span>

	  <span class="vcardline">
		<span class="locality">Richardson</span>,  
		<span class="region">Texas</span> 
		<span class="code">75082</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jmpolk@cisco.com">jmpolk@cisco.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">John B. Morris, Jr.</span> 
	  <span class="n hidden">
		<span class="family-name">Morris</span>
	  </span>
	</span>
	<span class="org vcardline"></span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ietf@jmorris.org">ietf@jmorris.org</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Martin Thomson</span> 
	  <span class="n hidden">
		<span class="family-name">Thomson</span>
	  </span>
	</span>
	<span class="org vcardline">Commscope</span>
	<span class="adr">
	  <span>Andrew Building (39)</span>

	  <span class="vcardline">
		<span class="locality">University of Wollongong Campus</span>,  
		<span class="region">Wollongong, NSW</span> 
		<span class="code">2522</span>
	  </span>
	  <span class="country-name vcardline">AU</span>
	</span>
	<span class="vcardline">Phone: +61 2 4221 2915</span>

<span class="vcardline">EMail: <a href="mailto:martin.thomson@commscope.com">martin.thomson@commscope.com</a></span>

  </address>
</div>

</body>
</html>