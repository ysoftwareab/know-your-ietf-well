


Internet-Draft                                           Daniel Moreno
Document: draft-moreno-mobility-events-01.txt           VODAFONE SPAIN
July 2002
Expires: January 2003

   Mobility Events Management in SPIRITS

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This particular draft is intended to be discussed in the SPIRITS
   Working Group. Discussion of it therefore belongs on that list. The
   charter for SPIRITS working group may be found at
   http://www1.ietf.org/html.charters/spirits-charter.html.


Abstract
   This document describes the management of the mobility events
   considered in SPIRITS protocol and the definition of their related
   parameters.

   The mobility events management will allow a SPIRITS server to
   subscribe to and to be notified of location changes of a mobile
   user. The events would only be applicable to mobile users reachable
   through a CS network. The sending of these events must be allowed by
   setting the related marks in the HLR. Besides, the SPIRITS protocol
   must be able to translate the CAMEL operations involving mobility
   information into events that can be transferred to the SPIRITS
   client.





Moreno                                                        [Page 1]
                Mobility Events Management in SPIRITS       July 2002


                             Table of contents
   Status of this Memo...............................................1
   Abstract..........................................................1
   1. INTRODUCTION...................................................2
   2. LIST OF MOBILITY EVENTS........................................2
   3. LOCATION INFORMATION DESCRIPTION...............................3
   3.1 CODING OF LOCATION INFORMATION ELEMENTS.......................4
   3.1.1 Geographical Information....................................4
   3.1.2 Age Of Location Information.................................5
   3.1.3 CellId Or LAI...............................................5
   3.1.4 location Number.............................................5
   3.1.5 Geodetic Information........................................5
   4. WIRELESS-SPECIFIC SECURITY CONSIDERATIONS ON MOBILITY MANAGEMENT
   ..................................................................6
   5. XML DTDS FOR MOBILITY EVENTS...................................7
   5.1 XML DTDS FOR NOTIFY...........................................7
   5.2 XML DTDS FOR SUBSCRIBE.......................................13
   6. REFERENCES....................................................13
   7. ACKNOWLEDGEMENTS..............................................14
   8. CHANGES.......................................................14
   9. AUTHOR'S ADRESS...............................................14





1. INTRODUCTION
   The mobility events management will allow a SPIRITS server to
   subscribe to and to be notified of location changes of a mobile
   user. The events would only be applicable to mobile users reachable
   through a CS network. The sending of these events must be allowed by
   setting the related marks in the HLR. Besides, the SPIRITS protocol
   must be able to translate the CAMEL operations involving mobility
   information into events that can be transferred to the SPIRITS
   client.

   The inclusion of mobility events into SPIRITS protocol provides user
   location information and allows the smart use of mobile phones in
   services like Internet Call Waiting.


2. LIST OF MOBILITY EVENTS
   The events considered in this document are:

   - Location Update in the same VLR service area
   - Location Update in another VLR service area
   - IMSI attach
   - MS initiated IMSI detach
   - Network initiated IMSI detach


Moreno                  Expires - January 2003                [Page 2]
                Mobility Events Management in SPIRITS       July 2002




   Every time a mobility event occurs, the subscribed SPIRITS servers
   will be notified about it, and they will receive the following
   information elements:

   - Service Key. This IE indicates the service logic that the gsmSCF
   will apply.
   - Event type. This IE indicates the type of Mobility Management that
   lead to the notification.
   - Address. This IE identifies the mobile subscriber to whom the
   Mobility Event applies.
   - Location information. This IE indicates the current location of
   the MS.

   The first three parameters will be mandatory, and the last one will
   be optional, depending on the network capabilities.




3. LOCATION INFORMATION DESCRIPTION
   The Location information provided to the SPIRITS client would be
   very different depending on the mobile network capabilities, as not
   all the networks are able to supply detailed location information
   about its users. Therefore all the possible information elements
   considered into the location information must be marked as optional,
   and each network will try to make available as much information as
   possible.

   The compound information element Location information consists of
   the following subordinate information elements, all of them
   optional:

   - Location number
   This parameter is used to convey the geographical area address for
   mobility services. It is used when the calling Party Number does not
   contain any information about the geographical location of the
   calling party (for example, origin dependent routing when the
   calling party is a mobile subscriber). It can be present if the
   wireless network VLR can derive it from the stored service area
   identity (for UMTS) or cell global identity (for GSM) or location
   area identity; otherwise shall be absent. The mapping from service
   area identity or cell ID and location area to location number is
   network-specific, and the format is left open to final
   implementations. For a definition of this information element, see
   [1].

   - Cell Id or Location Area ID


Moreno                  Expires - January 2003                [Page 3]
                Mobility Events Management in SPIRITS       July 2002


   Location area identity or Cell global identity of the cell in which
   the mobile user is currently in radio contact or in which the mobile
   user was last in radio contact. Will be present if the mobile user
   uses radio access and the subscriber record is marked as confirmed
   by radio contact; otherwise shall be absent.

   - Geographical information
   Will be present if the VLR can derive it from the stored cell global
   identity or location area identity; otherwise shall be absent (for a
   definition of this information element, see 3G TS 23.032).

   - Geodetic information
   Can be present if the VLR can derive it from the stored cell global
   identity or location area identity; otherwise shall be absent. (This
   information element corresponds to the Calling Geodetic Location
   defined in ITU-T Q.763).

   - Age of location information
   This parameter represents the elapsed time in minutes since the last
   network contact with the mobile user (i.e. the actuality of the
   location information). Will be present if available in the MSC/VLR;
   otherwise shall be absent.

   - Selected LSA Identity
   The IE shall only be sent, if SoLSA is supported. It indicates the
   LSA identity associated with the current position of the mobile
   user. Will be Sent if the LSA ID of subscription and LSA ID of the
   used cell matches. In the case of multiple matches the one with the
   highest priority is sent. See 3G TS 23.073.



3.1 CODING OF LOCATION INFORMATION ELEMENTS

3.1.1 Geographical Information
   The GeographicalInformation parameter refers to Geographical
   Information defined in GSM 03.32 Version 5.0.0. Only the description
   of an ellipsoid point with uncertainty circle as specified in GSM
   03.32 is allowed to be used.

   The GeographicalInformation parameter contains the following sub-
   parameters:

   - TypeofShape
   Type of shape can only have the value of an ellipsoid point with
   uncertainty circle.

   - LAT is the latitude expressed in degrees, and includes its related
   sign (expressed as either North or South).


Moreno                  Expires - January 2003                [Page 4]
                Mobility Events Management in SPIRITS       July 2002



   - LON is the longitude expressed in degrees, and includes its
   related sign (expressed as either East or West).

   - UncertaintyCode: K (exponent), defines the numerical
   representation of the radius R expressed in meters, where:
                       K
      R = 10 ((1.1) - 1)   0 <= K <= 127


3.1.2 Age Of Location Information
   Usually coded as an integer (0..32767). The value represents the
   elapsed time in minutes since the last network contact of the mobile
   station.
   Some implementations define two special values:
   - value "0" indicates that the MS is currently in contact with the
   network
   - value "32767" indicates that the location information is at least
   32767 minutes old

3.1.3 CellId Or LAI
   It is usually coded as a string. The Cell Global Identification is
   defined in TS GSM 03.03. The internal structure is not described
   here (Octets are coded according to TS GSM 04.08).

3.1.4 location Number
   It is usually coded as a string (length : 2 - 10 octets). The
   internal structure is not described here.


3.1.5 Geodetic Information
   Information that indicates the geodetic location of the user. This
   information element is defined in ITU-T Q.763. It consists of the
   following sub-parameters:

   - Screening Indicator
   Information sent in either direction to indicate whether the
   address/location information was provided by the user or network.

   - TypeofShape
   Described above.

   - LAT & LON
   Described above.


   - Confidence

   The confidence by which the position of a target entity is known to
   be within the shape description, (expressed as a percentage) is



Moreno                  Expires - January 2003                [Page 5]
                Mobility Events Management in SPIRITS       July 2002


   directly mapped from the 7 bit binary number K, except for K=0 which
   is used to indicate Êno information∆, and 100 < K <= 128 which
   should not be used but may be interpreted as "no information" if no
   received.




4. WIRELESS-SPECIFIC SECURITY CONSIDERATIONS ON MOBILITY MANAGEMENT

   The inclusion of mobility events management in SPIRITS protocol
   allows locating a mobile user and using this information into new
   services which can provide several advantages for IP users. But this
   feature can become also a security problem if a mobile user's
   location information is provided to non-authenticated applications
   or users. The location information must be treated with maximum
   care, and it must be guaranteed that no external parties will be
   able to get it in any way.

   For example, if an enterprise has a set of mobile users and an
   application over SPIRITS, which periodically provides their location
   information, there must be a way to authenticate the subscribing IP
   users (enterprise), in order to provide the information only to the
   right ones. On the other hand, the enterprise (SPIRITS server) will
   only be able to access to the information related to their own
   phones, and not to any other one that is not included into a related
   list of accessible phones.

   It is better to consider authentication and securing as matters to
   be implemented in the final applications. The security requirements
   must ensure that an IP user will not be allowed to subscribe to any
   notifications on mobile phones that are out of its control. This can
   be carried out by managing access control lists, whose definition is
   out the scope of this document.

   Another difficulty appears in case of connections from users that
   employ non-fixed IP addresses (i.e. GPRS connections from a mobile
   user), because those IP addresses couldn't be checked against a list
   of profiles. A possible alternative could be the inclusion of secret
   key-codes into every subscription request. These key-codes would be
   checked by the SPIRITS application before enabling notifications of
   mobility events about a certain mobile phone. This case is not
   included into this document, and it would imply adding a new
   parameter (access-code) into the "Subscribe XML DTD". This point is
   left open for future discussing.






Moreno                  Expires - January 2003                [Page 6]
                Mobility Events Management in SPIRITS       July 2002





5. XML DTDS FOR MOBILITY EVENTS
   This section presents XML DTDs for managing the mobility events and
   their related parameters.

5.1 XML DTDS FOR NOTIFY
   The next lines comprehend the DTD's for notifying a mobility event.
   The Event_met parameter can be considered as a subset of the
   complete events list.


   <!--
   # Author: Daniel Moreno
   # Version: 1
   # Organization: VODAFONE Spain
   # Date: 7/24/2002
   -->


   <!--
   ********************************************************************
   ELEMENT: MM_event_notify
   COMMENT: root element that contains all the necessary parameters
   ********************************************************************
   -->
   <!ELEMENT MM_event_notify ( ServiceKey, Event_met , ADDRESS ,
   LocationInformation?)  >


   <!--
   ********************************************************************
   ELEMENT: ServiceKey
   COMMENT: allows the SPIRITS Server to choose the appropriate service
   logic. Integer (0..2^31-1)
   ********************************************************************
   -->
   <!ELEMENT ServiceKey (#PCDATA) >


   <!--
   ********************************************************************
   ELEMENT: LocationInformation
   COMMENT: contains all the location parameters
   ********************************************************************
   -->
   <!ELEMENT LocationInformation (LocationNumber?, CellIdOrLAI?,



Moreno                  Expires - January 2003                [Page 7]
                Mobility Events Management in SPIRITS       July 2002


   GeographicalInformation?, GeodeticInformation?,
   AgeOfLocationInformation?,
   LSAIdentity?)  >


   <!--
   ********************************************************************
   ELEMENT: LSAIdentity
   COMMENT: content undefined
   ********************************************************************
   -->
   <!ELEMENT LSAIdentity  (#PCDATA)  >


   <!--
   ********************************************************************
   ELEMENT: AgeOfLocationInformation
   COMMENT: USUALLY INTEGER (0..32767). Measured in minutes
   ********************************************************************
   -->
   <!ELEMENT AgeOfLocationInformation  (#PCDATA)  >


   <!--
   ********************************************************************
   ELEMENT: GeodeticInformation
   COMMENT: This information element corresponds to the Calling
   Geodetic Location defined in ITU-T Q.763
   ********************************************************************
   -->
   <!ELEMENT GeodeticInformation  (ScreeningInd, TypeOfShape, LAT, LON,
   Confidence) >


   <!--
   ********************************************************************
   ELEMENT: GeographicalInformation
   COMMENT: For a definition of this information element, see 3G TS
   23.032
   ********************************************************************
   -->
   <!ELEMENT GeographicalInformation  (TypeOfShape, LAT, LON,
   UncertaintyCode)  >


   <!--
   ********************************************************************
   ELEMENT: ScreeningInd
   COMMENT: defined values (0..3)


Moreno                  Expires - January 2003                [Page 8]
                Mobility Events Management in SPIRITS       July 2002


   ********************************************************************
   -->
   <!ELEMENT ScreeningInd (#PCDATA)  >


   <!--
   ********************************************************************
   ELEMENT: Confidence
   ********************************************************************
   -->
   <!ELEMENT Confidence (#PCDATA)  >


   <!--
   ********************************************************************
   ELEMENT: UncertaintyCode
   COMMENT: values (0..127)
   ********************************************************************
   -->
   <!ELEMENT UncertaintyCode  (#PCDATA)  >


   <!--
   ********************************************************************
   ELEMENT: LON
   COMMENT: value and sign
   ********************************************************************
   -->
   <!ELEMENT LON  (signLON, valLON) >


   <!--
   ********************************************************************
   ELEMENT: valLON
   COMMENT: In degrees
   ********************************************************************
   -->
   <!ELEMENT valLON  (#PCDATA)  >


   <!--
   ********************************************************************
   ELEMENT: signLON
   COMMENT:
   ********************************************************************
   -->
   <!ELEMENT signLON ( East | West )  >




Moreno                  Expires - January 2003                [Page 9]
                Mobility Events Management in SPIRITS       July 2002


   <!--
   ********************************************************************
   ELEMENT: signLAT
   COMMENT:
   ********************************************************************
   -->
   <!ELEMENT signLAT (North|South)  >


   <!--
   ********************************************************************
   ELEMENT: LAT
   COMMENT: value and sign
   ********************************************************************
   -->
   <!ELEMENT LAT  (signLAT , valLAT )  >


   <!--
   ********************************************************************
   ELEMENT: valLAT
   COMMENT: In degrees (0..90)
   ********************************************************************
   -->
   <!ELEMENT valLAT  (#PCDATA)  >


   <!--
   ********************************************************************
   ELEMENT: South
   COMMENT:
   ********************************************************************
   -->
   <!ELEMENT South EMPTY >
   <!ATTLIST South South CDATA #FIXED "1" >


   <!--
   ********************************************************************
   ELEMENT: North
   COMMENT:
   ********************************************************************
   -->
   <!ELEMENT North  EMPTY  >
   <!ATTLIST North North CDATA  #FIXED "0" >


   <!--
   ********************************************************************


Moreno                  Expires - January 2003               [Page 10]
                Mobility Events Management in SPIRITS       July 2002


   ELEMENT: West
   COMMENT:
   ********************************************************************
   -->
   <!ELEMENT West  EMPTY  >
   <!ATTLIST West West CDATA  #FIXED "1" >


   <!--
   ********************************************************************
   ELEMENT: East
   COMMENT:
   ********************************************************************
   -->
   <!ELEMENT East  EMPTY  >
   <!ATTLIST East East CDATA  #FIXED "0" >


   <!--
   ********************************************************************
   ELEMENT: TypeOfShape
   COMMENT: 1 integer
   ********************************************************************
   -->
   <!ELEMENT TypeOfShape  (#PCDATA) >


   <!--
   ********************************************************************
   ELEMENT: CellIdOrLAI
   COMMENT:
   ********************************************************************
   -->
   <!ELEMENT CellIdOrLAI  (#PCDATA)>


   <!--
   ********************************************************************
   ELEMENT: LocationNumber
   COMMENT: length: 2-10 octets. Content will be passed unchanged. For
   a definition of this information element, see ITU-T  Q.763
   ********************************************************************
   -->
   <!ELEMENT LocationNumber ( #PCDATA )  >


   <!--
   ********************************************************************
   ELEMENT: Event_met


Moreno                  Expires - January 2003               [Page 11]
                Mobility Events Management in SPIRITS       July 2002


   COMMENT: Event type from list of possible values
   ********************************************************************
   -->
   <!ELEMENT Event_met (LUS | LUA | IA | MSID | NID)  >


   <!--
   ********************************************************************
   ELEMENT: NID
   COMMENT: Network initiated IMSI detach (implicit detach)
   ********************************************************************
   -->
   <!ELEMENT NID  EMPTY  >


   <!--
   ********************************************************************
   ELEMENT: MSID
   COMMENT: MS initiated IMSI detach (explicit detach)
   ********************************************************************
   -->
   <!ELEMENT MSID  EMPTY  >


   <!--
   ********************************************************************
   ELEMENT: IA
   COMMENT: IMSI attach
   ********************************************************************
   -->
   <!ELEMENT IA  EMPTY  >


   <!--
   ********************************************************************
   ELEMENT: LUA
   COMMENT: Location update to another VLR service area
   ********************************************************************
   -->
   <!ELEMENT LUA  EMPTY  >


   <!--
   ********************************************************************
   ELEMENT: LUS
   COMMENT: Location update in the same VLR service area
   ********************************************************************
   -->
   <!ELEMENT LUS  EMPTY  >


Moreno                  Expires - January 2003               [Page 12]
                Mobility Events Management in SPIRITS       July 2002



   <!-- ADDRESS element is imported here from SPIRITS_ADR.DTD -->
   <!ENTITY % spirits_adr.dtd SYSTEM "SPIRITS_ADR.DTD">

   %spirits_adr.dtd;




5.2 XML DTDS FOR SUBSCRIBE
   The DTDs for subscribing to a mobility event could be like this
   (some of its elements are already defined in the notify section):


   <!--
   # Author: Daniel Moreno
   # Version: 1
   # Organisation: VODAFONE Spain
   # Date: 24/7/2002
   -->

   <!--
   ********************************************************************
   ELEMENT: MM_event_subscribe
   COMMENT: root element that contains all the necessary parameters
   ********************************************************************
   -->
   <!ELEMENT MM_event_ subscribe (ServiceKey, Event_met , ADDRESS)  >



   The DTDs for ServiceKey, Event_met and ADDRESS are the same as
   defined in section 5.1, so they are not included here.




6. REFERENCES

   [1] ITU-T Q.763, December 1999: "Specifications of Signalling System
   No. 7 ˚ Formats and codes of the ISDN user part".
   [2] 3G TS 23.032, "Universal Geographical Area Description (GAD)".
   [3] 3G TS 23.073, "Support of Localised Service Area (SoLSA); Stage
   2"
   [4] GSM 03.32 Version 5.0.0, " Digital cellular telecommunications
   system (Phase 2+) (GSM); Universal Geographical Area Description
   (GAD) "
   [5] TS GSM 03.03, " Digital cellular telecommunications system
   (Phase 2+) (GSM); Numbering, addressing and identification"


Moreno                  Expires - January 2003               [Page 13]
                Mobility Events Management in SPIRITS       July 2002


   [6] TS GSM 04.08, " Digital cellular telecommunications system
   (Phase 2+) (GSM); Mobile radio interface; Layer 3 specification"
   [7] IETF Spirits Workgroup, "On selection of IN parameters to be
   carried by the SPIRITS Protocol", <draft-ietf-spirits-in-03.txt>




7. ACKNOWLEDGEMENTS
   Thanks to Musa Unmehopa for the comments and suggestions made to the
   previous version of this draft. They helped me a lot in creating
   this new one.




8. CHANGES
   - Inclusion of Service Key as a mobility event parameter.
   - Basic MSISDN parameter has been replaced by Address parameter.
   - Definition for Geodetic Information (also in DTD).
   - Redefinition of LAT and LON parameters.




9. AUTHOR'S ADRESS

   Daniel Moreno Buendia
   Vodafone Spain
   C/ Trespaderne, 24
   Barajas-1 Building, 1st Floor
   28042 MADRID
   SPAIN
   email: dmoreno@airtel.es
   Phone number: +34610513410
















Moreno                  Expires - January 2003               [Page 14]ê