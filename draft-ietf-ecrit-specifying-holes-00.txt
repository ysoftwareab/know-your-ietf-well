


ECRIT                                                    J. Winterbottom
Internet-Draft                                                M. Thomson
Intended status: Best Current                         Andrew Corporation
Practice                                                   June 18, 2008
Expires: December 20, 2008


              Specifying Holes in LoST Service Boundaries
                draft-ietf-ecrit-specifying-holes-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on December 20, 2008.

Copyright Notice

   Copyright (C) The IETF Trust (2008).













Winterbottom & Thomson  Expires December 20, 2008               [Page 1]

Internet-Draft           Service Boundary Holes                June 2008


Abstract

   This document describes how holes can be specified in service
   boundaries.  One means of implementing a solution is described.


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Specifying Holes . . . . . . . . . . . . . . . . . . . . . . .  5
   4.  GML Polygons . . . . . . . . . . . . . . . . . . . . . . . . .  8
   5.  Holes in GML Polygons  . . . . . . . . . . . . . . . . . . . .  9
   6.  Service Boundary Specification and Selection Algorithm . . . . 10
   7.  Security Considerations  . . . . . . . . . . . . . . . . . . . 13
   8.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 14
   9.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 15
   10. References . . . . . . . . . . . . . . . . . . . . . . . . . . 16
     10.1.  Normative References  . . . . . . . . . . . . . . . . . . 16
     10.2.  Informative References  . . . . . . . . . . . . . . . . . 16
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 17
   Intellectual Property and Copyright Statements . . . . . . . . . . 18





























Winterbottom & Thomson  Expires December 20, 2008               [Page 2]

Internet-Draft           Service Boundary Holes                June 2008


1.  Introduction

   The LoST protocol [I-D.ietf-ecrit-lost] describes a protocol that's
   primary purpose is to map service and locations to destination
   addresses.  LoST does this by provisioning boundary maps or areas
   against service URNs.  The boundary is a polygon made up of sets of
   geodetic coordinates specifying an enclosed area.  In some
   circumstances an area enclosed by a polygon, also known as an
   exterior polygon, may contain exception areas, or holes, that for the
   same service must yield a different destination to that described by
   the larger area.  This document describes how holes SHOULD be
   specified in service boundaries defined using a GML encoding for the
   polygons and their internal elements (holes).  GML polygons are based
   on elements defined in [ISO-19107].


        o-------------o
      /                \
     /    /\            \
    /    + +-----+       \
   o     |  Hole  \       o
   |     |    1   /       |
   |     +-------+        |<--- Primary Polygon
   |        +-------+     |
   |       /  Hole  |     |
   o       \   2    |     o
    \       +-----+ +    /
     \             \/   /
      \                /
       o--------------o





















Winterbottom & Thomson  Expires December 20, 2008               [Page 3]

Internet-Draft           Service Boundary Holes                June 2008


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].














































Winterbottom & Thomson  Expires December 20, 2008               [Page 4]

Internet-Draft           Service Boundary Holes                June 2008


3.  Specifying Holes

   Holes related to an exterior boundary polygon MUST adhere to the
   following rules:

   Rule 1:   Two holes MUST NOT have more than one point of
             intersection.  If two or more holes share a common set of
             boundaries then to the primary polygon these represent a
             single hole in the service.  The internal elements (holes)
             should have common boundaries removed and a single hole
             created irrespective of whether the excluded area is itself
             made up of multiple service boundaries.


        o-------------o                       o-------------o
      /                \                    /                \
     /    /\            \                  /    /\            \
    /    + +-----+       \                /    + +-----+       \
   o     |  Hole  \       o              o     |        \       o
   |     |    1    \      |              |     |  One    \      |
   |     +-+-------+      |  =========>  |     +-+  Hole +      |
   |       /  Hole  |     |              |       /        |     |
   o       \   2    |     o              o       \        |     o
    \       +-----+ +    /                \       +-----+ +    /
     \             \/   /                  \             \/   /
      \                /                    \                /
       o--------------o                      o--------------o

          Incorrect                              Correct


            Incorrect Hole Specification with Boundary Sharing

   Rule 2:   A hole MUST NOT have more than one point of intersection
             with the outer-boundary of the primary (exterior) polygon.
             If more than one point of intersection occurs the primary
             polygon is either doesn't have a hole, it has an inlet as
             in Figure 3, or the primary polygon SHOULD be expressed as
             two polygons as in Figure 4.












Winterbottom & Thomson  Expires December 20, 2008               [Page 5]

Internet-Draft           Service Boundary Holes                June 2008


              +------- Inlet
              |
              v
        o--+-----+----o                      o--o     o----o
      /    |%%%%%|     \                   /    |     |     \
     /    /%%%%%%|      \                 /    /      |      \
    /    +%%%%%%%|       \               /    o       o       \
   o     |%%%%%%%%\       o             o     |        \       o
   |     |%%%%%%%%%\      |             |     |         \      |
   |     +-+%%%%%%%%+     |  ========>  |     o-o        o     |
   |       /%%%%%%%%|     |             |       /        |     |
   o       \%%%%%%%%|     o             o       \        |     o
    \       +-----+ +    /               \       o-----o o    /
     \             \/   /                 \             \/   /
      \                /                   \                /
       o--------------o                     o--------------o

          Incorrect                             Correct


                Figure 3: Correct Specification of an Inlet




       A--q-----------B                     A-q   q----------B
      /  | |           \                   /  |   |           \
     /   | |            \                 /   |   |            \
    /    z r-----s       \               / P  z   r-----s   P   \
   H     |        \       C             H  o  |          \   o   C
   |     |  One    \      |             |  l  |           \   l  |
   |     y-x  Hole  t     |  ========>  |  y  y-x          t  y  |
   |       /        |     |             |  g    /          |  g  |
   G       \        |     D             G  o    \          |  o  D
    \      /    v---u    /               \ n    /      v---u  n /
     \     \   /        /                 \  1  \     /      2 /
      \     \ /        /                   \     \   /        /
       F-----w--------E                     F-----w w--------E

         1 Polgon with a                     2 Polygons that map
          Dividing Hole                      to the same service


   Figure 4: Correct Specification of Hole with Multiple Outer-Boundary
                               Intersections

   Similarly, a polygon containing a hole with an island must be
   represented as two polygons mapping to the same service.



Winterbottom & Thomson  Expires December 20, 2008               [Page 6]

Internet-Draft           Service Boundary Holes                June 2008


   Rule 3:   A hole MUST be a legal polygon in accordance with the
             geoshape specification [geoshape].  There is no restriction
             on the number of points that may be used to express the
             perimeter of the hole.















































Winterbottom & Thomson  Expires December 20, 2008               [Page 7]

Internet-Draft           Service Boundary Holes                June 2008


4.  GML Polygons

   The GML encoding of a polygon defines a enclosed exterior boundary,
   with the first and last points of boundary being the same.  Consider
   the example in Figure 5.


        B-------------C
      /                \
     /                  \
    /                    \
   A                      D
    \                    /
     \                  /
      \                /
       F--------------E

   <gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326">
     <gml:exterior>
       <gml:LinearRing>
         <gml:pos>43.311 -73.422</gml:pos> <!--A-->
         <gml:pos>43.111 -73.322</gml:pos> <!--F-->
         <gml:pos>43.111 -73.222</gml:pos> <!--E-->
         <gml:pos>43.311 -73.122</gml:pos> <!--D-->
         <gml:pos>43.411 -73.222</gml:pos> <!--C-->
         <gml:pos>43.411 -73.322</gml:pos> <!--B-->
         <gml:pos>43.311 -73.422</gml:pos> <!--A-->
       </gml:LinearRing>
     </gml:exterior>
   </gml:Polygon>


                   Figure 5: Hexagon and Associated GML

   NOTE that polygon vertices in Figure 5 are expressed using <pos>
   elements for clarity.  The vertices can also be expressed using a
   <posList> element.














Winterbottom & Thomson  Expires December 20, 2008               [Page 8]

Internet-Draft           Service Boundary Holes                June 2008


5.  Holes in GML Polygons

   A hole is specified in the polygon by defining an interior boundary.
   The points defining the internal boundary define the area represented
   by the hole in the primary (exterior) polygon.  The shaded area in
   Figure 6 is represented by the 4 points of the interior boundary
   specified in Figure 7.


       B-------------C
      /               \
     / w-------------x \
    /  |/////////////|  \
   A   |/////////////|   D
    \  |/////////////|  /
     \ z-------------y /
      \               /
       F-------------E


                        Figure 6: Hexagon with Hole


   <gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326">
     <gml:exterior>
       <gml:LinearRing>
         <gml:pos>43.311 -73.422</gml:pos> <!--A-->
         <gml:pos>43.111 -73.322</gml:pos> <!--F-->
         <gml:pos>43.111 -73.222</gml:pos> <!--E-->
         <gml:pos>43.311 -73.122</gml:pos> <!--D-->
         <gml:pos>43.511 -73.222</gml:pos> <!--C-->
         <gml:pos>43.511 -73.322</gml:pos> <!--B-->
         <gml:pos>43.311 -73.422</gml:pos> <!--A-->
       </gml:LinearRing>
     </gml:exterior>
     <gml:interior>
       <gml:LinearRing>
         <gml:pos>43.411 -73.322</gml:pos> <!--w-->
         <gml:pos>43.211 -73.322</gml:pos> <!--z-->
         <gml:pos>43.211 -73.222</gml:pos> <!--y-->
         <gml:pos>43.411 -73.222</gml:pos> <!--x-->
         <gml:pos>43.411 -73.322</gml:pos> <!--w-->
       </gml:LinearRing>
     </gml:interior>
   </gml:Polygon>


                    Figure 7: GML for Hexagon with Hole



Winterbottom & Thomson  Expires December 20, 2008               [Page 9]

Internet-Draft           Service Boundary Holes                June 2008


6.  Service Boundary Specification and Selection Algorithm

   A service boundary is represented by a polygon that may have many
   vertices.  The enclosed area of the polygon represents the area in
   which a service, expressed as a service URN, maps to a single URI.
   [I-D.schulzrinne-ecrit-lost-sync] describes how LoST servers may
   synchronize with one another and provides examples of possible
   boundary exchanges and data formats.  At the time of writing there is
   no standard format for service provisioning data into a LoST server,
   the format described in [I-D.schulzrinne-ecrit-lost-sync] is used for
   the example in this section.

   Figure 6 shall be used to illustrate two service boundaries.  The
   first service boundary A->F shall be referred to as area-A, and the
   second service boundary w->z shall be referred to as area-w.  Further
   more area-A is directly represented by the GML encoding provided in
   Figure 7.  Area-w is represented as a hole in area-A by the interior
   boundary.  Since area-w is also a service boundary, a separate
   polygon describing this area is also required and is shown in
   Figure 8.


   <gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326">
     <gml:exterior>
       <gml:LinearRing>
         <gml:pos>43.411 -73.322</gml:pos> <!--w-->
         <gml:pos>43.211 -73.322</gml:pos> <!--z-->
         <gml:pos>43.211 -73.222</gml:pos> <!--y-->
         <gml:pos>43.411 -73.222</gml:pos> <!--x-->
         <gml:pos>43.411 -73.322</gml:pos> <!--w-->
       </gml:LinearRing>
     </gml:exterior>
   </gml:Polygon>


                         Figure 8: GML for Area-w

   If this data were in a LoST server and was required in a neighbouring
   LoST server, the data transfer using the format in
   [I-D.schulzrinne-ecrit-lost-sync] would look similar to Figure 9.


   <?xml version="1.0" encoding="UTF-8"?>
     <pushMappingsRequest xmlns="urn:ietf:params:xml:ns:lost1:sync">
      <mappings>
        <mapping sourceId="lost:area-A.nsw.au.example"
          version="1" lastUpdated="2007-11-26T01:00:00Z"
          timeToLive="2007-12-26T01:00:00Z">



Winterbottom & Thomson  Expires December 20, 2008              [Page 10]

Internet-Draft           Service Boundary Holes                June 2008


          <displayName xml:lang="en">
            Outer Area Police Department
          </displayName>
          <service>urn:service:sos.police</service>
          <serviceBoundary profile="geodetic-2d">
             <gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326">
               <gml:exterior>
                 <gml:LinearRing>
                   <gml:pos>43.311 -73.422</gml:pos>
                   <gml:pos>43.111 -73.322</gml:pos>
                   <gml:pos>43.111 -73.222</gml:pos>
                   <gml:pos>43.311 -73.122</gml:pos>
                   <gml:pos>43.511 -73.222</gml:pos>
                   <gml:pos>43.511 -73.322</gml:pos>
                   <gml:pos>43.311 -73.422</gml:pos>
                 </gml:LinearRing>
               </gml:exterior>
               <gml:interior>
                 <gml:LinearRing>
                   <gml:pos>43.411 -73.322</gml:pos>
                   <gml:pos>43.211 -73.322</gml:pos>
                   <gml:pos>43.211 -73.222</gml:pos>
                   <gml:pos>43.411 -73.222</gml:pos>
                   <gml:pos>43.411 -73.322</gml:pos>
                 </gml:LinearRing>
               </gml:interior>
             </gml:Polygon>
         </serviceBoundary>
          <uri>sip:area-A-pd@example.com</uri>
          <uri>xmpp:area-A-pd@example.com</uri>
          <serviceNumber>000</serviceNumber>
        </mapping>
        <mapping sourceId="lost:area-w.nsw.au.example"
          version="1" lastUpdated="2007-11-26T01:00:00Z"
          timeToLive="2007-12-26T01:00:00Z">
          <displayName xml:lang="en">
            Inner Area Police Department
          </displayName>
          <service>urn:service:sos.police</service>
          <serviceBoundary profile="geodetic-2d">
             <gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326">
               <gml:exterior>
                 <gml:LinearRing>
                   <gml:pos>43.411 -73.322</gml:pos>
                   <gml:pos>43.211 -73.322</gml:pos>
                   <gml:pos>43.211 -73.222</gml:pos>
                   <gml:pos>43.411 -73.222</gml:pos>
                   <gml:pos>43.411 -73.322</gml:pos>



Winterbottom & Thomson  Expires December 20, 2008              [Page 11]

Internet-Draft           Service Boundary Holes                June 2008


                 </gml:LinearRing>
               </gml:exterior>
             </gml:Polygon>
         </serviceBoundary>
          <uri>sip:area-w-pd@example.com</uri>
          <uri>xmpp:area-w-pd@example.com</uri>
          <serviceNumber>000</serviceNumber>
        </mapping>
       </mappings>
      </pushMappingsRequest>


                 Figure 9: Service Boundary Specifications

   It is considered likely that LoST servers will need to provide
   responses sufficiently quickly to allow real-time queries to be
   performed as part of an emergency call routing flow.  It is for this
   reason that databases supporting native geospatial query techniques
   are desirable and that service boundary specifications that are
   easily mapped to internal data structures are preferred.  The format
   described in this memo makes support for this operation easy, while
   allowing an arbitrary number of holes in a service boundary to be
   specified.

   Each primary polygon is stored in the geospatial database and mapped
   to a service URN and destination URI.  Holes may be stored as
   polygons in a separate table and mapped to the primary polygon.  When
   a location is found to map to a polygon, the exceptions table can be
   checked to see if the primary polygon contains any coverage holes.
   In general no holes will exist for a service boundary, so this check
   results in almost no overhead and the service mapping can be
   returned.  Where one or more holes are found to exist, the provided
   location is checked against each hole.  If the location is found to
   exist in one of the specified holes then the primary polygon can be
   discarded, and searching of the service boundary database can
   continue.















Winterbottom & Thomson  Expires December 20, 2008              [Page 12]

Internet-Draft           Service Boundary Holes                June 2008


7.  Security Considerations

   This document does not introduce any security issues
















































Winterbottom & Thomson  Expires December 20, 2008              [Page 13]

Internet-Draft           Service Boundary Holes                June 2008


8.  IANA Considerations

   There are no specific IANA considerations for this document.
















































Winterbottom & Thomson  Expires December 20, 2008              [Page 14]

Internet-Draft           Service Boundary Holes                June 2008


9.  Acknowledgements

   Thanks to Carl Reed for input provided to the list some months back
   and for reviewing this document.  Thanks also to Michael Haberler for
   suggesting that such a specification is required.














































Winterbottom & Thomson  Expires December 20, 2008              [Page 15]

Internet-Draft           Service Boundary Holes                June 2008


10.  References

10.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [I-D.ietf-ecrit-lost]
              Hardie, T., Newton, A., Schulzrinne, H., and H.
              Tschofenig, "LoST: A Location-to-Service Translation
              Protocol", draft-ietf-ecrit-lost-10 (work in progress),
              May 2008.

   [I-D.schulzrinne-ecrit-lost-sync]
              Schulzrinne, H., "Synchronizing Location-to-Service
              Translation (LoST) Servers",
              draft-schulzrinne-ecrit-lost-sync-01 (work in progress),
              February 2008.

   [geoshape]
              Thomson, M. and C. Reed, "GML 3.1.1 PIDF-LO Shape
              Application Schema for use by the Internet Engineering
              Task Force (IETF)", Candidate OpenGIS Implementation
              Specification 06-142r1, Version: 1.0, April 2007.

10.2.  Informative References

   [ISO-19107]
              ISO, "Geographic information - Spatial Schema", ISO
              Standard 19107, First Edition, 5 2003.





















Winterbottom & Thomson  Expires December 20, 2008              [Page 16]

Internet-Draft           Service Boundary Holes                June 2008


Authors' Addresses

   James Winterbottom
   Andrew Corporation
   PO Box U40
   University of Wollongong, NSW  2500
   AU

   Email: james.winterbottom@andrew.com


   Martin Thomson
   Andrew Corporation
   PO Box U40
   University of Wollongong, NSW  2500
   AU

   Email: martin.thomson@andrew.com

































Winterbottom & Thomson  Expires December 20, 2008              [Page 17]

Internet-Draft           Service Boundary Holes                June 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).





Winterbottom & Thomson  Expires December 20, 2008              [Page 18]

