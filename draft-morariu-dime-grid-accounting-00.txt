Individual Submission                                        C. Morariu  
Internet Draft                                                  P. Racz  
Intended status: Standards Track                            D. Hausheer 
Expires: April 5, 2008                                       B. Stiller
                                                   University of Zurich 
                                                        October 5, 2007 
 
                                      
                   Diameter Grid Accounting Application 
                 draft-morariu-dime-grid-accounting-00.txt 


Status of this Memo 

   By submitting this Internet-Draft, each author represents that       
   any applicable patent or other IPR claims of which he or she is       
   aware have been or will be disclosed, and any of which he or she       
   becomes aware will be disclosed, in accordance with Section 6 of       
   BCP 79. 

   This document may not be modified, and derivative works of it may not 
   be created. 

   This document may only be posted in an Internet-Draft. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-
   Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html 

   This Internet-Draft will expire on April 5, 2007. 

Copyright Notice 

   Copyright (C) The IETF Trust (2007). 

 

 
 
 
 
Morariu, et al.         Expires April 5, 2008                  [Page 1] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

Abstract 

   This document specifies a Diameter application in support of 
   accounting in Grid networks. It defines a way to integrate network-
   related and Grid service-related accounting parameters to ensure the 
   operation of a homogeneous accounting systems based on Diameter. A 
   new set of AVPs is defined and accounting messages are extended in 
   order to support accountable and exchangeable Grid services in a 
   multi provider environment.  

Conventions used in this document 

   In examples, "C:" and "S:" indicate lines sent by the client and 
   server respectively. 

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in [RFC2119]. 

Table of Contents 

    
   1. Introduction...................................................3 
      1.1. Terminology...............................................3 
      1.2. Requirements Language.....................................4 
      1.3. Advertising Application Support...........................4 
   2. Grid Accounting Messages.......................................4 
      2.1. Accounting-Request (ACR) Command..........................4 
      2.2. Accounting-Answer (ACA) Command...........................6 
   3. Grid Accounting AVPs...........................................8 
      3.1. CPU-Time AVP..............................................8 
      3.2. CPU-Type AVP..............................................8 
      3.3. CPU-Cycles AVP............................................8 
      3.4. CPU-Count AVP.............................................8 
      3.5. Node-Count AVP............................................8 
      3.6. Memory-Size AVP...........................................9 
      3.7. Memory-Usage-Average AVP..................................9 
      3.8. Memory-Usage-Maximum AVP..................................9 
      3.9. Disk-Usage-Average........................................9 
      3.10. Disk-Usage-Maximum.......................................9 
      3.11. Host-Name AVP............................................9 
      3.12. Job-Name AVP.............................................9 
      3.13. Process-ID AVP...........................................9 
      3.14. Process-Status AVP......................................10 
      3.15. QoS-Bandwidth AVP.......................................10 
      3.16. QoS-Delay AVP...........................................10 
      3.17. QoS-Jitter AVP..........................................10 
 
 
Morariu, et al.         Expires April 5, 2008                  [Page 2] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

      3.18. QoS-Priority AVP........................................10 
      3.19. QoS-DSCP AVP............................................10 
      3.20. QoS-Score...............................................10 
      3.21. Accounting-Dropped-Octets AVP...........................11 
      3.22. Accounting-Dropped-Packets AVP.........................11 
      3.23. Request-Count AVP.......................................11 
      3.24. Successful-Request-Count AVP............................11 
      3.25. Failed-Request-Count AVP................................11 
   4. Security Considerations.......................................11 
   5. IANA Considerations...........................................11 
      5.1. Command Codes............................................12 
      5.2. AVP Codes................................................12 
      5.3. Application Identifier...................................12 
   6. Acknowledgments...............................................12 
   7. References....................................................13 
      7.1. Normative References.....................................13 
      7.2. Informative References...................................13 
   Author's Addresses...............................................14 
   Intellectual Property Statement..................................14 
   Disclaimer of Validity...........................................15 
    
    

1. Introduction 

   This document describes the new Diameter protocol application used 
   for accounting in Grid networks [MWS06], [GWGDS06], termed Grid 
   Accounting Application (GAApp). For an integrated approach to the 
   accounting of network services and Grid applications using the 
   Diameter protocol [HRMHS07], the Accounting-Request (ACR) and 
   Accounting-Answer (ACA) Diameter messages are used and extended by 
   this specification. In order to accommodate accounting parameters of 
   Grid services, additional AVPs are defined, carrying specifically 
   accounting parameters for Grid services. AVPs defined in this 
   document can be used together with AVPs defined for the Network 
   Access Server (NAS) environment [RFC4005]. 

   The extended ACR and ACA messages are described in Section 2. Newly 
   defined accounting AVPs are defined in Section 3Error! Reference 
   source not found.. 

1.1. Terminology 

   The Diameter base protocol [RFC3588] specification defines the 
   terminology used in this document. 


 
 
Morariu, et al.         Expires April 5, 2008                  [Page 3] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

1.2. Requirements Language 

   In this document, the key words "MAY", "MUST", "MUST NOT", 
   "OPTIONAL", "RECOMMENDED", "SHOULD", and "SHOULD NOT" are to be 
   interpreted as described in [RFC2119]. 

1.3. Advertising Application Support 

   Diameter implementations conforming to this specification MUST 
   advertise its support by including an Acct-Application-Id AVP in the 
   Capabilities-Exchange-Request (CER) and Capabilities-Exchange-Answer 
   (CEA) commands, according to the Diameter base protocol [RFC 3588]. 
   This Acct-Application-Id AVP MUST be set to the value allocated by 
   IANA to this application (Section 5). 

2. Grid Accounting Messages 

   This section defines the Diameter message Command-Code [RFC3588] 
   values that MUST be supported by all Diameter implementations 
   conforming to this specification. The two Command Codes are defined 
   as follows: 

         Command-Name                  Abbrev.  Code   Reference 

         ------------------------------------------------------- 

         Accounting-Request              ACR     271     2.1 

         Accounting-Answer               ACA     271     2.2 

2.1. Accounting-Request (ACR) Command 

   The ACR message [RFC3588] is sent by the client to report accounting 
   data to a target server. 

   Either of Acct-Application-Id or Vendor-Specific-Application-Id AVPs 
   MUST be present. If the Vendor-Specific-Application-Id grouped AVP is 
   present, it must have an Acct-Application-Id inside. 

   AVPs listed in [RFC3588] and [RFC4005] MUST be assumed to be present, 
   as appropriate. Grid accounting AVPs SHOULD be present as described 
   in section 3 and the remainder of this specification. 

   Message Format 

         <ACR> ::= < Diameter Header: 271, REQ, PXY > 

 
 
Morariu, et al.         Expires April 5, 2008                  [Page 4] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

                   < Session-Id > 

                   { Origin-Host } 

                   { Origin-Realm } 

                   { Destination-Realm } 

                   { Accounting-Record-Type } 

                   { Accounting-Record-Number } 

                   [ Acct-Application-Id ] 

                   [ Vendor-Specific-Application-Id ] 

                   [ User-Name ] 

                   [ Accounting-Sub-Session-Id ] 

                   [ Acct-Session-Id ] 

                   [ Acct-Multi-Session-Id ] 

                   [ Acct-Interim-Interval ] 

                   [ Accounting-Realtime-Required ] 

                   [ Destination-Host ] 

                   [ CPU-Time ] 

                   [ CPU-Type ] 

                   [ CPU-Cycles ] 

                   [ CPU-Count ] 

                   [ Node-Count ] 

                   [ Memory-Size ] 

                   [ Memory-Usage-Average ] 

                   [ Memory-Usage-Maximum ] 

                   [ Disk-Usage-Average ] 
 
 
Morariu, et al.         Expires April 5, 2008                  [Page 5] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

                   [ Disk-Usage-Maximum ] 

                   [ Host-Name ] 

                   [ Job-Name ] 

                   [ Process-ID ] 

                   [ Process-Status ] 

                   [ QoS-Bandwidth ] 

                   [ QoS-Delay ] 

                   [ QoS-Jitter ] 

                   [ QoS-Priority ] 

                   [ QoS-DSCP ] 

                   [ QoS-Score ] 

                   [ Accounting-Dropped-Octets ] 

                   [ Accounting-Dropped-Packets ] 

                   [ Request-Count ] 

                   [ Successful-Request-Count ] 

                   [ Failed-Request-Count ] 

                   [ Origin-State-Id ] 

                   [ Event-Timestamp ] 

                 * [ Proxy-Info ] 

                 * [ Route-Record ] 

                 * [ AVP ] 

2.2. Accounting-Answer (ACA) Command 

   The ACA message [RFC3588] is used to acknowledge an Accounting-
   Request command. The Accounting-Answer command contains the same 
   Session-Id as the Request. If the Accounting-Request was protected by 
 
 
Morariu, et al.         Expires April 5, 2008                  [Page 6] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

   end-to-end security, the corresponding ACA message MUST be protected 
   as well. 

   Only the target Diameter Server or home Diameter Server SHOULD 
   respond with the Accounting-Answer command. 

   Either Acct-Application-Id or Vendor-Specific-Application-Id AVPs 
   MUST be present, as it was in the request. 

   The AVPs listed in [RFC3588] and [RFC4005] MUST be assumed to be 
   present, as appropriate. Grid accounting AVPs SHOULD be present as 
   described in section 3 and the remainder of this specification. 

   Message Format 

         <AC-Answer> ::= < Diameter Header: 271, PXY > 

                   < Session-Id > 

                   { Result-Code } 

                   { Origin-Host } 

                   { Origin-Realm } 

                   { Accounting-Record-Type } 

                   { Accounting-Record-Number } 

                   [ Acct-Application-Id ] 

                   [ Vendor-Specific-Application-Id ] 

                   [ User-Name ] 

                   [ Accounting-Sub-Session-Id ] 

                   [ Acct-Session-Id ] 

                   [ Acct-Multi-Session-Id ] 

                   [ Error-Reporting-Host ] 

                   [ Acct-Interim-Interval ] 

                   [ Accounting-Realtime-Required ] 

 
 
Morariu, et al.         Expires April 5, 2008                  [Page 7] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

                   [ Origin-State-Id ] 

                   [ Event-Timestamp ] 

                 * [ Proxy-Info ] 

                 * [ AVP ] 

3. Grid Accounting AVPs 

3.1. CPU-Time AVP 

   The CPU-Time AVP (AVP Code 1001) is of type Unsigned64. This AVP 
   contains the time duration of a job, measured in milliseconds. 

3.2. CPU-Type AVP 

   The CPU-Type AVP (AVP Code 1002) is of type Enumerated. This AVP 
   indicates the CPU type used. The following values are defined for 
   this AVP: 

   0 - x86 32 bit  
   1 - x86 64 bit 
   2 - PPC 32 bit 
   3 - PPC 64 bit 
   4 - SPARC 32 bit 
   5 - SPARC 64 bit 

3.3. CPU-Cycles AVP 

   The CPU-Cycles AVP (AVP Code 1003) is of type Unsigned64. This AVP 
   indicates the number of CPU cycles used by the process. The 
   measurement unit is 1000 cycles, thus each number n in the AVP stands 
   for n*1000 cycles. 

3.4. CPU-Count AVP 

   The CPU-Count AVP (AVP Code 1004) is of type Unsigned32. This AVP 
   shows the number of CPUs that were involved during the Grid service 
   execution.  

3.5. Node-Count AVP 

   The Node-Count AVP (AVP Code 1005) is of type Unsigned32. This AVP 
   shows the number of Grid nodes involved during the Grid service 
   execution. 

 
 
Morariu, et al.         Expires April 5, 2008                  [Page 8] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

3.6. Memory-Size AVP 

   The Memory-Size AVP (AVP Code 1006) is of type Unsigned64. This AVP 
   contains the amount of memory allocated for the Grid service measured 
   in bytes.  

3.7. Memory-Usage-Average AVP 

   The Memory-Usage-Average AVP (AVP Code 1007) is of type Unsigned64. 
   This AVP contains the average main memory used by the Grid service 
   during execution time measured in bytes.  

3.8. Memory-Usage-Maximum AVP 

   The Memory-Usage-Maximum AVP (AVP Code 1008) is of type Unsigned64. 
   This AVP contains the maximum amount of memory that was used by the 
   Grid service during execution time measured in bytes.  

3.9. Disk-Usage-Average 

   The Disk-Usage-Average (AVP Code 1009) is of type Unsigned64. This 
   AVP contains the average disk space used by the Grid service, 
   measured in bytes. 

3.10. Disk-Usage-Maximum 

   The Disk-Usage-Maximum (AVP Code 1010) is of type Unsigned64. This 
   AVP contains the maximum number of disk space bytes used by the Grid 
   service.  

3.11. Host-Name AVP 

   The Host-Name AVP (AVP Code 1011) is of type UTF8String. This AVP 
   contains the hostname on which the Grid service was started. 

3.12. Job-Name AVP 

   The Job-Name AVP (AVP Code 1012) is of type UTF8String. This AVP 
   contains the name of the job under which the Grid service was 
   instantiated. 

3.13. Process-ID AVP 

   The Process-ID AVP (AVP Code 1013) is of type Unsigned32. This AVP 
   contains the process identifier under which the Grid service was 
   started. 

 
 
Morariu, et al.         Expires April 5, 2008                  [Page 9] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

3.14. Process-Status AVP 

   The Process-Status AVP (AVP Code 1014) is of type Enumerated. This 
   AVP specifies the status of a job. The following values are defined 
   for this AVP: 

   0 - aborted 
   1 - completed 
   2 - failed 
   3 - held 
   4 - queued 
   5 - started 
   6 - suspended 

3.15. QoS-Bandwidth AVP 

   The QoS-Bandwidth AVP (AVP Code 1015) is of type Unsigned64. This AVP 
   specifies the bandwidth reserved for the transmission measured in 
   bits per second. 

3.16. QoS-Delay AVP 

   The QoS-Delay AVP (AVP Code 1016) is of type Unsigned32. This AVP 
   specifies the guaranteed delay provided in milliseconds. 

3.17. QoS-Jitter AVP 

   The QoS-Jitter AVP (AVP Code 1017) is of type Unsigned32. This AVP 
   specifies the guaranteed jitter provided during transmission, 
   measured in milliseconds. 

3.18. QoS-Priority AVP 

   The QoS-Priority AVP (AVP Code 1018) is of type Unsigned32. This AVP 
   specifies the priority class of the traffic. 

3.19. QoS-DSCP AVP 

   The QoS-DSCP AVP (AVP Code 1019) is of type Unsigned32. This AVP 
   specifies the DiffServ code point used. 

3.20. QoS-Score 

   The QoS-Score AVP (AVP Code 1020) is of type Unsigned32. This AVP 
   specifies the result (score) of a relative function to the QoS that 
   was provided.  

 
 
Morariu, et al.         Expires April 5, 2008                 [Page 10] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

3.21. Accounting-Dropped-Octets AVP 

   The Accounting-Dropped-Octets AVP (AVP Code 1021) is of type 
   Unsigned64. This AVP specifies the number of bytes dropped by the 
   access network. 

3.22. Accounting-Dropped-Packets AVP 

   The Accounting-Dropped-Packets AVP (AVP Code 1022) is of type 
   Unsigned64. This AVP specifies the number of packets dropped by the 
   access network. 

3.23. Request-Count AVP 

   The Request-Count AVP (AVP Code 1023) is of type Unsigned32. This AVP 
   specifies the total number of requests sent to a Grid service. 

3.24. Successful-Request-Count AVP 

   The Successful-Request-Count AVP (AVP Code 1024) is of type 
   Unsigned32. This AVP specifies the number of successful Grid service 
   invocations. 

3.25. Failed-Request-Count AVP 

   The Failed-Request-Count AVP (AVP Code 1025) is of type Unsigned32. 
   This AVP specifies the number of erroneous Grid service invocations. 

4. Security Considerations 

   This document describes the extension of the Diameter protocol for 
   accounting in Grid networks. It does not describe a stand-alone 
   protocol, but a particular application for the Diameter protocol 
   [RFC3588]. The security considerations of the Diameter protocol 
   itself have been discussed in [RFC3588]. All security considerations 
   applicable to Diameter automatically apply to this specification as 
   well. 

5. IANA Considerations 

   This section provides guidance to the Internet Assigned Numbers 
   Authority (IANA) regarding registration of values related to the 
   Diameter protocol, in accordance with BCP 26 [RFC2434]. 

   This document defines values in the namespaces that have been created 
   and defined in the Diameter Base [BASE]. The IANA Considerations 
   section of that document details the assignment criteria. Values 
 
 
Morariu, et al.         Expires April 5, 2008                 [Page 11] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

   assigned in this document, or by future IANA action, must be 
   coordinated within this shared namespace. 

5.1. Command Codes 

   This specification assigns the value 271 from the Command Code 
   namespace defined in [RFC3588]. This command code is jointly, but 
   consistently, used by [RFC4005]. 

5.2. AVP Codes 

   This specification assigns the values 1001 - 1025 from the AVP Code 
   namespace defined in [RFC3588]. 

5.3. Application Identifier 

   This specification uses the value one (1) in the Application 
   Identifier namespace as assigned in [RFC3588]. 

6. Acknowledgments 

   This Internet draft has been written partially in the framework of 
   the EU IST project Akogrimo "Access to Knowledge through the Grid in 
   a Mobile World" (FP6-2003-IST-2-004293). Additionally, the authors 
   would like to acknowledge fruitful discussions with all of their 
   colleagues and project partners. 

   This document was prepared using 2-Word-v2.0.template.dot. 



















 
 
Morariu, et al.         Expires April 5, 2008                 [Page 12] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

7. References 

7.1. Normative References 

   [RFC2119] Bradner, S., "Key words for use in RFCs to Indicate 
             Requirement Levels", BCP 14, RFC 2119, March 1997. 

   [RFC3588] Calhoun, P., Loughney, J., Guttman, E., Zorn, G., Arkko J., 
             "Diameter Base Protocol", RFC 3588, September 2003. 

   [RFC4005] Calhoun, P., Zorn, G., Spence, D., Mitton, D., "Diameter 
             Network Access Server Application", RFC 4005, August 2005. 

   [RFC2434] Narten, T., Alvestrand, H., "Guidelines for Writing an IANA 
             Considerations Section in RFCs", BCP 26, RFC 2434, October 
             1998. 

7.2. Informative References 

    [MWS06]  Morariu, C., Waldburger, M., Stiller, B., "An Integrated 
             Accounting and Charging Architecture for Mobile Grids". 
             Third International Workshop on Networks for Grid 
             Applications (GridNets 2006), pages 1-10, San Jose (CA), 
             USA, October 2006. 

   [GWGDS06] Göhner, M., Waldburger, M., Gubler, F., Dreo Rodosek, G., 
             Stiller, B., "An Accounting Model for Dynamic Virtual 
             Organizations". University of Zurich, IFI Technical Report 
             No. 2006.11, Zurich, Switzerland, November 2006. 

   [HRMHS07] Hasan, Racz, P., Morariu, C., Hausheer, D., Stiller, B, 
             "A4C Support for Commercialization of Next Generation Grid 
             Services". ERCIM NEWS, No. 70, pages 18-19, July 2007. 

    












 
 
Morariu, et al.         Expires April 5, 2008                 [Page 13] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

Author's Addresses 

   Cristian Morariu 
   University of Zurich 
   Department of Informatics (IFI), CSG 
   Binzmuehlestrasse 14 
   CH-8050, Zurich 
   Switzerland 
    
   Email: morariu@ifi.uzh.ch 
    
   Peter Racz 
   University of Zurich 
   Department of Informatics (IFI), CSG 
   Binzmuehlestrasse 14 
   CH-8050 Zurich 
   Switzerland 
    
   Email: racz@ifi.uzh.ch 
    
   David Hausheer 
   University of Zurich 
   Department of Informatics (IFI), CSG 
   Binzmuehlestrasse 14 
   CH-8050 Zurich 
   Switzerland 
    
   Email: hausheer@ifi.uzh.ch 
    
   Burkhard Stiller 
   University of Zurich 
   Department of Informatics (IFI), CSG 
   Binzmuehlestrasse 14 
   CH-8050 Zurich 
   Switzerland 
    
   Email: stiller@ifi.uzh.ch 
    
    

Intellectual Property Statement 

   The IETF takes no position regarding the validity or scope of any 
   Intellectual Property Rights or other rights that might be claimed to 
   pertain to the implementation or use of the technology described in 
   this document or the extent to which any license under such rights 
   might or might not be available; nor does it represent that it has 
 
 
Morariu, et al.         Expires April 5, 2008                 [Page 14] 

Internet-Draft        draft-ietf-grid-accounting           October 2007 
    

   made any independent effort to identify any such rights.  Information 
   on the procedures with respect to rights in RFC documents can be 
   found in BCP 78 and BCP 79. 

   Copies of IPR disclosures made to the IETF Secretariat and any 
   assurances of licenses to be made available, or the result of an 
   attempt made to obtain a general license or permission for the use of 
   such proprietary rights by implementers or users of this 
   specification can be obtained from the IETF on-line IPR repository at 
   http://www.ietf.org/ipr. 

   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights that may cover technology that may be required to implement 
   this standard.  Please address the information to the IETF at 
   ietf-ipr@ietf.org. 

Disclaimer of Validity 

   This document and the information contained herein are provided on an 
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND 
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS 
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF 
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 

Copyright Statement 

   Copyright (C) The IETF Trust (2007). 

   This document is subject to the rights, licenses and restrictions 
   contained in BCP 78, and except as set forth therein, the authors 
   retain all their rights. 

Acknowledgment 

   Funding for the RFC Editor function is currently provided by the 
   Internet Society. 

    






 
 
Morariu, et al.         Expires April 5, 2008                 [Page 15] 

