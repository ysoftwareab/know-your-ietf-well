


geopriv                                                          R. Mahy
Internet-Draft                                               Plantronics
Intended status: Standards Track                                B. Rosen
Expires: May 7, 2009                                             NeuStar
                                                        November 3, 2008


 A Document Format for Filtering and Reporting Location Notications in
   the Presence Information Document Format Location Object (PIDF-LO)
                   draft-ietf-geopriv-loc-filters-03

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on May 7, 2009.

Abstract

   This document describes filters which limit asynchronous location
   notifications to compelling events.  The resulting location
   information is conveyed in existing location formats wrapped in
   GEOPRIV privacy extensions to the Presence Information Document
   Format (PIDF-LO)








Mahy & Rosen               Expires May 7, 2009                  [Page 1]

Internet-Draft           Location Event Filters            November 2008


Table of Contents

   1.  Conventions  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Overview . . . . . . . . . . . . . . . . . . . . . . . . . . .  3
   3.  Definition of Location Filter Format . . . . . . . . . . . . .  3
     3.1.  Horizontal and Vertical Movement . . . . . . . . . . . . .  4
     3.2.  Changes in value . . . . . . . . . . . . . . . . . . . . .  5
     3.3.  Containment Within a Region  . . . . . . . . . . . . . . .  6
     3.4.  Rate Control . . . . . . . . . . . . . . . . . . . . . . .  9
     3.5.  XML Schema for filter format . . . . . . . . . . . . . . .  9
   4.  Containment schema . . . . . . . . . . . . . . . . . . . . . . 12
   5.  Security Considerations  . . . . . . . . . . . . . . . . . . . 15
   6.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 16
     6.1.  MIME Registration for
           application/location-delta-filter+xml  . . . . . . . . . . 16
     6.2.  URN Sub-Namespace Registration for
           urn:ietf:params:xml:ns:location-filter . . . . . . . . . . 16
     6.3.  Schema Registration For location-filter  . . . . . . . . . 17
     6.4.  URN Sub-Namespace Registration for
           urn:ietf:params:xml:ns:pidf:geopriv10:containment  . . . . 17
     6.5.  Schema Registration For containment  . . . . . . . . . . . 18
   7.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 18
   8.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 18
     8.1.  Normative References . . . . . . . . . . . . . . . . . . . 18
     8.2.  Informational References . . . . . . . . . . . . . . . . . 19
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 19
   Intellectual Property and Copyright Statements . . . . . . . . . . 21
























Mahy & Rosen               Expires May 7, 2009                  [Page 2]

Internet-Draft           Location Event Filters            November 2008


1.  Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC-2119 [RFC2119].


2.  Overview

   Conveying static location in PIDF-LO [RFC4119] bodies is
   straightforward.  However the difficult part about asynchronous
   notification of location information is that many forms of location
   are measured as a continuous gradient.  Unlike notifications using
   discreet quantities, it is difficult to know when a change in
   location is large enough to warrant a notification.  Moreover,
   different applications require a wide variety of location
   resolutions.  Any optimization made for one application would
   ultimately result in wasteful polling or a sluggish user interface
   for other applications.

   The mechanism described here defines filters in XML [W3C.REC-xml]
   documents which limit location notification to events which are of
   relevance to the subscriber.  These filters persist until they are
   changed with a replacement filter.

   In addition to the relevant filters, this document also defines a new
   XML schema [W3C.REC-xmlschema-1] which can be included in PIDF-LO
   documents to indicate that the resource is inside or outside of a
   container region.


3.  Definition of Location Filter Format

   The granularity of notifications necessary for various geographic
   location applications varies dramatically.  The subscriber should be
   able to get asynchronous notifications with appropriate granularity
   and accuracy, without having to poll or flood the network with
   notifications which are not important to the application.
   Notifications should only happen when the notification would be
   considered an Interesting Event to the subscriber.  This section of
   this document defines an XML filter format to describe interesting
   conditions or events.  The terminal elements in this format are
   defined in terms of existing Geographic Markup Language (GML) [GML]
   data types or civic address elements.

   This document also defines a MIME type for this location filter
   format: application/location-delta-filter+xml.




Mahy & Rosen               Expires May 7, 2009                  [Page 3]

Internet-Draft           Location Event Filters            November 2008


   This document defines the following as an initial list of Interesting
   Events:
   1.  the resource moves more than a specific distance horizontally or
       vertically since the last notification
   2.  the resource exceeds a specific speed
   3.  the resource enters or exits one or more GML objects (for
       example, a set of 2-dimensional or 3-dimensional regions)
       included or referenced in the filter.
   4.  one or more of the values of the specified address labels has
       changed for the resource (for example, the A1 value of the
       civilAddress has changed from California to Nevada)
   5.  a mininum and maximum rate of reports regardless of movement
   This specification makes use of XML namespaces [W3C.REC-xml-names]
   for identifying location filter documents and document fragments.
   The namespace URI for elements defined by this specification is a URN
   [RFC2141], using the namespace identifier 'ietf' defined by [RFC2648]
   and extended by [RFC3688].  This URN is:

   urn:ietf:params:xml:ns:location-filter

   The filter format starts with a top-level XML element called
   "<location-filter>", which contains one or more filter events.  The
   semantics of multiple elements inside a location-filter generally is
   a logical OR.  In other words, if any of the individual filter events
   occurs, the event satisfies the location-filter and triggers a
   notification.  However the "maxRate" parameter is a logical AND, and
   will limit events that otherwise would have been reported.

3.1.  Horizontal and Vertical Movement

   The movedHoriz and movedVert filter events each indicate a minimum
   horizontal motion or vertical distance (respectively) that the
   resource must have moved from the location of the resource when the
   last notification was sent in order to trigger this event.  The
   distance is measured absolutely from the point of last notification
   rather than in terms of cumulative motion (For example, someone
   pacing inside a room will not trigger an event if the trigger
   threshold is slightly larger than the room.)  Each of these events
   can only appear once in a location-filter.  These events have an
   attribute "uom" (for "units of measure"), which indicates the units
   of the element.  The default unit for these events is meters.

   Similarly, the speedExceeds filter event indicates a minimum
   horizontal speed of the resource before the speedExceeds event is
   triggered.  This element can appear only once in a location-filter,
   and has a "uom" attribute which defaults to meters per second if not
   present.




Mahy & Rosen               Expires May 7, 2009                  [Page 4]

Internet-Draft           Location Event Filters            November 2008


      This filter measures the horizontal component of speed in any
      direction.  It does not measure velocity.  Note also that there is
      no corresponding event triggered when speed drops below a
      threshold.

   Below are some examples.  In the first example if the resource moves
   20m in the x,y direction or 3m in the z direction, send a
   notification:

   <location-filter>
     <movedHoriz uom="urn:ogc:def:uom:EPSG::9001">20</movedHoriz>
     <movedVert uom="urn:ogc:def:uom:EPSG::9001">3</movedVert>
   </location-filter>

   If the resource exceeds 3 meters per second (10.8 km/h), send a
   notification:

   <location-filter>
     <speedExceeds uom="#mps">3</speedExceeds>
   </location-filter>

3.2.  Changes in value

   The valueChanges filter event contains a string which is interpreted
   as an XPath [W3C.xpath] expression evaluated within the context of
   the location-info element of the PIDF-LO document which would be
   generated by the notification.  The XPath expression MUST evaluate to
   only a single Xpath node.  If the value of any of the elements in the
   resulting node changes, then the filter event is triggered.  Note
   that the value of the resulting node changes if any of those nodes or
   subnodes transitions from having a value to having no value or vice
   versa.  A location-filter may contain multiple valueChanges filters.

   For example, given the following logical PIDF-LO document, If the
   state (A1), county (A2), city (A3), or postal code (PC) changes, send
   a notification:















Mahy & Rosen               Expires May 7, 2009                  [Page 5]

Internet-Draft           Location Event Filters            November 2008


   PIDF-LO Location Document:
       <?xml version="1.0" encoding="UTF-8"?>
       <presence xmlns="urn:ietf:params:xml:ns:pidf"
          xmlns:gp="urn:ietf:params:xml:ns:pidf:geopriv10"
          xmlns:cl="urn:ietf:params:xml:ns:pidf:geopriv10:civilLoc"
          entity="pres:geotarget@example.com">
        <tuple id="sg89ae">
         <status>
          <gp:geopriv>
            <gp:location-info>
              <cl:civilAddress>
                <cl:country>US</cl:country>
                <cl:A1>NY</cl:A1>
                <cl:A3>New York</cl:A3>
                <cl:RD>Broadway</cl:RD>
                <cl:HNO>123</cl:HNO>
                <cl:UNIT>Suite 75</cl:UNIT>
                <cl:PC>10027</cl:PC>
              </cl:civilAddress>
            </gp:location-info>
            <gp:usage-rules>
              <gp:retransmission-allowed>yes</gp:retransmission-allowed>
              <gp:retention-expiry>2003-06-23T04:57:29Z
              </gp:retention-expiry>
            </gp:usage-rules>
          </gp:geopriv>
         </status>
         <timestamp>2003-06-22T20:57:29Z</timestamp>
        </tuple>
       </presence>

   Filter Document:
     <location-filter
       xmlns="urn:ietf:params:xml:ns:location-filter"
       xmlns:cl="urn:ietf:params:xml:ns:pidf:geopriv10:civilLoc">
       <valueChanges>cl:civilAddress/cl:A1</valueChanges>
       <valueChanges>cl:civilAddress/cl:A2</valueChanges>
       <valueChanges>cl:civilAddress/cl:A3</valueChanges>
       <valueChanges>cl:civilAddress/cl:PC</valueChanges>
     </location-filter>

3.3.  Containment Within a Region

   The "enterOrExit" filter event is satisfied when the resource enters
   or exits a named 2-dimensional or 3-dimensional region described by
   one of the shapes defined in section 5 of
   [I-D.ietf-geopriv-pdif-lo-profile].  These regions can be defined
   using inline snippets of GML, or externally referenced using a URI



Mahy & Rosen               Expires May 7, 2009                  [Page 6]

Internet-Draft           Location Event Filters            November 2008


   (Uniform Resource Identifier).
      These regions need a unique name or identifier so location with
      respect to these regions can be described later (for example in a
      notification).  These regions are currently described as GML
      Features so they can be named with a GML Name.  Ideally each
      region could be described instead as a GML geometry with some
      associated name or identifier.

   Any 2-dimensional region MUST be defined using the EPSG 4326
   coordinate reference system.  Any 3-dimensional region MUST be
   defined using the EPSG 4979 coordinate reference system.  A location-
   filter can contain more than one enterOrExit filter event.

      Notifiers MAY support other more complex geometries or additional
      coordinate reference systems.  How the Subscriber negotiates
      support for more complex geometries or reference systems is out of
      the scope of this document.
      Likewise, this document does not describe how a subscriber
      discovers the existence of externally referenced features.  This
      topic is out of scope of this document.

   In most cases Subscribers that use location filters based on
   enterOrExit events are especially interested in the resource's
   relationship to those named features.  Consequently, the notifier
   MUST include either a "containment" element for each feature
   mentioned in the location-filter which has changed its containment
   properties with respect to the resource since the last notification.
   These elements are defined in Section 4.  The notifier MAY include
   any other form of location that is relevant.

   For example, if the resource enters or exits Building 10 (which is
   defined by specific 2-D or 3-D rectangular coordinates), send a
   notification:

   Version in 2-Dimensions:
   <location-filter>
     <enterOrExit>
       <my:Building>
         <gml:name>Building 10</gml:name>
         <gml:extentOf>
           <gml:Polygon
     srsName="urn:ogc:def:crs:EPSG::4326"
     xmlns:gml="http://www.opengis.net/gml">
             <gml:exterior>
               <gml:LinearRing>
                 <gml:posList
                      37.41188 -121.93243
                      37.41142 -121.93243



Mahy & Rosen               Expires May 7, 2009                  [Page 7]

Internet-Draft           Location Event Filters            November 2008


                      37.41142 -121.93132
                      37.41188 -121.93132
                      37.41188 -121.93243
                 </gml:posLis>
               </gml:LinearRing>
             </gml:exterior>
           </gml:Polygon>
         </gml:extentOf>
       </my:Building>
     </enterOrExit>
   </location-filter>

   Version in 3-Dimensions:
   <location-filter>
     <enterOrExit>
       <my:Building>
         <gml:name>Building 10</gml:name>
         <gs:Prism
     srsName="urn:ogc:def:crs:EPSG::4979"
     xmlns:gs="urn:ietf:params:xml:ns:pidf:geopriv10:geoShape"
     xmlns:gml="http://www.opengis.net/gml">
           <gs:base>
             <gml:Polygon>
               <gml:exterior>
                 <gml:LinearRing>
                   <gml:posList>
                      37.41188 -121.93243 0
                      37.41142 -121.93242 0
                      37.41142 -121.93132 0
                      37.41188 -121.93132 0
                      37.41188 -121.93243 0
                   </gml:posList>
                 </gml:LinearRing>
               </gml:exterior>
             </gml:Polygon>
           </gs:base>
           <gs:height uom="urn:ogc:def:uom:EPSG::9001">
              24
           </gs:height>
         </gs:Prism>
       </my:Building>
     </enterOrExit>
   </location-filter>

   If the resource enters or exits either the parking garage or any of
   the conference rooms (both of which are externally defined), send a
   notification:




Mahy & Rosen               Expires May 7, 2009                  [Page 8]

Internet-Draft           Location Event Filters            November 2008


   <location-filter>
     <enterOrExit>
       <my:ParkingGarage
   xlink:href="http://server.example.com/loc-defs/bldg-mgr/parking"/>
     </enterOrExit>
     <enterOrExit>
       <my:ConferenceRooms
   xlink:href="http://server.example.com/loc-defs/userdef/confrooms"/>
     </enterOrExit>
   </location-filter>

3.4.  Rate Control

   Although not part of the loc-filter function, the throttle mechanisms
   [I-D.niemi-sipping-event-throttle] can be used to control the rate of
   notifications.  The "throttle", "force" and "average" settings can
   filter notications by time

3.5.  XML Schema for filter format

   The XML Schema for this format is defined below.

   <?xml version="1.0" encoding="UTF-8"?>
   <xs:schema
     targetNamespace="urn:ietf:params:xml:ns:location-filter"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns:gml="http://www.opengis.net/gml">

     <xs:element name="location-filter">
       <xs:complexType>
         <xs:sequence>
           <xs:element name="movedHoriz" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="movedVert" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="speedExceeds" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>

           <!-- this type needs to hold an XPath statement -->
           <xs:element name="valueChanges" type="xs:string"
                          minOccurs="0" maxOccurs="unbounded"/>

           <xs:element name="enterOrExit" type="gml:FeaturePropertyType"
                          minOccurs="0" maxOccurs="unbounded"/>
           <xs:element name="minRate" type="xs:rate-spec"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="maxRate" type="xs:rate-spec"
                          minOccurs="0" maxOccurs="1"/>



Mahy & Rosen               Expires May 7, 2009                  [Page 9]

Internet-Draft           Location Event Filters            November 2008


           <xs:any namespace="##other" processContents="lax"
              minOccurs="0"  maxOccurs="unbounded"/>
         </xs:sequence>
       </xs:complexType>
     </xs:element>
     <xs:element name="rate-spec">
       <xs:complexType>
         <xs:sequence>
           <xs:attribute name="uom" use="required">
             <xs:simpleType>
               <xs:restriction base="xs:token">
                 <xs:enumeration value="seconds"></xs:enumeration>
                 <xs:enumeration value="minutes"></xs:enumeration>
                 <xs:enumeration value="hours"></xs:enumeration>
                 <xs:enumeration value="days"></xs:enumeration>
                 <xs:enumeration value="weeks"></xs:enumeration>
                 <xs:enumeration value="years"></xs:enumeration>
               </xs:restriction>
             </xs:simpleType>
           </xs:attribute>
         </xs:sequence>
       </xs:complexType>
     </xs:element>
   </xs:schema>



   <?xml version="1.0" encoding="UTF-8"?>
   <xs:schema
     targetNamespace="urn:ietf:params:xml:ns:location-filter"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns:gml="http://www.opengis.net/gml">

     <xs:element name="location-filter">
       <xs:complexType>
         <xs:sequence>
           <xs:element name="movedHoriz" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="movedVert" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="speedExceeds" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>

           <!-- this type needs to hold an XPath statement -->
           <xs:element name="valueChanges" type="xs:string"
                          minOccurs="0" maxOccurs="unbounded"/>

           <xs:element name="enterOrExit" type="gml:FeaturePropertyType"



Mahy & Rosen               Expires May 7, 2009                 [Page 10]

Internet-Draft           Location Event Filters            November 2008


                          minOccurs="0" maxOccurs="unbounded"/>
           <xs:element name="minRate" type="xs:rate-spec"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="maxRate" type="xs:rate-spec"
                          minOccurs="0" maxOccurs="1"/>
           <xs:any namespace="##other" processContents="lax"
              minOccurs="0"  maxOccurs="unbounded"/>
         </xs:sequence>
       </xs:complexType>
     </xs:element>
     <xs:element name="rate-spec">
       <xs:complexType>
         <xs:sequence>
           <xs:attribute name="uom" use="required">
             <xs:simpleType>
               <xs:restriction base="xs:token">
                 <xs:enumeration value="seconds"></xs:enumeration>
                 <xs:enumeration value="minutes"></xs:enumeration>
                 <xs:enumeration value="hours"></xs:enumeration>
                 <xs:enumeration value="days"></xs:enumeration>
                 <xs:enumeration value="weeks"></xs:enumeration>
                 <xs:enumeration value="years"></xs:enumeration>
               </xs:restriction>
             </xs:simpleType>
           </xs:attribute>
         </xs:sequence>
       </xs:complexType>
     </xs:element>
   </xs:schema>



   <?xml version="1.0" encoding="UTF-8"?>
   <xs:schema
     targetNamespace="urn:ietf:params:xml:ns:location-filter"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns:gml="http://www.opengis.net/gml">

     <xs:element name="location-filter">
       <xs:complexType>
         <xs:sequence>
           <xs:element name="movedHoriz" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="movedVert" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="speedExceeds" type="gml:MeasureType"
                          minOccurs="0" maxOccurs="1"/>




Mahy & Rosen               Expires May 7, 2009                 [Page 11]

Internet-Draft           Location Event Filters            November 2008


           <!-- this type needs to hold an XPath statement -->
           <xs:element name="valueChanges" type="xs:string"
                          minOccurs="0" maxOccurs="unbounded"/>

           <xs:element name="enterOrExit" type="gml:FeaturePropertyType"
                          minOccurs="0" maxOccurs="unbounded"/>
           <xs:element name="minRate" type="xs:rate-spec"
                          minOccurs="0" maxOccurs="1"/>
           <xs:element name="maxRate" type="xs:rate-spec"
                          minOccurs="0" maxOccurs="1"/>
           <xs:any namespace="##other" processContents="lax"
              minOccurs="0"  maxOccurs="unbounded"/>
         </xs:sequence>
       </xs:complexType>
     </xs:element>
     <xs:element name="rate-spec">
       <xs:complexType>
         <xs:sequence>
           <xs:attribute name="uom" use="required">
             <xs:simpleType>
               <xs:restriction base="xs:token">
                 <xs:enumeration value="seconds"></xs:enumeration>
                 <xs:enumeration value="minutes"></xs:enumeration>
                 <xs:enumeration value="hours"></xs:enumeration>
                 <xs:enumeration value="days"></xs:enumeration>
                 <xs:enumeration value="weeks"></xs:enumeration>
                 <xs:enumeration value="years"></xs:enumeration>
               </xs:restriction>
             </xs:simpleType>
           </xs:attribute>
         </xs:sequence>
       </xs:complexType>
     </xs:element>
   </xs:schema>



4.  Containment schema

   This section describes a schema for describing the resource's
   location relative to a region or list of regions which might contain
   the resource.  (These regions can be defined dynamically in an
   "enterOrExit" element in a subscription filter, or defined on the
   notifier using some out-of-band mechanism.)  The "pidfResource"
   element is placed inside the location-info element in a PIDF-LO
   document.  The pidfResource element can contain zero or more
   "containment" elements.  Each containment element has a GML Feature
   sub-element (of type "FeaturePropertyType") and a mandatory attribute



Mahy & Rosen               Expires May 7, 2009                 [Page 12]

Internet-Draft           Location Event Filters            November 2008


   which specifies if the PIDF resource is inside or outside of the
   feature, or if the position of the resource with respect to the
   region or region list is undefined.
      In a future version of this specification, the GML Feature can
      become a reference to a more preferable name or identifier type.
      The GML Feature type is only used because it includes a name to
      reference it.

   If the subscriber is not authorized to know the relative position,
   the notifier MUST NOT reveal this private information.  The
   RECOMMENDED way to prevent the subscriber from seeing private
   location data of this type is to return a containment element whose
   position attribute is "undefined".  Note that in some cases, the
   containment information may be more interesting than the actual raw
   location.  It is not necessary to convey a concrete civic or geo
   location in a PIDF-LO if the subscriber is only interested in or
   authorized to see the containment status.


































Mahy & Rosen               Expires May 7, 2009                 [Page 13]

Internet-Draft           Location Event Filters            November 2008


   <?xml version="1.0" encoding="UTF-8"?>
   <xs:schema
   targetNamespace="urn:ietf:params:xml:ns:pidf:geopriv10:containment"
       xmlns:xs="http://www.w3.org/2001/XMLSchema"
       xmlns:gml="http://www.opengis.net/gml"
   xmlns:pr="urn:ietf:params:xml:ns:pidf:geopriv10:containment" >
     <xs:element name="pidfResource">
       <xs:complexType>
           <xs:sequence>
               <xs:element ref="pr:containment"
                minOccurs="0" maxOccurs="unbounded"/>
           </xs:sequence>
       </xs:complexType>
     </xs:element>
     <xs:element name="containment">
       <xs:complexType>
           <xs:sequence>
             <xs:any namespace="http://www.opengis.net/gml"
                   minOccurs="1" maxOccurs="1"/>
           </xs:sequence>
         <xs:attribute name="position" use="required">
            <xs:simpleType>
           <xs:restriction base="xs:string">
               <xs:enumeration value="inside"></xs:enumeration>
               <xs:enumeration value="outside"></xs:enumeration>
               <xs:enumeration value="undefined"></xs:enumeration>
             </xs:restriction>
           </xs:simpleType>
         </xs:attribute>
       </xs:complexType>
     </xs:element>
   </xs:schema>

   Below is an example PIDF-LO document which indicates that the
   resource is inside building 10, not outside the parking garage, and
   not permitted to know if the resource is in a conference room.  Note
   that in GML, these features could be referenced by their unique
   identifiers instead.













Mahy & Rosen               Expires May 7, 2009                 [Page 14]

Internet-Draft           Location Event Filters            November 2008


   <?xml version="1.0" encoding="UTF-8"?>
     <presence xmlns="urn:ietf:params:xml:ns:pidf"
        xmlns:gp="urn:ietf:params:xml:ns:pidf:geopriv10"
        xmlns:pr="urn:ietf:params:xml:ns:pidf:geopriv10:containment"
        entity="pres:geotarget@example.com">
      <tuple id="sg89ae">
       <status>
        <gp:geopriv>
          <gp:location-info>
            <pr:pidfResource>
              <pr:containment position="inside">
               <my:Building>
                  <gml:name>Building 10</gml:name>
                </my:Building>
              </pr:containment>
              <pr:containment position="outside">
                <my:ParkingGarage
   xlink:href="http://server.example.com/loc-defs/bldg-mgr/parking"/>
              </pr:containment>
              <pr:containment position="undefined">
                <my:ConferenceRooms
   xlink:href="http://server.example.com/loc-defs/userdef/confrooms"/>
              </pr:containment>
            </pr:pidfResource>
          </gp:location-info>
          <gp:usage-rules>
            <gp:retransmission-allowed>yes</gp:retransmission-allowed>
            <gp:retention-expiry>2003-06-23T04:57:29Z
            </gp:retention-expiry>
           </gp:usage-rules>
        </gp:geopriv>
       </status>
       <timestamp>2003-06-22T20:57:29Z</timestamp>
      </tuple>
     </presence>


5.  Security Considerations

   Location information is typically very privacy sensitive.  As such,
   GEOPRIV requires that notifications MUST be encrypted and integrity
   protected.

   Additional privacy and security considerations are discussed in
   detail in [I-D.ietf-geopriv-pdif-lo-profile].






Mahy & Rosen               Expires May 7, 2009                 [Page 15]

Internet-Draft           Location Event Filters            November 2008


6.  IANA Considerations

6.1.  MIME Registration for application/location-delta-filter+xml

         MIME media type name: application

         MIME subtype name: application/location-delta-filter+xml

         Required parameters: none.

         Optional parameters: none.

         Encoding considerations:   Same as for XML.

         Security considerations: See the "Security Considerations"
           section in this document.

         Interoperability considerations: none

         Published specification: This document.

   Applications which use this media: The application/
   location-delta-filter+xml application subtype supports the exchange
   of filters to throttle asynchronous notifications of location
   information.

         Additional information:

              1. Magic number(s): N/A

              2. File extension(s): N/A

              3. Macintosh file type code: N/A

6.2.  URN Sub-Namespace Registration for
      urn:ietf:params:xml:ns:location-filter

   This section registers a new XML namespace, as per the guidelines in
   [RFC3688].

   URI:  The URI for this namespace is
      urn:ietf:params:xml:ns:location-filter.
   Registrant Contact:  IETF, GEOPRIV working group, <geopriv@ietf.org>,
      as delegated by the IESG <iesg@ietf.org>.







Mahy & Rosen               Expires May 7, 2009                 [Page 16]

Internet-Draft           Location Event Filters            November 2008


   XML:


   BEGIN
   <?xml version="1.0"?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
             "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml">
   <head>
     <meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/>
     <title>Location Filter Namespace</title>
   </head>
   <body>
     <h1>Namespace for PIDF-LO Location Filters</h1>
     <h2>urn:ietf:params:xml:ns:location-filter</h2>
     <p>See <a href="[[[URL of published RFC]]]">RFCXXXX</a>.</p>
   </body>
   </html>
   END


6.3.  Schema Registration For location-filter

   This specification registers a schema, as per the guidelines in
   [RFC3688].

      URI: please assign.
      Registrant Contact: IETF, GEOPRIV Working Group
      (geopriv@ietf.org), as delegated by the IESG (iesg@ietf.org).
      XML: The XML can be found as the sole content of Section 3.5.

6.4.  URN Sub-Namespace Registration for
      urn:ietf:params:xml:ns:pidf:geopriv10:containment

   This section registers a new XML namespace, as per the guidelines in
   [RFC3688].

   URI:  The URI for this namespace is
      urn:ietf:params:xml:ns:pidf:geopriv10:containment.
   Registrant Contact:  IETF, GEOPRIV working group, <geopriv@ietf.org>,
      as delegated by the IESG <iesg@ietf.org>.
   XML:








Mahy & Rosen               Expires May 7, 2009                 [Page 17]

Internet-Draft           Location Event Filters            November 2008


   BEGIN
   <?xml version="1.0"?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
             "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml">
   <head>
     <meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/>
     <title>PIDF-LO Location Containment Namespace</title>
   </head>
   <body>
     <h1>Namespace for PIDF-LO location containment elements</h1>
     <h2>urn:ietf:params:xml:ns:pidf:geopriv10:containment</h2>
     <p>See <a href="[[[URL of published RFC]]]">RFCXXXX</a>.</p>
   </body>
   </html>
   END

6.5.  Schema Registration For containment

   This specification registers a schema, as per the guidelines in
   [RFC3688].

      URI: please assign.
      Registrant Contact: IETF, GEOPRIV Working Group
      (geopriv@ietf.org), as delegated by the IESG (iesg@ietf.org).
      XML: The XML can be found as the sole content of Section 4.


7.  Acknowledgments

   Thanks to Allan Thompson, James Winterbottom, and Martin Thomson for
   their comments.


8.  References

8.1.  Normative References

   [GML]      OpenGIS, "Open Geography Markup Language (GML)
              Implementation Specification", OpenGIS OGC 02-023r4,
              January 2003,
              <http://www.opengis.org/techno/implementation.htm>.

   [I-D.ietf-geopriv-pdif-lo-profile]
              Winterbottom, J., Thomson, M., and H. Tschofenig, "GEOPRIV
              PIDF-LO Usage Clarification, Considerations and
              Recommendations", draft-ietf-geopriv-pdif-lo-profile-13



Mahy & Rosen               Expires May 7, 2009                 [Page 18]

Internet-Draft           Location Event Filters            November 2008


              (work in progress), September 2008.

   [I-D.niemi-sipping-event-throttle]
              Niemi, A., Kiss, K., and S. Loreto, "Session Initiation
              Protocol (SIP) Event Notification Extension for
              Notification Throttling",
              draft-niemi-sipping-event-throttle-07 (work in progress),
              October 2008.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC4119]  Peterson, J., "A Presence-based GEOPRIV Location Object
              Format", RFC 4119, December 2005.

   [W3C.REC-xml]
              Bray, T., Paoli, J., Sperberg-McQueen, C., and E. Maler,
              "Extensible Markup Language (XML) 1.0 (2nd ed)", W3C REC-
              xml, October 2000, <http://www.w3.org/TR/REC-xml>.

   [W3C.REC-xml-names]
              Bray, T., Hollander, D., and A. Layman, "Namespaces in
              XML", W3C REC-xml-names, January 1999,
              <http://www.w3.org/TR/REC-xml-names>.

   [W3C.REC-xmlschema-1]
              Thompson, H., Beech, D., Maloney, M., and N. Mendelsohn,
              "XML Schema Part 1: Structures", W3C REC-xmlschema-1,
              May 2001, <http://www.w3.org/TR/xmlschema-1/>.

   [W3C.xpath]
              Clark, J. and S. DeRose, "XML Path Language (XPath)
              Version 1.0", W3C Recommendation xpath, November 1999,
              <http://www.w3.org/TR/xpath>.

8.2.  Informational References

   [RFC2141]  Moats, R., "URN Syntax", RFC 2141, May 1997.

   [RFC2648]  Moats, R., "A URN Namespace for IETF Documents", RFC 2648,
              August 1999.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              January 2004.







Mahy & Rosen               Expires May 7, 2009                 [Page 19]

Internet-Draft           Location Event Filters            November 2008


Authors' Addresses

   Rohan Mahy
   Plantronics
   345 Encincal Street
   Santa Cruz, CA
   USA

   Email: rohan@ekabal.com


   Brian Rosen
   NeuStar
   470 Conrad Dr.
   Mars, PA  16046
   US

   Phone: +1 724 382 1051
   Email: br@brianrosen.net
































Mahy & Rosen               Expires May 7, 2009                 [Page 20]

Internet-Draft           Location Event Filters            November 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.











Mahy & Rosen               Expires May 7, 2009                 [Page 21]


