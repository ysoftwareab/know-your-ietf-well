<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Network Configuration Protocol (NETCONF)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Network Configuration Protocol (NETCONF)">
<meta name="keywords" content="XML, Configuration, Network Management, Extensible Markup Language">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">R. Enns, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Juniper Networks</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">M. Bjorklund, Ed.</td></tr>
<tr><td class="header">Expires: February 24, 2011</td><td class="header">Tail-f Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Schoenwaelder, Ed.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Jacobs University</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Bierman, Ed.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Brocade</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">August 23, 2010</td></tr>
</table></td></tr></table>
<h1><br />Network Configuration Protocol (NETCONF)<br />draft-ietf-netconf-4741bis-04</h1>

<h3>Abstract</h3>

<p>
The Network Configuration Protocol (NETCONF) defined in this document
provides mechanisms to install, manipulate, and delete the
configuration of network devices. It uses an Extensible Markup
Language (XML)-based data encoding for the configuration data as well
as the protocol messages. The NETCONF protocol operations are realized
as Remote Procedure Calls (RPC).
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on February 24, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Terminology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Protocol Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.3.</a>&nbsp;
Capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#state">1.4.</a>&nbsp;
Separation of Configuration and State Data<br />
<a href="#transportRequirements">2.</a>&nbsp;
Transport Protocol Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.1.</a>&nbsp;
Connection-Oriented Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.2.</a>&nbsp;
Authentication, Integrity, and Confidentiality<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.3.</a>&nbsp;
Authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.4.</a>&nbsp;
Mandatory Transport Protocol<br />
<a href="#xmlConsiderations">3.</a>&nbsp;
XML Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#namespace">3.1.</a>&nbsp;
Namespace<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nodtd">3.2.</a>&nbsp;
No Document Type Declarations<br />
<a href="#rpcModel">4.</a>&nbsp;
RPC Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.1.</a>&nbsp;
&lt;rpc&gt; Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.2.</a>&nbsp;
&lt;rpc&#8209;reply&gt; Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rpcError">4.3.</a>&nbsp;
&lt;rpc&#8209;error&gt; Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ok">4.4.</a>&nbsp;
&lt;ok&gt; Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.5.</a>&nbsp;
Pipelining<br />
<a href="#anchor12">5.</a>&nbsp;
Configuration Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.1.</a>&nbsp;
Configuration Datastores<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.2.</a>&nbsp;
Data Modeling<br />
<a href="#subtree">6.</a>&nbsp;
Subtree Filtering<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">6.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">6.2.</a>&nbsp;
Subtree Filter Components<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#NamespaceSelection">6.2.1.</a>&nbsp;
Namespace Selection<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#attribute-match">6.2.2.</a>&nbsp;
Attribute Match Expressions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#containment-nodes">6.2.3.</a>&nbsp;
Containment Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">6.2.4.</a>&nbsp;
Selection Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">6.2.5.</a>&nbsp;
Content Match Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">6.3.</a>&nbsp;
Subtree Filter Processing<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">6.4.</a>&nbsp;
Subtree Filtering Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">6.4.1.</a>&nbsp;
No Filter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">6.4.2.</a>&nbsp;
Empty Filter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">6.4.3.</a>&nbsp;
Select the Entire &lt;users&gt; Subtree<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">6.4.4.</a>&nbsp;
Select All &lt;name&gt; Elements within the &lt;users&gt; Subtree<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">6.4.5.</a>&nbsp;
One Specific &lt;user&gt; Entry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">6.4.6.</a>&nbsp;
Specific Elements from a Specific &lt;user&gt; Entry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">6.4.7.</a>&nbsp;
Multiple Subtrees<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">6.4.8.</a>&nbsp;
Elements with Attribute Naming<br />
<a href="#protocolOperations">7.</a>&nbsp;
Protocol Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get-config">7.1.</a>&nbsp;
&lt;get&#8209;config&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">7.2.</a>&nbsp;
&lt;edit&#8209;config&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor30">7.3.</a>&nbsp;
&lt;copy&#8209;config&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">7.4.</a>&nbsp;
&lt;delete&#8209;config&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#lock">7.5.</a>&nbsp;
&lt;lock&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor32">7.6.</a>&nbsp;
&lt;unlock&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor33">7.7.</a>&nbsp;
&lt;get&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor34">7.8.</a>&nbsp;
&lt;close-session&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor35">7.9.</a>&nbsp;
&lt;kill-session&gt;<br />
<a href="#capabilities">8.</a>&nbsp;
Capabilities<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#capabilityExchange">8.1.</a>&nbsp;
Capabilities Exchange<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor36">8.2.</a>&nbsp;
Writable-Running Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor37">8.2.1.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor38">8.2.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor39">8.2.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor40">8.2.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor41">8.2.5.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#candidate">8.3.</a>&nbsp;
Candidate Configuration Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor44">8.3.1.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor45">8.3.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor46">8.3.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor47">8.3.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor49">8.3.5.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#confirmed">8.4.</a>&nbsp;
Confirmed Commit Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor52">8.4.1.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor53">8.4.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor54">8.4.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor55">8.4.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor57">8.4.5.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rollback-on-error">8.5.</a>&nbsp;
Rollback on Error Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor59">8.5.1.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor60">8.5.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor61">8.5.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor62">8.5.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor63">8.5.5.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#validate">8.6.</a>&nbsp;
Validate Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor65">8.6.1.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor66">8.6.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor67">8.6.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor68">8.6.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor70">8.6.5.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#startup">8.7.</a>&nbsp;
Distinct Startup Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor72">8.7.1.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor73">8.7.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor74">8.7.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor75">8.7.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor76">8.7.5.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#url">8.8.</a>&nbsp;
URL Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor78">8.8.1.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor79">8.8.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor80">8.8.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor81">8.8.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor82">8.8.5.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#xpath">8.9.</a>&nbsp;
XPath Capability<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor87">8.9.1.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor88">8.9.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor89">8.9.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor90">8.9.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor91">8.9.5.</a>&nbsp;
Modifications to Existing Operations<br />
<a href="#security">9.</a>&nbsp;
Security Considerations<br />
<a href="#anchor93">10.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor94">10.1.</a>&nbsp;
NETCONF XML Namespace<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor95">10.2.</a>&nbsp;
NETCONF XML Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor96">10.3.</a>&nbsp;
NETCONF YANG Module<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor97">10.4.</a>&nbsp;
NETCONF Capability URNs<br />
<a href="#anchor98">11.</a>&nbsp;
Authors and Acknowledgements<br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Informative References<br />
<a href="#errorList">Appendix&nbsp;A.</a>&nbsp;
NETCONF Error List<br />
<a href="#xsdschema">Appendix&nbsp;B.</a>&nbsp;
XML Schema for NETCONF Messages Layer<br />
<a href="#yangmodule">Appendix&nbsp;C.</a>&nbsp;
YANG Module for NETCONF Protocol Operations<br />
<a href="#capabilityTemplate">Appendix&nbsp;D.</a>&nbsp;
Capability Template<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor101">D.1.</a>&nbsp;
capability-name (template)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor102">D.1.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor103">D.1.2.</a>&nbsp;
Dependencies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor104">D.1.3.</a>&nbsp;
Capability Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor105">D.1.4.</a>&nbsp;
New Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor107">D.1.5.</a>&nbsp;
Modifications to Existing Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor109">D.1.6.</a>&nbsp;
Interactions with Other Capabilities<br />
<a href="#multidev">Appendix&nbsp;E.</a>&nbsp;
Configuring Multiple Devices with NETCONF<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor110">E.1.</a>&nbsp;
Operations on Individual Devices<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor111">E.1.1.</a>&nbsp;
Acquiring the Configuration Lock<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor112">E.1.2.</a>&nbsp;
Checkpointing the Running Configuration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor113">E.1.3.</a>&nbsp;
Loading and Validating the Incoming Configuration.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor114">E.1.4.</a>&nbsp;
Changing the Running Configuration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor115">E.1.5.</a>&nbsp;
Testing the New Configuration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor116">E.1.6.</a>&nbsp;
Making the Change Permanent<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor117">E.1.7.</a>&nbsp;
Releasing the Configuration Lock<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor118">E.2.</a>&nbsp;
Operations on Multiple Devices<br />
<a href="#anchor119">Appendix&nbsp;F.</a>&nbsp;
Changes from RFC 4741<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The NETCONF protocol defines a simple mechanism through
which a network device can be managed, configuration data
information can be retrieved, and new configuration data can be
uploaded and manipulated. The protocol allows the device to expose a
full, formal application programming interface (API). Applications
can use this straightforward API to send and receive full and partial
configuration data sets.
        
</p>
<p>
The NETCONF protocol uses a remote procedure call (RPC) paradigm.
A client encodes an RPC in XML
<a class='info' href='#W3C.REC-xml-20001006'>[1]<span> (</span><span class='info'>Sperberg-McQueen, C., Bray, T., Paoli, J., and E. Maler, &ldquo;Extensible Markup Language (XML) 1.0 (Second Edition),&rdquo; October&nbsp;2000.</span><span>)</span></a> and
sends it to a server using a secure, connection-oriented
session. The server responds with a reply encoded in XML. The contents
of both the request and the response are fully described in XML DTDs
or XML schemas, or both, allowing both parties to recognize the
syntax constraints imposed on the exchange.
        
</p>
<p>
A key aspect of NETCONF is that it allows the functionality of the
management protocol to closely mirror the native functionality of
the device.  This reduces implementation costs
and allows timely access to new features.  In addition, applications
can access both the syntactic and semantic content of
the device's native user interface.
        
</p>
<p>
NETCONF allows a client to discover the set of protocol
extensions supported by a server. These "capabilities" permit the
client to adjust its behavior to take advantage of the features
exposed by the device. The capability definitions can be easily
extended in a noncentralized manner. Standard and non-standard
capabilities can be defined with semantic and syntactic rigor.
Capabilities are discussed in <a class='info' href='#capabilities'>Section&nbsp;8<span> (</span><span class='info'>Capabilities</span><span>)</span></a>.
        
</p>
<p>
The NETCONF protocol is a building block in a system of automated
configuration. XML is the lingua franca of interchange, providing a
flexible but fully specified encoding mechanism for hierarchical
content. NETCONF can be used in concert with XML-based transformation
technologies, such as XSLT <a class='info' href='#W3C.REC-xslt-19991116'>[11]<span> (</span><span class='info'>Clark, J., &ldquo;XSL Transformations (XSLT) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a>,
to provide a system for automated generation of
full and partial configurations.
The system can query one or more databases for data about networking
topologies, links, policies, customers, and services.  This data can
be transformed using one or more XSLT
scripts from a task-oriented,
vendor-independent data schema into a form that
is specific to the vendor, product, operating system, and software
release. The resulting data can be passed to the device using the
NETCONF protocol.
      
</p>
<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and
"OPTIONAL" in this document are to be interpreted as described in
<a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [3].
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Terminology</h3>

<p>
          </p>
<ul class="text">
<li>
              candidate configuration datastore: A configuration
              datastore that can be manipulated without impacting the
              device's current configuration and that can be committed
              to the running configuration datastore. Not all devices
              may support a candidate configuration datastore.
            
</li>
<li>
              capability: A functionality that supplements the base
              NETCONF specification.
            
</li>
<li>
              client: A client invokes protocol operations on a
              server. In addition, a client may subscribe to receive
              notifications from a server.
            
</li>
<li>
              configuration data: Configuration data is the set of
              writable data that is required to transform a system
              from its initial default state into its current state.
            
</li>
<li>
              datastore: A conceptual place to store and access
              information. A datastore might be implemented, for
              example, using files, a database, flash memory locations
              or combinations thereof.
            
</li>
<li>
              configuration datastore: A configuration datastore is
              defined as the datastore holding the complete set of
              configuration data that is required to get a device from
              its initial default state into a desired operational
              state.
            
</li>
<li>
              message: A protocol element sent over a session.
              Messages are well-formed XML documents.
            
</li>
<li>
              notification: A server initiated message indicating that
              a certain event has been recognized by the server.
            
</li>
<li>
              protocol operation: A specific remote procedure call, as
              used within the NETCONF protocol.
            
</li>
<li>
              remote procedure call: A remote procedure call (RPC),
              realized by exchanging &lt;rpc&gt; and &lt;rpc-reply&gt;
              messages.
            
</li>
<li>
              running configuration datastore: A configuration
              datastore holding the complete configuration currently
              active on the device. The running configuration
              datastore always exists.
            
</li>
<li>
              server: A server executes protocol operations invoked by
              a client. In addition, a server may send notifications
              to a client.
            
</li>
<li>
              session: Client and server exchange messages using a
              secure, connection-oriented session.
            
</li>
<li>
              startup configuration datastore: The configuration
              datastore holding the configuration loaded by the device
              when it boots. Only present on devices that separate the
              startup configuration datastore from the running
              configuration datastore.
            
</li>
<li>
              state data: State data is the additional data on a
              system that is not configuration data such as read-only
              status information and collected statistics.
            
</li>
<li>
              user: The authenticated identity of the client. The
              authenticated identity of a client is commonly referred
              to as the NETCONF username.
            
</li>
</ul><p>
        
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Protocol Overview</h3>

<p>
NETCONF uses a simple RPC-based mechanism to facilitate communication
between a client and a server.  The client can be a script or
application typically running as part of a network manager.  The
server is typically
a network device. The terms "device" and "server" are used
interchangeably in this document, as are "client" and "application".
        
</p>
<p>
A NETCONF session is the logical connection between a network administrator or
network configuration application and a network device.
A device MUST support at least one NETCONF session and
SHOULD support multiple sessions.
Global configuration attributes can be changed 
during any authorized session, and the effects are visible in all sessions.
Session-specific attributes affect only the session in which
they are changed.
        
</p>
<p>
					NETCONF can be conceptually partitioned into four layers as
					shown in <a class='info' href='#layers'>Figure&nbsp;1<span> (</span><span class='info'>NETCONF Protocol Layers</span><span>)</span></a>.
				
</p><br /><hr class="insert" />
<a name="layers"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
         Layer                 Example
    +-------------+      +-----------------+      +----------------+
(4) |   Content   |      |  Configuration  |      |  Notification  |
    |             |      |      data       |      |      data      |
    +-------------+      +-----------------+      +----------------+
           |                       |                      |
    +-------------+      +-----------------+              |
(3) | Operations  |      |  &lt;edit-config&gt;  |              |
    |             |      |                 |              |
    +-------------+      +-----------------+              |
           |                       |                      |
    +-------------+      +-----------------+      +----------------+
(2) |  Messages   |      |     &lt;rpc&gt;,      |      | &lt;notification&gt; |
    |             |      |   &lt;rpc-reply&gt;   |      |                |
    +-------------+      +-----------------+      +----------------+
           |                       |                      |
    +-------------+      +-----------------------------------------+
(1) |   Secure    |      |  SSH, TLS, BEEP/TLS, SOAP/HTTP/TLS, ... |
    | Transports  |      |                                         |
    +-------------+      +-----------------------------------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: NETCONF Protocol Layers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
          </p>
<ol class="text">
<li>
              The Secure Transport layer provides a communication path
              between the client and server.  NETCONF can be layered
              over any transport protocol that provides a set of basic
              requirements.  <a class='info' href='#transportRequirements'>Section&nbsp;2<span> (</span><span class='info'>Transport Protocol Requirements</span><span>)</span></a>
              discusses these requirements.
            
</li>
<li>
              The Messages layer provides a simple,
              transport-independent framing mechanism for encoding
              RPCs and notifications. <a class='info' href='#rpcModel'>Section&nbsp;4<span> (</span><span class='info'>RPC Model</span><span>)</span></a>
              documents the RPC messages, and <a class='info' href='#RFC5717'>[8]<span> (</span><span class='info'>Lengyel, B. and M. Bjorklund, &ldquo;Partial Lock Remote Procedure Call (RPC) for NETCONF,&rdquo; December&nbsp;2009.</span><span>)</span></a>
              documents notifications.
            
</li>
<li>
              The Operations layer defines a set of base protocol
              operations invoked as RPC methods with XML-encoded
              parameters. <a class='info' href='#protocolOperations'>Section&nbsp;7<span> (</span><span class='info'>Protocol Operations</span><span>)</span></a> details
              the list of base protocol operations.
            
</li>
<li>
              The Content layer is outside the scope of this
              document. It is expected that separate efforts to
              standardize NETCONF data models will be undertaken.
            
</li>
</ol><p>
        
</p>
<p>
          The YANG data modeling language
          <a class='info' href='#I-D.ietf-netmod-yang'>[9]<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for the Network Configuration Protocol (NETCONF),&rdquo; June&nbsp;2010.</span><span>)</span></a> has been developed for
          specifying NETCONF data models and protocol operations,
          covering the Operations and the Content layers of
          <a class='info' href='#layers'>Figure&nbsp;1<span> (</span><span class='info'>NETCONF Protocol Layers</span><span>)</span></a>.
        
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Capabilities</h3>

<p>
            A NETCONF capability is a set of functionality that supplements
            the base NETCONF specification. The capability is
            identified by a uniform resource identifier (URI).
            These URIs should follow the guidelines as
            described in <a class='info' href='#capabilities'>Section&nbsp;8<span> (</span><span class='info'>Capabilities</span><span>)</span></a>. 
          
</p>
<p>
Capabilities augment the base operations of the device, describing
both additional operations and the content allowed inside operations.
The client can discover the server's capabilities and use any
additional operations, parameters, and content defined by those
capabilities.
          
</p>
<p>
The capability definition may name one or more dependent capabilities.
To support a capability, the server
MUST support any capabilities upon which it depends.
          
</p>
<p>
<a class='info' href='#capabilities'>Section&nbsp;8<span> (</span><span class='info'>Capabilities</span><span>)</span></a> defines the capabilities exchange that allows
the client to discover the server's capabilities.
<a class='info' href='#capabilities'>Section&nbsp;8<span> (</span><span class='info'>Capabilities</span><span>)</span></a> also lists
the set of capabilities defined in this document.
          
</p>
<p>
Additional capabilities can be defined at any time in external
documents, allowing the set of capabilities to expand over
time. Standards bodies may define standardized capabilities, and
implementations
may define proprietary ones. A capability URI MUST sufficiently
distinguish the naming authority to avoid naming collisions.
          
</p>
<a name="state"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
Separation of Configuration and State Data</h3>

<p>
          The information that can be retrieved from a running system is
          separated into two classes, configuration data and state
          data. Configuration data is the set of writable data that is required
          to transform a system from its initial default state into its current
          state. State data is the additional data on a system that is not
          configuration data such as read-only status information and collected
          statistics. When a device is performing configuration operations, a
          number of problems would arise if state data were
          included:
          </p>
<ul class="text">
<li>Comparisons of configuration data sets would be dominated by irrelevant
              entries such as different statistics.
</li>
<li>Incoming data could contain nonsensical
            requests, such as attempts to write read-only data.
</li>
<li>The data sets would be large.
</li>
<li>Archived data could contain values for read-only data
              items, complicating the processing required to restore
              archived data.
            
</li>
</ul><p>
        
</p>
<p>
          To account for these issues, the NETCONF protocol recognizes the difference
          between configuration data and state data and provides
          operations for
          each. The &lt;get&#8209;config&gt; operation
          retrieves configuration data only, while the &lt;get&gt; operation
          retrieves configuration and state data.
        
</p>
<p>
          Note that the NETCONF protocol is focused on the information
          required to get the device into its desired running state.
          The inclusion of other important, persistent data is
          implementation specific.  For example, user files and
          databases are not treated as configuration data by the NETCONF
          protocol. 
        
</p>
<p>
          For example, if a local database of user authentication 
          data is stored on the device, it is an
          implementation-dependent matter
          whether it is included in configuration data.
        
</p>
<a name="transportRequirements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Transport Protocol Requirements</h3>

<p>NETCONF uses an RPC-based communication paradigm. A client
        sends a series of one or more RPC request messages, which
        cause the server to respond with a corresponding series of
        RPC reply messages.
      
</p>
<p>The NETCONF protocol can be layered on any transport protocol that
        provides the required set of functionality. It is not bound to
        any particular transport protocol, but allows a mapping to define how it
        can be implemented over any specific protocol.
      
</p>
<p>
        The transport protocol MUST provide a mechanism to indicate the
        session type (client or server) to the NETCONF protocol layer.
      
</p>
<p>
        This section details the characteristics that NETCONF requires
        from the underlying transport protocol.
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Connection-Oriented Operation</h3>

<p>NETCONF is connection-oriented, requiring a persistent
          connection between peers. This connection must provide
          reliable, sequenced data delivery.
        
</p>
<p>NETCONF connections are long-lived, persisting between
          protocol operations. This allows the client to make changes to the state of
          the connection that will persist for the lifetime of the
          connection.  For example, authentication information
          specified for a connection remains in effect until the
          connection is closed.
        
</p>
<p> In addition, resources requested from the server for a
          particular connection MUST be automatically released when the
          connection closes, making failure recovery simpler and more
          robust. For example, when a lock is acquired by a client, the
          lock persists until either it is explicitly released or the server
          determines that the connection has been terminated. If a
          connection is terminated while the client holds a lock, the
          server can perform any appropriate recovery.
          The lock operation is further discussed in <a class='info' href='#lock'>Section&nbsp;7.5<span> (</span><span class='info'>&lt;lock&gt;</span><span>)</span></a>.
        
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Authentication, Integrity, and Confidentiality</h3>

<p>
					NETCONF connections must provide authentication, data
					integrity, confidentiality, and replay protection. NETCONF
					depends on the transport protocol for this capability. A
					NETCONF peer assumes that appropriate levels of security and
					confidentiality are provided independently of this
					document. For example, connections may be encrypted in TLS
					<a class='info' href='#RFC4346'>[15]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.1,&rdquo; April&nbsp;2006.</span><span>)</span></a> or SSH <a class='info' href='#RFC4251'>[14]<span> (</span><span class='info'>Ylonen, T. and C. Lonvick, &ldquo;The Secure Shell (SSH) Protocol Architecture,&rdquo; January&nbsp;2006.</span><span>)</span></a>,
					depending on the underlying protocol.
        
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Authentication</h3>

<p>
					NETCONF connections must be authenticated. The transport
					protocol is responsible for authentication of the server to
					the client and authentication of the client to the server. A
					NETCONF peer assumes that the connection's authentication
					information has been validated by the underlying transport
					protocol using sufficiently trustworthy mechanisms and that
					the peer's identity has been sufficiently proven.
        
</p>
<p>
					One goal of NETCONF is to provide a programmatic interface
					to the device that closely follows the functionality of the
					device's native interface. Therefore, it is expected that
					the underlying protocol uses existing authentication
					mechanisms available on the device. For example, a NETCONF
					server on a device that supports RADIUS
					<a class='info' href='#RFC2865'>[12]<span> (</span><span class='info'>Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;Remote Authentication Dial In User Service (RADIUS),&rdquo; June&nbsp;2000.</span><span>)</span></a> should allow the use of RADIUS to
					authenticate NETCONF sessions.
        
</p>
<p>
					The authentication process MUST result in an authenticated
					client identity whose permissions are known to the server.
					The authenticated identity of a client is commonly referred
					to as the NETCONF username. The algorithm used to derive the
					username is transport protocol specific and in addition
					specific to the authentication mechanism used by the
					transport protocol. NETCONF transport protocols therefore
					MUST explain how a NETCONF username is derived from the
					authentication mechanisms supported by the transport
					protocol.
				
</p>
<p>
					The access permissions of a given client, identified by its
					NETCONF username, are part of the configuration of the
					NETCONF server. These permissions MUST be enforced during
					the remainder of the NETCONF session. The details how access
					control is configured is outside the scope of this document.
        
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Mandatory Transport Protocol</h3>

<p>
					A NETCONF implementation MUST support the SSH transport
					protocol mapping <a class='info' href='#RFC4742'>[4]<span> (</span><span class='info'>Wasserman, M. and T. Goddard, &ldquo;Using the NETCONF Configuration Protocol over Secure SHell (SSH),&rdquo; December&nbsp;2006.</span><span>)</span></a>.
        
</p>
<a name="xmlConsiderations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
XML Considerations</h3>

<p>
         XML serves as the encoding format for NETCONF, allowing complex
         hierarchical data to be expressed in a text format that can be
         read, saved, and manipulated with both traditional text tools and
         tools specific to XML.
       
</p>
<p>
         All NETCONF messages MUST be well-formed XML, encoded in UTF-8.
			 
</p>
<p>
				 A NETCONF message MAY begin with an XML declaration (see
				 section 2.8 of <a class='info' href='#W3C.REC-xml-20001006'>[1]<span> (</span><span class='info'>Sperberg-McQueen, C., Bray, T., Paoli, J., and E. Maler, &ldquo;Extensible Markup Language (XML) 1.0 (Second Edition),&rdquo; October&nbsp;2000.</span><span>)</span></a>).
			 
</p>
<p>
         This section discusses a small number of XML-related considerations
         pertaining to NETCONF.
       
</p>
<a name="namespace"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Namespace</h3>

<p>
          All NETCONF protocol elements are defined in the following namespace:
          </p>
<blockquote class="text">
<p>urn:ietf:params:xml:ns:netconf:base:1.0
</p>
</blockquote><p>
        
</p>
<p>
          NETCONF capability names MUST be URIs <a class='info' href='#RFC3986'>[5]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
          NETCONF capabilities are discussed in <a class='info' href='#capabilities'>Section&nbsp;8<span> (</span><span class='info'>Capabilities</span><span>)</span></a>.
        
</p>
<a name="nodtd"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
No Document Type Declarations</h3>

<p>
          Document type declarations MUST NOT appear in
          NETCONF content.
        
</p>
<a name="rpcModel"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
RPC Model</h3>

<p>
        The NETCONF protocol uses an RPC-based communication
        model. NETCONF peers use &lt;rpc&gt; and &lt;rpc&#8209;reply&gt;
        elements to provide transport protocol-independent framing of
        NETCONF requests and responses.
      
</p>
<p>
				The syntax and XML encoding of the Messages layer RPCs are
				formally defined in the XML schema in <a class='info' href='#xsdschema'>Appendix&nbsp;B<span> (</span><span class='info'>XML Schema for NETCONF Messages Layer</span><span>)</span></a>.
			
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
&lt;rpc&gt; Element</h3>

<p>
          The &lt;rpc&gt; element is used to enclose a NETCONF request sent from
          the client to the server.
        
</p>
<p>
The &lt;rpc&gt; element has a mandatory attribute
"message-id", which is an arbitrary string chosen by the sender
of the RPC that will commonly encode a monotonically increasing
integer. The receiver of the RPC does not decode or interpret this
string but simply saves it to be used as a "message-id" attribute in any
resulting &lt;rpc&#8209;reply&gt; message. For example:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    &lt;rpc message-id="101"
         xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;some-method&gt;
        &lt;!-- method parameters here... --&gt;
      &lt;/some-method&gt;
    &lt;/rpc&gt;
</pre></div>
<p>
          If additional attributes are present in an &lt;rpc&gt;
          element, a NETCONF peer MUST return them unmodified in the
          &lt;rpc&#8209;reply&gt; element.  This includes any "xmlns"
          attributes.
        
</p>
<p>
The name and parameters of an RPC are encoded as the contents
of the &lt;rpc&gt; element. The name of the RPC is an element
directly inside the &lt;rpc&gt; element, and any parameters are
encoded inside this element.
        
</p>
<p>
The following example invokes a method called &lt;my&#8209;own&#8209;method&gt;,
which has two
parameters, &lt;my&#8209;first&#8209;parameter&gt;, with a value of "14", and
&lt;another&#8209;parameter&gt;, with a value of "fred":
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;my-own-method xmlns="http://example.net/me/my-own/1.0"&gt;
      &lt;my-first-parameter&gt;14&lt;/my-first-parameter&gt;
      &lt;another-parameter&gt;fred&lt;/another-parameter&gt;
    &lt;/my-own-method&gt;
  &lt;/rpc&gt;
</pre></div>
<p>
The following example invokes a &lt;rock&#8209;the&#8209;house&gt; method with a
&lt;zip&#8209;code&gt; parameter of "27606&#8209;0100":
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;rock-the-house xmlns="http://example.net/rock/1.0"&gt;
      &lt;zip-code&gt;27606-0100&lt;/zip-code&gt;
    &lt;/rock-the-house&gt;
  &lt;/rpc&gt;
</pre></div>
<p>
The following example invokes the NETCONF &lt;get&gt;
method with no parameters:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get/&gt;
  &lt;/rpc&gt;

</pre></div>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
&lt;rpc&#8209;reply&gt; Element</h3>

<p>
The &lt;rpc&#8209;reply&gt; message is sent in response to an &lt;rpc&gt; operation.
        
</p>
<p>
The &lt;rpc&#8209;reply&gt; element has a mandatory attribute "message&#8209;id",
which is equal to the "message-id" attribute of the &lt;rpc&gt; for
which this is a response.
        
</p>
<p>
A NETCONF server MUST also return any additional attributes
included in the &lt;rpc&gt; element unmodified in the
&lt;rpc&#8209;reply&gt; element.
        
</p>
<p>
The response data is encoded as one or more child elements to the
&lt;rpc&#8209;reply&gt; element.
</p>
<p>For example:
</p>
<p>The following &lt;rpc&gt; element invokes the NETCONF &lt;get&gt;
        method and includes an additional attribute called "user-id".
        Note that the "user-id" attribute is not in the NETCONF namespace.
        The returned &lt;rpc&#8209;reply&gt; element returns the "user&#8209;id"
        attribute, as well as the requested content.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
       xmlns:ex="http://example.net/content/1.0"
       ex:user-id="fred"&gt;
    &lt;get/&gt;
  &lt;/rpc&gt;


  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
       xmlns:ex="http://example.net/content/1.0"
       ex:user-id="fred"&gt;
    &lt;data&gt;
      &lt;!-- contents here... --&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;

</pre></div>
<a name="rpcError"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
&lt;rpc&#8209;error&gt; Element</h3>

<p>
          The &lt;rpc&#8209;error&gt; element is sent in
          &lt;rpc&#8209;reply&gt; messages if an error occurs during
          the processing of an &lt;rpc&gt; request.
        
</p>
<p>
          If a server encounters multiple errors during the processing
          of an &lt;rpc&gt; request, the &lt;rpc&#8209;reply&gt; MAY
          contain multiple &lt;rpc&#8209;error&gt; elements.  However,
          a server is not required to detect or report more than one
          &lt;rpc&#8209;error&gt; element, if a request contains
          multiple errors.  A server is not required to check for
          particular error conditions in a specific sequence.  A
          server MUST return an &lt;rpc&#8209;error&gt; element if any
          error conditions occur during processing.
        
</p>
<p>
          A server MUST NOT return application-level- or data-model-specific
          error information in an &lt;rpc&#8209;error&gt; element for which the
          client does not have sufficient access rights.
	
</p>
<p>
          The &lt;rpc&#8209;error&gt; element includes the following
          information:
        
</p>
<p>
         </p>
<blockquote class="text"><dl>
<dt>error-type:</dt>
<dd>
              Defines the conceptual layer that the error occurred.
              Enumeration. One of:
              
<ul class="text">
<li>transport (layer: Secure Transport)
</li>
<li>rpc (layer: Messages)
</li>
<li>protocol (layer: Operations)
</li>
<li>application (layer: Content)
</li>
</ul>
           
</dd>
<dt>error-tag:</dt>
<dd>
              Contains a string identifying the error condition.
              See <a class='info' href='#errorList'>Appendix&nbsp;A<span> (</span><span class='info'>NETCONF Error List</span><span>)</span></a> for allowed values.
            
</dd>
<dt>error-severity:</dt>
<dd>
              Contains a string identifying the error severity, 
              as determined by the device. 
              One of:
              
<ul class="text">
<li>error
</li>
<li>warning
</li>
</ul>
              Note that there are no &lt;error-tag&gt; values
              defined in this document which utilize the
              "warning" enumeration.  This is reserved
              for future use.
            
</dd>
<dt>error-app-tag:</dt>
<dd>
              Contains a string identifying the data-model-specific
              or implementation-specific error condition, if 
              one exists.  This element will not be present if no 
              appropriate application error tag can be associated 
              with a particular error condition.  If a data-model
              specific and a implementation-specific error-app-tag
              both exist, then the data-model specific value MUST
              be used by the server.
            
</dd>
<dt>error-path:</dt>
<dd>
              Contains the absolute XPath <a class='info' href='#W3C.REC-xpath-19991116'>[2]<span> (</span><span class='info'>DeRose, S. and J. Clark, &ldquo;XML Path Language (XPath) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a> expression
              identifying the element path to the node that is
              associated with the error being reported in a particular
              rpc&#8209;error element.  This element will not be
              present if no appropriate payload element or data store
              node can be associated with a particular error
              condition.
</dd>
<dt></dt>
<dd>
								The XPath expression is interpreted in the following context:
							
<ul class="text">
<li>The set of namespace declarations are those in
								scope on the rpc&#8209;error element.
</li>
<li>The set of variable bindings is empty.
</li>
<li>The function library is the core function library.
</li>
</ul>
							The context node depends on the node associated with the
							error being reported:
							
<ul class="text">
<li>If a payload element can be associated with the
								error, the context node is the rpc request's document
								node (i.e., the "rpc" element).
</li>
<li>Otherwise, the context node is the root of all data
								models, i.e., the node which has the top-level nodes
								from all data models as children.
</li>
</ul>
            
</dd>
<dt>error-message:</dt>
<dd>
              Contains a string suitable for human display that
              describes the error condition.  This
              element will not be present if no appropriate message
              is provided for a particular error condition.
              This element SHOULD include an xml:lang attribute as
              defined in <a class='info' href='#W3C.REC-xml-20001006'>[1]<span> (</span><span class='info'>Sperberg-McQueen, C., Bray, T., Paoli, J., and E. Maler, &ldquo;Extensible Markup Language (XML) 1.0 (Second Edition),&rdquo; October&nbsp;2000.</span><span>)</span></a> and
              discussed in <a class='info' href='#RFC3470'>[13]<span> (</span><span class='info'>Hollenbeck, S., Rose, M., and L. Masinter, &ldquo;Guidelines for the Use of Extensible Markup Language (XML) withinIETFProtocols,&rdquo; January&nbsp;2003.</span><span>)</span></a>.
            
</dd>
<dt>error-info:</dt>
<dd>
              Contains protocol- or data-model-specific 
              error content.  This element will not be present if no 
              such error content is provided for a particular error condition.
              The list in <a class='info' href='#errorList'>Appendix&nbsp;A<span> (</span><span class='info'>NETCONF Error List</span><span>)</span></a> 
              defines any mandatory error&#8209;info content
              for each error.  After any protocol-mandated content,
              a data model definition may mandate that certain application-layer
              error information be included in the error&#8209;info container.
              An implementation may include additional elements
              to provide extended and/or 
              implementation-specific debugging information.
            
</dd>
</dl></blockquote><p>
        
</p>
<p>
          <a class='info' href='#errorList'>Appendix&nbsp;A<span> (</span><span class='info'>NETCONF Error List</span><span>)</span></a> enumerates the standard NETCONF errors.
        
</p>
<p> 
					</p>
<blockquote class="text"><dl>
<dt>Example:</dt>
<dd>
							<br />

							An error is returned if an &lt;rpc&gt; element is
							received without a message-id attribute.  Note that only
							in this case is it acceptable for the NETCONF peer to
							omit the message-id attribute in the
							&lt;rpc&#8209;reply&gt; element.
						
</dd>
</dl></blockquote><p>
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;rpc-error&gt;
      &lt;error-type&gt;rpc&lt;/error-type&gt;
      &lt;error-tag&gt;missing-attribute&lt;/error-tag&gt;
      &lt;error-severity&gt;error&lt;/error-severity&gt;
      &lt;error-info&gt;
        &lt;bad-attribute&gt;message-id&lt;/bad-attribute&gt;
        &lt;bad-element&gt;rpc&lt;/bad-element&gt;
      &lt;/error-info&gt;
    &lt;/rpc-error&gt;
  &lt;/rpc-reply&gt;

</pre></div>
<p>
            The following &lt;rpc&#8209;reply&gt; illustrates the case
            of returning multiple &lt;rpc&#8209;error&gt; elements.
				
</p>
<p>Note that the data models used in the examples in this section use
      the &lt;name&gt; element to distinguish between multiple instances of
      the &lt;interface&gt; element.
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc-reply message-id="101"
    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
    xmlns:xc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;rpc-error&gt;
      &lt;error-type&gt;application&lt;/error-type&gt;
      &lt;error-tag&gt;invalid-value&lt;/error-tag&gt;
      &lt;error-severity&gt;error&lt;/error-severity&gt;
      &lt;error-path&gt;
        /t:top/t:interface[t:name="Ethernet0/0"]/t:mtu
      &lt;/error-path&gt;
      &lt;error-message xml:lang="en"&gt;
        MTU value 25000 is not within range 256..9192
      &lt;/error-message&gt;
    &lt;/rpc-error&gt;
    &lt;rpc-error&gt;
      &lt;error-type&gt;application&lt;/error-type&gt;
      &lt;error-tag&gt;invalid-value&lt;/error-tag&gt;
      &lt;error-severity&gt;error&lt;/error-severity&gt;
      &lt;error-path&gt;
        /t:top/t:interface[t:name="Ethernet1/0"]/t:address/t:name
      &lt;/error-path&gt;
      &lt;error-message xml:lang="en"&gt;
        Invalid IP address for interface Ethernet1/0
      &lt;/error-message&gt;
    &lt;/rpc-error&gt;
  &lt;/rpc-reply&gt;

</pre></div>
<a name="ok"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
&lt;ok&gt; Element</h3>

<p>
          The &lt;ok&gt; element is sent in &lt;rpc&#8209;reply&gt; messages
          if no errors or warnings occurred during the processing of an &lt;rpc&gt;
          request, and no data was returned from the operation.  For example:
        </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc-reply message-id="101"
             xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;

</pre></div><p>

        
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Pipelining</h3>

<p>
NETCONF &lt;rpc&gt; requests MUST be processed serially by the managed device.
Additional &lt;rpc&gt; requests MAY be sent before previous ones
have been completed. The managed device MUST send responses only in
the order the requests were received.
        
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Configuration Model</h3>

<p> NETCONF provides an initial set of
        operations and a number of capabilities that can be used to
        extend the base. NETCONF peers exchange device capabilities
        when the session is initiated as described in
        <a class='info' href='#capabilityExchange'>Section&nbsp;8.1<span> (</span><span class='info'>Capabilities Exchange</span><span>)</span></a>.
      
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Configuration Datastores</h3>

<p>NETCONF defines the existence of one or more configuration
          datastores and allows configuration operations on them.
          A configuration datastore is defined as
          the complete set of configuration data that is required to get a
          device from its initial default state into a desired operational state.
          The configuration datastore does not include state data or executive
          commands.
        
</p>
<p>
          Only the &lt;running&gt; configuration datastore is present in the
          base model. Additional configuration datastores may be
          defined by capabilities. Such configuration datastores
          are available only on devices that advertise the
          capabilities.
          </p>
<ul class="text">
<li>
              Running: The complete configuration
              currently active on the network device.
              Only one configuration datastore of this type exists on
              the device, and it is always present. NETCONF protocol
              operations refer to this datastore using the
              &lt;running&gt; element.
            
</li>
</ul><p>
        
</p>
<p>
          The capabilities in Sections
          <a class='info' href='#candidate'>8.3<span> (</span><span class='info'>Candidate Configuration Capability</span><span>)</span></a> and <a class='info' href='#startup'>8.7<span> (</span><span class='info'>Distinct Startup Capability</span><span>)</span></a>
          define the &lt;candidate&gt; and &lt;startup&gt;
          configuration datastores, respectively.
        
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Data Modeling</h3>

<p>
          Data modeling and content issues are outside the scope of
          the NETCONF protocol.  An assumption is made that the
          device's data model is well-known to the application and
          that both parties are aware of issues such as the layout,
          containment, keying, lookup, replacement, and management
          of the data, as well as any other constraints imposed by
          the data model.
        
</p>
<p>
          NETCONF carries configuration data inside the &lt;config&gt; element
          that is specific to device's data model.  The protocol treats the
          contents of that element as opaque data.  The device uses
          capabilities to announce the set of data models that the
          device implements.  The capability definition details the
          operation and constraints imposed by data model.
        
</p>
<p>
          Devices and managers may support multiple data models, 
          including both standard and proprietary data models.  
        
</p>
<a name="subtree"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Subtree Filtering</h3>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Overview</h3>

<p>
          XML subtree filtering is a mechanism that allows an application to
          select particular XML subtrees to include in the &lt;rpc&#8209;reply&gt; for a
          &lt;get&gt; or &lt;get&#8209;config&gt; operation.  A small set of filters for
          inclusion, simple content exact-match, and selection is provided,
          which allows some useful, but also very limited, selection mechanisms.
          The server does not need to utilize any data-model-specific semantics
          during processing, allowing for simple and centralized implementation
          strategies.
        
</p>
<p>
          Conceptually, a subtree filter is comprised of zero or more element
          subtrees, which represent the filter selection criteria.  At each
          containment level within a subtree, the set of sibling nodes is
          logically processed by the server to determine if its subtree and
          path of elements to the root are included in the filter output.
        
</p>
<p>
          All elements present in a particular subtree within a filter must 
          match associated nodes present in the server's conceptual data model.
          XML namespaces MAY be specified (via 'xmlns' attributes) within the
          NETCONF message.  If they are specified, the declared namespace MUST 
          exactly match a namespace supported by the server, with one exception.
          A namespace wildcard mechanism is defined in 
          <a class='info' href='#NamespaceSelection'>Section&nbsp;6.2.1<span> (</span><span class='info'>Namespace Selection</span><span>)</span></a>.
        
</p>
<p>
          Note that prefix values
          for qualified namespaces are not relevant when comparing filter 
          elements to elements in the underlying data model.
        
</p>
<p>
          Each node specified in a subtree filter represents an inclusive
          filter.  Only associated nodes in underlying data model(s) within
          the specified configuration datastore on the server are selected 
          by the filter.  A node must exactly match the namespace and
          hierarchy of elements
          given in the filter data, except that the filter absolute path name is 
          adjusted to start from the layer below &lt;filter&gt;.  
        
</p>
<p>
          Response messages contain only the subtrees selected by the filter.
          Any selection criteria that were present in the request, within a
          particular selected subtree, are also included in the response.
          Note that some elements expressed in the filter as leaf nodes
          will be expanded (i.e., subtrees included) in the filter output.
          Specific data instances are not duplicated in the response in the
          event that the request contains multiple filter subtree
					expressions that
          select the same data.
        
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Subtree Filter Components</h3>

<p>
          A subtree filter is comprised of XML elements and their XML
          attributes.  There are five types of components that may be 
          present in a subtree filter:
          </p>
<ul class="text">
<li>Namespace Selection
</li>
<li>Attribute Match Expressions
</li>
<li>Containment Nodes
</li>
<li>Selection Nodes
</li>
<li>Content Match Nodes
</li>
</ul><p>
        
</p>
<a name="NamespaceSelection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Namespace Selection</h3>

<p>
            If namespaces are used, then the filter output will only include
            elements from the specified namespace.  A namespace is considered
            to match (for filter purposes) if the XML namespace associated
            with a particular node within the &lt;filter&gt; element is the same
            as in the underlying data model.
            Note that namespace selection cannot be used by itself.
            At least one element must be specified in the filter
            any elements to be included in the filter output.
          
</p>
<p>
            An XML namespace wildcard mechanism is defined for subtree
            filtering. If an element 
            within the &lt;filter&gt; element
            is not qualified by a namespace (e.g., xmlns=""),
            then the server MUST evaluate all the XML namespaces it
            supports, when processing that subtree filter node.
            This wildcard mechanism is not applicable to XML attributes.
          
</p>
<p>
            Example:
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;filter type="subtree"&gt;
    &lt;top xmlns="http://example.com/schema/1.2/config"/&gt;
  &lt;/filter&gt;
</pre></div><p>

          
</p>
<p>
            In this example, the &lt;top&gt; element is a selection
            node, and only this node in the
            'http://example.com/schema/1.2/config' namespace and any
            child nodes (from the underlying data model) will be
            included in the filter output.
          
</p>
<a name="attribute-match"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.2"></a><h3>6.2.2.&nbsp;
Attribute Match Expressions</h3>

<p>
            An attribute that appears in a subtree filter is part of
            an "attribute match expression".  Any number of (unqualified 
            or qualified) XML attributes may be present in any type of 
            filter node.  In addition to the selection criteria normally 
            applicable to that node, the selected data must have matching 
            values for every attribute specified in the node.  If an element 
            is not defined to include a specified attribute, then it is not 
            selected in the filter output.
          
</p>
<p>
            Example:
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;filter type="subtree"&gt;
    &lt;t:top xmlns:t="http://example.com/schema/1.2/config"&gt;
      &lt;t:interfaces&gt;
        &lt;t:interface t:ifName="eth0"/&gt;
      &lt;/t:interfaces&gt;
    &lt;/t:top&gt;
  &lt;/filter&gt;
</pre></div><p>

          
</p>
<p>
            In this example, the &lt;top&gt;, and &lt;interfaces&gt;
            elements are containment nodes, the &lt;interface&gt;
            element is a selection node, and 'ifName' is an attribute
            match expression.  Only 'interface' nodes in the
            'http://example.com/schema/1.2/config' namespace that have
            an 'ifName' attribute with the value 'eth0' and occur
            within 'interfaces' nodes within 'top' nodes will be
            included in the filter output.
          
</p>
<a name="containment-nodes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.3"></a><h3>6.2.3.&nbsp;
Containment Nodes</h3>

<p>
            Nodes that contain child elements within a subtree filter
            are called "containment nodes".  Each child element can be
            any type of node, including another containment node.  For
            each containment node specified in a subtree filter, all
            data model instances that exactly match the specified 
            namespaces, element hierarchy,
            and any attribute match expressions
            are included in the filter output.
          
</p>
<p>
            Example:
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;filter type="subtree"&gt;
    &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
      &lt;users/&gt;
    &lt;/top&gt;
  &lt;/filter&gt;
</pre></div><p>

          
</p>
<p>
            In this example, the &lt;top&gt; element is a containment node.
          
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.4"></a><h3>6.2.4.&nbsp;
Selection Nodes</h3>

<p>
            An empty leaf node within a filter is called a "selection node",
            and it represents an "explicit selection" filter on the underlying
            data model.  Presence of any selection nodes within a set of sibling
            nodes will cause the filter to select the specified subtree(s)
            and suppress automatic selection of the entire set of sibling nodes
            in the underlying data model.  For filtering purposes, an empty
            leaf node can be declared either with an empty tag (e.g., &lt;foo/&gt;) 
            or with explicit start and end tags (e.g., &lt;foo&gt;  &lt;/foo&gt;).  Any
            whitespace characters are ignored in this form.
          
</p>
<p>
            Example:
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;filter type="subtree"&gt;
    &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
      &lt;users/&gt;
    &lt;/top&gt;
  &lt;/filter&gt;
</pre></div><p>

          
</p>
<p>
            In this example, the &lt;top&gt; element is a containment node, and 
            the &lt;users&gt; element is a selection node.  Only 'users'
            nodes in the 
            'http://example.com/schema/1.2/config' namespace that occur
            within a 'top' element that is the root of the configuration
            datastore will be included in the filter output.
          
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.5"></a><h3>6.2.5.&nbsp;
Content Match Nodes</h3>

<p>
            A leaf node that contains simple content is called a "content
            match node".  It is used to select some or all of its sibling 
            nodes for filter output, and it represents an exact-match filter on 
            the leaf node element content.  The following constraints apply to 
            content match nodes:
            </p>
<ul class="text">
<li>A content match node must not contain nested elements (i.e., 
              must resolve to a simpleType in the XML Schema
Definition (XSD)).
</li>
<li>Multiple content match nodes (i.e., sibling nodes) are logically
              combined in an "AND" expression.
</li>
<li>Filtering of mixed content is not supported.
</li>
<li>Filtering of list content is not supported.
</li>
<li>Filtering of whitespace-only content is not supported.
</li>
<li>A content match node must contain non-whitespace characters.
              An empty element (e.g., &lt;foo&gt;&lt;/foo&gt;) will be interpreted as a
              selection node (e.g., &lt;foo/&gt;).
</li>
<li>Leading and trailing whitespace characters are ignored, but any 
              whitespace characters within a block of text characters are not 
              ignored or modified.
</li>
</ul><p>
          
</p>
<p>
            If all specified sibling content match nodes in a subtree filter
            expression are 'true', then the filter output nodes are selected 
            in the following manner:
            </p>
<ul class="text">
<li>Each content match node in the sibling set is included in 
              the filter output.
</li>
<li>If any containment nodes are present in the sibling set, then
              they are processed further and included if any nested filter
              criteria are also met.
</li>
<li>If any selection nodes are present in the sibling set, then all
              of them are included in the filter output.
</li>
<li>If any sibling nodes of the selection node are instance identifier
              components for a conceptual data structure (e.g., list key leaf),
              then they MAY also be included in the filter output.
</li>
<li>Otherwise (i.e., there are no selection or containment nodes
              in the filter sibling set), all the nodes defined at this level
              in the underlying data model (and their subtrees, if any) are
              returned in the filter output.
</li>
</ul><p>
          
</p>
<p>
            If any of the sibling content match node tests are 'false', then no
            further filter processing is performed on that sibling set, and none
            of the sibling subtrees are selected by the filter, including the
            content match node(s).
          
</p>
<p>
            Example:
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;filter type="subtree"&gt;
    &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
      &lt;users&gt;
        &lt;user&gt;
          &lt;name&gt;fred&lt;/name&gt;
        &lt;/user&gt;
      &lt;/users&gt;
    &lt;/top&gt;
  &lt;/filter&gt;
</pre></div><p>

          
</p>
<p>
            In this example, the &lt;users&gt; and &lt;user&gt; nodes are both containment
            nodes, and &lt;name&gt; is a content match node.  Since no sibling nodes
            of &lt;name&gt; are specified (and therefore no containment or selection 
            nodes), all of the sibling nodes of &lt;name&gt; are returned in the
            filter output.  Only 'user' nodes in the 'http://example.com/schema/1.2/config' 
            namespace that match the element hierarchy and
            for which the &lt;name&gt; element is equal to 'fred' will be included in 
            the filter output.
          
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Subtree Filter Processing</h3>

<p>
          The filter output (the set of selected nodes) is initially empty.
        
</p>
<p>
          Each subtree filter can contain one or more data model fragments,
          which represent portions of the data model that should be selected
          (with all child nodes) in the filter output.
        
</p>
<p>
          Each subtree data fragment is compared by the server to the internal
          data models supported by the server.  If the entire subtree
          data-fragment filter (starting from the root to the innermost element
          specified in the filter) exactly matches a corresponding portion of
          the supported data model, then that node and all its children are
          included in the result data.
        
</p>
<p>
          The server processes all nodes with the same parent node (sibling
          set) together, starting from the root to the leaf nodes.  The root
          elements in the filter are considered in the same sibling set
          (assuming they are in the same namespace), even though they do not
          have a common parent.
        
</p>
<p>
          For each sibling set, the server determines which nodes are included
          (or potentially included) in the filter output, and which sibling
          subtrees are excluded (pruned) from the filter output.  The server
          first determines which types of nodes are present in the sibling set
          and processes the nodes according to the rules for their type.  If
          any nodes in the sibling set are selected, then the process is
          recursively applied to the sibling sets of each selected node.  The
          algorithm continues until all sibling sets in all subtrees specified
          in the filter have been processed.
        
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Subtree Filtering Examples</h3>

<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.1"></a><h3>6.4.1.&nbsp;
No Filter</h3>

<p>
            Leaving out the filter on the get operation returns the entire data
            model.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get/&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;!-- ... entire set of data returned ... --&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

          
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.2"></a><h3>6.4.2.&nbsp;
Empty Filter</h3>

<p>
            An empty filter will select nothing because no content match or
            selection nodes are present.  This is not an error.  The filter type
            attribute used in these examples is discussed further in Section 7.1.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get&gt;
      &lt;filter type="subtree"&gt;
      &lt;/filter&gt;
    &lt;/get&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

          
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.3"></a><h3>6.4.3.&nbsp;
Select the Entire &lt;users&gt; Subtree</h3>

<p>
            The filter in this example contains one selection node (&lt;users&gt;), so
            just that subtree is selected by the filter.  This example represents
            the fully-populated &lt;users&gt; data model in most of the filter examples
            that follow.  In a real data model, the &lt;company&#8209;info&gt; would not
            likely be returned with the list of users for a particular host or
            network.
          
</p>
<p>
            NOTE: The filtering and configuration examples used in this document
            appear in the namespace "http://example.com/schema/1.2/config".  The
            root element of this namespace is &lt;top&gt;.  The &lt;top&gt; element
            and its descendents represent an example configuration data model only.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users/&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;


  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;root&lt;/name&gt;
            &lt;type&gt;superuser&lt;/type&gt;
            &lt;full-name&gt;Charlie Root&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;1&lt;/dept&gt;
              &lt;id&gt;1&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;type&gt;admin&lt;/type&gt;
            &lt;full-name&gt;Fred Flintstone&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;2&lt;/dept&gt;
              &lt;id&gt;2&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;barney&lt;/name&gt;
            &lt;type&gt;admin&lt;/type&gt;
            &lt;full-name&gt;Barney Rubble&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;2&lt;/dept&gt;
              &lt;id&gt;3&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;

</pre></div><p>

          
</p>
<p>
            The following filter request would have produced the same result, but
            only because the container &lt;users&gt; defines one child element
            (&lt;user&gt;).
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user/&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

</pre></div><p>

          
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.4"></a><h3>6.4.4.&nbsp;
Select All &lt;name&gt; Elements within the &lt;users&gt; Subtree</h3>

<p>
            This filter contains two containment nodes (&lt;users&gt;, &lt;user&gt;) and one
            selection node (&lt;name&gt;).  All instances of the &lt;name&gt; element in the
            same sibling set are selected in the filter output.  The client may
            need to know that &lt;name&gt; is used as an instance identifier in this
            particular data structure, but the server does not need to know that
            meta-data in order to process the request.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user&gt;
              &lt;name/&gt;
            &lt;/user&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;root&lt;/name&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;barney&lt;/name&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

          
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.5"></a><h3>6.4.5.&nbsp;
One Specific &lt;user&gt; Entry</h3>

<p>
            This filter contains two containment nodes (&lt;users&gt;, &lt;user&gt;) and one
            content match node (&lt;name&gt;).  All instances of the sibling set
            containing &lt;name&gt; for which the value of &lt;name&gt; equals "fred" are
            selected in the filter output.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user&gt;
              &lt;name&gt;fred&lt;/name&gt;
            &lt;/user&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;type&gt;admin&lt;/type&gt;
            &lt;full-name&gt;Fred Flintstone&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;2&lt;/dept&gt;
              &lt;id&gt;2&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

          
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.6"></a><h3>6.4.6.&nbsp;
Specific Elements from a Specific &lt;user&gt; Entry</h3>

<p>
            This filter contains two containment nodes (&lt;users&gt;, &lt;user&gt;), one
            content match node (&lt;name&gt;), and two selection nodes (&lt;type&gt;,
            &lt;full&#8209;name&gt;).  All instances of the &lt;type&gt; and &lt;full&#8209;name&gt; elements
            in the same sibling set containing &lt;name&gt; for which the value of
            &lt;name&gt; equals "fred" are selected in the filter output.  The
            &lt;company&#8209;info&gt; element is not included because the sibling set
            contains selection nodes.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user&gt;
              &lt;name&gt;fred&lt;/name&gt;
              &lt;type/&gt;
              &lt;full-name/&gt;
            &lt;/user&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;type&gt;admin&lt;/type&gt;
            &lt;full-name&gt;Fred Flintstone&lt;/full-name&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

          
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.7"></a><h3>6.4.7.&nbsp;
Multiple Subtrees</h3>

<p>
            This filter contains three subtrees (name=root, fred, barney).
          
</p>
<p>
            The "root" subtree filter contains two containment nodes
            (&lt;users&gt;, &lt;user&gt;), one content match node
            (&lt;name&gt;), and one selection node
            (&lt;company&#8209;info&gt;).  The subtree selection
            criteria is met, and just the company-info subtree for
            "root" is selected in the filter output.
          
</p>
<p>
            The "fred" subtree filter contains three containment nodes
            (&lt;users&gt;, &lt;user&gt;, &lt;company&#8209;info&gt;),
            one content match node (&lt;name&gt;), and one selection
            node (&lt;id&gt;).  The subtree selection criteria is met,
            and just the &lt;id&gt; element within the company&#8209;info
            subtree for "fred" is selected in the filter output.
          
</p>
<p>
            The "barney" subtree filter contains three containment
            nodes (&lt;users&gt;, &lt;user&gt;,
            &lt;company&#8209;info&gt;), two content match nodes
            (&lt;name&gt;, &lt;type&gt;), and one selection node
            (&lt;dept&gt;).  The subtree selection criteria is not met
            because user "barney" is not a "superuser", and the entire
            subtree for "barney" (including its parent &lt;user&gt;
            entry) is excluded from the filter output.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users&gt;
            &lt;user&gt;
              &lt;name&gt;root&lt;/name&gt;
              &lt;company-info/&gt;
            &lt;/user&gt;
            &lt;user&gt;
              &lt;name&gt;fred&lt;/name&gt;
              &lt;company-info&gt;
                &lt;id/&gt;
              &lt;/company-info&gt;
            &lt;/user&gt;
            &lt;user&gt;
              &lt;name&gt;barney&lt;/name&gt;
              &lt;type&gt;superuser&lt;/type&gt;
              &lt;company-info&gt;
                &lt;dept/&gt;
              &lt;/company-info&gt;
            &lt;/user&gt;
          &lt;/users&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
             xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;root&lt;/name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;1&lt;/dept&gt;
              &lt;id&gt;1&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;company-info&gt;
              &lt;id&gt;2&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

          
</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.8"></a><h3>6.4.8.&nbsp;
Elements with Attribute Naming</h3>

<p>
            In this example, the filter contains one containment node
            (&lt;interfaces&gt;), one attribute match expression (ifName), and one
            selection node (&lt;interface&gt;).  All instances of the &lt;interface&gt;
            subtree that have an ifName attribute equal to "eth0" are selected
            in the filter output.  The filter data elements and attributes must
            be qualified because the ifName attribute will not be considered part
            of the 'schema/1.2' namespace if it is unqualified.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get&gt;
      &lt;filter type="subtree"&gt;
        &lt;t:top xmlns:t="http://example.com/schema/1.2/stats"&gt;
          &lt;t:interfaces&gt;
            &lt;t:interface t:ifName="eth0"/&gt;
          &lt;/t:interfaces&gt;
        &lt;/t:top&gt;
      &lt;/filter&gt;
    &lt;/get&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;t:top xmlns:t="http://example.com/schema/1.2/stats"&gt;
        &lt;t:interfaces&gt;
          &lt;t:interface t:ifName="eth0"&gt;
            &lt;t:ifInOctets&gt;45621&lt;/t:ifInOctets&gt;
            &lt;t:ifOutOctets&gt;774344&lt;/t:ifOutOctets&gt;
          &lt;/t:interface&gt;
        &lt;/t:interfaces&gt;
      &lt;/t:top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

          
</p>
<p>
            If ifName were a child node instead of an attribute, then the
            following request would produce similar results.
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/stats"&gt;
          &lt;interfaces&gt;
            &lt;interface&gt;
              &lt;ifName&gt;eth0&lt;/ifName&gt;
            &lt;/interface&gt;
          &lt;/interfaces&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get&gt;
  &lt;/rpc&gt;
</pre></div><p>

          
</p>
<a name="protocolOperations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Protocol Operations</h3>

<p>
        The NETCONF protocol provides a small set of low-level 
        operations to manage device configurations and retrieve device state
        information. The base protocol provides operations to retrieve,
        configure, copy, and delete configuration datastores.  Additional
        operations are provided, based on the capabilities advertised by the
        device.
      
</p>
<p>
        The base protocol includes the following protocol operations:
        </p>
<ul class="text">
<li>get
</li>
<li>get-config
</li>
<li>edit-config
</li>
<li>copy-config
</li>
<li>delete-config
</li>
<li>lock
</li>
<li>unlock
</li>
<li>close-session
</li>
<li>kill-session
</li>
</ul><p>
      
</p>
<p>
A protocol operation may fail for various reasons,
including "operation not supported".  An initiator should
not assume that any operation will always succeed.  The return
values in any RPC reply should be checked for error responses.
      
</p>
<p>
The syntax and XML encoding of the protocol operations are 
formally defined in the YANG module in <a class='info' href='#yangmodule'>Appendix&nbsp;C<span> (</span><span class='info'>YANG Module for NETCONF Protocol Operations</span><span>)</span></a>.
The following sections describe the semantics of each protocol operation.
      
</p>
<a name="get-config"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
&lt;get&#8209;config&gt;</h3>

<p>
          </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
							<br />

							Retrieve all or part of a specified configuration.
            
</dd>
<dt>Parameters:</dt>
<dd>
              
<blockquote class="text"><dl>
<dt>source:</dt>
<dd>
									<br />

									Name of the configuration datastore being queried,
									such as &lt;running/&gt;.
                
</dd>
<dt>filter:</dt>
<dd>
									<br />

									This parameter identifies the portions of the device
									configuration to retrieve.
									If this parameter is not present, the entire configuration
									is returned.

									<br />
<br />

        The filter element may optionally contain a "type" attribute.
        This attribute indicates the type of filtering syntax used within
        the filter element. The default filtering mechanism in NETCONF is
        referred to as subtree filtering and is described in
        <a class='info' href='#subtree'>Section&nbsp;6<span> (</span><span class='info'>Subtree Filtering</span><span>)</span></a>. The value "subtree"
        explicitly identifies this type of filtering.

   							<br />
<br />

        If the NETCONF peer supports <a class='info' href='#xpath'>the :xpath capability<span> (</span><span class='info'>XPath Capability</span><span>)</span></a>,
        the value "xpath" may be used to indicate that the select
				attribute on the filter element
        contains an XPath expression.
      
</dd>
</dl></blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>
									<br />

    If the device can satisfy the request, the server sends an
    &lt;rpc&#8209;reply&gt; element containing a &lt;data&gt; element
    with the results of the query.
            
</dd>
<dt>Negative Response:</dt>
<dd>
									<br />

    An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt;
    if the request cannot be completed for any reason.
            
</dd>
<dt>Example:</dt>
<dd>
              To retrieve the entire &lt;users&gt; subtree:
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;users/&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;root&lt;/name&gt;
            &lt;type&gt;superuser&lt;/type&gt;
            &lt;full-name&gt;Charlie Root&lt;/full-name&gt;
            &lt;company-info&gt;
              &lt;dept&gt;1&lt;/dept&gt;
              &lt;id&gt;1&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
          &lt;!-- additional &lt;user&gt; elements appear here... --&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div>
						
</dd>
<dt></dt>
<dd>
              <a class='info' href='#subtree'>Section&nbsp;6<span> (</span><span class='info'>Subtree Filtering</span><span>)</span></a> contains additional examples
              of subtree filtering.
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
&lt;edit&#8209;config&gt;</h3>

<p>

          </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>

									<br />


The &lt;edit&#8209;config&gt; operation loads all or part of a specified
configuration to the specified target configuration.  This
operation allows the new configuration to be expressed in
several ways, such as using a local file, a remote file, or
inline.  If the target configuration does not exist, it will be
created.

									<br />
<br />

If a NETCONF peer supports <a class='info' href='#url'>the :url capability<span> (</span><span class='info'>URL Capability</span><span>)</span></a>,
the &lt;url&gt; element can appear instead of the &lt;config&gt; parameter.

									<br />
<br />

The device analyzes the source and target configurations and
performs the requested changes.  The target configuration is not
necessarily
replaced, as with the &lt;copy&#8209;config&gt; message.  Instead, the
target configuration is changed in accordance with the source's
data and requested operations.
									<br />
<br />

If the &lt;edit-config&gt; operation contains multiple sub-operations
which apply to the same conceptual node in the underlying
data model, then the result of the operation is undefined
(i.e., outside the scope of the NETCONF protocol).
            
</dd>
<dt>Attributes:</dt>
<dd>

              
<blockquote class="text"><dl>
<dt>operation:</dt>
<dd>
									<br />

                    Elements in the &lt;config&gt; subtree may contain an
                    "operation" attribute. The attribute identifies the point in
                    the configuration to perform the operation and
                    MAY appear on multiple elements throughout the
                    &lt;config&gt; subtree.

									<br />
<br />

                    If the operation attribute is not specified, the
                    configuration is merged into the configuration datastore.

									<br />
<br />

                    The operation attribute has one of the following values:

                  
<blockquote class="text"><dl>
<dt>merge:</dt>
<dd>
                      The configuration data identified by the
                      element containing this attribute is
                      merged with the configuration at the corresponding
                      level in the configuration datastore identified by
                      the target parameter.  This is the default behavior.
                    
</dd>
<dt>replace:</dt>
<dd>
                      The configuration data identified by the element
                      containing this attribute replaces any related
                      configuration in the configuration datastore
                      identified by the target parameter.  If no such
                      configuration data exists in the configuration
                      datastore, it is created. Unlike a
                      &lt;copy&#8209;config&gt; operation, which
                      replaces the entire target configuration, only
                      the configuration actually present in the config
                      parameter is affected.
                    
</dd>
<dt>create:</dt>
<dd>
                      The configuration data identified by the element
                      containing this attribute is added to the
                      configuration if and only if the configuration
                      data does not already exist in the configuration
                      datastore.  If the configuration data exists, an
                      &lt;rpc&#8209;error&gt; element is returned with
                      an &lt;error&#8209;tag&gt; value of
                      "data&#8209;exists".
                    
</dd>
<dt>delete:</dt>
<dd>
                      The configuration data identified by the element
                      containing this attribute is deleted from the
                      configuration if and only if the configuration
                      data currently exists in the configuration
                      datastore.  If the configuration data does not
                      exist, an
                      &lt;rpc&#8209;error&gt; element is returned with
                      an &lt;error&#8209;tag&gt; value of
                      "data&#8209;missing".
                    
</dd>
<dt>remove:</dt>
<dd>
                      The configuration data identified by the element
                      containing this attribute is deleted from the
                      configuration if the configuration
                      data currently exists in the configuration
                      datastore.  If the configuration data does not
                      exist, the 'remove' operation is silently ignored
                      by the server.
                    
</dd>
</dl></blockquote>
                
</dd>
</dl></blockquote>
            
</dd>
<dt>Parameters:</dt>
<dd>
              
<blockquote class="text"><dl>
<dt>target:</dt>
<dd>
									<br />

                    Name of the configuration datastore being edited, such as
                    &lt;running/&gt; or &lt;candidate/&gt;.
                
</dd>
<dt>default-operation:</dt>
<dd>
									<br />

                    Selects the default operation (as described in the
                    "operation" attribute) for this &lt;edit&#8209;config&gt; request.
                    The default value for the default-operation
                    parameter is "merge". 

									<br />
<br />

                    The default-operation parameter is optional, but
										if provided, it
                    must have one of the following values:
                    
<blockquote class="text"><dl>
<dt>merge:</dt>
<dd>
                        The configuration data in the &lt;config&gt; parameter is
                        merged with the configuration at the corresponding level in
                        the target datastore.  This is the default behavior.
                      
</dd>
<dt>replace:</dt>
<dd>
                        The configuration data in the &lt;config&gt; parameter
                        completely replaces the configuration in the target
                        datastore.  This is useful for loading previously saved
                        configuration data.
                      
</dd>
<dt>none:</dt>
<dd>
                        The target datastore is unaffected by the
                        configuration in the &lt;config&gt; parameter,
                        unless and until the
                        incoming configuration data uses the "operation" attribute to
                        request a different operation.  If the configuration in the
                        &lt;config&gt; parameter contains data for which there is not a
                        corresponding level in the target datastore, an &lt;rpc&#8209;error&gt;
                        is returned with an &lt;error&#8209;tag&gt;
                        value of data-missing.
                        Using "none" allows operations like "delete" to avoid
                        unintentionally creating the parent hierarchy of the element to
                        be deleted.
                      
</dd>
</dl></blockquote>
                  
</dd>
<dt>test-option:</dt>
<dd>
									<br />

                    The test-option element may be specified only if the device
                    advertises the <a class='info' href='#validate'>:validate:1.1
                    capability<span> (</span><span class='info'>Validate Capability</span><span>)</span></a>.

									<br />
<br />

                    The test-option element has one of the following values:

                  
<blockquote class="text"><dl>
<dt>test-then-set:</dt>
<dd>
                      Perform a validation test before attempting to set.
                      If validation errors occur, do not perform the &lt;edit&#8209;config&gt;
                      operation. This is the default test-option.
                    
</dd>
<dt>set:</dt>
<dd>
                      Perform a set without a validation test first.
                    
</dd>
<dt>test-only:</dt>
<dd>
                      Perform only the validation test, without
                      attempting to set.
                    
</dd>
</dl></blockquote>
                
</dd>
<dt>error-option:</dt>
<dd>
									<br />

                    The error-option element has one of the following values:

                  
<blockquote class="text"><dl>
<dt>stop-on-error:</dt>
<dd>
                      Abort the edit-config operation on first error. This
                      is the default error-option.
                    
</dd>
<dt>continue-on-error:</dt>
<dd>
                      Continue to process configuration data on error;
                      error is recorded, and negative response is
                      generated if any errors occur.
                    
</dd>
<dt>rollback-on-error:</dt>
<dd>
                      If an error condition occurs
                      such that an error severity &lt;rpc&#8209;error&gt; element is generated,
                      the server will stop processing the edit-config operation and
                      restore the specified configuration to its complete state
                      at the start of this edit-config operation. This option
                      requires the server to support the :rollback-on-error capability
                      described in <a class='info' href='#rollback-on-error'>Section&nbsp;8.5<span> (</span><span class='info'>Rollback on Error Capability</span><span>)</span></a>.
                    
</dd>
</dl></blockquote>
                
</dd>
<dt>config:</dt>
<dd>
									<br />

                    A hierarchy of configuration data as defined by one of the
                    device's data models. The contents MUST be placed in an
                    appropriate namespace, to allow the device to detect the
                    appropriate data model, and the contents MUST follow the
                    constraints of that data model, as defined by its capability
                    definition.
                    Capabilities are discussed in <a class='info' href='#capabilities'>Section&nbsp;8<span> (</span><span class='info'>Capabilities</span><span>)</span></a>.
                
</dd>
</dl></blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>
									<br />

    If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
    is sent containing an &lt;ok&gt; element.
            
</dd>
<dt>Negative Response:</dt>
<dd>
									<br />

    An &lt;rpc&#8209;error&gt; response is sent if the request cannot
    be completed for any reason.  
            
</dd>
<dt>Example:</dt>
<dd>
									<br />

      The &lt;edit&#8209;config&gt; examples in this section utilize a simple
       data model, in which multiple instances of the 'interface'
       element may be present, and an instance is distinguished
       by the 'name' element within each 'interface' element.

									<br />
<br />

       Set the MTU to 1500 on an interface named "Ethernet0/0" in the
       running configuration:
              
</dd>
</dl></blockquote><p>

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;config&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;interface&gt;
            &lt;name&gt;Ethernet0/0&lt;/name&gt;
            &lt;mtu&gt;1500&lt;/mtu&gt;
          &lt;/interface&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
<p>
              Add an interface named "Ethernet0/0" to the
              running configuration, replacing any previous interface
              with that name:
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;config xmlns:xc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;interface xc:operation="replace"&gt;
            &lt;name&gt;Ethernet0/0&lt;/name&gt;
            &lt;mtu&gt;1500&lt;/mtu&gt;
            &lt;address&gt;
              &lt;name&gt;192.0.2.4&lt;/name&gt;
              &lt;prefix-length&gt;24&lt;/prefix-length&gt;
            &lt;/address&gt;
          &lt;/interface&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
<p>
              Delete the configuration for an 
              interface named "Ethernet0/0" from the running configuration:
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;default-operation&gt;none&lt;/default-operation&gt;
      &lt;config xmlns:xc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;interface xc:operation="delete"&gt;
            &lt;name&gt;Ethernet0/0&lt;/name&gt;
          &lt;/interface&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
<p>
              Delete interface 192.0.2.4 from an OSPF area (other
              interfaces configured in the same area are unaffected):
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;default-operation&gt;none&lt;/default-operation&gt;
      &lt;config xmlns:xc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;protocols&gt;
            &lt;ospf&gt;
              &lt;area&gt;
                &lt;name&gt;0.0.0.0&lt;/name&gt;
                &lt;interfaces&gt;
                  &lt;interface xc:operation="delete"&gt;
                    &lt;name&gt;192.0.2.4&lt;/name&gt;
                  &lt;/interface&gt;
                &lt;/interfaces&gt;
              &lt;/area&gt;
            &lt;/ospf&gt;
          &lt;/protocols&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
&lt;copy&#8209;config&gt;</h3>

<p>
          </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
									<br />

    Create or replace an entire 
    configuration datastore with the contents of another
    complete configuration datastore.  If the target datastore
    exists, it is overwritten. Otherwise, a new one is created, if allowed. 

									<br />
<br />


If a NETCONF peer supports <a class='info' href='#url'>the :url capability<span> (</span><span class='info'>URL Capability</span><span>)</span></a>,
the &lt;url&gt; element can appear as the &lt;source&gt; or &lt;target&gt;
parameter.

									<br />
<br />


Even if it advertises the :writable-running capability,
a device may choose not to support the &lt;running/&gt; configuration
datastore as the &lt;target&gt; parameter of a &lt;copy&#8209;config&gt;
operation.
A device may choose not to support remote-to-remote copy operations,
where both the &lt;source&gt; and &lt;target&gt; parameters use the
&lt;url&gt; element.
If the source and target parameters identify the same URL or
configuration datastore, an error MUST be returned with an error-tag
containing "invalid-value".
            
</dd>
<dt>Parameters:</dt>
<dd>
              
<blockquote class="text"><dl>
<dt>target:</dt>
<dd>
									<br />

                    Name of the configuration datastore to
                    use as the destination of the
                    copy operation.
                
</dd>
<dt>source:</dt>
<dd>
									<br />

                    Name of the configuration datastore to use as the
                    source of the copy operation, or the
                    &lt;config&gt; element containing the
                    complete configuration to copy.
                
</dd>
</dl></blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>
									<br />

    If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
    is sent that includes an &lt;ok&gt; element.
            
</dd>
<dt>Negative Response:</dt>
<dd>
									<br />

    An &lt;rpc&#8209;error&gt; element is included within the &lt;rpc&#8209;reply&gt;
    if the request cannot be completed for any reason.
            
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;copy-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;source&gt;
        &lt;url&gt;https://user@example.com:passphrase/cfg/new.txt&lt;/url&gt;
      &lt;/source&gt;
    &lt;/copy-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
      xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
&lt;delete&#8209;config&gt;</h3>

<p>
          </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
           		<br />

    Delete a configuration
    datastore. The &lt;running&gt; configuration datastore cannot be deleted.           
              <br />
<br />

If a NETCONF peer supports <a class='info' href='#url'>the :url capability<span> (</span><span class='info'>URL Capability</span><span>)</span></a>,
the &lt;url&gt; element can appear as the &lt;target&gt; parameter.
            
</dd>
<dt>Parameters:</dt>
<dd>
              
<blockquote class="text"><dl>
<dt>target:</dt>
<dd>
              <br />

                    Name of the configuration datastore to delete.
                
</dd>
</dl></blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>
              <br />

    If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
    is sent that includes an &lt;ok&gt; element.
            
</dd>
<dt>Negative Response:</dt>
<dd>
              <br />

    An &lt;rpc&#8209;error&gt; element is included within the &lt;rpc&#8209;reply&gt;
    if the request cannot be completed for any reason.
            
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;delete-config&gt;
      &lt;target&gt;
        &lt;startup/&gt;
      &lt;/target&gt;
    &lt;/delete-config&gt;
  &lt;/rpc&gt;

   &lt;rpc-reply message-id="101"
        xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="lock"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.5"></a><h3>7.5.&nbsp;
&lt;lock&gt;</h3>

<p>
            </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
              <br />

The lock operation allows the client to lock the configuration system
of a device. Such locks are intended to be short-lived and allow a
client to make a change without fear of interaction with other NETCONF
clients, non-NETCONF clients (e.g., SNMP and command line interface
(CLI) scripts), and human users.

              <br />
<br />


An attempt to lock the configuration MUST fail if an existing
session or other entity holds a lock on any portion of the
lock target.

              <br />
<br />


When the lock is acquired, the server MUST prevent any changes to the
locked resource other than those requested by this session.
SNMP and CLI requests to modify the resource MUST
fail with an appropriate error.

              <br />
<br />


The duration of the lock is defined as beginning when the lock is
acquired and lasting until either the lock is released or the NETCONF
session closes. The session closure may be explicitly performed by the
client, or implicitly performed by the server based on criteria such
as failure of the underlying transport,
or simple inactivity timeout. This criteria is dependent on the
implementation and the underlying transport.

              <br />
<br />

   The lock operation takes a mandatory parameter, target.
   The target parameter names the configuration that will
   be locked.
   When a lock is active, using the &lt;edit&#8209;config&gt; operation
   on the locked
   configuration and using the locked configuration as a target of the
   &lt;copy&#8209;config&gt; operation will be disallowed by any other
   NETCONF session.
   Additionally, the system
   will ensure that these locked configuration resources will not be
   modified by other non-NETCONF management operations such as SNMP and
   CLI. The &lt;kill&#8209;session&gt; operation can be used to
   force
   the release of a lock owned by another NETCONF session.  It
   is beyond the scope of this document to define how to break
   locks held by other entities.
 
</dd>
<dt></dt>
<dd>
      A lock MUST not be granted if either of the following conditions is
      true:

<ul class="text">
<li>
A lock is already held by any NETCONF session or another entity.

</li>
<li>
The target configuration is &lt;candidate&gt;, it has already been
modified, and these changes have not been committed or rolled back.

</li>
</ul>
              
</dd>
<dt></dt>
<dd>
								The server MUST respond with either an &lt;ok&gt;
								element or an &lt;rpc&#8209;error&gt;.
              
</dd>
<dt></dt>
<dd>
                A lock will be released by the system if the session holding
                the lock is terminated for any reason.
              
</dd>
<dt>Parameters:</dt>
<dd>
              
<blockquote class="text"><dl>
<dt>target:</dt>
<dd>
              <br />

                    Name of the configuration datastore to lock.
                
</dd>
</dl></blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>
              <br />

							If the device was able to satisfy the request, an
							&lt;rpc&#8209;reply&gt; is sent that contains an
							&lt;ok&gt; element.
            
</dd>
<dt>Negative Response:</dt>
<dd>
              <br />

							An &lt;rpc&#8209;error&gt; element is included in the
							&lt;rpc&#8209;reply&gt; if the request cannot be
							completed for any reason.
							
              <br />
<br />

							If the lock is already held, the &lt;error&#8209;tag&gt;
							element will be 'lock&#8209;denied' and the
							&lt;error&#8209;info&gt; element will include the
							&lt;session&#8209;id&gt; of the lock owner. If the lock is
							held by a non-NETCONF entity, a &lt;session&#8209;id&gt;
							of 0 (zero) is included.  Note that any other entity
							performing a lock on even a partial piece of a target
							will prevent a NETCONF lock (which is global) from being
							obtained on that target.
            
</dd>
<dt>Example:</dt>
<dd>

              <br />

The following example shows a successful acquisition of a lock.
                    <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt; &lt;!-- lock succeeded --&gt;
  &lt;/rpc-reply&gt;

</pre></div>
                  
</dd>
<dt>Example:</dt>
<dd>
              <br />


The following example shows a failed attempt to acquire a lock
when the lock is already in use.
                    <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;rpc-error&gt; &lt;!-- lock failed --&gt;
      &lt;error-type&gt;protocol&lt;/error-type&gt;
      &lt;error-tag&gt;lock-denied&lt;/error-tag&gt;
      &lt;error-severity&gt;error&lt;/error-severity&gt;
      &lt;error-message&gt;
        Lock failed, lock is already held
      &lt;/error-message&gt;
      &lt;error-info&gt;
        &lt;session-id&gt;454&lt;/session-id&gt;
        &lt;!-- lock is held by NETCONF session 454 --&gt;
      &lt;/error-info&gt;
    &lt;/rpc-error&gt;
  &lt;/rpc-reply&gt;
</pre></div>
                  
</dd>
</dl></blockquote><p>
            
</p>
<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.6"></a><h3>7.6.&nbsp;
&lt;unlock&gt;</h3>

<p>
              </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
              <br />

The unlock operation is used to release a configuration
lock, previously obtained with the &lt;lock&gt; operation.

              <br />
<br />

An unlock operation will not succeed if any of the following 
conditions are true:
                
<ul class="text">
<li>the specified lock is not currently active
</li>
<li>the session issuing the &lt;unlock&gt; operation is not
                    the same session that obtained the lock
</li>
</ul>

              <br />
<br />

The server MUST respond with either an &lt;ok&gt; element or an &lt;rpc&#8209;error&gt;.
            
</dd>
<dt>Parameters:</dt>
<dd>
              
<blockquote class="text"><dl>
<dt>target:</dt>
<dd>
      <br />

                    Name of the configuration datastore to unlock.

      <br />
<br />

                      A NETCONF client is not permitted to unlock a
                      configuration datastore that it did not lock.
                  
</dd>
</dl></blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>
      <br />

    If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
    is sent that contains an &lt;ok&gt; element.
            
</dd>
<dt>Negative Response:</dt>
<dd>
      <br />

    An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt;
    if the request cannot be completed for any reason.
            
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;unlock&gt;
      &lt;target&gt;
       &lt;running/&gt;
      &lt;/target&gt;
    &lt;/unlock&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
            
</dd>
</dl></blockquote><p>
            
</p>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7"></a><h3>7.7.&nbsp;
&lt;get&gt;</h3>

<p>
          </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
      <br />

                Retrieve running configuration and device state information.
            
</dd>
<dt>Parameters:</dt>
<dd>
              
<blockquote class="text"><dl>
<dt>filter:</dt>
<dd>
      <br />

        This parameter specifies the portion of the system configuration and state 
        data to retrieve. If this parameter is not present, all the device configuration
        and state information is returned.

      <br />
<br />

        The filter element may optionally contain a 'type' attribute.
        This attribute indicates the type of filtering syntax used within
        the filter element. The default filtering mechanism in NETCONF is
        referred to as subtree filtering and is described in
        <a class='info' href='#subtree'>Section&nbsp;6<span> (</span><span class='info'>Subtree Filtering</span><span>)</span></a>. The value 'subtree'
        explicitly identifies this type of filtering.

      <br />
<br />

        If the NETCONF peer supports <a class='info' href='#xpath'>the :xpath capability<span> (</span><span class='info'>XPath Capability</span><span>)</span></a>,
        the value "xpath" may be used to indicate that the select
				attribute of the filter element
        contains an XPath expression.
                
</dd>
</dl></blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>

      <br />

    If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
    is sent.  The &lt;data&gt; section contains the 
    appropriate subset.
            
</dd>
<dt>Negative Response:</dt>
<dd>

      <br />

    An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt;
    if the request cannot be completed for any reason.
            
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get&gt;
      &lt;filter type="subtree"&gt;
        &lt;top xmlns="http://example.com/schema/1.2/stats"&gt;
          &lt;interfaces&gt;
            &lt;interface&gt;
              &lt;ifName&gt;eth0&lt;/ifName&gt;
            &lt;/interface&gt;
          &lt;/interfaces&gt;
        &lt;/top&gt;
      &lt;/filter&gt;
    &lt;/get&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/stats"&gt;
        &lt;interfaces&gt;
          &lt;interface&gt;
            &lt;ifName&gt;eth0&lt;/ifName&gt;
            &lt;ifInOctets&gt;45621&lt;/ifInOctets&gt;
            &lt;ifOutOctets&gt;774344&lt;/ifOutOctets&gt;
          &lt;/interface&gt;
        &lt;/interfaces&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div>
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.8"></a><h3>7.8.&nbsp;
&lt;close-session&gt;</h3>

<p>
          </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
      <br />

          Request graceful termination of a NETCONF session.

      <br />
<br />

                When a NETCONF server receives a
                &lt;close&#8209;session&gt; request, it will
                gracefully close the session.  The server will release
                any locks and resources associated with the session
                and gracefully close any associated connections.  Any
                NETCONF requests received after a
                &lt;close&#8209;session&gt; request will be ignored.
            
</dd>
<dt>Positive Response:</dt>
<dd>
      <br />

      If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
      is sent that includes an &lt;ok&gt; element.
            
</dd>
<dt>Negative Response:</dt>
<dd>
      <br />

      An &lt;rpc&#8209;error&gt; element is included in the
      &lt;rpc&#8209;reply&gt; if the request cannot be completed for
      any reason.
            
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;close-session/&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.9"></a><h3>7.9.&nbsp;
&lt;kill-session&gt;</h3>

<p>
          </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
      <br />

								Force the termination of a NETCONF session.

      <br />
<br />

                When a NETCONF entity receives a &lt;kill&#8209;session&gt;
                request for an open session, it will abort any operations
                currently in process, release any locks and resources
                associated with the session, and close any
                associated connections.

      <br />
<br />

                If a NETCONF server receives a
                &lt;kill&#8209;session&gt; request while processing a
                confirmed commit (<a class='info' href='#confirmed'>Section&nbsp;8.4<span> (</span><span class='info'>Confirmed Commit Capability</span><span>)</span></a>), it must
                restore the configuration to its state before the
                confirmed commit was issued.

      <br />
<br />

                Otherwise, the &lt;kill&#8209;session&gt; operation
                does not roll back configuration or other device state
                modifications made by the entity holding the lock.
            
</dd>
<dt>Parameters:</dt>
<dd>

              
<blockquote class="text"><dl>
<dt>session-id:</dt>
<dd>
      <br />

         Session identifier of the NETCONF session to be terminated.
         If this value is equal to the current session ID,
         an 'invalid&#8209;value' error is returned.
                
</dd>
</dl></blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>
       <br />

      If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
      is sent that includes an &lt;ok&gt; element.
            
</dd>
<dt>Negative Response:</dt>
<dd>
       <br />

      An &lt;rpc&#8209;error&gt; element is included in the
      &lt;rpc&#8209;reply&gt; if the request cannot be completed for
      any reason.
            
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;kill-session&gt;
      &lt;session-id&gt;4&lt;/session-id&gt;
    &lt;/kill-session&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="capabilities"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Capabilities</h3>

<p>
This section defines a set of capabilities that a client or a server MAY
implement.
Each peer advertises its capabilities by
sending them during an initial capabilities exchange. Each peer
needs to understand only those capabilities that it might use and MUST
ignore any capability received from the other
peer that it does not require or does not understand.
      
</p>
<p>
Additional capabilities can be defined using the template in
<a class='info' href='#capabilityTemplate'>Appendix&nbsp;D<span> (</span><span class='info'>Capability Template</span><span>)</span></a>.
Future capability definitions may be published as standards by
standards bodies or published as proprietary extensions.
      
</p>
<p>
A NETCONF capability is identified with a URI.
The base capabilities are defined using URNs following
the method described in <a class='info' href='#RFC3553'>RFC 3553<span> (</span><span class='info'>Mealling, M., Masinter, L., Hardie, T., and G. Klyne, &ldquo;An IETF URN Sub-namespace for Registered Protocol Parameters,&rdquo; June&nbsp;2003.</span><span>)</span></a> [6].
Capabilities defined in this document have the following format:
        </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:{name}:1.x
</p>
</blockquote><p>
where {name} is the name of the capability. Capabilities are often
referenced in discussions and email using the shorthand :{name}, or
:{name}:{version} if the capability exists in multiple versions. For
example, the foo capability would have the formal name
"urn:ietf:params:netconf:capability:foo:1.0" and be called ":foo". The
shorthand form MUST NOT be used inside the protocol.
      
</p>
<a name="capabilityExchange"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Capabilities Exchange</h3>

<p>
Capabilities are advertised in messages sent 
by each peer during session establishment. When the NETCONF session is
opened, each peer (both client and server) MUST send a &lt;hello&gt;
element containing a list of that peer's capabilities. 
Each peer MUST send at least the base NETCONF capability,
"urn:ietf:params:netconf:base:1.1".  A peer MAY include
capabilities for previous NETCONF versions, to indicate that
it supports multiple protocol versions.
        
</p>
<p>
Both NETCONF peers MUST verify that the other peer has advertised
a common protocol version.  When comparing protocol version capability
URIs, only the base part is used, in the event any parameters are encoded
at the end of the URI string.  If no protocol version capability in
common is found, the NETCONF peer MUST NOT continue the session.
If more than one protocol version URI in common is present, then
the highest numbered (most recent) protocol version MUST be used
by both peers.
        
</p>
<p>
A server sending the &lt;hello&gt; element
MUST include a &lt;session&#8209;id&gt; element containing the
session ID for this NETCONF session.
A client sending the &lt;hello&gt; element MUST NOT
include a &lt;session&#8209;id&gt; element.
        
</p>
<p>
A server receiving a &lt;session&#8209;id&gt; element MUST NOT continue
the NETCONF session.
Similarly, a client that does not receive a &lt;session&#8209;id&gt; element 
in the server's &lt;hello&gt; message MUST NOT continue the NETCONF session.
In both cases, the underlying transport
should be closed.
        
</p>
<p>
In the following example, a server advertises the base NETCONF capability,
one NETCONF capability defined in the base NETCONF document, and one
implementation-specific capability.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;hello xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;capabilities&gt;
    &lt;capability&gt;
      urn:ietf:params:netconf:base:1.1
    &lt;/capability&gt;
    &lt;capability&gt;
      urn:ietf:params:netconf:capability:startup:1.0
    &lt;/capability&gt;
    &lt;capability&gt;
      http://example.net/router/2.3/myfeature
    &lt;/capability&gt;
  &lt;/capabilities&gt;
  &lt;session-id&gt;4&lt;/session-id&gt;
&lt;/hello&gt;
</pre></div>
<p>
Each peer sends its &lt;hello&gt; element simultaneously as soon as the
connection is open. A peer MUST NOT wait to receive the capability set
from the other side before sending its own set.
        
</p>
<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Writable-Running Capability</h3>

<a name="anchor37"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.1"></a><h3>8.2.1.&nbsp;
Description</h3>

<p>
The :writable-running capability indicates that the device
supports direct writes to the &lt;running&gt; configuration datastore. In other
words, the device supports edit-config and
copy-config operations where the &lt;running&gt; configuration is the
target.
</p>
<a name="anchor38"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.2"></a><h3>8.2.2.&nbsp;
Dependencies</h3>

<p>None.
</p>
<a name="anchor39"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.3"></a><h3>8.2.3.&nbsp;
Capability Identifier</h3>

<p>The :writable-running capability is identified by the
            following capability string:
            </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:writable-running:1.0
</p>
</blockquote><p>
          
</p>
<a name="anchor40"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.4"></a><h3>8.2.4.&nbsp;
New Operations</h3>

<p>None.
</p>
<a name="anchor41"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.5"></a><h3>8.2.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor42"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.5.1"></a><h3>8.2.5.1.&nbsp;
&lt;edit&#8209;config&gt;</h3>

<p>
            The :writable-running capability modifies the
            &lt;edit&#8209;config&gt; operation to accept the
            &lt;running&gt; element as a &lt;target&gt;.
            
</p>
<a name="anchor43"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.5.2"></a><h3>8.2.5.2.&nbsp;
&lt;copy&#8209;config&gt;</h3>

<p>
            The :writable-running capability modifies the
            &lt;copy&#8209;config&gt; operation to accept the
            &lt;running&gt; element as a &lt;target&gt;.
            
</p>
<a name="candidate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
Candidate Configuration Capability</h3>

<a name="anchor44"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.1"></a><h3>8.3.1.&nbsp;
Description</h3>

<p>
The candidate configuration capability, :candidate, indicates that
the device supports a candidate configuration datastore, which is used to hold
configuration data that can be manipulated without impacting the device's
current configuration.  The candidate configuration is a full
configuration data set that serves as a work place for creating and
manipulating configuration data.  Additions, deletions, and changes
may be made to this data to construct the desired configuration
data. A &lt;commit&gt; operation may be performed
at any time that causes the device's running configuration to be
set to the value of the candidate configuration.
          
</p>
<p>
            The &lt;commit&gt; operation effectively sets the running
            configuration to the current contents of the candidate configuration.
            While it could be modeled as a simple copy, it is done as a distinct
            operation for a number of reasons.  In keeping high-level concepts
            as first class operations, we allow developers to see more clearly
            both what the client is requesting and what the server must perform.
            This keeps the intentions more obvious, the special cases less complex,
            and the interactions between operations more straightforward.  For
            example, the <a class='info' href='#confirmed'>:confirmed-commit:1.1 capability<span> (</span><span class='info'>Confirmed Commit Capability</span><span>)</span></a>
            would make no sense as a "copy confirmed" operation.
          
</p>
<p>
   The candidate configuration may be shared among multiple
   sessions. Unless a client has specific information that the
   candidate configuration is not shared, it must assume
   that other sessions may be able to
   modify the candidate configuration at the same time. It is
   therefore prudent for a client to lock the candidate configuration
   before modifying it.
            
</p>
<p>
   The client can discard any uncommitted changes to the candidate
   configuration by executing the &lt;discard&#8209;changes&gt; operation.  This
   operation reverts the contents of the candidate configuration
   to the contents of the running configuration.
            
</p>
<a name="anchor45"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.2"></a><h3>8.3.2.&nbsp;
Dependencies</h3>

<p>None.
</p>
<a name="anchor46"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.3"></a><h3>8.3.3.&nbsp;
Capability Identifier</h3>

<p> The :candidate capability is identified by the
            following capability string:
            </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:candidate:1.0
</p>
</blockquote><p>
          
</p>
<a name="anchor47"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.4"></a><h3>8.3.4.&nbsp;
New Operations</h3>

<a name="anchor48"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.4.1"></a><h3>8.3.4.1.&nbsp;
&lt;commit&gt;</h3>

<p>
            </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
              
<blockquote class="text">
<p>
When a candidate configuration's content is complete, the
configuration data can be committed, publishing the data set to the
rest of the device and requesting the device to conform to the
behavior described in the new configuration.
                
</p>
<p>
To commit the candidate configuration as the device's new current
configuration, use the &lt;commit&gt; operation.
                
</p>
<p>
The &lt;commit&gt; operation instructs the device to implement the
configuration data contained in the candidate configuration.
If the device is unable to commit all of the changes in the candidate
configuration datastore, then the running configuration MUST
remain unchanged.  If the device does succeed in committing, the
running configuration MUST be updated with the contents of the
candidate configuration.
              
</p>
<p>
If the running or candidate configuration is currently locked
by a different session, the  &lt;commit&gt; operation
MUST fail with an &lt;error&#8209;tag&gt; value of 'in&#8209;use'.
                
</p>
<p>
If the system does not have the :candidate
capability, the &lt;commit&gt; operation is not available.
              
</p>
</blockquote>
            
</dd>
<dt>Positive Response:</dt>
<dd>
              
<blockquote class="text">
<p>
    If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
    is sent that contains an &lt;ok&gt; element.
              
</p>
</blockquote>
            
</dd>
<dt>Negative Response:</dt>
<dd>
              
<blockquote class="text">
<p>
    An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt;
    if the request cannot be completed for any reason.
              
</p>
</blockquote>
            
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit/&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="discard-changes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.4.2"></a><h3>8.3.4.2.&nbsp;
&lt;discard-changes&gt;</h3>

<p>
If the client decides that the candidate configuration should not be
committed, the &lt;discard&#8209;changes&gt; operation can be used to revert the
candidate configuration to the current running configuration.
              </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;discard-changes/&gt;
  &lt;/rpc&gt;
</pre></div><p>

This operation discards any uncommitted changes by resetting the
candidate configuration with the content of the running configuration.
          
</p>
<a name="anchor49"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.5"></a><h3>8.3.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor50"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.5.1"></a><h3>8.3.5.1.&nbsp;
&lt;get&#8209;config&gt;, &lt;edit&#8209;config&gt;, &lt;copy&#8209;config&gt;, and &lt;validate&gt;</h3>

<p>
              The candidate configuration can be used as a source or target of any
              &lt;get&#8209;config&gt;, &lt;edit&#8209;config&gt;, &lt;copy&#8209;config&gt;, or &lt;validate&gt;
              operation as a &lt;source&gt; or &lt;target&gt; parameter.
              The &lt;candidate&gt; element is used to indicate the
              candidate configuration:
              </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt; &lt;!-- any NETCONF operation --&gt;
      &lt;source&gt;
        &lt;candidate/&gt;
      &lt;/source&gt;
    &lt;/get-config&gt;
  &lt;/rpc&gt;
</pre></div><p>

            
</p>
<a name="anchor51"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3.5.2"></a><h3>8.3.5.2.&nbsp;
&lt;lock&gt; and &lt;unlock&gt;</h3>

<p>
The candidate configuration can be locked using the &lt;lock&gt;
operation with the &lt;candidate&gt; element as the &lt;target&gt; parameter:
              </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;
</pre></div><p>

Similarly, the candidate configuration is unlocked using
the &lt;candidate&gt; element as the &lt;target&gt; parameter:
              </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;unlock&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
    &lt;/unlock&gt;
  &lt;/rpc&gt;
</pre></div><p>

            
</p>
<p>
When a client fails with outstanding changes to the candidate
configuration, recovery can be difficult. To facilitate easy recovery,
any outstanding changes are discarded when the lock is released,
whether explicitly with the &lt;unlock&gt; operation or implicitly from
session failure.
            
</p>
<a name="confirmed"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4"></a><h3>8.4.&nbsp;
Confirmed Commit Capability</h3>

<a name="anchor52"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4.1"></a><h3>8.4.1.&nbsp;
Description</h3>

<p>
The :confirmed-commit:1.1 capability indicates that the server will
support the &lt;cancel&#8209;commit&gt; operation and the
&lt;confirmed&gt;, &lt;confirm&#8209;timeout&gt;, &lt;persist&gt;, and
&lt;persist&#8209;id&gt; parameters for the &lt;commit&gt;
operation. See <a class='info' href='#candidate'>Section&nbsp;8.3<span> (</span><span class='info'>Candidate Configuration Capability</span><span>)</span></a> for further details on the
&lt;commit&gt; operation.

</p>
<p>
  A confirmed commit operation MUST be reverted if a confirming commit
  is not issued within 600 seconds (10 minutes).  The confirming
  commit is a commit operation without the &lt;confirmed&gt;
  parameter.  The timeout period can be adjusted with the
  &lt;confirm&#8209;timeout&gt; parameter.  If a follow-up confirmed
  commit operation is issued before the timer expires, the timer is
  reset to the new value (600 seconds by default).  Both the
  confirming commit and a follow-up confirmed commit operation MAY
  introduce additional changes to the configuration,

</p>
<p>
  If the &lt;persist&gt; element is not given in the confirmed commit
  operation, any follow-up commit and the confirming commit MUST be
  issued on the same session that issued the confirmed commit.  If the
  &lt;persist&gt; element is given in the confirmed commit operation,
  a follow-up commit and the confirming commit can be given on any
  session, and they MUST include a &lt;persist&#8209;id&gt; element
  with a value equal to the given value of the &lt;persist&gt;
  element.

</p>
<p>
If the server also advertises the :startup capability, a
&lt;copy&#8209;config&gt; from running to startup is also necessary to
save the changes to startup.

</p>
<p>
If the session issuing the confirmed commit is terminated for any
reason before the confirm timeout expires, the server MUST restore the
configuration to its state before the confirmed commit was issued,
unless the confirmed commit also included a &lt;persist&gt; element.

</p>
<p>
If the device reboots for any reason before the confirm timeout expires,
the server MUST restore the configuration to its state before the 
confirmed commit was issued.

</p>
<p>
If a confirming commit is not issued, the device will revert its
configuration to the state prior to the issuance of the confirmed
commit.  To cancel a confirmed commit and revert changes without
waiting for the confirm timeout to expire, the client can explicitly
restore the configuration to its state before the confirmed commit was
issued, by using the &lt;cancel&#8209;commit&gt; operation.

</p>
<p>
For shared configurations, this feature can cause other
configuration changes (for example, via other NETCONF sessions) to be
inadvertently altered or removed, unless the configuration locking
feature is used (in other words, the lock is obtained before the edit-config
operation is started). Therefore, it is strongly suggested that in
order to use this feature with shared configuration datastores,
configuration locking should also be used.

</p>
<p>
						 Version 1.0 of this capability was defined in <a class='info' href='#RFC4741'>[16]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>.  The current version is 1.1, and is
						 defined in this document.  It extends version 1.0 by
						 adding a new operation, &lt;cancel&#8209;commit&gt;, and
						 two new optional parameters, &lt;persist&gt; and
						 &lt;persist&#8209;id&gt;. For backwards compatibility
						 with old clients, servers confirming to this
						 specification MAY advertise version 1.0 in addition to
						 version 1.1.
					 
</p>
<a name="anchor53"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4.2"></a><h3>8.4.2.&nbsp;
Dependencies</h3>

<p>The :confirmed-commit:1.1 capability is only relevant if the :candidate
capability is also supported.
</p>
<a name="anchor54"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4.3"></a><h3>8.4.3.&nbsp;
Capability Identifier</h3>

<p> The :confirmed-commit:1.1 capability is identified by the
            following capability string:
            </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:confirmed-commit:1.1
</p>
</blockquote><p>
          
</p>
<a name="anchor55"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4.4"></a><h3>8.4.4.&nbsp;
New Operations</h3>

<a name="anchor56"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4.4.1"></a><h3>8.4.4.1.&nbsp;
&lt;cancel-commit&gt;</h3>

<p>
							</p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
									
<blockquote class="text">
<p>
											Cancels an ongoing confirmed commit.  If the
											&lt;persist&#8209;id&gt; parameter is not given, the
											&lt;cancel&#8209;commit&gt; operation MUST be issued
											on the same session that issued the confirmed commit.
										
</p>
</blockquote>
								
</dd>
<dt>Parameters:</dt>
<dd>
									
<blockquote class="text"><dl>
<dt>persist-id:</dt>
<dd>
											
<blockquote class="text">
<p>
													Cancels a persistent confirmed commit.  The
													value MUST be equal to the value given in
													the &lt;persist&gt; parameter to the commit
													operation.  If the value does not match, the
													operation fails with an "invalid-value"
													error.
												
</p>
</blockquote>
										
</dd>
</dl></blockquote>
								
</dd>
<dt>Positive Response:</dt>
<dd>
									
<blockquote class="text">
<p>
    If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
    is sent that contains an &lt;ok&gt; element.
										
</p>
</blockquote>
								
</dd>
<dt>Negative Response:</dt>
<dd>
									
<blockquote class="text">
<p>
											An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt;
											if the request cannot be completed for any reason.
										
</p>
</blockquote>
								
</dd>
<dt>Example:</dt>
<dd>
									<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;confirmed/&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;

  &lt;rpc message-id="102"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;cancel-commit/&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="102"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor57"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4.5"></a><h3>8.4.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor58"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4.5.1"></a><h3>8.4.5.1.&nbsp;
&lt;commit&gt;</h3>

<p>The :confirmed-commit:1.1 capability allows 4 additional
            parameters to the &lt;commit&gt; operation.
</p>
<p>
            </p>
<blockquote class="text"><dl>
<dt>Parameters:</dt>
<dd>
              
<blockquote class="text"><dl>
<dt>confirmed:</dt>
<dd>
                  
<blockquote class="text">
<p>
                      Perform a confirmed commit operation.
                    
</p>
</blockquote>
                
</dd>
<dt>confirm-timeout:</dt>
<dd>
                  
<blockquote class="text">
<p>
                      Timeout period for confirmed commit, in seconds.
                      If unspecified, the confirm timeout defaults to
                      600 seconds.
                    
</p>
</blockquote>
                
</dd>
<dt>persist:</dt>
<dd>
                  
<blockquote class="text">
<p>
											Make the confirmed commit survive a session
											termination, and set a token on the ongoing
											confirmed commit.
										
</p>
</blockquote>
								
</dd>
<dt>persist-id:</dt>
<dd>
                  
<blockquote class="text">
<p>
											Used to issue a follow-up confirmed commit or a
											confirming commit from any session, with the
											token from the previous commit operation.
										
</p>
</blockquote>
								
</dd>
</dl></blockquote>
            
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;confirmed/&gt;
      &lt;confirm-timeout&gt;120&lt;/confirm-timeout&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
             
</dd>
<dt>Example:</dt>
<dd>
              <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;!-- start a persistent confirmed-commit --&gt;
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;confirmed/&gt;
      &lt;persist&gt;IQ,d4668&lt;/persist&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;

  &lt;!-- confirm the persistent confirmed-commit,
       possibly from another session --&gt;
  &lt;rpc message-id="102"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;persist-id&gt;IQ,d4668&lt;/persist-id&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="102"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;


</pre></div>
             
</dd>
</dl></blockquote><p>
						
</p>
<a name="rollback-on-error"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5"></a><h3>8.5.&nbsp;
Rollback on Error Capability</h3>

<a name="anchor59"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5.1"></a><h3>8.5.1.&nbsp;
Description</h3>

<p>
            This capability indicates that the server will support the
            'rollback&#8209;on&#8209;error' value in the
            &lt;error&#8209;option&gt; parameter to the
            &lt;edit&#8209;config&gt; operation.
          
</p>
<p>
            For shared configurations, this feature can cause other
            configuration changes (for example, via other NETCONF
            sessions) to be inadvertently altered or removed, unless
            the configuration locking feature is used (in other words,
            the lock is obtained before the edit-config operation is
            started). Therefore, it is strongly suggested that in
            order to use this feature with shared configuration
            datastores, configuration locking also be used.
          
</p>
<a name="anchor60"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5.2"></a><h3>8.5.2.&nbsp;
Dependencies</h3>

<p>None
</p>
<a name="anchor61"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5.3"></a><h3>8.5.3.&nbsp;
Capability Identifier</h3>

<p> The :rollback-on-error capability is identified by the
            following capability string:
            </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:rollback-on-error:1.0
</p>
</blockquote><p>
          
</p>
<a name="anchor62"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5.4"></a><h3>8.5.4.&nbsp;
New Operations</h3>

<p>None.
</p>
<a name="anchor63"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5.5"></a><h3>8.5.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor64"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5.5.1"></a><h3>8.5.5.1.&nbsp;
&lt;edit&#8209;config&gt;</h3>

<p>The :rollback-on-error capability allows the
            'rollback&#8209;on&#8209;error' value to the
            &lt;error&#8209;option&gt; parameter on the
            &lt;edit&#8209;config&gt; operation.
</p>
<p>
              </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;error-option&gt;rollback-on-error&lt;/error-option&gt;
      &lt;config&gt;
        &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
          &lt;interface&gt;
            &lt;name&gt;Ethernet0/0&lt;/name&gt;
            &lt;mtu&gt;100000&lt;/mtu&gt;
          &lt;/interface&gt;
        &lt;/top&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

             
</p>
<a name="validate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6"></a><h3>8.6.&nbsp;
Validate Capability</h3>

<a name="anchor65"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6.1"></a><h3>8.6.1.&nbsp;
Description</h3>

<p>
             Validation consists of checking a complete
             configuration for syntactical and semantic errors before
             applying the configuration to the device.
           
</p>
<p>
 If this capability is advertised, the device supports the
 &lt;validate&gt; protocol operation and checks at least for syntax
 errors. In addition, this capability supports the test-option parameter to the
 &lt;edit&#8209;config&gt; operation and, when it is provided, checks at
 least for syntax errors.
           
</p>
<p>
						 Version 1.0 of this capability was defined in <a class='info' href='#RFC4741'>[16]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>.  The current version is 1.1, and is
						 defined in this document.  It extends version 1.0 by
						 adding a new value, "test-only", to the test-option
						 parameter of the edit-config operation.  For backwards
						 compatibility with old clients, servers confirming to this
						 specification MAY advertise version 1.0 in addition to
						 version 1.1.
					 
</p>
<a name="anchor66"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6.2"></a><h3>8.6.2.&nbsp;
Dependencies</h3>

<p>None.
</p>
<a name="anchor67"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6.3"></a><h3>8.6.3.&nbsp;
Capability Identifier</h3>

<p>The :validate:1.1 capability is identified by the
           following capability string:
             </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:validate:1.1
</p>
</blockquote><p>
           
</p>
<a name="anchor68"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6.4"></a><h3>8.6.4.&nbsp;
New Operations</h3>

<a name="anchor69"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6.4.1"></a><h3>8.6.4.1.&nbsp;
&lt;validate&gt;</h3>

<p>
           </p>
<blockquote class="text"><dl>
<dt>Description:</dt>
<dd>
               
<blockquote class="text">
<p>
                 This protocol operation validates the contents of the 
                 specified configuration.
               
</p>
</blockquote>
             
</dd>
<dt>Parameters:</dt>
<dd>
               
<blockquote class="text"><dl>
<dt>source:</dt>
<dd>
                   
<blockquote class="text">
<p>
     Name of the configuration datastore to validate, such as
     &lt;candidate&gt;, or the &lt;config&gt; element containing 
     the complete configuration to validate.  
                   
</p>
</blockquote>
                 
</dd>
</dl></blockquote>
             
</dd>
<dt>Positive Response:</dt>
<dd>
               
<blockquote class="text">
<p>
     If the device was able to satisfy the request, an &lt;rpc&#8209;reply&gt;
     is sent that contains an &lt;ok&gt; element.
               
</p>
</blockquote>
             
</dd>
<dt>Negative Response:</dt>
<dd>
               
<blockquote class="text">
<p>
     An &lt;rpc&#8209;error&gt; element is included in the &lt;rpc&#8209;reply&gt;
     if the request cannot be completed for any reason.
               
</p>
<p>
     A validate operation can fail for any of the following reasons:
                 </p>
<ul class="text">
<li>Syntax errors
</li>
<li>Missing parameters
</li>
<li>References to undefined configuration data
</li>
</ul>
               

</blockquote>
             
</dd>
<dt>Example:</dt>
<dd>
               <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;validate&gt;
      &lt;source&gt;
        &lt;candidate/&gt;
      &lt;/source&gt;
    &lt;/validate&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;ok/&gt;
  &lt;/rpc-reply&gt;
</pre></div>
             
</dd>
</dl></blockquote><p>
         
</p>
<a name="anchor70"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6.5"></a><h3>8.6.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor71"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6.5.1"></a><h3>8.6.5.1.&nbsp;
&lt;edit&#8209;config&gt;</h3>

<p>The :validate:1.1 capability modifies the
             &lt;edit&#8209;config&gt; operation to accept the
             &lt;test&#8209;option&gt; parameter.
</p>
<a name="startup"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7"></a><h3>8.7.&nbsp;
Distinct Startup Capability</h3>

<a name="anchor72"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7.1"></a><h3>8.7.1.&nbsp;
Description</h3>

<p>
     The device supports separate running and startup configuration
     datastores.  The startup configuration is loaded by the device
     when it boots.  Operations that affect the running
     configuration will not be automatically copied to the startup
     configuration.  An explicit &lt;copy&#8209;config&gt; operation
     from the &lt;running&gt; to the &lt;startup&gt; must be invoked
     to update the startup configuration to the current contents of
     the running configuration.  NETCONF protocol operations refer to
     the startup datastore using the &lt;startup&gt; element.
           
</p>
<a name="anchor73"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7.2"></a><h3>8.7.2.&nbsp;
Dependencies</h3>

<p>None.
</p>
<a name="anchor74"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7.3"></a><h3>8.7.3.&nbsp;
Capability Identifier</h3>

<p>The :startup capability is identified by the
             following capability string:
             </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:startup:1.0
</p>
</blockquote><p>
           
</p>
<a name="anchor75"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7.4"></a><h3>8.7.4.&nbsp;
New Operations</h3>

<p>None.
</p>
<a name="anchor76"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7.5"></a><h3>8.7.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor77"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7.5.1"></a><h3>8.7.5.1.&nbsp;
General</h3>

<p>
               The :startup capability adds the &lt;startup/&gt;
               configuration datastore to arguments of several
               NETCONF operations.  The server MUST support the
               following additional values:
						 
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="30%"><col align="left" width="40%"><col align="left">
<tr><th align="left">Operation</th><th align="left">Parameters</th><th align="left">Notes</th></tr>
<tr>
<td align="left">&lt;get&#8209;config&gt;</td>
<td align="left">&lt;source&gt;</td>
<td align="left"> </td>
</tr>
<tr>
<td align="left">&lt;copy&#8209;config&gt;</td>
<td align="left">&lt;source&gt; &lt;target&gt;</td>
<td align="left"> </td>
</tr>
<tr>
<td align="left">&lt;lock&gt;</td>
<td align="left">&lt;target&gt;</td>
<td align="left"> </td>
</tr>
<tr>
<td align="left">&lt;unlock&gt;</td>
<td align="left">&lt;target&gt;</td>
<td align="left"> </td>
</tr>
<tr>
<td align="left">&lt;validate&gt;</td>
<td align="left">&lt;source&gt;</td>
<td align="left">If :validate:1.1 is advertised</td>
</tr>
<tr>
<td align="left">&lt;delete-config&gt;</td>
<td align="left">&lt;target&gt;</td>
<td align="left">Resets the device to its factory defaults</td>
</tr>
</table>
<br clear="all" />

<p>
               To save the startup configuration, use the copy-config
               operation to copy the &lt;running&gt; configuration
               datastore to the &lt;startup&gt; configuration datastore.
               </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;copy-config&gt;
      &lt;target&gt;
        &lt;startup/&gt;
      &lt;/target&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
    &lt;/copy-config&gt;
  &lt;/rpc&gt;
</pre></div><p>

             
</p>
<a name="url"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8"></a><h3>8.8.&nbsp;
URL Capability</h3>

<a name="anchor78"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.1"></a><h3>8.8.1.&nbsp;
Description</h3>

<p>
             The NETCONF peer has the ability to accept the &lt;url&gt;
             element in &lt;source&gt; and &lt;target&gt;
             parameters. The capability is further identified by
             URL arguments indicating the URL schemes supported.
           
</p>
<a name="anchor79"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.2"></a><h3>8.8.2.&nbsp;
Dependencies</h3>

<p>None.
</p>
<a name="anchor80"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.3"></a><h3>8.8.3.&nbsp;
Capability Identifier</h3>

<p>The :url capability is identified by the
             following capability string:
           
</p>
<p>urn:ietf:params:netconf:capability:url:1.0?scheme={name,...}
</p>
<p>
             The :url capability URI MUST contain a "scheme" argument
             assigned a comma-separated list of scheme names indicating
             which schemes the NETCONF peer supports. For example:
             </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:url:1.0?scheme=http,ftp,file
</p>
</blockquote><p>
           
</p>
<a name="anchor81"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.4"></a><h3>8.8.4.&nbsp;
New Operations</h3>

<p>None.
</p>
<a name="anchor82"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.5"></a><h3>8.8.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor83"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.5.1"></a><h3>8.8.5.1.&nbsp;
&lt;edit&#8209;config&gt;</h3>

<p>The :url capability modifies the
             &lt;edit&#8209;config&gt; operation to accept the
             &lt;url&gt; element as an alternative to the &lt;config&gt; parameter.
             
</p>
<a name="anchor84"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.5.2"></a><h3>8.8.5.2.&nbsp;
&lt;copy&#8209;config&gt;</h3>

<p>The :url capability modifies the
             &lt;copy&#8209;config&gt; operation to accept the
             &lt;url&gt; element as the value of
             the &lt;source&gt; and the &lt;target&gt; parameters.
</p>
<p>
							 The file that the url refers to contains the
							 complete datastore, encoded in XML under the element
							 'config' in the
							 'urn:ietf:params:xml:ns:netconf:base:1.0' namespace.
						 
</p>
<a name="anchor85"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.5.3"></a><h3>8.8.5.3.&nbsp;
&lt;delete&#8209;config&gt;</h3>

<p>The :url capability modifies the
             &lt;delete&#8209;config&gt; operation to accept the
             &lt;url&gt; element as the value of
             the &lt;target&gt; parameters.
             
</p>
<a name="anchor86"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8.5.4"></a><h3>8.8.5.4.&nbsp;
&lt;validate&gt;</h3>

<p>The :url capability modifies the
             &lt;validate&gt; operation to accept the
             &lt;url&gt; element as the value of
             the &lt;source&gt; parameter.
</p>
<a name="xpath"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.9"></a><h3>8.9.&nbsp;
XPath Capability</h3>

<a name="anchor87"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.9.1"></a><h3>8.9.1.&nbsp;
Description</h3>

<p>
             The XPath capability indicates that the NETCONF
             peer supports the use of XPath expressions in the
             &lt;filter&gt; element.
             XPath is described in <a class='info' href='#W3C.REC-xpath-19991116'>[2]<span> (</span><span class='info'>DeRose, S. and J. Clark, &ldquo;XML Path Language (XPath) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a>.
           
</p>
<p>
             The data model used in the XPath expression is the same
             as that used in XPath 1.0 <a class='info' href='#W3C.REC-xpath-19991116'>[2]<span> (</span><span class='info'>DeRose, S. and J. Clark, &ldquo;XML Path Language (XPath) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a>, with the same
             extension for root node children as used by XSLT 1.0
             <a class='info' href='#W3C.REC-xslt-19991116'>[11]<span> (</span><span class='info'>Clark, J., &ldquo;XSL Transformations (XSLT) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a> (section 3.1).
             Specifically, it means that the root node may have any
             number of element nodes as its children.
					 
</p>
<p>The XPath expression is evaluated in the following context:
					 </p>
<ul class="text">
<li>The set of namespace declarations are those in
						 scope on the filter element.
</li>
<li>The set of variable bindings is defined by the data
						 model.  If no such variable bindings are defined, the set
						 is empty.
</li>
<li>The function library is the core function library,
						 plus any functions defined by the data model.
</li>
<li>The context node is the root node.
</li>
</ul><p>
					 
</p>
<p>
             The XPath expression MUST return a node set.  If it does
             not return a node set, the operation fails with an
             "invalid-value" error.
           
</p>
<p>
						 The response message contains the subtrees selected by
						 the filter expression.  For each such subtree, the path
						 from the data model root node down to the subtree,
						 including any elements or attributes necessary to
						 uniquely identify the subtree, are included in the
						 response message.
					 
</p>
<a name="anchor88"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.9.2"></a><h3>8.9.2.&nbsp;
Dependencies</h3>

<p>None.
</p>
<a name="anchor89"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.9.3"></a><h3>8.9.3.&nbsp;
Capability Identifier</h3>

<p>The :xpath capability is identified by the
             following capability string:
             </p>
<blockquote class="text">
<p>urn:ietf:params:netconf:capability:xpath:1.0
</p>
</blockquote><p>
           
</p>
<a name="anchor90"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.9.4"></a><h3>8.9.4.&nbsp;
New Operations</h3>

<p>None.
</p>
<a name="anchor91"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.9.5"></a><h3>8.9.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor92"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.9.5.1"></a><h3>8.9.5.1.&nbsp;
&lt;get&#8209;config&gt; and &lt;get&gt;</h3>

<p>
    The :xpath capability modifies the &lt;get&gt; and &lt;get&#8209;config&gt; operations
   to accept the value "xpath" in the type attribute of the filter
   element.  When the type attribute is set to "xpath", a select
   attribute MUST be present on the filter element.  The select
   attribute will be treated as an XPath expression and used to filter
   the returned data.  The filter element itself MUST be empty in this
   case.
             
</p>
<p>
   The XPath result for the select expression MUST be a node-set.
   Each node in the node-set MUST correspond to a node in
   underlying data model.  In order to properly identify
   each node, the following encoding rules are defined:
   </p>
<ul class="text">
<li>All ancestor nodes of the result node MUST be encoded
        first, so the &lt;data&gt; element returned in the reply
        contains only fully-specified sub-trees, according
        to the underlying data model.
</li>
<li>If any sibling or ancestor nodes of the result node are needed to
        identify a particular instance within a conceptual data structure,
        then these nodes MUST also be encoded in the response.
     
</li>
</ul><p>
             
</p>
<p>
               For example:
               </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;get-config&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
      &lt;!-- get the user named fred --&gt;
      &lt;filter xmlns:t="http://example.com/schema/1.2/config"
              type="xpath"
              select="/t:top/t:users/t:user[t:name='fred']"/&gt;
     &lt;/get-config&gt;
  &lt;/rpc&gt;

  &lt;rpc-reply message-id="101"
             xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;data&gt;
      &lt;top xmlns="http://example.com/schema/1.2/config"&gt;
        &lt;users&gt;
          &lt;user&gt;
            &lt;name&gt;fred&lt;/name&gt;
            &lt;company-info&gt;
              &lt;id&gt;2&lt;/id&gt;
            &lt;/company-info&gt;
          &lt;/user&gt;
        &lt;/users&gt;
      &lt;/top&gt;
    &lt;/data&gt;
  &lt;/rpc-reply&gt;
</pre></div><p>

             
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>
This document does not specify an authorization scheme, as 
such a scheme should be tied to a meta-data model or a
data model.  Implementors SHOULD provide a comprehensive
authorization scheme with NETCONF.

</p>
<p>
Authorization of individual users via the NETCONF server may or may
not map 1:1 to other interfaces.  First, the
data models may be incompatible.  Second, it may be desirable to
authorize based on mechanisms available in the secure transport
layer (SSH, BEEP, etc).

</p>
<p>
In addition, operations on configurations may have unintended
consequences if those operations are also not guarded by the global
lock on the files or objects being operated upon.  For instance, a
partially complete access list could be committed from a candidate
configuration unbeknownst to the owner of the lock of the candidate
configuration, leading to either an insecure or inaccessible device
if the lock on the candidate configuration does not also apply to
the &lt;copy&#8209;config&gt; operation when applied to it.

</p>
<p>
 Configuration information is by its very nature sensitive.  Its
 transmission in the clear and without integrity checking leaves devices
 open to classic eavesdropping attacks.  Configuration
 information often contains passwords, user names, service
 descriptions, and topological information, all of which are
 sensitive.  Because of this, this protocol should be implemented
 carefully with adequate attention to all manner of attack one might
 expect to experience with other management interfaces.
 
</p>
<p>
 The protocol, therefore, must minimally support options for both
 confidentiality and authentication.  It is anticipated that the
 underlying protocol (SSH, BEEP, etc) will provide for both
 confidentiality and authentication, as is required.  It is further
 expected that the identity of each end of a NETCONF session will be
 available to the other in order to determine authorization for any
 given request.  One could also easily envision additional information,
 such as transport and encryption methods, being made available for purposes of
 authorization.  NETCONF itself provide no means to re-authenticate, much
 less authenticate.  All such actions occur at lower layers. 
 
</p>
<p>
 Different environments may well allow different rights prior to and
 then after authentication.  Thus, an authorization model is not
 specified in this document.  When an operation is not properly
 authorized, a simple "access denied" is sufficient.
 Note that authorization information may be exchanged in the form of
 configuration information, which is all the more reason to ensure the
 security of the connection.
 
</p>
<p>
 That having been said, it is important to recognize that some
 operations are clearly more sensitive by nature than others.  For
 instance, &lt;copy&#8209;config&gt; to the startup or running
 configurations is clearly not a normal provisioning operation,
 whereas &lt;edit&#8209;config&gt; is.
Such global operations MUST disallow the changing of information
that an individual does not have authorization to perform.
For example, if a user A is not allowed to configure an IP
address on an interface but user B has configured an IP address
on an interface in the &lt;candidate&gt; configuration,
user A must not be allowed to commit the &lt;candidate&gt;
configuration.
 
</p>
<p>
 Similarly, just because someone
 says "go write a configuration through the URL capability at a
 particular place", this does not mean that an element should do it without
 proper authorization.

</p>
<p>
     The &lt;lock&gt; operation will demonstrate that NETCONF
     is intended for use by systems that have at least some trust of
     the administrator.  As specified in this document, it is possible
     to lock portions of a configuration that a principal might not
     otherwise have access to.  After all, the entire configuration is
     locked.  To mitigate this problem, there are two approaches.  It
     is possible to kill another NETCONF session programmatically from
     within NETCONF if one knows the session identifier of the
     offending session.  The other possible way to break a lock is to
     provide an function within the device's native user interface.
These two mechanisms suffer from a race condition
that may be ameliorated by removing the offending user from an AAA
server.  However, such a solution is not useful in all deployment
scenarios, such as those where SSH public/private key pairs are used.

</p>
<a name="anchor93"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<a name="anchor94"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
NETCONF XML Namespace</h3>

<p>
This document registers a URI for the NETCONF XML namespace in the
<a class='info' href='#RFC3688'>IETF XML registry<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a> [7].
       
</p>
<p>
IANA is requested to update the allocation of the following
URI to reference this document when it is published as an
RFC.
       
</p>
<p>
URI: urn:ietf:params:xml:ns:netconf:base:1.0
       
</p>
<p>
Registrant Contact: The IESG.
       
</p>
<p>
XML: N/A, the requested URI is an XML namespace.
       
</p>
<a name="anchor95"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
NETCONF XML Schema</h3>

<p>
This document registers a URI for the NETCONF XML schema in the
<a class='info' href='#RFC3688'>IETF XML registry<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a> [7].
       
</p>
<p>
IANA is requested to update the allocation of the following
URI to reference this document when it is published as an
RFC.
       
</p>
<p>
URI: urn:ietf:params:xml:schema:netconf
       
</p>
<p>
Registrant Contact: The IESG.
       
</p>
<p>
XML: <a class='info' href='#xsdschema'>Appendix&nbsp;B<span> (</span><span class='info'>XML Schema for NETCONF Messages Layer</span><span>)</span></a> of this document.
       
</p>
<a name="anchor96"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.3"></a><h3>10.3.&nbsp;
NETCONF YANG Module</h3>

<p>
         This document registers a YANG module in the YANG Module
         Names registry <a class='info' href='#I-D.ietf-netmod-yang'>[9]<span> (</span><span class='info'>Bjorklund, M., &ldquo;YANG - A data modeling language for the Network Configuration Protocol (NETCONF),&rdquo; June&nbsp;2010.</span><span>)</span></a>.
  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  name:        ietf-netconf
  namespace:   urn:ietf:params:xml:ns:netconf:base:1.0
  prefix:      nc
  reference:   RFCXXXX
</pre></div><p>

       
</p>
<a name="anchor97"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.4"></a><h3>10.4.&nbsp;
NETCONF Capability URNs</h3>

<p>
IANA has created and will maintain a registry "Network Configuration
Protocol (NETCONF) Capability URNs" that allocates NETCONF capability
identifiers.  Additions to the registry require IETF Standards Action.
       
</p>
<p>
IANA is requested to update the allocations of the following
capabilities to reference this document when it is published as an
RFC.
       
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="30%"><col align="left">
<tr><th align="left">Index</th><th align="left">Capability Identifier</th></tr>
<tr>
<td align="left">:writable-running</td>
<td align="left">urn:ietf:params:netconf:capability:writable-running:1.0</td>
</tr>
<tr>
<td align="left">:candidate</td>
<td align="left">urn:ietf:params:netconf:capability:candidate:1.0</td>
</tr>
<tr>
<td align="left">:rollback-on-error</td>
<td align="left">urn:ietf:params:netconf:capability:rollback-on-error:1.0</td>
</tr>
<tr>
<td align="left">:startup</td>
<td align="left">urn:ietf:params:netconf:capability:startup:1.0</td>
</tr>
<tr>
<td align="left">:url</td>
<td align="left">urn:ietf:params:netconf:capability:url:1.0</td>
</tr>
<tr>
<td align="left">:xpath</td>
<td align="left">urn:ietf:params:netconf:capability:xpath:1.0</td>
</tr>
</table>
<br clear="all" />

<p>
IANA is requested to add the following capabilities to the registry:
         
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="30%"><col align="left">
<tr><th align="left">Index</th><th align="left">Capability Identifier</th></tr>
<tr>
<td align="left">:base:1.1</td>
<td align="left">urn:ietf:params:netconf:base:1.1</td>
</tr>
<tr>
<td align="left">:confirmed-commit:1.1</td>
<td align="left">urn:ietf:params:netconf:capability:confirmed-commit:1.1</td>
</tr>
<tr>
<td align="left">:validate:1.1</td>
<td align="left">urn:ietf:params:netconf:capability:validate:1.1</td>
</tr>
</table>
<br clear="all" />

<a name="anchor98"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Authors and Acknowledgements</h3>

<p>This document was written by:
         </p>
<blockquote class="text">
<p>Andy Bierman
</p>
<p>Ken Crozier, Cisco Systems
</p>
<p>Rob Enns, Juniper Networks
</p>
<p>Ted Goddard, IceSoft
</p>
<p>Eliot Lear, Cisco Systems
</p>
<p>Phil Shafer, Juniper Networks
</p>
<p>Steve Waldbusser
</p>
<p>Margaret Wasserman, ThingMagic
</p>
</blockquote><p>
       
</p>
<p>
The authors would like to acknowledge the members of the NETCONF
working group.  In particular, we would like to thank Wes Hardaker
for his persistence and patience in assisting us with security
considerations.  We would also like to thank Randy Presuhn, Sharon
Chisholm, Juergen Schoenwalder, Glenn Waters, David Perkins, Weijing
Chen, Simon Leinen, Keith Allen, and Dave Harrington for all of
their valuable advice.
       
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="W3C.REC-xml-20001006">[1]</a></td>
<td class="author-text">Sperberg-McQueen, C., Bray, T., Paoli, J., and E. Maler, &ldquo;<a href="http://www.w3.org/TR/2000/REC-xml-20001006">Extensible Markup Language (XML) 1.0 (Second Edition)</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-xml-20001006, October&nbsp;2000 (<a href="http://www.w3.org/TR/2000/REC-xml-20001006">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xpath-19991116">[2]</a></td>
<td class="author-text">DeRose, S. and J. Clark, &ldquo;<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">XML Path Language (XPath) Version 1.0</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xpath-19991116, November&nbsp;1999 (<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[3]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4742">[4]</a></td>
<td class="author-text">Wasserman, M. and T. Goddard, &ldquo;<a href="http://tools.ietf.org/html/rfc4742">Using the NETCONF Configuration Protocol over Secure SHell (SSH)</a>,&rdquo; RFC&nbsp;4742, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4742.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[5]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3553">[6]</a></td>
<td class="author-text">Mealling, M., Masinter, L., Hardie, T., and G. Klyne, &ldquo;<a href="http://tools.ietf.org/html/rfc3553">An IETF URN Sub-namespace for Registered Protocol Parameters</a>,&rdquo; BCP&nbsp;73, RFC&nbsp;3553, June&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3553.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[7]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5717">[8]</a></td>
<td class="author-text">Lengyel, B. and M. Bjorklund, &ldquo;<a href="http://tools.ietf.org/html/rfc5717">Partial Lock Remote Procedure Call (RPC) for NETCONF</a>,&rdquo; RFC&nbsp;5717, December&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5717.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-netmod-yang">[9]</a></td>
<td class="author-text">Bjorklund, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-13.txt">YANG - A data modeling language for the Network Configuration Protocol (NETCONF)</a>,&rdquo; draft-ietf-netmod-yang-13 (work in progress), June&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-13.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-netmod-yang-types">[10]</a></td>
<td class="author-text">Schoenwaelder, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-types-09.txt">Common YANG Data Types</a>,&rdquo; draft-ietf-netmod-yang-types-09 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-netmod-yang-types-09.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="W3C.REC-xslt-19991116">[11]</a></td>
<td class="author-text">Clark, J., &ldquo;<a href="http://www.w3.org/TR/1999/REC-xslt-19991116">XSL Transformations (XSLT) Version 1.0</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xslt-19991116, November&nbsp;1999 (<a href="http://www.w3.org/TR/1999/REC-xslt-19991116">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2865">[12]</a></td>
<td class="author-text">Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;<a href="http://tools.ietf.org/html/rfc2865">Remote Authentication Dial In User Service (RADIUS)</a>,&rdquo; RFC&nbsp;2865, June&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2865.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3470">[13]</a></td>
<td class="author-text"><a href="mailto:shollenbeck@verisign.com">Hollenbeck, S.</a>, <a href="mailto:mrose@dbc.mtview.ca.us">Rose, M.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3470">Guidelines for the Use of Extensible Markup Language (XML) withinIETFProtocols</a>,&rdquo; BCP&nbsp;70, RFC&nbsp;3470, January&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3470.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3470.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3470.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4251">[14]</a></td>
<td class="author-text">Ylonen, T. and C. Lonvick, &ldquo;<a href="http://tools.ietf.org/html/rfc4251">The Secure Shell (SSH) Protocol Architecture</a>,&rdquo; RFC&nbsp;4251, January&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4251.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4346">[15]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc4346">The Transport Layer Security (TLS) Protocol Version 1.1</a>,&rdquo; RFC&nbsp;4346, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4346.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4741">[16]</a></td>
<td class="author-text">Enns, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4741">NETCONF Configuration Protocol</a>,&rdquo; RFC&nbsp;4741, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4741.txt">TXT</a>).</td></tr>
</table>

<a name="errorList"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
NETCONF Error List</h3>

<p>
				 This section is normative.
			 
</p>
<p>
				 For each error&#8209;tag, the valid error&#8209;type and
				 error&#8209;severity values are listed, together with any
				 mandatory error&#8209;info, if any.
			 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
error-tag:      in-use
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    The request requires a resource that already is in use.

error-tag:      invalid-value
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    The request specifies an unacceptable value for one
                or more parameters.

error-tag:      too-big
error-type:     transport, rpc, protocol, application
error-severity: error
error-info:     none
Description:    The request or response (that would be generated) is
                too large for the implementation to handle.

error-tag:      missing-attribute
error-type:     rpc, protocol, application
error-severity: error
error-info:     &lt;bad-attribute&gt; : name of the missing attribute
                &lt;bad-element&gt; : name of the element that should
                  contain the missing attribute
Description:    An expected attribute is missing.

error-tag:      bad-attribute
error-type:     rpc, protocol, application
error-severity: error
error-info:     &lt;bad-attribute&gt; : name of the attribute w/ bad value
                &lt;bad-element&gt; : name of the element that contains
                  the attribute with the bad value
Description:    An attribute value is not correct; e.g., wrong type,
                out of range, pattern mismatch.

error-tag:      unknown-attribute
error-type:     rpc, protocol, application
error-severity: error
error-info:     &lt;bad-attribute&gt; : name of the unexpected attribute
                &lt;bad-element&gt; : name of the element that contains
                  the unexpected attribute
Description:    An unexpected attribute is present.

error-tag:      missing-element
error-type:     protocol, application
error-severity: error
error-info:     &lt;bad-element&gt; : name of the missing element
Description:    An expected element is missing.

error-tag:      bad-element
error-type:     protocol, application
error-severity: error
error-info:     &lt;bad-element&gt; : name of the element w/ bad value
Description:    An element value is not correct; e.g., wrong type,
                out of range, pattern mismatch.

error-tag:      unknown-element
error-type:     protocol, application
error-severity: error
error-info:     &lt;bad-element&gt; : name of the unexpected element
Description:    An unexpected element is present.

error-tag:      unknown-namespace
error-type:     protocol, application
error-severity: error
error-info:     &lt;bad-element&gt; : name of the element that contains
                  the unexpected namespace
                &lt;bad-namespace&gt; : name of the unexpected namespace
Description:    An unexpected namespace is present.

error-tag:      access-denied
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    Access to the requested protocol operation, or
                data model is denied because authorization failed.

error-tag:      lock-denied
error-type:     protocol
error-severity: error
error-info:     &lt;session-id&gt; : session ID of session holding the
                  requested lock, or zero to indicate a non-NETCONF
                  entity holds the lock
Description: Access to the requested lock is denied because the
             lock is currently held by another entity.

error-tag:      resource-denied
error-type:     transport, rpc, protocol, application
error-severity: error
error-info:     none
Description:    Request could not be completed because of
                insufficient resources.

error-tag:      rollback-failed
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    Request to rollback some configuration change (via
                rollback-on-error or discard-changes operations) was
                not completed for some reason.

error-tag:      data-exists
error-type:     application
error-severity: error
error-info:     none
Description:    Request could not be completed because the relevant
                data model content already exists. For example,
                a 'create' operation was attempted on data that
                already exists.

error-tag:      data-missing
error-type:     application
error-severity: error
error-info:     none
Description:    Request could not be completed because the relevant
                data model content does not exist.  For example,
                a 'delete' operation was attempted on
                data that does not exist.

error-tag:      operation-not-supported
error-type:     protocol, application
error-severity: error
error-info:     none
Description:    Request could not be completed because the requested
                operation is not supported by this implementation.

error-tag:      operation-failed
error-type:     rpc, protocol, application
error-severity: error
error-info:     none
Description:    Request could not be completed because the requested
                operation failed for some reason not covered by
                any other error condition.

error-tag:      partial-operation
error-type:     application
error-severity: error
error-info:     &lt;ok-element&gt; : identifies an element in the data
                  model for which the requested operation has been
                  completed for that node and all its child nodes.
                  This element can appear zero or more times in the
                  &lt;error-info&gt; container.

                &lt;err-element&gt; : identifies an element in the data
                  model for which the requested operation has failed
                  for that node and all its child nodes.
                  This element can appear zero or more times in the
                  &lt;error-info&gt; container.

                &lt;noop-element&gt; : identifies an element in the data
                  model for which the requested operation was not
                  attempted for that node and all its child nodes.
                  This element can appear zero or more times in the
                  &lt;error-info&gt; container.

Description:    This error-tag is obsolete, and SHOULD NOT be sent
                by servers conforming to this document.

                Some part of the requested operation failed or was
                not attempted for some reason.  Full cleanup has
                not been performed (e.g., rollback not supported)
                by the server.  The error-info container is used
                to identify which portions of the application
                data model content for which the requested operation
                has succeeded (&lt;ok-element&gt;), failed (&lt;bad-element&gt;),
                or not been attempted (&lt;noop-element&gt;).
</pre></div>
<a name="xsdschema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
XML Schema for NETCONF Messages Layer</h3>

<p>
				 This section is normative.
         </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;CODE BEGINS&gt; file "netconf.xsd"

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           targetNamespace="urn:ietf:params:xml:ns:netconf:base:1.0"
           elementFormDefault="qualified"
           attributeFormDefault="unqualified"
           xml:lang="en"
           version="1.1"&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;
      This schema defines the syntax for the NETCONF Message layer
      messages 'hello', 'rpc', and 'rpc-reply'.
    &lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;

  &lt;!--
    import standard XML definitions
    --&gt;
  &lt;xs:import namespace="http://www.w3.org/XML/1998/namespace"
             schemaLocation="http://www.w3.org/2001/xml.xsd"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        This import accesses the xml: attribute groups for the
        xml:lang as declared on the error-message element.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
  &lt;/xs:import&gt;
  &lt;!--
    message-id attribute
    --&gt;
  &lt;xs:simpleType name="messageIdType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:maxLength value="4095"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;!--
    Types used for session-id
  --&gt;
  &lt;xs:simpleType name="SessionId"&gt;
    &lt;xs:restriction base="xs:unsignedInt"&gt;
      &lt;xs:minInclusive value="1"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="SessionIdOrZero"&gt;
    &lt;xs:restriction base="xs:unsignedInt"/&gt;
  &lt;/xs:simpleType&gt;
  &lt;!--
    &lt;rpc&gt; element
    --&gt;
  &lt;xs:complexType name="rpcType"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element ref="rpcOperation"/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="message-id" type="messageIdType"
                  use="required"/&gt;
    &lt;!--
      Arbitrary attributes can be supplied with &lt;rpc&gt; element.
    --&gt;
    &lt;xs:anyAttribute processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:element name="rpc" type="rpcType"/&gt;
  &lt;!--
    data types and elements used to construct rpc-errors
    --&gt;
  &lt;xs:simpleType name="ErrorType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="transport"/&gt;
      &lt;xs:enumeration value="rpc"/&gt;
      &lt;xs:enumeration value="protocol"/&gt;
      &lt;xs:enumeration value="application"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="ErrorTag"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="in-use"/&gt;
      &lt;xs:enumeration value="invalid-value"/&gt;
      &lt;xs:enumeration value="too-big"/&gt;
      &lt;xs:enumeration value="missing-attribute"/&gt;
      &lt;xs:enumeration value="bad-attribute"/&gt;
      &lt;xs:enumeration value="unknown-attribute"/&gt;
      &lt;xs:enumeration value="missing-element"/&gt;
      &lt;xs:enumeration value="bad-element"/&gt;
      &lt;xs:enumeration value="unknown-element"/&gt;
      &lt;xs:enumeration value="unknown-namespace"/&gt;
      &lt;xs:enumeration value="access-denied"/&gt;
      &lt;xs:enumeration value="lock-denied"/&gt;
      &lt;xs:enumeration value="resource-denied"/&gt;
      &lt;xs:enumeration value="rollback-failed"/&gt;
      &lt;xs:enumeration value="data-exists"/&gt;
      &lt;xs:enumeration value="data-missing"/&gt;
      &lt;xs:enumeration value="operation-not-supported"/&gt;
      &lt;xs:enumeration value="operation-failed"/&gt;
      &lt;xs:enumeration value="partial-operation"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:simpleType name="ErrorSeverity"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="error"/&gt;
      &lt;xs:enumeration value="warning"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:complexType name="errorInfoType"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:choice&gt;
        &lt;xs:element name="session-id" type="SessionIdOrZero"/&gt;
        &lt;xs:sequence minOccurs="0" maxOccurs="unbounded"&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name="bad-attribute" type="xs:QName"
              minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="bad-element" type="xs:QName"
              minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="ok-element" type="xs:QName"
              minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="err-element" type="xs:QName"
              minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="noop-element" type="xs:QName"
              minOccurs="0" maxOccurs="1"/&gt;
            &lt;xs:element name="bad-namespace" type="xs:string"
              minOccurs="0" maxOccurs="1"/&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:sequence&gt;
      &lt;/xs:choice&gt;
      &lt;!-- elements from any other namespace are also allowed
           to follow the NETCONF elements --&gt;
      &lt;xs:any namespace="##other" processContents="lax"
              minOccurs="0" maxOccurs="unbounded"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:complexType name="rpcErrorType"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="error-type" type="ErrorType"/&gt;
      &lt;xs:element name="error-tag" type="ErrorTag"/&gt;
      &lt;xs:element name="error-severity" type="ErrorSeverity"/&gt;
      &lt;xs:element name="error-app-tag" type="xs:string"
                  minOccurs="0"/&gt;
      &lt;xs:element name="error-path" type="xs:string" minOccurs="0"/&gt;
      &lt;xs:element name="error-message" minOccurs="0"&gt;
        &lt;xs:complexType&gt;
          &lt;xs:simpleContent&gt;
            &lt;xs:extension base="xs:string"&gt;
              &lt;xs:attribute ref="xml:lang" use="optional"/&gt;
            &lt;/xs:extension&gt;
          &lt;/xs:simpleContent&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="error-info" type="errorInfoType"
        minOccurs="0"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  &lt;!--
     operation attribute used in &lt;edit-config&gt;
    --&gt;
  &lt;xs:simpleType name="editOperationType"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="merge"/&gt;
      &lt;xs:enumeration value="replace"/&gt;
      &lt;xs:enumeration value="create"/&gt;
      &lt;xs:enumeration value="delete"/&gt;
      &lt;xs:enumeration value="remove"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  &lt;xs:attribute name="operation" type="editOperationType"/&gt;
  &lt;!--
    &lt;rpc-reply&gt; element
    --&gt;
  &lt;xs:complexType name="rpcReplyType"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element name="ok"/&gt;
      &lt;xs:group ref="rpcResponse"/&gt;
    &lt;/xs:choice&gt;
    &lt;xs:attribute name="message-id" type="messageIdType"
      use="optional"/&gt;
    &lt;!--
      Any attributes supplied with &lt;rpc&gt; element must be returned
      on &lt;rpc-reply&gt;.
    --&gt;
    &lt;xs:anyAttribute processContents="lax"/&gt;
  &lt;/xs:complexType&gt;
  &lt;xs:group name="rpcResponse"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element ref="rpc-error"
                  minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;xs:any namespace="##any" processContents="lax"
              minOccurs="0" maxOccurs="unbounded"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:group&gt;
  &lt;xs:element name="rpc-reply" type="rpcReplyType"/&gt;
  &lt;!--
    &lt;rpc-error&gt; element
  --&gt;
  &lt;xs:element name="rpc-error" type="rpcErrorType"/&gt;
  &lt;!--
    rpcOperationType: used as a base type for all
    NETCONF operations
    --&gt;
  &lt;xs:complexType name="rpcOperationType"/&gt;
  &lt;xs:element name="rpcOperation"
              type="rpcOperationType" abstract="true"/&gt;
  &lt;!--
    &lt;hello&gt; element
    --&gt;
  &lt;xs:element name="hello"&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="capabilities"&gt;
          &lt;xs:complexType&gt;
            &lt;xs:sequence&gt;
              &lt;xs:element name="capability" type="xs:anyURI"
                maxOccurs="unbounded"/&gt;
            &lt;/xs:sequence&gt;
          &lt;/xs:complexType&gt;
        &lt;/xs:element&gt;
        &lt;xs:element name="session-id"
                    type="SessionId" minOccurs="0"/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;
&lt;/xs:schema&gt;


&lt;CODE ENDS&gt;
</pre></div><p>

       
</p>
<a name="yangmodule"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
YANG Module for NETCONF Protocol Operations</h3>

<p>
				 This section is normative.
         </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;CODE BEGINS&gt; file "ietf-netconf@2010-06-04.yang"

module ietf-netconf {

  // the namespace for NETCONF XML definitions has not changed
  // this value is pre-determined by RFC 4741
  namespace "urn:ietf:params:xml:ns:netconf:base:1.0";

  prefix nc;

  import ietf-inet-types {
    prefix inet;
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";

  contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netconf/&gt;
     WG List:  &lt;mailto:netconf@ietf.org&gt;

     WG Chair: Bert Wijnen
               &lt;mailto:bertietf@bwijnen.net&gt;

     WG Chair: Mehmet Ersue
               &lt;mailto:mehmet.ersue@nsn.com&gt;

     Editor:   Martin Bjorklund
               &lt;mailto:mbj@tail-f.com&gt;

     Editor:   Juergen Schoenwaelder
               &lt;mailto:j.schoenwaelder@jacobs-university.de&gt;

     Editor:   Andy Bierman
               &lt;mailto:andy.bierman@brocade.com&gt;";

  description
    "NETCONF Protocol Data Types and Protocol Operations.

     Copyright (c) 2010 IETF Trust and the persons identified as
     the document authors.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Simplified BSD License
     set forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see
     the RFC itself for full legal notices.";
   // RFC Ed.: replace XXXX with actual RFC number and remove this note

  revision 2010-06-04 {
    description
      "Initial revision";
    reference
      "RFC XXXX: Network Configuration Protocol";
  }

  extension get-filter-element-attributes {
    description
      "If this extension is present within the
       an 'anyxml' statement named 'filter', which must be
       conceptually defined within the RPC input section
       for the 'get' and 'get-config' protocol operations,
       then the following unqualified XML attribute is
       supported within the 'filter' element, within
       a 'get' or 'get-config' protocol operation:

         type : optional attribute with allowed
                value strings 'subtree' and 'xpath'.
                If missing, the default value is 'subtree'.

       If the 'xpath' feature is supported, then the
       following unqualified XML attribute is
       also supported:

         select: optional attribute containing a
                 string representing an XPath expression.
                 The 'type' attribute must be equal to 'xpath'
                 if this attribute is present.";
  }

  // NETCONF capabilities defined as features
  feature writable-running {
    description
      "NETCONF :writable-running capability;
       If the server advertises the :writable-running
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Writable-Running Capability#";
  }

  feature candidate {
    description
      "NETCONF :candidate capability;
       If the server advertises the :candidate
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Candidate Configuration Capability#";
  }

  feature confirmed-commit {
    if-feature candidate;
    description
      "NETCONF :confirmed-commit:1.1 capability;
       If the server advertises the :confirmed-commit:1.1
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";

    reference "RFC XXXX, #X#Confirmed Commit Capability#";
  }

  feature rollback-on-error {
    description
      "NETCONF :rollback-on-error capability;
       If the server advertises the :rollback-on-error
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Rollback on Error Capability#";
  }

  feature validate {
    description
      "NETCONF :validate:1.1 capability;
       If the server advertises the :validate:1.1
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Validate Capability#";
  }

  feature startup {
    description
      "NETCONF :startup capability;
       If the server advertises the :startup
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#Distinct Startup Capability#";
  }

  feature url {
    description
      "NETCONF :url capability;
       If the server advertises the :url
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#URL Capability#";
  }

  feature xpath {
    description
      "NETCONF :xpath capability;
       If the server advertises the :xpath
       capability for a session, then this feature must
       also be enabled for that session.  Otherwise,
       this feature must not be enabled.";
    reference "RFC XXXX, #X#XPath Capability#";
  }

  // NETCONF Simple Types

  typedef session-id-type {
    type uint32 {
      range "1..max";
    }
    description
      "NETCONF Session Id";
  }

  typedef session-id-or-zero-type {
    type uint32;
    description
      "NETCONF Session Id or Zero to indicate none";
  }

  typedef error-tag-type {
    type enumeration {
       enum in-use {
         description
           "The request requires a resource that
            already is in use.";
       }
       enum invalid-value {
         description
           "The request specifies an unacceptable value for one
            or more parameters.";
       }
       enum too-big {
         description
           "The request or response (that would be generated) is
            too large for the implementation to handle.";
       }
       enum missing-attribute {
         description
           "An expected attribute is missing.";
       }
       enum bad-attribute {
         description
           "An attribute value is not correct; e.g., wrong type,
            out of range, pattern mismatch.";
       }
       enum unknown-attribute {
         description
           "An unexpected attribute is present.";
       }
       enum missing-element {
         description
           "An expected element is missing.";
       }
       enum bad-element {
         description
           "An element value is not correct; e.g., wrong type,
            out of range, pattern mismatch.";
       }
       enum unknown-element {
         description
           "An unexpected element is present.";
       }
       enum unknown-namespace {
         description
           "An unexpected namespace is present.";
       }
       enum access-denied {
         description
           "Access to the requested protocol operation, or
            data model is denied because authorization failed.";
       }
       enum lock-denied {
         description
           "Access to the requested lock is denied because the
            lock is currently held by another entity.";
       }
       enum resource-denied {
         description
           "Request could not be completed because of
            insufficient resources.";
       }
       enum rollback-failed {
         description
           "Request to rollback some configuration change (via
            rollback-on-error or discard-changes operations) was
            not completed for some reason.";

       }
       enum data-exists {
         description
           "Request could not be completed because the relevant
            data model content already exists. For example,
            a 'create' operation was attempted on data that
            already exists.";
       }
       enum data-missing {
         description
           "Request could not be completed because the relevant
            data model content does not exist.  For example,
            a 'delete' operation was attempted on
            data that does not exist.";
       }
       enum operation-not-supported {
         description
           "Request could not be completed because the requested
            operation is not supported by this implementation.";
       }
       enum operation-failed {
         description
           "Request could not be completed because the requested
            operation failed for some reason not covered by
            any other error condition.";
       }
       enum partial-operation {
         description
           "This error-tag is obsolete, and SHOULD NOT be sent
            by servers conforming to this document.";
       }
     }
     description "NETCONF Error Tag";
     reference "RFC XXXX, section YYY";
  }

  typedef error-severity-type {
    type enumeration {
      enum error {
        description "Error severity";
      }
      enum warning {
        description "Warning severity";
      }
    }
    description "NETCONF Error Severity";
    reference "RFC XXXX, section YYY";
  }

  typedef edit-operation-type {
    type enumeration {
      enum merge {
        description
          "The configuration data identified by the
           element containing this attribute is merged
           with the configuration at the corresponding
           level in the configuration datastore identified
           by the target parameter.";
      }
      enum replace {
        description
          "The configuration data identified by the element
           containing this attribute replaces any related
           configuration in the configuration datastore
           identified by the target parameter.  If no such
           configuration data exists in the configuration
           datastore, it is created. Unlike a
           &lt;copy-config&gt; operation, which replaces the
           entire target configuration, only the configuration
           actually present in the config parameter is affected.";
      }
      enum create {
        description
          "The configuration data identified by the element
           containing this attribute is added to the
           configuration if and only if the configuration
           data does not already exist in the configuration
           datastore.  If the configuration data exists, an
           &lt;rpc-error&gt; element is returned with an
           &lt;error-tag&gt; value of 'data-exists'.";
      }
      enum delete {
        description
          "The configuration data identified by the element
           containing this attribute is deleted from the
           configuration if and only if the configuration
           data currently exists in the configuration
           datastore.  If the configuration data does not
           exist, an &lt;rpc-error&gt; element is returned with
           an &lt;error-tag&gt; value of 'data-missing'.";
      }
      enum remove {
        description
          "The configuration data identified by the element
           containing this attribute is deleted from the
           configuration if the configuration
           data currently exists in the configuration
           datastore.  If the configuration data does not
           exist, the 'remove' operation is silently ignored
           by the server.";
      }
    }
    default "merge";
    description "NETCONF 'operation' attribute values";
    reference "RFC XXXX, #X#&lt;edit-config&gt;#";
  }

  // NETCONF Standard Protocol Operations

  rpc get-config {
    description
      "Retrieve all or part of a specified configuration.";

    reference "RFC XXXX, #X#&lt;get-config&gt;#";

    input {
      container source {
        description
          "Particular configuration to retrieve.";

        choice config-source {
          mandatory true;
          description
            "The configuration to retrieve.";
          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config source.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config source.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config source.
               This is optional-to-implement on the server because
               not all servers will support filtering for this
               datastore.";
          }
        }
      }

      anyxml filter {
        description
          "Subtree or XPath filter to use.";
        nc:get-filter-element-attributes;
      }
    }

    output {
      container data {
        presence
          "An empty data container indicates that the
           request did not produce any results.";
        description
          "Copy of the source datastore subset which matched
           the filter criteria (if any).";
      }
     }
  }

  rpc edit-config {
    description
      "The 'edit-config' operation loads all or part of a specified
       configuration to the specified target configuration.";

    reference "RFC XXXX, #X#&lt;edit-config&gt;#";

    input {
      container target {
        description
          "Particular configuration to edit.";

        choice config-target {
          mandatory true;
          description
            "The configuration target.";

          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config target.";
          }
          leaf running {
            if-feature writable-running;
            type empty;
            description
              "The running configuration is the config source.";
          }
        }
      }

      leaf default-operation {
        type enumeration {
          enum merge {
            description
              "The default operation is merge.";
          }
          enum replace {
            description
              "The default operation is replace.";
          }
          enum none {
            description
              "There is no default operation.";
          }
        }
        default "merge";
        description
          "The default operation to use.";
      }

      leaf test-option {
        if-feature validate;
        type enumeration {
          enum test-then-set {
            description
              "The server will test and then set if no errors.";
          }
          enum set {
            description
              "The server will set without a test first.";
          }

          enum test-only {
            description
              "The server will only test and not set, even
               if there are no errors.";
          }
        }
        default "test-then-set";
        description
          "The test option to use.";
      }

      leaf error-option {
        type enumeration {
          enum stop-on-error {
            description
              "The server will stop on errors.";
          }
          enum continue-on-error {
            description
              "The server may continue on errors.";
          }
          enum rollback-on-error {
            description
              "The server will rollback on errors.
               This value can only be used if the 'rollback-on-error'
               feature is supported.";
          }
        }
        default "stop-on-error";
        description
          "The error option to use.";
      }

      choice edit-content {
        mandatory true;
        description
          "The content for the edit operation";

        anyxml config {
          description
            "Inline Config content.";
        }
        leaf url {
          if-feature url;
          type inet:uri;
          description
            "URL based config content.";
        }
      }
    }
  }

  rpc copy-config {
    description
      "Create or replace an entire configuration datastore with the
       contents of another complete configuration datastore.";

    reference "RFC XXXX, #X#&lt;copy-config&gt;#";

    input {
      container target {
        description
          "Particular configuration to copy to.";

        choice config-target {
          mandatory true;
          description
            "The configuration target of the copy operation.";

          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config target.";
          }
          leaf running {
            if-feature writable-running;
            type empty;
            description
              "The running configuration is the config target.
               This is optional-to-implement on the server.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config target.";
          }
          leaf url {
            if-feature url;
            type inet:uri;
            description
              "The URL-based configuration is the config target.";
          }
        }
      }

      container source {
        description
          "Particular configuration to copy from.";

        choice config-source {
          mandatory true;
          description
            "The configuration source for the copy operation.";

          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config source.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config source.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config source.";
          }
          leaf url {
            if-feature url;
            type inet:uri;
            description
              "The URL-based configuration is the config source.";
          }
          anyxml config {
            description
              "Inline Config content: 'config' element.  Represents
               an entire configuration datastore, not
               a subset of the running datastore.";
          }
        }
      }
    }
  }

  rpc delete-config {
    description
      "Delete a configuration datastore.";

    reference "RFC XXXX, #X#&lt;delete-config&gt;#";

    input {
      container target {
        description
          "Particular configuration to delete.";

        choice config-target {
          mandatory true;
          description
            "The configuration target to delete.";

          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config target.";
          }
          leaf url {
            if-feature url;
            type inet:uri;
            description
              "The URL-based configuration is the config target.";
          }
        }
      }
    }
  }

  rpc lock {
    description
      "The lock operation allows the client to lock the configuration
       system of a device.";

    reference "RFC XXXX, #X#&lt;lock&gt;#";

    input {
      container target {
        description
          "Particular configuration to lock";

        choice config-target {
          mandatory true;
          description
            "The configuration target to lock.";

          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config target.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config target.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config target.";
          }
        }
      }
    }
  }

  rpc unlock {
    description
      "The unlock operation is used to release a configuration lock,
       previously obtained with the 'lock' operation.";

    reference "RFC XXXX, #X#&lt;unlock&gt;#";

    input {
      container target {
        description
          "Particular configuration to unlock.";

        choice config-target {
          mandatory true;
          description
            "The configuration target to unlock.";

          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config target.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config target.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config target.";
          }
        }
      }
    }
  }

  rpc get {
    description
      "Retrieve running configuration and device state information.";

    reference "RFC XXXX, #X#&lt;get&gt;#";

    input {
      anyxml filter {
        description
          "This parameter specifies the portion of the system
           configuration and state data to retrieve.";
        nc:get-filter-element-attributes;
      }
    }

    output {
      container data {
        presence
          "An empty data container indicates that the filter
           request did not match any results.";
        description
          "Copy of the running datastore subset and/or state
           data which matched the filter criteria (if any).";
      }
    }
  }

  rpc close-session {
    description
      "Request graceful termination of a NETCONF session.";

    reference "RFC XXXX, #X#&lt;close-session&gt;#";
  }

  rpc kill-session {
    description
      "Force the termination of a NETCONF session.";

    reference "RFC XXXX, #X#&lt;kill-session&gt;#";

    input {
      leaf session-id {
        type session-id-type;
        mandatory true;
        description
          "Particular session to kill.";
      }
    }
  }

  rpc commit {
    if-feature candidate;

    description
      "Commit the candidate configuration as the device's new
       current configuration";

    reference "RFC XXXX, #X#&lt;commit&gt;#";

    input {
      leaf confirmed {
        if-feature confirmed-commit;
        type empty;
        description
          "Requests a confirmed commit.";
        reference "RFC XXXX, #X#&lt;commit&gt;#";
      }

      leaf confirm-timeout {
        if-feature confirmed-commit;
        type uint32 {
          range "1..max";
        }
        units "seconds";
        default "600";   // 10 minutes
        description
          "The timeout interval for a confirmed commit.";
        reference "RFC XXXX, #X#&lt;commit&gt;#";
      }

      leaf persist {
        if-feature confirmed-commit;
        type string;
        description
          "This parameter is used to make a confirmed commit
           persistent.  A persistent confirmed commit is not aborted
           if the NETCONF session terminates.  The only way to abort a
           persistent confirmed commit it to let the timer expire, or
           to use the cancel-commit operation.

           The value of this parameter is a token that must be given
           in the 'persist-id' parameter of commit or cancel-commit in
           order to confirm or cancel the persistent confirmed commit.

           The token should be a random string.";
        reference "RFC XXXX, #X#&lt;commit&gt;#";
      }

      leaf persist-id {
        if-feature confirmed-commit;
        type string;
        description
          "This parameter is given in order to commit a persistent
           confirmed commit.  The value must be equal to the value
           given in the 'persist' parameter to the commit operation.
           If it does not match, the operation fails with an
          'invalid-value' error.";
        reference "RFC XXXX, #X#&lt;commit&gt;#";
      }

    }
  }

  rpc discard-changes {
    if-feature candidate;

    description
      "Revert the candidate configuration to the current
       running configuration.";

    reference "RFC XXXX, #X#&lt;discard-changes&gt;#";
  }

  rpc cancel-commit {
    if-feature confirmed-commit;
    description
      "This operation is used to cancel an ongoing confirmed commit.
       If the confirmed commit is persistent, the parameter
       'persist-id' must be given, and it must match the value of the
       'persist' parameter.";
    reference "RFC XXXX, #X#&lt;cancel-commit&gt;#";

    input {
      leaf persist-id {
        type string;
        description
          "This parameter is given in order to cancel a persistent
           confirmed commit.  The value must be equal to the value
           given in the 'persist' parameter to the commit operation.
           If it does not match, the operation fails with an
          'invalid-value' error.";
      }
    }
  }

  rpc validate {
    if-feature validate;

    description
      "Validates the contents of the specified configuration.";

    reference "RFC XXXX, #X#&lt;validate&gt;#";

    input {
      container source {
        description
          "Particular configuration to validate.";

        choice config-source {
          mandatory true;
          description
            "The configuration source to validate.";

          leaf candidate {
            if-feature candidate;
            type empty;
            description
              "The candidate configuration is the config source.";
          }
          leaf running {
            type empty;
            description
              "The running configuration is the config source.";
          }
          leaf startup {
            if-feature startup;
            type empty;
            description
              "The startup configuration is the config source.";
          }
          leaf url {
            if-feature url;
            type inet:uri;
            description
              "The URL-based configuration is the config source.";
          }
          anyxml config {
            description
              "Inline Config content: 'config' element.  Represents
               an entire configuration datastore, not
               a subset of the running datastore.";
          }
        }
      }
    }
  }

}


&lt;CODE ENDS&gt;
</pre></div><p>

       
</p>
<a name="capabilityTemplate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D"></a><h3>Appendix D.&nbsp;
Capability Template</h3>

<p>
				 This non-normative section defines a template that should be
				 used to define protocol capabilities. Data models written in
				 YANG usually do not need to define protocol capabilities
				 since the usage of YANG automatically leads to a capability
				 announcing the data model and any optional portions of the
				 data model, so called features in YANG terminology. The
				 capabilities template should only be used in cases where the
				 YANG mechanisms are not powerful enough (e.g., for handling
				 parametrized features) or a different data modeling language
				 is used.
			 
</p>
<a name="anchor101"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1"></a><h3>D.1.&nbsp;
capability-name (template)</h3>

<a name="anchor102"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1.1"></a><h3>D.1.1.&nbsp;
Overview</h3>

<a name="anchor103"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1.2"></a><h3>D.1.2.&nbsp;
Dependencies</h3>

<a name="anchor104"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1.3"></a><h3>D.1.3.&nbsp;
Capability Identifier</h3>

<p>
             The {name} capability is identified by the following capability string:
             </p>
<blockquote class="text">
<p>{capability uri}
</p>
</blockquote><p>
           
</p>
<a name="anchor105"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1.4"></a><h3>D.1.4.&nbsp;
New Operations</h3>

<a name="anchor106"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1.4.1"></a><h3>D.1.4.1.&nbsp;
&lt;op-name&gt;</h3>

<a name="anchor107"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1.5"></a><h3>D.1.5.&nbsp;
Modifications to Existing Operations</h3>

<a name="anchor108"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1.5.1"></a><h3>D.1.5.1.&nbsp;
&lt;op-name&gt;</h3>

<p>If existing operations are not modified by this
             capability, this section may be omitted.
</p>
<a name="anchor109"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1.6"></a><h3>D.1.6.&nbsp;
Interactions with Other Capabilities</h3>

<p>If this capability does not interact with other
           capabilities, this section may be omitted.
</p>
<a name="multidev"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E"></a><h3>Appendix E.&nbsp;
Configuring Multiple Devices with NETCONF</h3>

<p>
				 This section is non-normative.
			 
</p>
<a name="anchor110"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1"></a><h3>E.1.&nbsp;
Operations on Individual Devices</h3>

<p>
 Consider the work involved in performing a configuration update
 against a single individual device.  In making a change to the
 configuration, the application needs to build trust that its change
 has been made correctly and that it has not impacted the operation of
 the device. The application (and the application user) should feel
 confident that their change has not damaged the network.
         
</p>
<p>
 Protecting each individual device consists of a number of steps:
           </p>
<ul class="text">
<li>Acquiring the configuration lock.
</li>
<li>Checkpointing the running configuration.
</li>
<li>Loading and validating the incoming configuration.
</li>
<li>Changing the running configuration.
</li>
<li>Testing the new configuration.
</li>
<li>Making the change permanent (if desired).
</li>
<li>Releasing the configuration lock.
</li>
</ul><p>
         
</p>
<p>
 Let's look at the details of each step.
         
</p>
<a name="anchor111"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1.1"></a><h3>E.1.1.&nbsp;
Acquiring the Configuration Lock</h3>

<p>
 A lock should be acquired to prevent simultaneous updates from
 multiple sources.  If multiple sources are affecting the device, the
 application is hampered in both testing of its change to the
 configuration and in recovery should the update fail. Acquiring a
 short-lived lock is a simple defense to prevent other parties from
 introducing unrelated changes.
           
</p>
<p>
 The lock can be acquired using the &lt;lock&gt; operation.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<p>
 If the :candidate capability is supported, the candidate configuration
 should be locked.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;lock&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
    &lt;/lock&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<a name="anchor112"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1.2"></a><h3>E.1.2.&nbsp;
Checkpointing the Running Configuration</h3>

<p>
 The running configuration can be saved into a local file as a
 checkpoint before loading the new configuration. If the update fails,
 the configuration can be restored by reloading the checkpoint file.
           
</p>
<p>
 The checkpoint file can be created using the &lt;copy&#8209;config&gt; operation.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;copy-config&gt;
      &lt;target&gt;
        &lt;url&gt;file://checkpoint.conf&lt;/url&gt;
      &lt;/target&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
    &lt;/copy-config&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<p>
 To restore the checkpoint file, reverse the source and target parameters.
           
</p>
<a name="anchor113"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1.3"></a><h3>E.1.3.&nbsp;
Loading and Validating the Incoming Configuration.</h3>

<p>
 If the :candidate capability is supported, the configuration can be loaded onto the device without impacting the
 running system.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
      &lt;config&gt;
        &lt;!-- place incoming configuration changes here --&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<p>
 If the device supports the :validate:1.1 capability, it will by
 default validate the incoming configuration when it is loaded into
 the candidate.  To avoid this validation, pass the
 &lt;test&#8209;option&gt; parameter with the value "set".  Full
 validation can be requested with the &lt;validate&gt; operation.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;validate&gt;
      &lt;source&gt;
        &lt;candidate/&gt;
      &lt;/source&gt;
    &lt;/validate&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<a name="anchor114"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1.4"></a><h3>E.1.4.&nbsp;
Changing the Running Configuration</h3>

<p>
 When the incoming configuration has been safely loaded onto the device
 and validated, it is ready to impact the running system.
           
</p>
<p>
 If the device supports the :candidate capability, use the &lt;commit&gt;
 operation to set the running configuration to the candidate
 configuration. Use the &lt;confirmed&gt; parameter to allow automatic
 reversion to the original configuration if connectivity to the device
 fails.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit&gt;
      &lt;confirmed/&gt;
      &lt;confirm-timeout&gt;120&lt;/confirm-timeout&gt;
    &lt;/commit&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<p>
						 If the candidate is not supported by the device, the incoming configuration change is loaded directly into running.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;edit-config&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
      &lt;config&gt;
        &lt;!-- place incoming configuration changes here --&gt;
      &lt;/config&gt;
    &lt;/edit-config&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<a name="anchor115"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1.5"></a><h3>E.1.5.&nbsp;
Testing the New Configuration</h3>

<p>
 Now that the incoming configuration has been integrated into the
 running configuration, the application needs to gain trust that the
 change has affected the device in the way intended without affecting
 it negatively.
           
</p>
<p>
 To gain this confidence, the application can run tests of the
 operational state of the device. The nature of the test is dependent
 on the nature of the change and is outside the scope of this
 document. Such tests may include reachability from the system running
 the application (using ping), changes in reachability to the rest of the
 network (by comparing the device's routing table), or inspection of
 the particular change (looking for operational evidence of the BGP
 peer that was just added).
           
</p>
<a name="anchor116"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1.6"></a><h3>E.1.6.&nbsp;
Making the Change Permanent</h3>

<p>
 When the configuration change is in place and the application has
 sufficient faith in the proper function of this change, the
 application should make the change permanent.
           
</p>
<p>
 If the device supports the :startup capability, the current
 configuration can be saved to the startup configuration by using the
 startup configuration as the target of the &lt;copy&#8209;config&gt; operation.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;copy-config&gt;
      &lt;target&gt;
        &lt;startup/&gt;
      &lt;/target&gt;
      &lt;source&gt;
        &lt;running/&gt;
      &lt;/source&gt;
    &lt;/copy-config&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<p>
 If the device supports the :candidate capability and a confirmed
 commit was requested, the confirming commit must be sent before the
 timeout expires.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;commit/&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<a name="anchor117"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1.7"></a><h3>E.1.7.&nbsp;
Releasing the Configuration Lock</h3>

<p>
 When the configuration update is complete, the lock must be
 released, allowing other applications access to the configuration.
           
</p>
<p>
 Use the &lt;unlock&gt; operation to release the configuration lock.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;unlock&gt;
      &lt;target&gt;
        &lt;running/&gt;
      &lt;/target&gt;
    &lt;/unlock&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<p>
 If the :candidate capability is supported, the candidate configuration
 should be unlocked.
             </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;rpc message-id="101"
       xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;unlock&gt;
      &lt;target&gt;
        &lt;candidate/&gt;
      &lt;/target&gt;
    &lt;/unlock&gt;
  &lt;/rpc&gt;
</pre></div><p>

           
</p>
<a name="anchor118"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.2"></a><h3>E.2.&nbsp;
Operations on Multiple Devices</h3>

<p>
 When a configuration change requires updates across a number of
 devices, care should be taken to provide the required transaction
 semantics. The NETCONF protocol contains sufficient primitives upon
 which transaction-oriented operations can be built.
 Providing complete transactional semantics across multiple
 devices is prohibitively expensive, but the size and number of windows
 for failure scenarios can be reduced.
         
</p>
<p>
 There are two classes of multi-device operations.  The first class
 allows the operation to fail on individual
 devices without requiring all devices to revert to their original
 state. The operation can be retried at a later time, or its failure
 simply reported to the user. An example of this class might be adding
 an NTP server. For this class of operations, failure avoidance and
 recovery are focused on the individual device. This means recovery of
 the device, reporting the failure, and perhaps scheduling another
 attempt.
         
</p>
<p>
 The second class is more interesting, requiring that the
 operation should complete on all devices or be fully reversed. The
 network should either be transformed into a new state or be reset to
 its original state. For example, a change to a VPN may require updates
 to a number of devices.  Another example of this might be adding a
 class-of-service definition. Leaving the network in a state
 where only a portion of the devices have been updated with the new
 definition will lead to future failures when the definition is
 referenced.
         
</p>
<p>
 To give transactional semantics, the same steps used in single device
 operations listed above are used, but are performed in parallel across
 all devices. Configuration locks should be acquired on all target
 devices and kept until all devices are updated and the changes made
 permanent.  Configuration changes should be uploaded and validation
 performed across all devices.  Checkpoints should be made on each
 device.  Then the running configuration can be changed, tested, and
 made permanent. If any of these steps fail, the previous
 configurations can be restored on any devices upon which they were
 changed. After the changes have been completely implemented or
 completely discarded, the locks on each device can be released.
         
</p>
<a name="anchor119"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.F"></a><h3>Appendix F.&nbsp;
Changes from RFC 4741</h3>

<p>
				 This section lists major changes between this document and RFC 4741.
         </p>
<ul class="text">
<li>
             Added 'remove' enumeration value to
             the operation attribute.
           
</li>
<li>
             Obsoleted the 'partial-operation' error-tag
             enumeration value.
           
</li>
<li>
             Added &lt;persist&gt; and &lt;persist-id&gt;
             parameters to the &lt;commit&gt; operation.
           
</li>
<li>
             Updated the base protocol URI and clarified the
             &lt;hello&gt; message exchange to select and
             identify the base protocol version in use
             for a particular session.
           
</li>
<li>
             Added a YANG module to model the operations
             and removed the operation layer from the XSD.
           
</li>
<li>
             Clarified lock behavior for the candidate datastore.
           
</li>
<li>
             Clarified the error response server requirements
             for the 'delete' operation attribute enumeration
             value.
           
</li>
<li>
						 Added a namespace wildcarding mechanism for subtree filtering.
					 
</li>
<li>
						 Added a "test-only" value for the
						 &lt;test&#8209;option&gt; parameter to the
						 &lt;edit&#8209;config&gt; operation.
					 
</li>
<li>
						 Added a &lt;cancel&#8209;commit&gt; operation.
					 
</li>
<li>
						 Introduced a NETCONF username and a requirement for
						 transport protocols to explain how a username is derived.
					 
</li>
</ul><p>
			 
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Rob Enns (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Juniper Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1194 North Mathilda Ave</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sunnyvale, CA  94089</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:rpe@juniper.net">rpe@juniper.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Bjorklund (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tail-f Systems</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mbj@tail-f.com">mbj@tail-f.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Juergen Schoenwaelder (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jacobs University</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:j.schoenwaelder@jacobs-university.de">j.schoenwaelder@jacobs-university.de</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andy Bierman (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brocade</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:andy.bierman@brocade.com">andy.bierman@brocade.com</a></td></tr>
</table>
</body></html>
