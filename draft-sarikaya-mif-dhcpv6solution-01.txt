


Network Working Group                                        B. Sarikaya
Internet-Draft                                                    F. Xia
Expires: September 7, 2009                                    Huawei USA
                                                                P. Seite
                                                          France Telecom
                                                           March 6, 2009


    DHCPv6 Extension for Configuring Hosts with multiple Interfaces
                draft-sarikaya-mif-dhcpv6solution-01.txt

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 7, 2009.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.







Sarikaya, et al.        Expires September 7, 2009               [Page 1]

Internet-Draft               DHCPv6 Solution                  March 2009


Abstract

   This document defines a DHCPv6 option to help configure a multi-homed
   host's routing table with new entries when the host attaches to a new
   network on a new interface.


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . . . 3
   3.  Configuring Routing Tables of Multi-homed Hosts . . . . . . . . 3
   4.  DHCPv6 Option . . . . . . . . . . . . . . . . . . . . . . . . . 4
   5.  Security Considerations . . . . . . . . . . . . . . . . . . . . 6
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 6
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 6
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 6
     8.1.  Normative References  . . . . . . . . . . . . . . . . . . . 6
     8.2.  Informative references  . . . . . . . . . . . . . . . . . . 7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 8































Sarikaya, et al.        Expires September 7, 2009               [Page 2]

Internet-Draft               DHCPv6 Solution                  March 2009


1.  Introduction

   Traditional routing considered only the destination address in
   IPv4/v6 header.  Policy routing on the hand considers all of the
   fields in the header sometimes even the payload.  In IPv6, the hosts
   receive router advertisements containing information useful for
   policy routing.  However in some networks, e.g. cellular networks,
   DHCP servers can be used to help multi-homed mobile nodes configure
   their routing tables.

   Using a single default route would lead to routing of all flows
   through a single interface.  Such a configuration makes it impossible
   to use multiple interfaces simultaneously if the host is multi-homed.

   Requirements of supporting multiple interfaces in hosts without
   involving mobility protocols are discussed in [I-D.yang-mif-req].
   DHCP is identified as a protocol to communicate interface management
   policies between MIF nodes and the network.

   The IPv6 hosts receive router advertisements and then populate their
   Default Router List and Prefix List based on information in the
   router advertisements (RA) [RFC2461].  [RFC4191] extended RAs with
   Route Information Option and added Default Router Preference.  Such
   RAs if available would help multi-homed mobile nodes configure better
   to enable the simultanenous use of all interfaces.

   In this document we define a new DHCPv6 option.  This option is to
   inform multi-homed hosts about the routes and other useful
   information available on the new network that the host has just
   connected.  It is appropriate to use DHCP for this purpose because
   DHCP is already needed for initial configuration of the host's
   interface, e.g. for address assignment.


2.  Terminology

   This document uses the terminology defined in [RFC3315], [RFC3633].


3.  Configuring Routing Tables of Multi-homed Hosts

   IPv6 routing table contains these entries: prefix, prefix length,
   preference value, lifetime, and the address of the next-hop router.

   Multi-homed hosts receive configuration information on each
   interface.  Routers send router advertisements.  DHCP servers provide
   host configuration information.  SDOs are defining servers such as
   Access Network Discovery and Selection function (ANDSF).  ANDSF can



Sarikaya, et al.        Expires September 7, 2009               [Page 3]

Internet-Draft               DHCPv6 Solution                  March 2009


   also provide node configuration information on SDO interfaces.
   Configuration information helps host set up and update important
   databases that the host uses such as the routing table.

   Since IPv6 allows multiple unicast addresses to be assigned to
   interfaces, IPv6 hosts face the problem of default source and
   destination address selection when initiating communication.
   [RFC3484] defined algorithms for this purpose.

   In this document we extend DHCPv6 with an option called multi-homed
   routing policy entry option.  Using this option DHCPv6 server can
   inform DHCPv6 client on the default routes available on the interface
   which the host is about to connect.  The option also allows DHCP
   server to provide more information on the flows such as the traffic
   classes or more sophisticated flow description.  The host receives
   the route information ordered with priority which allows the host to
   select the right interface to start communication.


4.  DHCPv6 Option

   A new option is defined to carry the host routing information.  It is
   shown in Figure 1.

   DHCP server MAY send a Reply message containing multi-homed routing
   policy entry option.  DHCP client MUST add an entry to its routing
   table based on this option.  DHCP client MAY modify other tables such
   as Default Router List or Pref List [RFC4191].

   DHCP Client MAY include multi-homed routing policy entry option in
   Option Request Option [RFC3315] in DHCP Request message.  DHCP Server
   MUST include multi-homed routing policy entry option in the
   corresponding Reply message.  The option contains a list of routing
   policies, each of them containing the flow description followed by
   the route to apply when packet to forward is matching.
















Sarikaya, et al.        Expires September 7, 2009               [Page 4]

Internet-Draft               DHCPv6 Solution                  March 2009


     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |        OPTION_MHRPE           |         option-length         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   FD-length   | PID           |                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               |
    |                                                               |
    |                   Flow Description ...                        |
    .                                                               .
    .                                                               .
    .                                                               .
    |                                                               |
    |                                                               |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | prefix-length |                                               |
    +-+-+-+-+-+-+-+-+          IPv6 prefix                          |
    |                           (16 octets)                         |
    |                                                               |
    |                                                               |
    |                                                               |
    |               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |               | TOS           |  Reserved                     +
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                                               .
    |                IPv6 Router Address (16 octets)                |                                               .
    |                                                               |
    |                                                               |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | prefix-length |                 Reserved                      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    .                                                               .
    .                                                               .
    |                       ...                                     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                           Figure 1: DHCP Option

   o  option-code: OPTION_MHRPE multi-homed routing policy entry option
      (TBD)
   o  Option-length: Total length of prefix-length, IPv6 prefix, TOS and
      Reserved fields in octets; It should be a multiple of 36.
   o  FD-len: length of the flow description
   o  PID: The Policy Identifier field is an 8-bit unsigned integer that
      includes the identifier for the policy.





Sarikaya, et al.        Expires September 7, 2009               [Page 5]

Internet-Draft               DHCPv6 Solution                  March 2009


   o  Flow Description: This field contains flow information such as
      flow identifier, priority, etc.  This field is of length FD-len -
      8.
   o  prefix-len: Prefix length of the destination prefix over which the
      flow will be routed
   o  IPv6 prefix: Destination prefix overwhich the flow will be routed
   o  TOS: Traffic class for the flow, 8 bits
   o  Reserved: 16 bits set to zero by the sender ignored by the
      receiver
   o  IPv6 Router Address: Deafault router address for this route.  This
      field is 16 octets.
   o  Prefix-length: Length of the prefix of IPv6 router address field.
      It is 8 bits.
   o  Reserved: 24 bits set to zero by the sender ignored by the
      receiver


5.  Security Considerations

   This document does not by itself introduce any security issues.


6.  IANA Considerations

   IANA is requested to assign an option code to the following options
   from the option-code space defined in "DHCPv6 Options" section of the
   DHCPv6 specification [RFC3315].



             Option Name       Value           Described in
             OPTION_MHPTE        TBD             Section 4




7.  Acknowledgements

   TBD.


8.  References

8.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.




Sarikaya, et al.        Expires September 7, 2009               [Page 6]

Internet-Draft               DHCPv6 Solution                  March 2009


   [RFC2629]  Rose, M., "Writing I-Ds and RFCs using XML", RFC 2629,
              June 1999.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", RFC 3315, July 2003.

   [I-D.yang-mif-req]
              Yang, P., Seite, P., Williams, C., and J. Qin,
              "Requirements on multiple Interface (MIF) of simple IP",
              draft-yang-mif-req-00 (work in progress), March 2009.

   [I-D.ietf-mext-flow-binding]
              Soliman, H., Montavont, N., Fikouras, N., and K.
              Kuladinithi, "Flow Bindings in Mobile IPv6 and Nemo Basic
              Support", draft-ietf-mext-flow-binding-01 (work in
              progress), February 2009.

8.2.  Informative references

   [RFC3633]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", RFC 3633,
              December 2003.

   [RFC4191]  Draves, R. and D. Thaler, "Default Router Preferences and
              More-Specific Routes", RFC 4191, November 2005.

   [RFC3484]  Draves, R., "Default Address Selection for Internet
              Protocol version 6 (IPv6)", RFC 3484, February 2003.

   [RFC2461]  Narten, T., Nordmark, E., and W. Simpson, "Neighbor
              Discovery for IP Version 6 (IPv6)", RFC 2461,
              December 1998.


















Sarikaya, et al.        Expires September 7, 2009               [Page 7]

Internet-Draft               DHCPv6 Solution                  March 2009


Authors' Addresses

   Behcet Sarikaya
   Huawei USA
   1700 Alma Dr. Suite 500
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: sarikaya@ieee.org


   Frank Xia
   Huawei USA
   1700 Alma Dr. Suite 500
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: xiayangsong@huawei.com


   Pierrick Seite
   France Telecom
   4, rue du Clos Courtel
   BP 91226
   Cesson-Sevigne,   35512
   France

   Email: pierrick.seite@orange-ftgroup.com























Sarikaya, et al.        Expires September 7, 2009               [Page 8]


