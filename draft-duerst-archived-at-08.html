<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>The Archived-At Message Header Field</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="The Archived-At Message Header Field">
<meta name="keywords" content="Electronic Mail, Mailing Lists, Archiving">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Duerst</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Aoyama Gakuin University</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">August 20, 2007</td></tr>
<tr><td class="header">Expires: February 21, 2008</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />The Archived-At Message Header Field<br />draft-duerst-archived-at-08</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on February 21, 2008.</p>

<h3>Abstract</h3>

<p>This memo defines a new email header field, Archived-At:,
to provide a direct link to the archived form of an individual
email message.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Header Field Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Syntax">2.1.</a>&nbsp;
Syntax<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.2.</a>&nbsp;
Multiple Archived-At Header Fields<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.3.</a>&nbsp;
Interaction with Message Fragmentation and Reassembly<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.4.</a>&nbsp;
Syntax Extension for Internationalized Message Headers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.5.</a>&nbsp;
The X-Archived-At Header Field<br />
<a href="#anchor7">3.</a>&nbsp;
Implementation and Usage Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#format">3.1.</a>&nbsp;
Formats of Archived Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#implementation">3.2.</a>&nbsp;
Implementation Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#usage">3.3.</a>&nbsp;
Usage Considerations<br />
<a href="#anchor8">4.</a>&nbsp;
Security Considerations<br />
<a href="#anchor9">5.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.1.</a>&nbsp;
Registration of the Archive-At Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.2.</a>&nbsp;
Registration of the X-Archived-At Header Field<br />
<a href="#anchor12">6.</a>&nbsp;
Change Log<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">6.1.</a>&nbsp;
Changes from -07.txt to -08.txt<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">6.2.</a>&nbsp;
Changes from -06.txt to -07.txt<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">6.3.</a>&nbsp;
Changes from -05.txt to -06.txt<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">6.4.</a>&nbsp;
Changes from -04.txt to -05.txt<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">6.5.</a>&nbsp;
Changes from -03.txt to -04.txt<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">6.6.</a>&nbsp;
Changes from -02.txt to -03.txt<br />
<a href="#anchor19">7.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p><a class='info' href='#RFC2369'>[RFC2369]<span> (</span><span class='info'>Baer, J. and G. Neufeld, &ldquo;The Use of URLs as Meta-Syntax for Core Mail List Commands and their Transport through Message Header Fields,&rdquo; July&nbsp;1998.</span><span>)</span></a> defines a number of header fields that can be added to
   Internet messages such as those sent by email distribution lists or in netnews <a class='info' href='#RFCXXXX'>[RFCXXXX]<span> (</span><span class='info'>Murchison, K., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format (Note to RFC Editor: Please update this reference with the RFC               resulting from draft-ietf-usefor-usefor-xx.txt, and               remove this Note.),&rdquo; January&nbsp;2007.</span><span>)</span></a>. One of them is the 'List-Archive'
   header field that describes how to access archives for the list. This allows to
   access the archives as a whole, but not the individual message.
</p>
<p>There is often a need or desire to refer to the archived form of a single message. For more detailed usage scenarios, please see <a class='info' href='#usage'>Section&nbsp;3.3<span> (</span><span class='info'>Usage Considerations</span><span>)</span></a>.
   This memo defines a new header, 'Archived-At', to refer to a single message at an
   archived location.
   This provides quick access to the location of a mailing list message in the list archive. It can also be used independently of mailing lists,
   for example in connection with legal requirements to archive certain messages.
</p>
<p>In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY",
   and "OPTIONAL" are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Header Field Definition</h3>

<a name="Syntax"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Syntax</h3>

<p>For the Archived-At header field, the field name is 'Archived-At'.
   The field body consist of a URI <a class='info' href='#STD66'>[STD66]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> enclosed
   in angle brackets ('&lt;', '&gt;').
   The URI MAY contain folding white space (FWS, <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a>),
   which is ignored. MTAs MUST NOT insert whitespace within the angle
   brackets, but client applications SHOULD ignore any whitespace,
   which might have been inserted by poorly behaved MTAs.
   The URI points to an archived version of the message.
   See <a class='info' href='#format'>Section&nbsp;3.1<span> (</span><span class='info'>Formats of Archived Message</span><span>)</span></a> for some more details.
</p>
<p>This header field is subject to the encoding and character
   restrictions for mail headers as described in <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a>.
</p>
<p>More formally, the header field is defined as follows
in ABNF according to <a class='info' href='#RFC4234'>[RFC4234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; October&nbsp;2005.</span><span>)</span></a>:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   archived-at = "Archived-At:" [FWS] "&lt;" folded-URI "&gt;" CRLF
   folded-URI  = &lt;URI, but free insertion of FWS permitted&gt;
</pre></div>
<p>where URI is defined in <a class='info' href='#STD66'>[STD66]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>
 and CRLF and FWS are defined in <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a>.
</p>
<p>To convert folded-URI to a URI, first apply standard <a class='info' href='#RFC2822'>[RFC2822]<span> (</span><span class='info'>Resnick, P., &ldquo;Internet Message Format,&rdquo; April&nbsp;2001.</span><span>)</span></a> unfolding rules (replacing FWS with a single SP), and then delete any remaining un-encoded SP characters.
</p>
<p>This syntax is kept simple in that only one URI per header field is
   allowed. In this point, the syntax is different from
   <a class='info' href='#RFC2369'>[RFC2369]<span> (</span><span class='info'>Baer, J. and G. Neufeld, &ldquo;The Use of URLs as Meta-Syntax for Core Mail List Commands and their Transport through Message Header Fields,&rdquo; July&nbsp;1998.</span><span>)</span></a>. Also, comments are not allowed.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Multiple Archived-At Header Fields</h3>

<p>Each Archived-At header field only contains a single URI. If it is desired to list multiple URIs where an archived copy of the message can be found, a separate Archived-At field per URI is required. Multiple Archived-At header
   fields with the same URI SHOULD be avoided. An Archived-At header
   field SHOULD only be created if the message is actually being made
   available at the URI given in the header field.
</p>
<p>If a message is forwarded from a list to a sublist, and both lists
   support adding the Archived-At header field, then the sublist SHOULD
   add a new Archived-At header field without removing the already
   existing one(s), unless the header field is exactly the same as
   an already existing one, in which case the new header field
   SHOULD NOT be added.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Interaction with Message Fragmentation and Reassembly</h3>

<p><a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> allows for the fragmentation and reassembly of messages. Archived-At header fields are to be treated in the same way as Comment header fields, i.e. copied to the first fragment message header on fragmentation and back from there to the header of the reassembled message.
</p>
<p>This treatment has been chosen for compatibility with existing infrastructure. It means that Archived-At header fields in the first fragment message MAY refer to an archived version of the whole, unfragmented, message. To avoid confusion, Archived-At headers SHOULD NOT be added to fragment messages.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Syntax Extension for Internationalized Message Headers</h3>

<p>There are some efforts to allow non-ASCII text directly in message header field bodies. In such contexts, the URI non-terminal in the syntax defined in <a class='info' href='#Syntax'>Section&nbsp;2.1<span> (</span><span class='info'>Syntax</span><span>)</span></a> is to be replaced by IRI as defined in <a class='info' href='#RFC3987'>[RFC3987]<span> (</span><span class='info'>Duerst, M. and M. Suignard, &ldquo;Internationalized Resource Identifiers (IRIs),&rdquo; January&nbsp;2005.</span><span>)</span></a>. The specifics of the  actual octet encoding of the IRI will follow the rules for general direct encoding of non-ASCII text. For conversion between IRIs and URIs, the procedures defined in <a class='info' href='#RFC3987'>[RFC3987]<span> (</span><span class='info'>Duerst, M. and M. Suignard, &ldquo;Internationalized Resource Identifiers (IRIs),&rdquo; January&nbsp;2005.</span><span>)</span></a> are to be applied.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
The X-Archived-At Header Field</h3>

<p>For backwards compatibility, this document also describes the
X-Archived-At header field, a precursor of the Archived-At
header field. The X-Archived-At header field MAY also be parsed,
but SHOULD not be generated.
</p>
<p>The following is the syntax of the X-Archived-At header field, in ABNF according to <a class='info' href='#RFC4234'>[RFC4234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; October&nbsp;2005.</span><span>)</span></a> (which also defines SP): 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   obs-archived-at = "X-Archived-At:"  SP URI CRLF
</pre></div>
<p>The X-Archived-At header field does not allow white space inside URI.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Implementation and Usage Considerations</h3>

<a name="format"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Formats of Archived Message</h3>

<p>There is no restriction on the format used to serve the archived message
from the URI in a 'Archived-At' header field. It is expected that in many
cases, the archived message will be served as (X)HTML, as plain text, or in its original form as
message/rfc822 <a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a>. Some forms of URIs may imply the
format in which the archived message is served, although this should not
be relied upon.
</p>
<p>If the protocol used to retrieve
the message allows for content negotiation, then it is also possible to
serve the archived message in several different formats. As an example, a HTTP URI in an 'Archived-At' header may make it possible to
serve the archived message both as text/html for human consumption
in a browser and as message/rfc822
for use by a mail user agent without loss of information.
</p>
<a name="implementation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Implementation Considerations</h3>

<p>
   Mailing list expanders and email archives are often separate pieces of
   software. It may therefore be difficult to create an 'Archived-At'
   header field in the mailing list expander software.
</p>
<p>One way to address this difficulty is to have the mailing list expander
   software generate an unambiguous URI, e.g. an URI based on the message id
   of the incoming email, and to set up the archiving system so that it
   redirects requests for such URIs to the actual messages.
</p>
<p>Such a system has been implemented and is in productive use at W3C.
   As an example, the URI
   <br />
"http://www.w3.org/mid/0I5U00G08DFGCR@mailsj-v1.corp.adobe.com",
   containing the significant part of the message id
   "&lt;0I5U00G08DFGCR@mailsj-v1.corp.adobe.com&gt;", is redirected to the
   URI of this message in the W3C mailing-list archive at
   http://lists.w3.org/Archives/Public/uri/2004Oct/0017.html.
</p>
<p>Source code for this implementation is available at
   http://dev.w3.org/cvsweb/search/, in particular http://dev.w3.org/cvsweb/search/cgi/mid.pl
   and http://dev.w3.org/cvsweb/search/bin/msgid-db.pl. These locations may be subject to change.
</p>
<p>When using the message id to create an address for the archived mail,
   care has to be taken to escape characters in the message id that are
   not allowed in the URI, or to remove them, as done above for the "&lt;" and "&gt;" delimiters.
</p>
<p> Implementations such as that described above can introduce a security issue. Somebody might deliberately reuse a message id to break the link to a message. This can be addressed by checking incoming message ids against those of the messages already in the archive and discarding incoming duplicates, by checking the content of incomming duplicates and discarding them if they are significantly different from the first message, by offering multiple choices in the response to the URI, or by using some authentication mechanism on incomming messages.
</p>
<a name="usage"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Usage Considerations</h3>

<p>It may at first seem strange to have a pointer to an archived form of a message in a header field of that same message. After all, if one has the message, why would one need a pointer to it? It turns out that such pointers can be extremely useful. This section describes some of the scenarios for their use.
</p>
<p>A user may want to refer to messages in a non-message context, such as on a Web page, in an instant message, or in a phone conversation. In such a case, the user can extract the URI from the Archived-At header field,  avoiding the search for the correct message in the archive.
</p>
<p>A user may want to refer to other messages in a message context. Referring to a single message is often done by replying to that message. However, when referring to more than one message, providing pointers to archived messages is a widespread practice. The Archived-At header field makes it easier to provide these pointers.
</p>
<p>A user may want to find messages related to a message at hand. The user may not have received the related messages, and therefore needs to use an archive. The user may also prefer finding related messages in the archive rather than in her MUA, because messages in archives may be linked in ways not provided by the MUA. The Archived-At header field provides a link to the starting point in the archive from which to find related messages.
</p>
<p>Please note that in the above usage scenarios, it is mostly the human reader, rather than the email client software, that makes use of the URI in the Archived-At header. However, this does not rule out the use of the URI in the Archived-At header by the email client or other software if such use is found helpful.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>There are many potential security issues when activating and dereferencing
an URI. For more details, including some countermeasures, please see <a class='info' href='#STD66'>[STD66]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
In the context of this proposal, the following are particularly relevant:
An intruder may get access to the message transmission and be able to
insert an URI pointing to some malicious content. This can be addressed by using a secured way of message transmission. Also, somebody may be
able to construct a message that is harmless when received directly,
but that produces problems when accessed via the URI. One reason for this may be the format used in the archive, where some content was not
adequately escaped. This can be addressed by using adequate escaping.
</p>
<p>The Archived-At header field points to some archived form of the message itself. This in turn may contain the Archived-At field. This creates a potential for a denial-of-service attack on the server pointed to by the URI in the Archived-At header field. The conditions are that the archived form of the message is downloaded automatically, and that further URIs in that message are followed and downloaded recursively without checking for already downloaded resources. However, this kind of scenario can easily be avoided by implementations. First, the URI in the Archived-At header field should not be dereferenced automatically. Second, appropriate measures for loop detection should be used.
</p>
<p>In <a class='info' href='#implementation'>Section&nbsp;3.2<span> (</span><span class='info'>Implementation Considerations</span><span>)</span></a>, an attack is described that may break an URI to a message by introducing a new message with the same message id. Possible countermeasures are also discussed.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Registration of the Archive-At Header Field</h3>

<p>IANA is herewith requested to register the
   Archived-At header field in the Message Header Fields Registry
   (<a class='info' href='#RFC3864'>[RFC3864]<span> (</span><span class='info'>Klyne, G., Nottingham, M., and J. Mogul, &ldquo;Registration Procedures for Message Header Fields,&rdquo; September&nbsp;2004.</span><span>)</span></a>) as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   Header field name:
      Archived-At

   Applicable protocol:
      mail (RFC 2822) and netnews (RFC XXXX)

   Status:
      standard

   Author/Change controller:
      IETF

   Specification document(s):
      Internet-Draft draft-duerst-archived-at-08.txt
      (Note to IANA and RFC Editor: Replace this with
       RFC YYYY (RFC number of this specification))

   Related information:
      none</pre></div>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Registration of the X-Archived-At Header Field</h3>

<p>This section is non-normative (specifically, an implementation which ignores this section remains compliant with this specification).
</p>
<p>IANA is herewith requested to register the
   X-Archived-At header field in the Message Header Fields Registry
   (<a class='info' href='#RFC3864'>[RFC3864]<span> (</span><span class='info'>Klyne, G., Nottingham, M., and J. Mogul, &ldquo;Registration Procedures for Message Header Fields,&rdquo; September&nbsp;2004.</span><span>)</span></a>) as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   Header field name:
      X-Archived-At

   Applicable protocol:
      mail (RFC 2822) and netnews (RFC XXXX)

   Status:
      deprecated

   Author/Change controller:
      IETF

   Specification document(s):
      Internet-Draft draft-duerst-archived-at-08.txt
      (Note to IANA and RFC Editor: Replace this with
       RFC YYYY (RFC number of this specification))

   Related information:
      none</pre></div>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Change Log</h3>

<p>Note to RFC Editor: Please remove this whole section before
      publication.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Changes from -07.txt to -08.txt</h3>

<p></p>
<blockquote class="text">
<p>Replaced 'you' by 'a user' in usage considerations section.
</p>
<p>Added a note to say that URIs may not be permanent for pointers to example implementation in "Implementation Considerations" section.
</p>
<p>Improved advice on countermeasures for  the security issue in <a class='info' href='#implementation'>Section&nbsp;3.2<span> (</span><span class='info'>Implementation Considerations</span><span>)</span></a>.
</p>
<p>Removed a superfluous sentence.
</p>
<p>Added some discussion of countermeasures to the first security issue in the security section (first paragraph).
</p>
<p>Updated acknoledgments.
</p>
</blockquote>

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Changes from -06.txt to -07.txt</h3>

<p></p>
<blockquote class="text">
<p>Changed ABNF to introduce the folded-URI rule.
</p>
<p>Added text about a security issue to <a class='info' href='#implementation'>, and mentioned it in the security section.<span> (</span><span class='info'>Implementation Considerations</span><span>)</span></a>
</p>
<p>Updated reference to netnews format.
</p>
<p>Some wording improvements.
</p>
</blockquote>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Changes from -05.txt to -06.txt</h3>

<p>
      </p>
<blockquote class="text">
<p>Removed 'also optionally' for netnews.
</p>
<p>Improved explanation in section about IRIs.
</p>
<p>Some wording improvements.
</p>
</blockquote>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Changes from -04.txt to -05.txt</h3>

<p>
      </p>
<blockquote class="text">
<p>Small wording adjustments for readability.
</p>
<p>Separated normative and informative references, added
      reference to RFC1036.
</p>
<p>Moved X-Archived-At header into separate section and
      added registration template.
</p>
<p>Clarified syntax: allowed FWS, provided alternate syntax  in an attempt to describe different syntactic layers, changed single quotes to double quotes for literals.
</p>
<p>Added section about message fragmentation.
</p>
<p>Reorganized document to reduce number of top-level sections.
</p>
<p>Added section about IRIs.
</p>
<p>Removed reference to 'safe' URI characters (no longer a term used in URI spec).
</p>
<p>Removed "URI not empty" comment in ABNF: URI according to STD66 has to contain a scheme  part anyway because it is absolute.
</p>
</blockquote>

<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5"></a><h3>6.5.&nbsp;
Changes from -03.txt to -04.txt</h3>

<p>
   </p>
<blockquote class="text">
<p>Updated from RFC 2234 to RFC 4234.
</p>
<p>Updated author's address/affiliation.
</p>
</blockquote>

<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.6"></a><h3>6.6.&nbsp;
Changes from -02.txt to -03.txt</h3>

<p></p>
<blockquote class="text">
<p>Fixed syntax to allow spaces after colon.
</p>
<p>Avoided misunderstanding with message ids ('&lt;' and '&gt;' are part of the message id)
</p>
<p>Added reference to  RFC 2119 (keywords)
</p>
<p>Changed "MUST" to "SHOULD" for existence of message
</p>
</blockquote>

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgments</h3>

<p>The members of the W3C system team, in particular Gerald Oskoboiny,
   Olivier Thereaux, Jose Kahan, and Eric Prud'hommeaux, created the mid-based email
   archive lookup system and the experimental form of the Archived-At header.
   Pete Resnik provided the motivation for writing up this memo. Discussion on
   the ietf-822@imc.org mailing list, in particular contributions by Frank Ellermann, Arnt Gulbrandsen,
   Graham Klyne, Bruce Lilly, Charles Lindsey, and Keith Moore, has led to further
   improvements of the proposal. Chris Newman, Chris Lonvick, Stephane Borzmeyer, and Vijay K. Gurbani provided additional valuable comments. 
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text">Bradner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2822">[RFC2822]</a></td>
<td class="author-text">Resnick, P., &ldquo;<a href="http://tools.ietf.org/html/rfc2822">Internet Message Format</a>,&rdquo; RFC&nbsp;2822, April&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3864">[RFC3864]</a></td>
<td class="author-text">Klyne, G., Nottingham, M., and J. Mogul, &ldquo;<a href="http://tools.ietf.org/html/rfc3864">Registration Procedures for Message Header Fields</a>,&rdquo; RFC&nbsp;3864, BCP&nbsp;90, September&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3987">[RFC3987]</a></td>
<td class="author-text">Duerst, M. and M. Suignard, &ldquo;<a href="http://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRIs)</a>,&rdquo; RFC&nbsp;3987, January&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4234">[RFC4234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc4234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; RFC&nbsp;4234, October&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="STD66">[STD66]</a></td>
<td class="author-text">Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2046">[RFC2046]</a></td>
<td class="author-text">Freed, N. and N. Borenstein, &ldquo;<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>,&rdquo; RFC&nbsp;2046, November&nbsp;1996.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2369">[RFC2369]</a></td>
<td class="author-text">Baer, J. and G. Neufeld, &ldquo;<a href="http://tools.ietf.org/html/rfc2369">The Use of URLs as Meta-Syntax for Core Mail List Commands and their Transport through Message Header Fields</a>,&rdquo; RFC&nbsp;2369, July&nbsp;1998.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFCXXXX">[RFCXXXX]</a></td>
<td class="author-text">Murchison, K., Lindsey, C., and D. Kohn, &ldquo;Netnews Article Format (Note to RFC Editor: Please update this reference with the RFC
              resulting from draft-ietf-usefor-usefor-xx.txt, and
              remove this Note.),&rdquo; January&nbsp;2007.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Duerst (Note: Please write "Duerst" with u-umlaut wherever possible, for example as "D&amp;#252;rst" in XML and HTML.)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Aoyama Gakuin University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">5-10-1 Fuchinobe</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sagamihara, Kanagawa  229-8558</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Japan</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+81 42 759 6329</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+81 42 759 6495</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mailto:duerst@it.aoyama.ac.jp">mailto:duerst@it.aoyama.ac.jp</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.sw.it.aoyama.ac.jp/D%C3%BCrst/">http://www.sw.it.aoyama.ac.jp/D%C3%BCrst/</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
