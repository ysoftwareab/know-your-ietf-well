<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Web Distributed Authoring and Versioning (WebDAV) SEARCH</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Web Distributed Authoring and Versioning (WebDAV) SEARCH">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">J. Reschke, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">greenbytes</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">S. Reddy</td></tr>
<tr><td class="header">Expires: January 8, 2009</td><td class="header">Mitrix</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Davis</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">&nbsp;</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Babich</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">IBM</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 07, 2008</td></tr>
</table></td></tr></table>
<h1><br />Web Distributed Authoring and Versioning (WebDAV) SEARCH<br />draft-reschke-webdav-search-16</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 8, 2009.</p>

<h3>Abstract</h3>

<p>
  This document specifies a set of methods, headers, properties and content-types
  composing WebDAV SEARCH, an application of the HTTP/1.1 protocol to efficiently search for DAV 
  resources based upon a set of client-supplied criteria.   

</p>
<h3>Editorial Note (To be removed by RFC Editor before publication)</h3>

<p>
    Please send comments to the Distributed Authoring and Versioning (WebDAV)
    DASL mailing list at <a href='mailto:www-webdav-dasl@w3.org'>mailto:www-webdav-dasl@w3.org</a>,
    which may be joined by sending a message with subject "subscribe" to
    <a href='mailto:www-webdav-dasl-request@w3.org'>mailto:www-webdav-dasl-request@w3.org</a>.
    Discussions of the WebDAV DASL mailing list are archived at
    <a href='http://lists.w3.org/Archives/Public/www-webdav-dasl/'>http://lists.w3.org/Archives/Public/www-webdav-dasl/</a>.       
  
</p>
<p>
    An issues list and XML and HTML versions of this draft are available from
    <a href='http://greenbytes.de/tech/webdav/#draft-reschke-webdav-search'>http://greenbytes.de/tech/webdav/#draft-reschke-webdav-search</a>.
  
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
DASL<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Relationship to DAV<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.3.</a>&nbsp;
Terms<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">1.4.</a>&nbsp;
Notational Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">1.5.</a>&nbsp;
Note on Usage of 'DAV:' XML Namespace<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">1.6.</a>&nbsp;
An Overview of DASL at Work<br />
<a href="#METHOD_SEARCH">2.</a>&nbsp;
The SEARCH Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.2.</a>&nbsp;
The Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">2.2.1.</a>&nbsp;
The Request-URI<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#request.body">2.2.2.</a>&nbsp;
The Request Body<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">2.3.</a>&nbsp;
The Successful 207 (Multistatus) Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">2.3.1.</a>&nbsp;
Result Set Truncation<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">2.3.2.</a>&nbsp;
Extending the PROPFIND Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">2.3.3.</a>&nbsp;
Example: A Simple Request and Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">2.3.4.</a>&nbsp;
Example: Result Set Truncation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">2.4.</a>&nbsp;
Unsuccessful Responses<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">2.4.1.</a>&nbsp;
Example of an Invalid Scope<br />
<a href="#discovery.of.supported.query.grammars">3.</a>&nbsp;
Discovery of Supported Query Grammars<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">3.1.</a>&nbsp;
The OPTIONS Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#header.dasl">3.2.</a>&nbsp;
The DASL Response Header<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#PROPERTY_supported-query-grammar-set">3.3.</a>&nbsp;
DAV:supported-query-grammar-set (protected)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">3.4.</a>&nbsp;
Example: Grammar Discovery<br />
<a href="#QSD">4.</a>&nbsp;
Query Schema Discovery: QSD<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">4.1.</a>&nbsp;
Additional SEARCH Semantics<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">4.1.1.</a>&nbsp;
Example of Query Schema Discovery<br />
<a href="#basicsearch">5.</a>&nbsp;
The DAV:basicsearch Grammar<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">5.1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">5.2.</a>&nbsp;
The DAV:basicsearch DTD<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">5.2.1.</a>&nbsp;
Example Query<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">5.3.</a>&nbsp;
DAV:select<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">5.4.</a>&nbsp;
DAV:from<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">5.4.1.</a>&nbsp;
Relationship to the Request-URI<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">5.4.2.</a>&nbsp;
Scope<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">5.5.</a>&nbsp;
DAV:where<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor30">5.5.1.</a>&nbsp;
Use of Three-Valued Logic in Queries<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">5.5.2.</a>&nbsp;
Handling Optional Operators<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#null-values">5.5.3.</a>&nbsp;
Treatment of NULL Values<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#non-simple-types">5.5.4.</a>&nbsp;
Treatment of Properties with mixed/element Content<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor32">5.5.5.</a>&nbsp;
Example: Testing for Equality<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor33">5.5.6.</a>&nbsp;
Example: Relative Comparisons<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor34">5.6.</a>&nbsp;
DAV:orderby<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor35">5.6.1.</a>&nbsp;
Example of Sorting<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor36">5.7.</a>&nbsp;
Boolean Operators: DAV:and, DAV:or, and DAV:not<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor37">5.8.</a>&nbsp;
DAV:eq<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor38">5.9.</a>&nbsp;
DAV:lt, DAV:lte, DAV:gt, DAV:gte<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor39">5.10.</a>&nbsp;
DAV:literal<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor40">5.11.</a>&nbsp;
DAV:typed-literal (optional)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor41">5.11.1.</a>&nbsp;
Example for Typed Numerical Comparison<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor42">5.12.</a>&nbsp;
Support for Matching xml:lang Attributes on Properties<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#operator.language-defined">5.12.1.</a>&nbsp;
DAV:language-defined (optional)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#operator.language-matches">5.12.2.</a>&nbsp;
DAV:language-matches (optional)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor43">5.12.3.</a>&nbsp;
Example of Language-Aware Matching<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#OPERATOR_is-collection">5.13.</a>&nbsp;
DAV:is-collection<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor44">5.13.1.</a>&nbsp;
Example of DAV:is-collection<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor45">5.14.</a>&nbsp;
DAV:is-defined<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor46">5.15.</a>&nbsp;
DAV:like<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor47">5.15.1.</a>&nbsp;
Syntax for the Literal Pattern<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor48">5.15.2.</a>&nbsp;
Example of DAV:like<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#contains">5.16.</a>&nbsp;
DAV:contains<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#score">5.16.1.</a>&nbsp;
Result Scoring (DAV:score Element)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor49">5.16.2.</a>&nbsp;
Ordering by Score<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor50">5.16.3.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#limiting.the.result.set">5.17.</a>&nbsp;
Limiting the Result Set<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor51">5.17.1.</a>&nbsp;
Relationship to Result Ordering<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#caseless">5.18.</a>&nbsp;
The 'caseless' XML Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#qs-basicsearch">5.19.</a>&nbsp;
Query Schema for DAV:basicsearch<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor52">5.19.1.</a>&nbsp;
DTD for DAV:basicsearch QSD<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor53">5.19.2.</a>&nbsp;
DAV:propdesc Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor55">5.19.3.</a>&nbsp;
The DAV:datatype Property Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor56">5.19.4.</a>&nbsp;
The DAV:searchable Property Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor57">5.19.5.</a>&nbsp;
The DAV:selectable Property Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor58">5.19.6.</a>&nbsp;
The DAV:sortable Property Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor59">5.19.7.</a>&nbsp;
The DAV:caseless Property Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor60">5.19.8.</a>&nbsp;
The DAV:operators XML Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor61">5.19.9.</a>&nbsp;
Example of Query Schema for DAV:basicsearch<br />
<a href="#anchor62">6.</a>&nbsp;
Internationalization Considerations<br />
<a href="#anchor63">7.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor64">7.1.</a>&nbsp;
Implications of XML External Entities<br />
<a href="#anchor65">8.</a>&nbsp;
Scalability<br />
<a href="#anchor66">9.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor67">9.1.</a>&nbsp;
HTTP Headers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor68">9.1.1.</a>&nbsp;
DASL<br />
<a href="#anchor69">10.</a>&nbsp;
Contributors<br />
<a href="#anchor70">11.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">12.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">12.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">12.2.</a>&nbsp;
Informative References<br />
<a href="#three-valued-logic">Appendix&nbsp;A.</a>&nbsp;
Three-Valued Logic in DAV:basicsearch<br />
<a href="#future.protocol.extensions">Appendix&nbsp;B.</a>&nbsp;
Candidates for Future Protocol Extensions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions.collations">B.1.</a>&nbsp;
Collation Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions.count">B.2.</a>&nbsp;
Count<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions.diagnostics">B.3.</a>&nbsp;
Diagnostics for Unsupported Queries<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions.language.matching">B.4.</a>&nbsp;
Language Matching<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions.mediatype-match">B.5.</a>&nbsp;
Matching Media Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions.query-by-name">B.6.</a>&nbsp;
Query by Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions.result-paging">B.7.</a>&nbsp;
Result Paging<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions.search.scope.discovery">B.8.</a>&nbsp;
Search Scope Discovery<br />
<a href="#anchor73">Appendix&nbsp;C.</a>&nbsp;
Change Log (to be removed by RFC Editor before publication)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor74">C.1.</a>&nbsp;
From draft-davis-dasl-protocol-xxx<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor75">C.2.</a>&nbsp;
since start of draft-reschke-webdav-search<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor76">C.3.</a>&nbsp;
since draft-reschke-webdav-search-00<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor77">C.4.</a>&nbsp;
since draft-reschke-webdav-search-01<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor78">C.5.</a>&nbsp;
since draft-reschke-webdav-search-02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor79">C.6.</a>&nbsp;
since draft-reschke-webdav-search-03<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor80">C.7.</a>&nbsp;
since draft-reschke-webdav-search-04<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor81">C.8.</a>&nbsp;
since draft-reschke-webdav-search-05<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor82">C.9.</a>&nbsp;
since draft-reschke-webdav-search-06<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor83">C.10.</a>&nbsp;
since draft-reschke-webdav-search-07<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor84">C.11.</a>&nbsp;
since draft-reschke-webdav-search-08<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor85">C.12.</a>&nbsp;
since draft-reschke-webdav-search-09<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor86">C.13.</a>&nbsp;
since draft-reschke-webdav-search-10<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor87">C.14.</a>&nbsp;
since draft-reschke-webdav-search-11<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor88">C.15.</a>&nbsp;
since draft-reschke-webdav-search-12<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor89">C.16.</a>&nbsp;
since draft-reschke-webdav-search-13<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor90">C.17.</a>&nbsp;
since draft-reschke-webdav-search-14<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor91">C.18.</a>&nbsp;
since draft-reschke-webdav-search-15<br />
<a href="#anchor92">Appendix&nbsp;D.</a>&nbsp;
Resolved issues (to be removed by RFC Editor before publication)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor93">D.1.</a>&nbsp;
standardstrack<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor94">D.2.</a>&nbsp;
acls<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor95">D.3.</a>&nbsp;
scope-discovery<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor96">D.4.</a>&nbsp;
3.2-listsyntax<br />
<a href="#anchor97">Appendix&nbsp;E.</a>&nbsp;
Open issues (to be removed by RFC Editor prior to publication)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor98">E.1.</a>&nbsp;
edit<br />
<a href="#rfc.index">&#167;</a>&nbsp;
Index<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
DASL</h3>

<p>
  This document defines Web Distributed Authoring and Versioning (WebDAV) SEARCH, an application
  of HTTP/1.1 forming a lightweight search protocol to transport queries
  and result sets that allows clients to make use of server-side search facilities.
  It is based on the expired internet draft for DAV Searching &amp; Locating <a class='info' href='#DASL'>[DASL]<span> (</span><span class='info'>Reddy, S., Lowry, D., Reddy, S., Henderson, R., Davis, J., and A. Babich, &ldquo;DAV Searching &amp; Locating,&rdquo; July&nbsp;1999.</span><span>)</span></a>.
  <a class='info' href='#DASLREQ'>[DASLREQ]<span> (</span><span class='info'>Davis, J., Reddy, S., and J. Slein, &ldquo;Requirements for DAV Searching and Locating,&rdquo; February&nbsp;1999.</span><span>)</span></a> describes the motivation for DASL.
  In this specification,
  the terms "WebDAV SEARCH" and "DASL" are used interchangeably.

</p>
<p>
  DASL minimizes the complexity of clients so as to facilitate widespread
  deployment of applications capable of utilizing the DASL search mechanisms.

</p>
<p>
  DASL consists of:
	</p>
<ul class="text">
<li>the SEARCH method and the request/response formats defined for it (<a class='info' href='#METHOD_SEARCH'>Section&nbsp;2<span> (</span><span class='info'>The SEARCH Method</span><span>)</span></a>),
</li>
<li>feature discovery through the "DASL" response header and
    the optional DAV:supported-grammar-set property (<a class='info' href='#discovery.of.supported.query.grammars'>Section&nbsp;3<span> (</span><span class='info'>Discovery of Supported Query Grammars</span><span>)</span></a>),
</li>
<li>optional grammar schema discovery (<a class='info' href='#QSD'>Section&nbsp;4<span> (</span><span class='info'>Query Schema Discovery: QSD</span><span>)</span></a>) and
</li>
<li>one mandatory grammar: DAV:basicsearch (<a class='info' href='#basicsearch'>Section&nbsp;5<span> (</span><span class='info'>The DAV:basicsearch Grammar</span><span>)</span></a>).
</li>
</ul><p>

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Relationship to DAV</h3>

<p>
  DASL relies on the resource and property model defined by <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>.
  DASL does not alter this model. Instead, DASL allows clients to access DAV-modeled
  resources through server-side search.

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Terms</h3>

<p>
   This document uses the terms defined in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, in
   <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, in <a class='info' href='#RFC3253'>[RFC3253]<span> (</span><span class='info'>Clemm, G., Amsden, J., Ellison, T., Kaler, C., and J. Whitehead, &ldquo;Versioning Extensions to WebDAV,&rdquo; March&nbsp;2002.</span><span>)</span></a> and in this section.

</p>
<p>Criteria<a name='anchor99'></a>
  </p>
<blockquote class="text">
<p>
    An expression against which each resource in the search scope is evaluated.
  
</p>
</blockquote><p>

</p>
<p>Query<a name='anchor100'></a>
  </p>
<blockquote class="text">
<p>
    A query is a combination of a search scope, search criteria, result record
    definition, sort specification, and a search modifier.
  
</p>
</blockquote><p>

</p>
<p>Query Grammar<a name='anchor101'></a>
  </p>
<blockquote class="text">
<p>
    A set of definitions of XML elements, attributes, and constraints on their
    relations and values that defines a set of queries and the intended semantics. 
  
</p>
</blockquote><p>

</p>
<p>Query Schema<a name='anchor102'></a>
  </p>
<blockquote class="text">
<p>
    A listing, for any given grammar and scope, of the properties and operators
    that may be used in a query with that grammar and scope. 
  
</p>
</blockquote><p>

</p>
<p>Result<a name='anchor103'></a>
  </p>
<blockquote class="text">
<p>
    A result is a result set, optionally augmented with other information describing the search as a whole.
  
</p>
</blockquote><p>

</p>
<p>Result Record<a name='anchor104'></a>
  </p>
<blockquote class="text">
<p>
    A description of a resource. A result record is a set of properties, and possibly other descriptive information.
  
</p>
</blockquote><p>

</p>
<p>Result Record Definition<a name='anchor105'></a>
  </p>
<blockquote class="text">
<p>
    A specification of the set of properties to be returned in the result record.
  
</p>
</blockquote><p>

</p>
<p>Result Set<a name='anchor106'></a>
  </p>
<blockquote class="text">
<p>
    A set of records, one for each resource for which the search criteria evaluated to True. 
  
</p>
</blockquote><p>

</p>
<p>Scope<a name='anchor107'></a>
  </p>
<blockquote class="text">
<p>
    A set of resources to be searched. 
  
</p>
</blockquote><p>

</p>
<p>Search Arbiter<a name='anchor108'></a>
  </p>
<blockquote class="text">
<p>
    A resource that supports the SEARCH method.
  
</p>
</blockquote><p>

</p>
<p>Search Modifier<a name='anchor109'></a>
  </p>
<blockquote class="text">
<p>
    An instruction that governs the execution of the query but is not part of
    the search scope, result record definition, the search criteria, or the sort
    specification. An example of a search modifier is one that controls how
    much time the server can spend on the query before giving a response. 
  
</p>
</blockquote><p>

</p>
<p>Sort Specification<a name='anchor110'></a>
  </p>
<blockquote class="text">
<p>
    A specification of an ordering on the result records in the result set. 
  
</p>
</blockquote><p>

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
Notational Conventions</h3>

<p>
  This specification uses the Augmented Backus-Naur Form (ABNF) notation of <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D., Ed. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>,
  unless explicitly stated otherwise.

</p>
<p>
  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
  "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document
  are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.

</p>
<p>
  This document uses XML DTD fragments 
  (<a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Fourth Edition),&rdquo; August&nbsp;2006.</span><span>)</span></a>, Section 3.2) as a purely notational convention. WebDAV
  request and response bodies can not be validated by a DTD  due to the specific
  extensibility rules defined in Section 17 of <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a> and
  due to the fact that all XML elements defined by this specification use the 
  XML namespace name "DAV:". In particular:
  </p>
<ol class="text">
<li>element names use the "DAV:" namespace,
</li>
<li>element ordering is irrelevant unless explicitly stated,
</li>
<li>extension elements (elements not already defined as valid child
    elements) may be added anywhere, except when explicitly stated otherwise,
</li>
<li>extension attributes (attributes not already defined as valid for this
    element) may be added anywhere, except when explicitly stated otherwise.
</li>
</ol><p>

</p>
<p>
  When an XML element type in the "DAV:" namespace is referenced in this document
  outside of the context of an XML fragment, the string "DAV:" will be prefixed to
  the element type.

</p>
<p>
  Similarly, when an XML element type in the namespace "http://www.w3.org/2001/XMLSchema"
  is referenced in this document outside of the context of an XML fragment, the
  string "xs:" will be prefixed to the element type.

</p>
<p>
  This document inherits, and sometimes extends, DTD productions from Section 14 of <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.5"></a><h3>1.5.&nbsp;
Note on Usage of 'DAV:' XML Namespace</h3>

<p>

  This specification defines elements, properties and condition names in the
  XML namespace "DAV:". In general, only specifications authored by IETF
  working groups are supposed to do this. In this case an exception was made,
  because WebDAV SEARCH started its life in the IETF DASL working group
  (<a href='http://www.webdav.org/dasl/'>http://www.webdav.org/dasl/</a>, and at the time the working
  group closed down there was already significant deployment of this specification.
  

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.6"></a><h3>1.6.&nbsp;
An Overview of DASL at Work</h3>

<p>
One can express the basic usage of DASL in the following steps:
</p>
<ul class="text">
<li>The client constructs a query using the DAV:basicsearch grammar.
</li>
<li>The client invokes the SEARCH method on a resource that will perform the
     search (the search arbiter) and includes a text/xml or application/xml request entity that
     contains the query.
</li>
<li>The search arbiter performs the query.
</li>
<li>The search arbiter sends the results of the query back to the client in
     the response. The server MUST send an entity
     that matches the 
     WebDAV multistatus format (<a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, Section 13).
</li>
</ul><p>

</p>
<a name="METHOD_SEARCH"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
The SEARCH Method</h3>
<a name='anchor111'></a><a name='anchor112'></a>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Overview</h3>

<p>
  The client invokes the SEARCH method to initiate a server-side search.
  The body of the request defines the query. The server MUST emit
  an entity matching the 
     WebDAV multistatus format (<a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, Section 13).

</p>
<p>
  The SEARCH method plays the role of transport mechanism for the query
  and the result set. It does not define the semantics of the query. The
  type of the query defines the semantics.

</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
The Request</h3>

<p>
  The client invokes the SEARCH method on the resource named by the Request-URI.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
The Request-URI</h3>

<p>
  The Request-URI identifies the search arbiter.
  Any HTTP resource may function as search arbiter. It is not a new type of
  resource (in the sense of DAV:resourcetype as defined in 
  <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, Section 15.9),
  nor does it have to be a WebDAV-compliant resource.

</p>
<p>
  The SEARCH method defines no relationship between the arbiter and the
  scope of the search, rather the particular query grammar used in the query
  defines the relationship. For example, a query grammar may force
  the Request-URI to correspond exactly to the search scope.

</p>
<a name="request.body"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
The Request Body</h3>

<p>
  The server MUST process a text/xml or application/xml request body, and
  MAY process request bodies in other formats. See <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Makoto, M., St.Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a> for guidance
  on packaging XML in requests.

</p>
<p>
  Marshalling:
  </p>
<blockquote class="text">
<p>
      If a request body with content type text/xml or application/xml is included,
      it MUST be either a DAV:searchrequest or a DAV:query-schema-discovery XML
      element. Its single child element identifies the query grammar.
    
</p>
<p>
      For DAV:searchrequest, the definition of search criteria, the result record,
      and any other details needed to perform the search depend on the individual
      search grammar.
    
</p>
<p>
      For DAV:query-schema-discovery, the semantics is defined in
      <a class='info' href='#QSD'>Section&nbsp;4<span> (</span><span class='info'>Query Schema Discovery: QSD</span><span>)</span></a>.
    
</p>
</blockquote><p>

</p>
<p>
  Preconditions:
  </p>
<blockquote class="text">
<p>
      <a name='anchor113'></a>
      <a name='anchor114'></a>
      (DAV:search-grammar-discovery-supported): when an XML request body is present
      and has a DAV:query-schema-discovery document element, the server MUST
      support the query schema discovery mechanism described in <a class='info' href='#QSD'>Section&nbsp;4<span> (</span><span class='info'>Query Schema Discovery: QSD</span><span>)</span></a>.
    
</p>
<p>
      <a name='anchor115'></a>
      <a name='anchor116'></a>
      (DAV:search-grammar-supported): when an XML request body is present,
      the search grammar identified by the document element's child element
      must be a supported search grammar.
    
</p>
<p>
      <a name='anchor117'></a>
      <a name='anchor118'></a>
      (DAV:search-multiple-scope-supported): if the SEARCH request specified
      multiple scopes, the server MUST support this optional feature.
    
</p>
<p>
      <a name='anchor119'></a>
      <a name='anchor120'></a>
      (DAV:search-scope-valid): the supplied search scope must be valid. There
      can be various reasons for a search scope to be invalid, including
      unsupported URI schemes and communication problems. Servers MAY add
      <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a> compliant DAV:response elements as content to the
      condition element indicating the precise reason for the failure.
    
</p>
</blockquote><p>

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
The Successful 207 (Multistatus) Response</h3>

<p>
  If the server returns 207 (Multistatus), then the search proceeded successfully
  and the response MUST 
  use the WebDAV multistatus format (<a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, Section 13).
  The results of this method SHOULD NOT be cached. 

</p>
<p>
  There MUST be one DAV:response for each resource that matched
  the search criteria. For each such response, the DAV:href element
  contains the URI of the resource, and the response MUST include a DAV:propstat
  element.

</p>
<p></p>
<blockquote class="text">
<p>
  Note: the WebDAV multistatus format requires at least one
  DAV:response child element. This specification relaxes that restriction
  so that empty results can be represented.

</p>
</blockquote>

<p>
  Note that for each matching resource found there may be multiple URIs
  within the search scope mapped to it. In this case, a server SHOULD report
  only one of these URIs. Clients can use the live property DAV:resource-id defined
  in Section 3.1 of <a class='info' href='#draft-ietf-webdav-bind'>[draft&#8209;ietf&#8209;webdav&#8209;bind]<span> (</span><span class='info'>Clemm, G., Crawford, J., Reschke, J., Ed., and J. Whitehead, &ldquo;Binding Extensions to Web Distributed Authoring and Versioning (WebDAV),&rdquo; November&nbsp;2007.</span><span>)</span></a> to identify possible duplicates. 

</p><a name='anchor121'></a>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.1"></a><h3>2.3.1.&nbsp;
Result Set Truncation</h3>

<p>
  A server MAY limit the number of resources in a reply, for example to limit
  the amount of resources expended in processing a query. If it does so,
  the reply MUST use status code 207, return a DAV:multistatus response
  body and indicate a status of 507 (Insufficient Storage) for the search
  arbiter URI. It SHOULD include the partial results.

</p>
<p>
  When a result set is truncated, there may be many more resources that
  satisfy the search criteria but that were not examined.

</p>
<p>
  If partial results are included and the client requested an ordered
  result set in the original request, then any partial results that are returned
  MUST be ordered as the client directed.

</p>
<p>
  Note that the partial results returned MAY be any subset of the result
  set that would have satisfied the original query.

</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.2"></a><h3>2.3.2.&nbsp;
Extending the PROPFIND Response</h3>

<p>
  A response MAY include more information than PROPFIND defines so long as
  the extra information does not invalidate the PROPFIND response. Query
  grammars SHOULD define how the response matches the PROPFIND response.

</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.3"></a><h3>2.3.3.&nbsp;
Example: A Simple Request and Response</h3>

<p>
  This example demonstrates the request and response framework. The following
  XML document shows a simple (hypothetical) natural language query. 
  The name of the query element is natural-language-query in the XML namespace
  "http://example.com/foo". The actual query is "Find the
  locations of good Thai restaurants in Los Angeles". For this hypothetical
  query, the arbiter returns two properties for each selected resource.

</p>
<p>
&gt;&gt; Request:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
SEARCH / HTTP/1.1
Host: example.org
Content-Type: application/xml; charset="utf-8"
Content-Length: 252

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;D:searchrequest xmlns:D="DAV:" xmlns:F="http://example.com/foo"&gt;
  &lt;F:natural-language-query&gt;
    Find the locations of good Thai restaurants in Los Angeles
  &lt;/F:natural-language-query&gt;
&lt;/D:searchrequest&gt;
</pre></div>
<p>
&gt;&gt; Response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 207 Multi-Status
Content-Type: text/xml; charset="utf-8"
Content-Length: 429

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;D:multistatus xmlns:D="DAV:"
   xmlns:R="http://example.org/propschema"&gt;
  &lt;D:response&gt;
    &lt;D:href&gt;http://siamiam.example/&lt;/D:href&gt;
    &lt;D:propstat&gt;
      &lt;D:prop&gt;
        &lt;R:location&gt;259 W. Hollywood&lt;/R:location&gt;
        &lt;R:rating&gt;&lt;R:stars&gt;4&lt;/R:stars&gt;&lt;/R:rating&gt;
      &lt;/D:prop&gt;
      &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
    &lt;/D:propstat&gt;
  &lt;/D:response&gt;
&lt;/D:multistatus&gt;
</pre></div>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.4"></a><h3>2.3.4.&nbsp;
Example: Result Set Truncation</h3>

<p>
  In the example below, the server returns just two results, and then
  indicates that the result is truncated by adding a DAV:response element
  for the search arbiter resource with 507 (Insufficient Storage) status.

</p>
<p>
&gt;&gt; Request:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
SEARCH / HTTP/1.1
Host: example.net
Content-Type: text/xml; charset="utf-8"
Content-Length: xxx

 ... the query goes here ...
</pre></div>
<p>
&gt;&gt; Response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 207 Multistatus
Content-Type: text/xml; charset="utf-8"
Content-Length: 640

&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;D:multistatus xmlns:D="DAV:"&gt;
  &lt;D:response&gt;
    &lt;D:href&gt;http://www.example.net/sounds/unbrokenchain.au&lt;/D:href&gt;
    &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
  &lt;/D:response&gt;
  &lt;D:response&gt;
    &lt;D:href&gt;http://tech.mit.example/arch96/photos/Lesh1.jpg&lt;/D:href&gt;
    &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
  &lt;/D:response&gt;
  &lt;D:response&gt;
    &lt;D:href&gt;http://example.net&lt;/D:href&gt;
    &lt;D:status&gt;HTTP/1.1 507 Insufficient Storage&lt;/D:status&gt;
    &lt;D:responsedescription xml:lang="en"&gt;
       Only first two matching records were returned
    &lt;/D:responsedescription&gt;
  &lt;/D:response&gt;
&lt;/D:multistatus&gt;
</pre></div>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Unsuccessful Responses</h3>

<p>
  If a SEARCH request could not be executed or the attempt to execute it
  resulted in an error, the server MUST indicate the failure with an
  appropriate status code and SHOULD add a response body as defined in
  <a class='info' href='#RFC3253'>[RFC3253]<span> (</span><span class='info'>Clemm, G., Amsden, J., Ellison, T., Kaler, C., and J. Whitehead, &ldquo;Versioning Extensions to WebDAV,&rdquo; March&nbsp;2002.</span><span>)</span></a>, Section 1.6. Unless otherwise stated, condition
  elements are empty, however specific condition elements MAY include
  additional child elements that describe the error condition in more detail.

</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4.1"></a><h3>2.4.1.&nbsp;
Example of an Invalid Scope</h3>

<p>
  In the example below, a request failed because the scope identifies a 
  HTTP resource that was not found.

</p>
<p>
&gt;&gt; Response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 409 Conflict
Content-Type: text/xml; charset="utf-8"
Content-Length: 275

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;d:error xmlns:d="DAV:"&gt;
  &lt;d:search-scope-valid&gt;
    &lt;d:response&gt;
      &lt;d:href&gt;http://www.example.com/X&lt;/d:href&gt;
      &lt;d:status&gt;HTTP/1.1 404 Object Not Found&lt;/d:status&gt;
    &lt;/d:response&gt;
  &lt;/d:search-scope-valid&gt;
&lt;/d:error&gt;
</pre></div>
<a name="discovery.of.supported.query.grammars"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Discovery of Supported Query Grammars</h3>
<a name='anchor122'></a>
<p>
  Servers MUST support discovery of the query grammars supported by a search
  arbiter resource.

</p>
<p>
  Clients can determine which query grammars are supported by an arbiter
  by invoking OPTIONS on the search arbiter. If the resource supports SEARCH,
  then the DASL response header will appear in the response. The DASL response
  header lists the supported grammars.

</p>
<p>
  Servers supporting the WebDAV extensions <a class='info' href='#RFC3253'>[RFC3253]<span> (</span><span class='info'>Clemm, G., Amsden, J., Ellison, T., Kaler, C., and J. Whitehead, &ldquo;Versioning Extensions to WebDAV,&rdquo; March&nbsp;2002.</span><span>)</span></a> and/or 
  <a class='info' href='#RFC3744'>[RFC3744]<span> (</span><span class='info'>Clemm, G., Reschke, J., Sedlar, E., and J. Whitehead, &ldquo;Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol,&rdquo; May&nbsp;2004.</span><span>)</span></a> MUST also
  </p>
<ul class="text">
<li>report SEARCH in the live property DAV:supported-method-set for all search arbiter resources and
</li>
<li>support the live property DAV:supported-query-grammar-set as defined in <a class='info' href='#PROPERTY_supported-query-grammar-set'>Section&nbsp;3.3<span> (</span><span class='info'>DAV:supported-query-grammar-set (protected)</span><span>)</span></a>.
</li>
</ul><p>

</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
The OPTIONS Method</h3>
<a name='anchor123'></a><a name='anchor124'></a>
<p>
  The OPTIONS method allows the client to discover if a resource supports
  the SEARCH method and to determine the list of search grammars supported
  for that resource.

</p>
<p>
  The client issues the OPTIONS method against a resource named by the
  Request-URI. This is a normal invocation of OPTIONS as defined in Section 9.2 of <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>.

</p>
<p>
  If a resource supports the SEARCH method, then the server MUST list
  SEARCH in the Allow header
  defined in Section 14.7 of <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>.

</p>
<p>
  DASL servers MUST include the DASL header in the OPTIONS response. This
  header identifies the search grammars supported by that resource.

</p>
<a name="header.dasl"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
The DASL Response Header</h3>
<a name='anchor125'></a><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
DASLHeader = "DASL" ":" 1#Coded-URL
Coded-URL  = &lt;defined in Section 10.1 of [RFC4918]&gt;
</pre></div>
<p>
(This grammar uses the augmented BNF format defined in Section 2.1 of <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>)

</p>
<p>
  The DASL response header indicates server support for query grammars in
  the OPTIONS method. The value is a
  list of URIs that indicate the types of supported grammars.
  Note that although the URIs can be used to identify each supported search
  grammar, there is not necessarily a direct relationship between the URI and the
  XML element name that can be used in XML based SEARCH requests (the element 
  name itself is identified by its namespace name (a URI reference) and 
  the element's local name).

</p>
<p>
  </p>
<blockquote class="text">
<p>
  Note: this header field value is defined as a comma-separated list
  (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, Section 4.2), thus grammar URIs can
  appear in multiple header instances, separated by commas, or both.
  
</p>
</blockquote><p> 

</p>
<p>
For example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
DASL: &lt;http://foobar.example/syntax1&gt;,
      &lt;http://akuma.example/syntax2&gt;, &lt;DAV:basicsearch&gt;
DASL: &lt;http://example.com/foo/natural-language-query&gt;
</pre></div>
<a name="PROPERTY_supported-query-grammar-set"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
DAV:supported-query-grammar-set (protected)</h3>
<a name='anchor126'></a><a name='anchor127'></a><a name='anchor128'></a>
<p>
  This WebDAV property is required for any server supporting either
  <a class='info' href='#RFC3253'>[RFC3253]<span> (</span><span class='info'>Clemm, G., Amsden, J., Ellison, T., Kaler, C., and J. Whitehead, &ldquo;Versioning Extensions to WebDAV,&rdquo; March&nbsp;2002.</span><span>)</span></a> and/or <a class='info' href='#RFC3744'>[RFC3744]<span> (</span><span class='info'>Clemm, G., Reschke, J., Sedlar, E., and J. Whitehead, &ldquo;Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol,&rdquo; May&nbsp;2004.</span><span>)</span></a> and
  identifies the XML based query grammars that are supported by the search arbiter resource.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT supported-query-grammar-set (supported-query-grammar*)&gt;
&lt;!ELEMENT supported-query-grammar (grammar)&gt;
&lt;!ELEMENT grammar ANY&gt;
&lt;!-- ANY value: a query grammar element type --&gt;
</pre></div>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Example: Grammar Discovery</h3>

<p>
  This example shows that the server supports search on the /somefolder
  resource with the query grammars: DAV:basicsearch, http://foobar.example/syntax1
  and http://akuma.example/syntax2. Note that servers supporting WebDAV SEARCH MUST support
  DAV:basicsearch.

</p>
<p>
&gt;&gt; Request:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
OPTIONS /somefolder HTTP/1.1
Host: example.org
</pre></div>
<p>
&gt;&gt; Response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 200 OK
Allow: OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, COPY, MOVE
Allow: MKCOL, PROPFIND, PROPPATCH, LOCK, UNLOCK, SEARCH
DASL: &lt;DAV:basicsearch&gt;
DASL: &lt;http://foobar.example/syntax1&gt;, &lt;http://akuma.example/syntax2&gt;
</pre></div>
<p>
  This example shows the equivalent taking advantage of a server's support for
  DAV:supported-method-set and DAV:supported-query-grammar-set.

</p>
<p>
&gt;&gt; Request:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
PROPFIND /somefolder HTTP/1.1
Host: example.org
Depth: 0
Content-Type: text/xml; charset="utf-8"
Content-Length: 165

&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;propfind xmlns="DAV:"&gt;
  &lt;prop&gt;
    &lt;supported-query-grammar-set/&gt;
    &lt;supported-method-set/&gt;
  &lt;/prop&gt;
&lt;/propfind&gt;
</pre></div>
<p>
&gt;&gt; Response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 207 Multi-Status
Content-Type: text/xml; charset="utf-8"
Content-Length: 1349

&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;multistatus xmlns="DAV:"&gt;
 &lt;response&gt;
  &lt;href&gt;http://example.org/somefolder&lt;/href&gt;
  &lt;propstat&gt;
   &lt;prop&gt;
    &lt;supported-query-grammar-set&gt;
     &lt;supported-query-grammar&gt;
      &lt;grammar&gt;&lt;basicsearch/&gt;&lt;/grammar&gt;
     &lt;/supported-query-grammar&gt;
     &lt;supported-query-grammar&gt;
      &lt;grammar&gt;&lt;syntax1 xmlns="http://foobar.example/"/&gt;&lt;/grammar&gt;
     &lt;/supported-query-grammar&gt;
     &lt;supported-query-grammar&gt;
      &lt;grammar&gt;&lt;syntax2 xmlns="http://akuma.example/"/&gt;&lt;/grammar&gt;
     &lt;/supported-query-grammar&gt;
    &lt;/supported-query-grammar-set&gt;
    &lt;supported-method-set&gt;
     &lt;supported-method name="COPY" /&gt;
     &lt;supported-method name="DELETE" /&gt;
     &lt;supported-method name="GET" /&gt;
     &lt;supported-method name="HEAD" /&gt;
     &lt;supported-method name="LOCK" /&gt;
     &lt;supported-method name="MKCOL" /&gt;
     &lt;supported-method name="MOVE" /&gt;
     &lt;supported-method name="OPTIONS" /&gt;
     &lt;supported-method name="POST" /&gt;
     &lt;supported-method name="PROPFIND" /&gt;
     &lt;supported-method name="PROPPATCH" /&gt;
     &lt;supported-method name="PUT" /&gt;
     &lt;supported-method name="SEARCH" /&gt;
     &lt;supported-method name="TRACE" /&gt;
     &lt;supported-method name="UNLOCK" /&gt;
    &lt;/supported-method-set&gt;
   &lt;/prop&gt;
   &lt;status&gt;HTTP/1.1 200 OK&lt;/status&gt;
  &lt;/propstat&gt;
 &lt;/response&gt;
&lt;/multistatus&gt;
</pre></div>
<p>
  Note that the query grammar element names marshalled as part of the 
  DAV:supported-query-grammar-set can be directly used as element names in
  an XML based query.

</p>
<a name="QSD"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Query Schema Discovery: QSD</h3>

<p>
  Servers MAY support the discovery of the schema for a query grammar.

</p>
<p>
  The DASL response header and the DAV:supported-query-grammar-set property
  provide means for clients to discover the
  set of query grammars supported by a resource. This alone is not sufficient
  information for a client to generate a query. For example, the DAV:basicsearch
  grammar defines a set of queries consisting of a set of operators applied
  to a set of properties and values, but the grammar itself does not specify
  which properties may be used in the query. QSD for the DAV:basicsearch
  grammar allows a client to discover the set of properties that are searchable,
  selectable, and sortable. Moreover, although the DAV:basicsearch
  grammar defines a minimal set of operators, it is possible that a resource
  might support additional operators in a query. For example, a resource
  might support an optional operator that can be used to express content-based
  queries in a proprietary syntax. QSD allows a client to discover these
  operators and their syntax. The set of discoverable quantities will differ
  from grammar to grammar, but each grammar can define a means for a client
  to discover what can be discovered.

</p>
<p>
  In general, the schema for a given query grammar depends on both the
  resource (the arbiter) and the scope. A given resource might have access
  to one set of properties for one potential scope, and another set for a
  different scope. For example, consider a server able to search two distinct
  collections, one holding cooking recipes, the other design documents for
  nuclear weapons. While both collections might support properties such as
  author, title, and date, the first might also define properties such as
  calories and preparation time, while the second defined properties such
  as yield and applicable patents. Two distinct arbiters indexing the same
  collection might also have access to different properties. For example,
  the recipe collection mentioned above might also be indexed by a value-added
  server that also stored the names of chefs who had tested the recipe. Note
  also that the available query schema might also depend on other factors,
  such as the identity of the principal conducting the search, but these
  factors are not exposed in this protocol.

</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Additional SEARCH Semantics</h3>

<p>
  Each query grammar supported by DASL defines its own syntax for expressing
  the possible query schema. A client retrieves the schema for a given query
  grammar on an arbiter resource with a given scope by invoking the SEARCH
  method on that arbiter with that grammar and scope and with a root element
  of DAV:query-schema-discovery rather than DAV:searchrequest.

</p>
<p>
  Marshalling:
  </p>
<blockquote class="text">
<p>
      The request body MUST be a DAV:query-schema-discovery element.
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT query-schema-discovery ANY&gt;
&lt;!-- ANY value: XML element specifying the query grammar
                and the scope --&gt;
</pre></div><p>

    
</p>
<p>
      The response body takes the form of a DAV:multistatus element (<a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, Section 13),
      where DAV:response is extended to hold the returned query grammar
      inside a DAV:query-schema container element.
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT response (href, status, query-schema?,
  responsedescription? &gt;
&lt;!ELEMENT query-schema ANY&gt;
</pre></div><p>

    
</p>
</blockquote><p>

</p>
<p>
  The content of this container is an XML element whose name and syntax depend upon the grammar,
  and whose value may (and likely will) vary depending upon the grammar,
  arbiter, and scope.

</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Example of Query Schema Discovery</h3>

<p>
  In this example, the arbiter is recipes.example, the grammar is DAV:basicsearch,
  the scope is also recipes.example.

</p>
<p>
&gt;&gt; Request:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
SEARCH / HTTP/1.1
Host: recipes.example
Content-Type: application/xml; charset="utf-8"
Content-Length: 258

&lt;?xml version="1.0"?&gt;
&lt;query-schema-discovery xmlns="DAV:"&gt;
  &lt;basicsearch&gt;
    &lt;from&gt;
      &lt;scope&gt;
        &lt;href&gt;http://recipes.example&lt;/href&gt;
        &lt;depth&gt;infinity&lt;/depth&gt;
      &lt;/scope&gt;
    &lt;/from&gt;
  &lt;/basicsearch&gt;
&lt;/query-schema-discovery&gt;
</pre></div>
<p>
&gt;&gt; Response:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 207 Multistatus
Content-Type: application/xml; charset="utf-8"
Content-Length: xxx

&lt;?xml version="1.0"?&gt;
&lt;multistatus xmlns="DAV:"&gt;
  &lt;response&gt;
    &lt;href&gt;http://recipes.example&lt;/href&gt;
    &lt;status&gt;HTTP/1.1 200 OK&lt;/status&gt;
    &lt;query-schema&gt;
      &lt;basicsearchschema&gt;
        &lt;!-- (See Section 5.19 for
        the actual contents) --&gt;
      &lt;/basicsearchschema&gt;
    &lt;/query-schema&gt;
  &lt;/response&gt;
&lt;/multistatus&gt;
</pre></div>
<p>
  The query schema for DAV:basicsearch is defined in <a class='info' href='#qs-basicsearch'>Section&nbsp;5.19<span> (</span><span class='info'>Query Schema for DAV:basicsearch</span><span>)</span></a>.

</p>
<a name="basicsearch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
The DAV:basicsearch Grammar</h3>

<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Introduction</h3>

<p>
  DAV:basicsearch uses an extensible XML syntax that allows clients
  to express search requests that are generally useful for WebDAV scenarios.
  DASL-extended servers MUST accept this grammar, and MAY accept other grammars.

</p>
<p>
  DAV:basicsearch has several components:

</p>
<p></p>
<ul class="text">
<li>DAV:select provides the result record definition.
</li>
<li>DAV:from defines the scope.
</li>
<li>DAV:where defines the criteria.
</li>
<li>DAV:orderby defines the sort order of the result set.
</li>
<li>DAV:limit provides constraints on the query as a whole.
</li>
</ul><p>

</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
The DAV:basicsearch DTD</h3>

<p>&lt;!-- "basicsearch" element --&gt;
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT basicsearch   (select, from, where?, orderby?, limit?) &gt;
</pre></div>
<p>&lt;!-- "select" element --&gt;
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT select        (allprop | prop) &gt;
</pre></div>
<p>&lt;!-- "from" element --&gt;
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT from          (scope+) &gt;
&lt;!ELEMENT scope         (href, depth, include-versions?) &gt;
&lt;!ELEMENT include-versions EMPTY &gt;
</pre></div>
<p>&lt;!-- "where" element --&gt;
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ENTITY % comp_ops     "eq | lt | gt| lte | gte"&gt;
&lt;!ENTITY % log_ops      "and | or | not"&gt;
&lt;!ENTITY % special_ops  "is-collection | is-defined |
                         language-defined | language-matches"&gt;
&lt;!ENTITY % string_ops   "like"&gt;
&lt;!ENTITY % content_ops  "contains"&gt;

&lt;!ENTITY % all_ops      "%comp_ops; | %log_ops; | %special_ops; |
                         %string_ops; | %content_ops;"&gt;

&lt;!ELEMENT where         ( %all_ops; ) &gt;

&lt;!ELEMENT and           ( %all_ops; )+ &gt;

&lt;!ELEMENT or            ( %all_ops; )+ &gt;

&lt;!ELEMENT not           ( %all_ops; ) &gt;

&lt;!ELEMENT lt            (prop, (literal|typed-literal)) &gt;
&lt;!ATTLIST lt            caseless   (yes|no) #IMPLIED&gt;

&lt;!ELEMENT lte           (prop, (literal|typed-literal)) &gt;
&lt;!ATTLIST lte           caseless   (yes|no) #IMPLIED&gt;

&lt;!ELEMENT gt            (prop, (literal|typed-literal)) &gt;
&lt;!ATTLIST gt            caseless   (yes|no) #IMPLIED&gt;

&lt;!ELEMENT gte           (prop, (literal|typed-literal)) &gt;
&lt;!ATTLIST gte           caseless   (yes|no) #IMPLIED&gt;

&lt;!ELEMENT eq            (prop, (literal|typed-literal)) &gt;
&lt;!ATTLIST eq            caseless   (yes|no) #IMPLIED&gt;

&lt;!ELEMENT literal       (#PCDATA)&gt;
&lt;!ELEMENT typed-literal (#PCDATA)&gt;
&lt;!ATTLIST typed-literal xsi:type CDATA #IMPLIED&gt;

&lt;!ELEMENT is-collection EMPTY &gt;
&lt;!ELEMENT is-defined    (prop) &gt;

&lt;!ELEMENT language-defined    (prop) &gt;
&lt;!ELEMENT language-matches    (prop, literal) &gt;

&lt;!ELEMENT like          (prop, literal) &gt;
&lt;!ATTLIST like          caseless   (yes|no) #IMPLIED&gt;

&lt;!ELEMENT contains      (#PCDATA)&gt;
</pre></div>
<p>&lt;!-- "orderby" element --&gt;
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT orderby       (order+) &gt;
&lt;!ELEMENT order         ((prop | score), (ascending | descending)?)&gt;
&lt;!ATTLIST order         caseless   (yes|no) #IMPLIED&gt;
&lt;!ELEMENT ascending     EMPTY&gt;
&lt;!ELEMENT descending    EMPTY&gt;
</pre></div>
<p>&lt;!-- "limit" element --&gt;
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT limit         (nresults) &gt;
&lt;!ELEMENT nresults      (#PCDATA) &gt;
</pre></div>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
Example Query</h3>

<p>
  This query retrieves the content length values for all resources located
  under the server's "/container1/" URI namespace whose length exceeds 10000 sorted ascending by size.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;d:searchrequest xmlns:d="DAV:"&gt;
  &lt;d:basicsearch&gt;
    &lt;d:select&gt;
      &lt;d:prop&gt;&lt;d:getcontentlength/&gt;&lt;/d:prop&gt;
    &lt;/d:select&gt;
    &lt;d:from&gt;
      &lt;d:scope&gt;
        &lt;d:href&gt;/container1/&lt;/d:href&gt;
        &lt;d:depth&gt;infinity&lt;/d:depth&gt;
      &lt;/d:scope&gt;
    &lt;/d:from&gt;
    &lt;d:where&gt;
      &lt;d:gt&gt;
        &lt;d:prop&gt;&lt;d:getcontentlength/&gt;&lt;/d:prop&gt;
        &lt;d:literal&gt;10000&lt;/d:literal&gt;
      &lt;/d:gt&gt;
    &lt;/d:where&gt;
    &lt;d:orderby&gt;
      &lt;d:order&gt;
        &lt;d:prop&gt;&lt;d:getcontentlength/&gt;&lt;/d:prop&gt;
        &lt;d:ascending/&gt;
      &lt;/d:order&gt;
    &lt;/d:orderby&gt;
  &lt;/d:basicsearch&gt;
&lt;/d:searchrequest&gt;
</pre></div>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
DAV:select</h3>
<a name='anchor129'></a>
<p>
  DAV:select defines the result record, which is a set of properties
  and values. This document defines two possible values: DAV:allprop
  and DAV:prop, both defined in Section 14 of <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>.

</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
DAV:from</h3>
<a name='anchor130'></a><a name='anchor131'></a><a name='anchor132'></a><a name='anchor133'></a><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT scope            (href, depth, include-versions?) &gt;
&lt;!ELEMENT include-versions EMPTY &gt;
</pre></div>
<p>
  DAV:from defines the query scope.
  This contains one or more DAV:scope elements. Support for multiple scope
  elements is optional, however servers MUST fail a request specifying
  multiple DAV:scope elements if they can't support it (see <a class='info' href='#request.body'>Section&nbsp;2.2.2<span> (</span><span class='info'>The Request Body</span><span>)</span></a>,
  precondition DAV:search-multiple-scope-supported).
  The scope element contains mandatory DAV:href and DAV:depth elements.

</p>
<p>
  DAV:href indicates the URI reference (<a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, Section 4.1) to use as a scope.

</p>
<p>
  When the scope is a collection, if DAV:depth is "0", the search
  includes only the collection. 
  When it is "1", the search includes the collection and its immediate
  children. When it is "infinity", it includes the collection and all its progeny.

</p>
<p>
  When the scope is not a collection, the
  depth is ignored and the search applies just to the resource itself.

</p>
<p>
  
  If the server supports WebDAV Redirect Reference Resources (<a class='info' href='#RFC4437'>[RFC4437]<span> (</span><span class='info'>Whitehead, J., Clemm, G., and J. Reschke, Ed., &ldquo;Web Distributed Authoring and Versioning (WebDAV) RedirectReferenceResources,&rdquo; March&nbsp;2006.</span><span>)</span></a>)
  and the search scope contains a redirect reference resource, then
  
  it applies only to that resource, not to its target.

</p>
<p>
  When the child element DAV:include-versions is present, the search scope
  will include all versions (see <a class='info' href='#RFC3253'>[RFC3253]<span> (</span><span class='info'>Clemm, G., Amsden, J., Ellison, T., Kaler, C., and J. Whitehead, &ldquo;Versioning Extensions to WebDAV,&rdquo; March&nbsp;2002.</span><span>)</span></a>, Section 2.2.1) of all
  version-controlled resources in scope. Servers that do support versioning
  but do not support the DAV:include-versions feature MUST signal an 
  error if it is used in a query (see <a class='info' href='#request.body'>Section&nbsp;2.2.2<span> (</span><span class='info'>The Request Body</span><span>)</span></a>, precondition DAV:search-scope-valid).

</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4.1"></a><h3>5.4.1.&nbsp;
Relationship to the Request-URI</h3>

<p>
  If the DAV:scope element is an URI (<a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, Section 3), the scope is exactly
  that URI.

</p>
<p>
  If the DAV:scope element is a relative reference (<a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, Section 4.2), the scope is taken
  to be relative to the Request-URI.

</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4.2"></a><h3>5.4.2.&nbsp;
Scope</h3>

<p>
  A Scope can be an arbitrary URI reference.

</p>
<p>
  Servers, of course, may support only particular scopes. This may include
  limitations for particular schemes such as "http:" or "ftp:" or certain
  URI namespaces.

  However, WebDAV compliant search arbiters minimally SHOULD support
  scopes that match their own URI.


</p>
<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
DAV:where</h3>
<a name='anchor134'></a>
<p>
  The DAV:where element defines the search condition for inclusion of
  resources in the result set. The value of this element is an XML element
  that defines a search operator that evaluates to one of the Boolean truth
  values TRUE, FALSE, or UNKNOWN. The search operator contained by DAV:where
  may itself contain and evaluate additional search operators as operands,
  which in turn may contain and evaluate additional search operators as operands,
  etc. recursively.

</p>
<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.1"></a><h3>5.5.1.&nbsp;
Use of Three-Valued Logic in Queries</h3>

<p>
  Each operator defined for use in the where clause that returns a Boolean
  value MUST evaluate to TRUE, FALSE, or UNKNOWN. The resource under scan
  is included as a member of the result set if and only if the search condition
  evaluates to TRUE.

</p>
<p>
  Consult <a class='info' href='#three-valued-logic'>Appendix&nbsp;A<span> (</span><span class='info'>Three-Valued Logic in DAV:basicsearch</span><span>)</span></a> for details on the application of three-valued logic
  in query expressions.

</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.2"></a><h3>5.5.2.&nbsp;
Handling Optional Operators</h3>

<p>
  If a query contains an operator that is not supported by the server, then 
  the server MUST respond with a 422 (Unprocessable Entity) status code.

</p>
<a name="null-values"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.3"></a><h3>5.5.3.&nbsp;
Treatment of NULL Values</h3>

<p>
  If a PROPFIND for a property value would yield a
  non-2xx (see <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, Section 10.2)
  response for that property, then that property is considered NULL.

</p>
<p>
  NULL values are "less than" all other values in comparisons.

</p>
<p>
  Empty strings (zero length strings) are not NULL values. An empty string
  is "less than" a string with length greater than zero.

</p>
<p>
  The DAV:is-defined operator is defined to test if the value
  of a property is not NULL.

</p>
<a name="non-simple-types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.4"></a><h3>5.5.4.&nbsp;
Treatment of Properties with mixed/element Content</h3>

<p>
  Comparisons of properties that do not have simple types (text-only content) is
  out-of-scope for the standard operators defined for DAV:basicsearch and therefore is defined
  to be UNKNOWN (as per <a class='info' href='#three-valued-logic'>Appendix&nbsp;A<span> (</span><span class='info'>Three-Valued Logic in DAV:basicsearch</span><span>)</span></a>).
  For querying the DAV:resourcetype property, see <a class='info' href='#OPERATOR_is-collection'>Section&nbsp;5.13<span> (</span><span class='info'>DAV:is-collection</span><span>)</span></a>.

</p>
<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.5"></a><h3>5.5.5.&nbsp;
Example: Testing for Equality</h3>

<p>
  The example shows a single operator (DAV:eq) applied in the criteria.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;d:where&gt;
  &lt;d:eq&gt;
    &lt;d:prop&gt;
      &lt;d:getcontentlength/&gt;
    &lt;/d:prop&gt;
    &lt;d:literal&gt;100&lt;/d:literal&gt;
  &lt;/d:eq&gt;
&lt;/d:where&gt;</pre></div>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5.6"></a><h3>5.5.6.&nbsp;
Example: Relative Comparisons</h3>

<p>
  The example shows a more complex operation involving several operators
  (DAV:and, DAV:eq, DAV:gt) applied in the criteria.
  This DAV:where expression matches those resources of type "image/gif"
  over 4K in size.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;D:where&gt;
  &lt;D:and&gt;
    &lt;D:eq&gt;
      &lt;D:prop&gt;
        &lt;D:getcontenttype/&gt;
      &lt;/D:prop&gt;
      &lt;D:literal&gt;image/gif&lt;/D:literal&gt;
    &lt;/D:eq&gt;
    &lt;D:gt&gt;
      &lt;D:prop&gt;
        &lt;D:getcontentlength/&gt;
      &lt;/D:prop&gt;
      &lt;D:literal&gt;4096&lt;/D:literal&gt;
    &lt;/D:gt&gt;
  &lt;/D:and&gt;
&lt;/D:where&gt;</pre></div>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
DAV:orderby</h3>
<a name='anchor135'></a>
<p>
  The DAV:orderby element specifies the ordering of the result set. It contains
  one or more DAV:order elements, each of which specifies a comparison between
  two items in the result set. Informally, a comparison specifies a test that
  determines whether one resource appears before another in the result set.
  Comparisons are applied in the order they occur in the DAV:orderby element,
  earlier comparisons being more significant.

</p>
<p>
  The comparisons defined here use only a single property from each resource,
  compared using the same ordering as the DAV:lt operator
  (ascending<a name='anchor136'></a>) or DAV:gt operator
  (descending<a name='anchor137'></a>).
  If neither direction is specified, the default is DAV:ascending.

</p>
<p>
  In the context of the DAV:orderby element, null values are
  considered to collate before any actual (i.e., non null) value, including
  strings of zero length (this is compatible with <a class='info' href='#SQL99'>[SQL99]<span> (</span><span class='info'>Milton, J., &ldquo;Database Language SQL Part 2: Foundation (SQL/Foundation),&rdquo; July&nbsp;1999.</span><span>)</span></a>).

</p>
<p>
  <a name='anchor138'></a>
  The "caseless" attribute may be used to indicate case-sensitivity
  for comparisons (<a class='info' href='#caseless'>Section&nbsp;5.18<span> (</span><span class='info'>The 'caseless' XML Attribute</span><span>)</span></a>).

</p>
<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6.1"></a><h3>5.6.1.&nbsp;
Example of Sorting</h3>

<p>
  This sort orders first by last name of the author, and then by size, in
  descending order, so that for each author, the largest works appear first.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;d:orderby&gt;
  &lt;d:order&gt;
    &lt;d:prop&gt;&lt;r:lastname/&gt;&lt;/d:prop&gt;
    &lt;d:ascending/&gt;
  &lt;/d:order&gt;
  &lt;d:order&gt;
    &lt;d:prop&gt;&lt;d:getcontentlength/&gt;&lt;/d:prop&gt;
    &lt;d:descending/&gt;
  &lt;/d:order&gt;
&lt;/d:orderby&gt;</pre></div>
<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7"></a><h3>5.7.&nbsp;
Boolean Operators: DAV:and, DAV:or, and DAV:not</h3>
<a name='anchor139'></a>
<p>
  The DAV:and operator performs a logical AND operation on the expressions
  it contains.

</p><a name='anchor140'></a>
<p>
  The DAV:or operator performs a logical OR operation on the values it contains.

</p><a name='anchor141'></a>
<p>
  The DAV:not operator performs a logical NOT operation on the
  values it contains.

</p>
<a name="anchor37"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.8"></a><h3>5.8.&nbsp;
DAV:eq</h3>
<a name='anchor142'></a>
<p>
  The DAV:eq operator provides simple equality matching on property values.

</p><a name='anchor143'></a><a name='anchor144'></a>
<p>
  The "caseless" attribute may be used with this element (<a class='info' href='#caseless'>Section&nbsp;5.18<span> (</span><span class='info'>The 'caseless' XML Attribute</span><span>)</span></a>).

</p>
<a name="anchor38"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.9"></a><h3>5.9.&nbsp;
DAV:lt, DAV:lte, DAV:gt, DAV:gte</h3>
<a name='anchor145'></a><a name='anchor146'></a><a name='anchor147'></a><a name='anchor148'></a><a name='anchor149'></a>
<p>
  The DAV:lt, DAV:lte, DAV:gt, and DAV:gte
  operators provide comparisons on property values, using less-than, less-than
  or equal, greater-than, and greater-than or equal respectively. The "caseless"
  attribute may be used with these elements (<a class='info' href='#caseless'>Section&nbsp;5.18<span> (</span><span class='info'>The 'caseless' XML Attribute</span><span>)</span></a>).

</p>
<a name="anchor39"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.10"></a><h3>5.10.&nbsp;
DAV:literal</h3>
<a name='anchor150'></a>
<p>
  DAV:literal allows literal values to be placed in an expression.

</p>
<p>
  White space in literal values is significant in comparisons. For consistency
  with <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, clients SHOULD NOT specify the attribute "xml:space"
  (Section 2.10 of <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Fourth Edition),&rdquo; August&nbsp;2006.</span><span>)</span></a>) to override this behavior.

</p>
<p>
  In comparisons, the contents of DAV:literal SHOULD be treated as string, with
  the following exceptions:
  </p>
<ul class="text">
<li>when operand for a comparison with a DAV:getcontentlength property,
    it SHOULD be treated as an unsigned integer value (the behavior for values not in this format
    is undefined),
    
</li>
<li>when operand for a comparison with a DAV:creationdate or DAV:getlastmodified property,
    it SHOULD be treated as a date value in the ISO-8601 subset defined for
    the DAV:creationdate property (see <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, Section 15.1;
    the behavior of values not in this format is undefined),
    
</li>
<li>when operand for a comparison with a property for which the type is known and when compatible with that type,
    it MAY be treated according to this type.
    
</li>
</ul><p>

</p>
<a name="anchor40"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.11"></a><h3>5.11.&nbsp;
DAV:typed-literal (optional)</h3>
<a name='anchor151'></a>
<p>
  There are situations in which a client may want to force a comparison not to
  be string-based (as defined for DAV:literal). In these cases, a typed
  comparison can be enforced by using DAV:typed-literal instead.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT typed-literal (#PCDATA)&gt;
</pre></div>
<p>
  The data type is specified using the xsi:type attribute defined in
  <a class='info' href='#XS1'>[XS1]<span> (</span><span class='info'>Thompson, H., Beech, D., Maloney, M., Mendelsohn, N., and World Wide Web Consortium, &ldquo;XML Schema Part 1: Structures,&rdquo; October&nbsp;2004.</span><span>)</span></a>, Section 2.6.1. If the type is not specified, it
  defaults to "xs:string".

</p>
<p>
  A server MUST reject a request with an unknown type with a status of 422 (Unprocessable Entity).
  It SHOULD reject a request if the value provided in DAV:typed-literal can not be cast to the specified type.

</p>
<p>
  The comparison evaluates to UNKNOWN if the property value can not be
  cast to the specified datatype (see <a class='info' href='#XPATHFUNC'>[XPATHFUNC]<span> (</span><span class='info'>Malhotra, A., Melton, J., and N. Walsh, &ldquo;XQuery 1.0 and XPath 2.0 Functions and Operators,&rdquo; January&nbsp;2007.</span><span>)</span></a>, Section 17).

</p>
<a name="anchor41"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.11.1"></a><h3>5.11.1.&nbsp;
Example for Typed Numerical Comparison</h3>

<p>
  Consider a set of resources with the dead property "edits" in the namespace
  "http://ns.example.org":

</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">URI</th><th align="left">property value</th></tr>
<tr>
<td align="left">/a</td>
<td align="left">"-1"</td>
</tr>
<tr>
<td align="left">/b</td>
<td align="left">"01"</td>
</tr>
<tr>
<td align="left">/c</td>
<td align="left">"3"</td>
</tr>
<tr>
<td align="left">/d</td>
<td align="left">"test"</td>
</tr>
<tr>
<td align="left">/e</td>
<td align="left">(undefined)</td>
</tr>
</table>
<br clear="all" />

<p>
  The expression

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;lt xmlns="DAV:"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
  &lt;prop&gt;&lt;edits xmlns="http://ns.example.org"/&gt;&lt;/prop&gt;
  &lt;typed-literal xsi:type="xs:integer"&gt;3&lt;/typed-literal&gt;
&lt;/lt&gt;
</pre></div>
<p>
  will evaluate to TRUE for the resources "/a" and "/b" (their property values
  can be parsed as type xs:integer, and the numerical comparison evaluates to
  true), to FALSE for "/c" (property value is compatible, but numerical comparison
  evaluates to false) and UNKNOWN for "/d" and "/e" (the property either is
  undefined, or its value can not be parsed as xs:integer).

</p>
<a name="anchor42"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.12"></a><h3>5.12.&nbsp;
Support for Matching xml:lang Attributes on Properties</h3>

<p>
  The following two optional operators can be used to express conditions
  on the language of a property value (as expressed using the xml:lang
  attribute).

</p>
<a name="operator.language-defined"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.12.1"></a><h3>5.12.1.&nbsp;
DAV:language-defined (optional)</h3>
<a name='anchor152'></a><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT language-defined (prop)&gt;
</pre></div>
<p>
  This operator evaluates to TRUE if the language for the value of
  the given property is known, FALSE if it isn't and UNKNOWN if the property itself
  is not defined.

</p>
<a name="operator.language-matches"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.12.2"></a><h3>5.12.2.&nbsp;
DAV:language-matches (optional)</h3>
<a name='anchor153'></a><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT language-matches (prop, literal)&gt;
</pre></div>
<p>
  This operator evaluates to TRUE if the language for the value of the 
  given property is known and matches the language name given in the
  &lt;literal&gt; element, FALSE if it doesn't match and UNKNOWN
  if the property itself is not defined.

</p>
<p>
  Languages are considered to match if they are the same, or if the
  language of the property value is a sublanguage of the language
  specified in the &lt;literal&gt; element (see <a class='info' href='#XPATH'>[XPATH]<span> (</span><span class='info'>Clark, J. and S. DeRose, &ldquo;XML Path Language (XPath) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a>, Section 4.3,
  "lang function"). 

</p>
<a name="anchor43"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.12.3"></a><h3>5.12.3.&nbsp;
Example of Language-Aware Matching</h3>

<p>
  The expression below will evaluate to TRUE if the property "foobar" exists
  and its language is either unknown, English or a sublanguage of English. 

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;or xmlns="DAV:"&gt;
  &lt;not&gt;
    &lt;language-defined&gt;
      &lt;prop&gt;&lt;foobar/&gt;&lt;/prop&gt;
    &lt;/language-defined&gt;
  &lt;/not&gt;
  &lt;language-matches&gt;
    &lt;prop&gt;&lt;foobar/&gt;&lt;/prop&gt;
    &lt;literal&gt;en&lt;/literal&gt;
  &lt;/language-matches&gt;
&lt;/or&gt;
</pre></div>
<a name="OPERATOR_is-collection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.13"></a><h3>5.13.&nbsp;
DAV:is-collection</h3>
<a name='anchor154'></a>
<p>
  The DAV:is-collection operator allows clients to determine whether a resource is
  a collection (that is, whether its DAV:resourcetype element contains the
  element DAV:collection). 

</p>
<p>
  Rationale: This operator is provided in lieu of defining generic
  structure queries, which would suffice for this and for many more powerful
  queries, but seems inappropriate to standardize at this time.

</p>
<a name="anchor44"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.13.1"></a><h3>5.13.1.&nbsp;
Example of DAV:is-collection</h3>

<p>
  This example shows a search criterion that picks out all and only the resources
  in the scope that are collections.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;where xmlns="DAV:"&gt;
  &lt;is-collection/&gt;
&lt;/where&gt;</pre></div>
<a name="anchor45"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.14"></a><h3>5.14.&nbsp;
DAV:is-defined</h3>
<a name='anchor155'></a>
<p>
  The DAV:is-defined operator allows clients to determine whether
  a property is defined on a resource. The meaning of "defined on a resource"
  is found in <a class='info' href='#null-values'>Section&nbsp;5.5.3<span> (</span><span class='info'>Treatment of NULL Values</span><span>)</span></a>.

</p>
<p>Example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;d:is-defined&gt;
  &lt;d:prop&gt;&lt;x:someprop/&gt;&lt;/d:prop&gt;
&lt;/d:is-defined&gt;</pre></div>
<a name="anchor46"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.15"></a><h3>5.15.&nbsp;
DAV:like</h3>
<a name='anchor156'></a>
<p>
  The DAV:like is an optional operator intended to give simple wildcard-based
  pattern matching ability to clients.

</p>
<p>
  The operator takes two arguments.

</p>
<p>
  The first argument is a DAV:prop element identifying a single
  property to evaluate.

</p>
<p>
  The second argument is a DAV:literal element that gives the
  pattern matching string.

</p>
<a name="anchor47"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.15.1"></a><h3>5.15.1.&nbsp;
Syntax for the Literal Pattern</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
<dfn>pattern</dfn>       = [<cite class='id'>wildcard</cite>] <span class='rep'>0*</span>( <cite class='id'>text</cite> [<cite class='id'>wildcard</cite>] )

<dfn>wildcard</dfn>      = <cite class='id'>exactlyone</cite> / <cite class='id'>zeroormore</cite>
<dfn>text</dfn>          = <span class='rep'>1*</span>( <cite class='id'>character</cite> / <cite class='id'>escapeseq</cite> )

<dfn>exactlyone</dfn>    = "<span class='str'>_</span>"
<dfn>zeroormore</dfn>    = "<span class='str'>%</span>"
<dfn>escapechar</dfn>    = "<span class='str'>\</span>"
<dfn>escapeseq</dfn>     = <cite class='id'>escapechar</cite> ( <cite class='id'>exactlyone</cite> / <cite class='id'>zeroormore</cite> / <cite class='id'>escapechar</cite> )

<em>; character: see [XML], Section 2.2, minus wildcard / escapechar</em>
<dfn>character</dfn>     = <cite class='key'>HTAB</cite> / <cite class='key'>LF</cite> / <cite class='key'>CR</cite> <em>; whitespace</em>
<dfn>character</dfn>     =/ <span class='val'>%x20-24</span> / <span class='val'>%x26-5B</span> / <span class='val'>%x5D-5E</span> / <span class='val'>%x60-D7FF</span>
<dfn>character</dfn>     =/ <span class='val'>%xE000-FFFD</span> / <span class='val'>%x10000-10FFFF</span>
</pre></div>
<p>

  (Note that the ABNF above is defined in terms of Unicode code points (<a class='info' href='#UNICODE5'>[UNICODE5]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;The Unicode Standard - Version 5.0,&rdquo; November&nbsp;2006.</span><span>)</span></a>);
  when an query is transmitted as XML document WebDAV, these characters are
  typically encoded in UTF-8 or UTF-16.)


</p>
<p>
  The value for the literal is composed of wildcards separated by segments
  of text. Wildcards may begin or end the literal.

</p>
<p>
  The "_" wildcard matches exactly one character.

</p>
<p>
  The "%" wildcard matches zero or more characters

</p>
<p>
  The "\" character is an escape sequence so that the literal can include
  "_" and "%". To include the "\" character in the pattern, the escape sequence
  "\\" is used.

</p>
<a name="anchor48"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.15.2"></a><h3>5.15.2.&nbsp;
Example of DAV:like</h3>

<p>
  This example shows how a client might use DAV:like to identify
  those resources whose content type was a subtype of image.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;D:where&gt;
  &lt;D:like caseless="yes"&gt;
    &lt;D:prop&gt;&lt;D:getcontenttype/&gt;&lt;/D:prop&gt;
    &lt;D:literal&gt;image/%&lt;/D:literal&gt;
  &lt;/D:like&gt;
&lt;/D:where&gt;</pre></div>
<a name="contains"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.16"></a><h3>5.16.&nbsp;
DAV:contains</h3>
<a name='anchor157'></a>
<p>
  The DAV:contains operator is an optional operator that provides
  content-based search capability. This operator implicitly searches against
  the text content of a resource, not against content of properties. The
  DAV:contains operator is intentionally not overly constrained, in order to allow the
  server to do the best job it can in performing the search.

</p>
<p>
  The DAV:contains operator evaluates to a Boolean value. It
  evaluates to TRUE if the content of the resource satisfies the search.
  Otherwise, it evaluates to FALSE.

</p>
<p>
  Within the DAV:contains XML element, the client provides a
  phrase: a single word or whitespace delimited sequence of words. Servers
  MAY ignore punctuation in a phrase. Case-sensitivity is at the
discretion of the server implementation.

</p>
<p>
  
  The following non-exhaustive list enumerate things that may or may not be done
  as part of the search:
   Phonetic
  methods such as "soundex" may or may not be used. Word stemming may or
  may not be performed. Thesaurus expansion of words may or may not be done.
  Right or left truncation may or may not be performed. The search may be
  case insensitive or case sensitive. The word or words may or may not be
  interpreted as names. Multiple words may or may not be required to be adjacent
  or "near" each other. Multiple words may or may not be required to occur
  in the same order. Multiple words may or may not be treated as a phrase.
  The search may or may not be interpreted as a request to find documents
  "similar" to the string operand.
  Character canonicalization such as that done by the Unicode collation
  algorithm may or may not be applied.

</p>
<a name="score"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.16.1"></a><h3>5.16.1.&nbsp;
Result Scoring (DAV:score Element)</h3>
<a name='anchor158'></a>
<p>
  Servers SHOULD indicate scores for the DAV:contains condition by adding a
  DAV:score XML element to the DAV:response element. Its value is defined only
  in the context of a particular query result. The value is a string representing
  the score, an integer from zero to 10000 inclusive, where a higher value
  indicates a higher score (e.g. more relevant).

</p>
<p>Modified DTD fragment for DAV:propstat:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT response (href, ((href*, status)|(propstat+)),
                    responsedescription?, score?) &gt;
&lt;!ELEMENT score    (#PCDATA) &gt;
</pre></div>
<p>
  Clients should note that, in general, it is not meaningful to compare
  the numeric values of scores from two different query results unless both were
  executed by the same underlying search system on the same collection of
  resources.

</p>
<a name="anchor49"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.16.2"></a><h3>5.16.2.&nbsp;
Ordering by Score</h3>

<p>
  To order search results by their score, the DAV:score element may be added
  as child to the DAV:orderby element (in place of a DAV:prop element).

</p>
<a name="anchor50"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.16.3"></a><h3>5.16.3.&nbsp;
Examples</h3>

<p>
  The example below shows a search for the phrase "Peter Forsberg".

</p>
<p>
  Depending on its support for content-based searching, a server MAY treat
  this as a search for documents that contain the words "Peter" and "Forsberg".

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;D:where&gt;
  &lt;D:contains&gt;Peter Forsberg&lt;/D:contains&gt;
&lt;/D:where&gt;</pre></div>
<p>
  The example below shows a search for resources that contain "Peter" and
  "Forsberg".

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;D:where&gt;
  &lt;D:and&gt;
    &lt;D:contains&gt;Peter&lt;/D:contains&gt;
    &lt;D:contains&gt;Forsberg&lt;/D:contains&gt;
  &lt;/D:and&gt;
&lt;/D:where&gt;</pre></div>
<a name="limiting.the.result.set"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.17"></a><h3>5.17.&nbsp;
Limiting the Result Set</h3>
<a name='anchor159'></a><a name='anchor160'></a><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT limit (nresults) &gt;
&lt;!ELEMENT nresults (#PCDATA)&gt; &lt;!-- only digits --&gt;</pre></div>
<p>
  The DAV:limit XML element contains requested limits from the client
  to limit the size of the reply or amount of effort expended by the server.
  The DAV:nresults XML element contains a requested maximum number
  of DAV:response elements to be returned in the response body.
  The server MAY disregard this limit.  The value of this element is an
  unsigned integer.

</p>
<a name="anchor51"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.17.1"></a><h3>5.17.1.&nbsp;
Relationship to Result Ordering</h3>
<a name='anchor161'></a>
<p>
  If the result set is both limited by DAV:limit and ordered according to
  DAV:orderby, the results that are included in the response document must be
  those that order highest.

</p>
<a name="caseless"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.18"></a><h3>5.18.&nbsp;
The 'caseless' XML Attribute</h3>
<a name='anchor162'></a>
<p>
  The "caseless" attribute allows clients to specify caseless matching behavior
  instead of character-by-character matching for DAV:basicsearch operators.

</p>
<p>
  The possible values for "caseless" are "yes" or "no". The default value is
  server-specified. Caseless matching SHOULD be implemented as defined in
  
  <a href='http://www.unicode.org/versions/Unicode5.0.0/ch05.pdf#G21180'>Section 5.18</a>
  of the Unicode Standard (<a class='info' href='#UNICODE5'>[UNICODE5]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;The Unicode Standard - Version 5.0,&rdquo; November&nbsp;2006.</span><span>)</span></a>).

</p>
<p>
  Support for the "caseless" attribute is optional. A server should
  respond with a status of 422 if it is used but cannot be supported.

</p>
<a name="qs-basicsearch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19"></a><h3>5.19.&nbsp;
Query Schema for DAV:basicsearch</h3>

<p>
  The DAV:basicsearch grammar defines a search criteria that is
  a Boolean-valued expression, and allows for an arbitrary set of properties
  to be included in the result record. The result set may be sorted on a
  set of property values. Accordingly the DTD for schema discovery for this
  grammar allows the server to express:

</p>
<p>
  </p>
<ol class="text">
<li>the set of properties that may be either searched, returned, or used
    to sort, and a hint about the data type of such properties
</li>
<li>the set of optional operators defined by the resource.
</li>
</ol><p>

</p>
<a name="anchor52"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.1"></a><h3>5.19.1.&nbsp;
DTD for DAV:basicsearch QSD</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT basicsearchschema  (properties, operators)&gt;
&lt;!ELEMENT any-other-property EMPTY&gt;
&lt;!ELEMENT properties         (propdesc*)&gt;
&lt;!ELEMENT propdesc           ((prop|any-other-property), datatype?,
                              searchable?, selectable?, sortable?,
                              caseless?)&gt;
&lt;!ELEMENT operators          (opdesc*)&gt;
&lt;!ELEMENT opdesc             ANY&gt;
&lt;!ATTLIST opdesc             allow-pcdata (yes|no) #IMPLIED&gt;
&lt;!ELEMENT operand-literal    EMPTY&gt;
&lt;!ELEMENT operand-typed-literal EMPTY&gt;
&lt;!ELEMENT operand-property   EMPTY&gt;
</pre></div>
<p>
  The DAV:properties element holds a list of descriptions of properties.

</p>
<p>
  The DAV:operators element describes the optional operators
  that may be used in a DAV:where element.

</p>
<a name="anchor53"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.2"></a><h3>5.19.2.&nbsp;
DAV:propdesc Element</h3>

<p>
  Each instance of a DAV:propdesc element describes the property
  or properties in the DAV:prop element it contains. All subsequent
  elements are descriptions that apply to those properties. All descriptions
  are optional and may appear in any order. Servers SHOULD support all the
  descriptions defined here, and MAY define others.

</p>
<p>
  DASL defines five descriptions. The first, DAV:datatype, provides
  a hint about the type of the property value, and may be useful to a user
  interface prompting for a value. The remaining four (DAV:searchable,
  DAV:selectable, DAV:sortable, and DAV:caseless)
  identify portions of the query (DAV:where, DAV:select,
  and DAV:orderby, respectively). If a property has a description
  for a section, then the server MUST allow the property to be used in that
  section. These descriptions are optional. If a property does not have such
  a description, or is not described at all, then the server MAY still allow
  the property to be used in the corresponding section.

</p>
<a name="anchor54"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.2.1"></a><h3>5.19.2.1.&nbsp;
DAV:any-other-property</h3>

<p>
  This element can be used in place of DAV:prop to describe properties of
  WebDAV properties not mentioned in any other DAV:prop element. For instance,
  this can be used to indicate that all other properties are searchable and selectable
  without giving details about their types (a typical scenario for dead properties).

</p>
<a name="anchor55"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.3"></a><h3>5.19.3.&nbsp;
The DAV:datatype Property Description</h3>

<p>
  The DAV:datatype element contains a single XML element that provides
  a hint about the domain of the property, which may be useful to a user
  interface prompting for a value to be used in a query.
  Data types are identified by an element name. Where appropriate, a server SHOULD
  use the simple data types defined in <a class='info' href='#XS2'>[XS2]<span> (</span><span class='info'>Biron, P., Malhotra, A., and World Wide Web Consortium, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT datatype ANY &gt;</pre></div>
<p>
  Examples from <a class='info' href='#XS2'>[XS2]<span> (</span><span class='info'>Biron, P., Malhotra, A., and World Wide Web Consortium, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>, Section 3:

</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Qualified name</th><th align="left">Example</th></tr>
<tr>
<td align="left">xs:boolean</td>
<td align="left">true, false, 1, 0</td>
</tr>
<tr>
<td align="left">xs:string</td>
<td align="left">Foobar</td>
</tr>
<tr>
<td align="left">xs:dateTime</td>
<td align="left">1994-11-05T08:15:5Z</td>
</tr>
<tr>
<td align="left">xs:float</td>
<td align="left">.314159265358979E+1</td>
</tr>
<tr>
<td align="left">xs:integer</td>
<td align="left">-259, 23</td>
</tr>
</table>
<br clear="all" />

<p>
  If the data type of a property is not given, then the data type defaults
  to xs:string.

</p>
<a name="anchor56"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.4"></a><h3>5.19.4.&nbsp;
The DAV:searchable Property Description</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT searchable EMPTY&gt;</pre></div>
<p>
  If this element is present, then the server MUST allow this property to
  appear within a DAV:where element where an operator allows a property.
  Allowing a search does not mean that the property is guaranteed to be defined
  on every resource in the scope, it only indicates the server's willingness
  to check.

</p>
<a name="anchor57"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.5"></a><h3>5.19.5.&nbsp;
The DAV:selectable Property Description</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT selectable EMPTY&gt;</pre></div>
<p>
  This element indicates that the property may appear in the DAV:select
  element.

</p>
<a name="anchor58"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.6"></a><h3>5.19.6.&nbsp;
The DAV:sortable Property Description</h3>

<p>
  This element indicates that the property may appear in the DAV:orderby
  element.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT sortable EMPTY&gt;</pre></div>
<a name="anchor59"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.7"></a><h3>5.19.7.&nbsp;
The DAV:caseless Property Description</h3>

<p>
  This element only applies to properties whose data type is "xs:string" 
  and derived data types as per the DAV:datatype property description. Its presence indicates
  that compares performed for searches, and the comparisons for ordering
  results on the string property will be caseless (the default is
  character-by-character).

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;!ELEMENT caseless EMPTY&gt;</pre></div>
<a name="anchor60"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.8"></a><h3>5.19.8.&nbsp;
The DAV:operators XML Element</h3>

<p>
  The DAV:operators element describes every optional operator supported
  in a query. (Mandatory operators are not listed since they are mandatory
  and permit no variation in syntax.). All optional operators that are supported
  MUST be listed in the DAV:operators element.

</p>
<p>
  The listing for an operator, contained in an DAV:opdesc element,
  consists of the operator (as an empty element), followed by one
  element for each operand. The operand MUST be either DAV:operand-property,
  DAV:operand-literal or DAV:operand-typed-literal, which indicate that the
  operand in the corresponding position is a property, a literal value or
  a typed literal value, respectively.
  If an operator is polymorphic (allows more than one operand syntax) then
  each permitted syntax MUST be listed separately.

</p>
<p>
  The DAV:opdesc element MAY have a "allow-pcdata" attribute (defaulting to
  "no"). A value of "yes" indicates that the operator can contain character
  data, as it is the case with DAV:contains (see <a class='info' href='#contains'>Section&nbsp;5.16<span> (</span><span class='info'>DAV:contains</span><span>)</span></a>).
  Definition of additional operators using this format is NOT RECOMMENDED.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;operators xmlns='DAV:'&gt;
  &lt;opdesc&gt;
    &lt;like/&gt;&lt;operand-property/&gt;&lt;operand-literal/&gt;
  &lt;/opdesc&gt;
&lt;/operators&gt;
</pre></div>
<a name="anchor61"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.19.9"></a><h3>5.19.9.&nbsp;
Example of Query Schema for DAV:basicsearch</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;D:basicsearchschema xmlns:D="DAV:"
  xmlns:xs="http://www.w3.org/2001/XMLSchema""&gt;
  &lt;D:properties&gt;
    &lt;D:propdesc&gt;
      &lt;D:prop&gt;&lt;D:getcontentlength/&gt;&lt;/D:prop&gt;
      &lt;D:datatype&gt;&lt;xs:nonNegativeInteger/&gt;&lt;/D:datatype&gt;
      &lt;D:searchable/&gt;&lt;D:selectable/&gt;&lt;D:sortable/&gt;
    &lt;/D:propdesc&gt;
    &lt;D:propdesc&gt;
      &lt;D:prop&gt;&lt;D:getcontenttype/&gt;&lt;D:displayname/&gt;&lt;/D:prop&gt;
      &lt;D:searchable/&gt;&lt;D:selectable/&gt;&lt;D:sortable/&gt;
    &lt;/D:propdesc&gt;
    &lt;D:propdesc&gt;
      &lt;D:prop&gt;&lt;fstop xmlns="http://jennicam.org"/&gt;&lt;/D:prop&gt;
      &lt;D:selectable/&gt;
    &lt;/D:propdesc&gt;
    &lt;D:propdesc&gt;
      &lt;D:any-other-property/&gt;
      &lt;D:searchable/&gt;&lt;D:selectable/&gt;
    &lt;/D:propdesc&gt;
  &lt;/D:properties&gt;
  &lt;D:operators&gt;
    &lt;D:opdesc&gt;
      &lt;D:like/&gt;&lt;D:operand-property/&gt;&lt;D:operand-literal/&gt;
    &lt;/D:opdesc&gt;
    &lt;D:opdesc allow-pcdata="yes"&gt;
      &lt;D:contains/&gt;
    &lt;/D:opdesc&gt;
  &lt;/D:operators&gt;
&lt;/D:basicsearchschema&gt;</pre></div>
<p>
  This response lists four properties. The data type of the last three properties
  is not given, so it defaults to xs:string. All are selectable, and the first
  three may be searched. All but the last may be used in a sort. Of the optional
  DAV operators, DAV:contains and DAV:like are supported.

</p>
<p>
  Note: The schema discovery defined here does not provide for discovery of
  supported values of the "caseless" attribute. This may require that the reply
  also list the mandatory operators.

</p>
<a name="anchor62"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Internationalization Considerations</h3>

<p>
  Properties may be language-tagged using the xml:lang attribute (see
  <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, Section 4.3). The optional operators
  DAV:language-defined (<a class='info' href='#operator.language-defined'>Section&nbsp;5.12.1<span> (</span><span class='info'>DAV:language-defined (optional)</span><span>)</span></a>) 
  and DAV:language-matches (<a class='info' href='#operator.language-matches'>Section&nbsp;5.12.2<span> (</span><span class='info'>DAV:language-matches (optional)</span><span>)</span></a>)
  allow to express conditions on the language tagging information.

</p>
<a name="anchor63"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
  This section is provided to detail issues concerning security implications
  of which DASL applications need to be aware. All of the security considerations
  of HTTP/1.1 (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>
  and WebDAV (<a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>) also apply to DASL. In addition, this section will include
  security risks inherent in searching and retrieval of resource properties
  and content.

</p>
<p>
  A query MUST NOT allow clients to retrieve information that wouldn't have
  been available through the GET or PROPFIND methods in the first place. In
  particular:
  </p>
<ul class="text">
<li>
      Query constraints on WebDAV properties for which the client does not
      have read access need to be evaluated as if the property did not
      exist (see <a class='info' href='#null-values'>Section&nbsp;5.5.3<span> (</span><span class='info'>Treatment of NULL Values</span><span>)</span></a>).
    
</li>
<li>
      Query constraints on content (as with DAV:contains, defined in <a class='info' href='#contains'>Section&nbsp;5.16<span> (</span><span class='info'>DAV:contains</span><span>)</span></a>)
      for which the client does not have read access need to be evaluated as
      if a GET would return a 4xx status code.
    
</li>
</ul><p>  
  
</p>
<p>
  A server should prepare for denial of service attacks. For example a
  client may issue a query for which the result set is expensive to calculate
  or transmit because many resources match or must be evaluated.

</p>
<a name="anchor64"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Implications of XML External Entities</h3>

<p>
  XML supports a facility known as "external entities", defined in
  Section 4.2.2 of <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Fourth Edition),&rdquo; August&nbsp;2006.</span><span>)</span></a>, which instruct an XML processor to retrieve and perform
  an inline include of XML located at a particular URI. An external XML entity
  can be used to append or modify the document type declaration (DTD) associated
  with an XML document. An external XML entity can also be used to include
  XML within the content of an XML document. For non-validating XML, such
  as the XML used in this specification, including an external XML entity
  is not required by <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Fourth Edition),&rdquo; August&nbsp;2006.</span><span>)</span></a>. However, <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Fourth Edition),&rdquo; August&nbsp;2006.</span><span>)</span></a> does state that an XML
  processor may, at its discretion, include the external XML entity.

</p>
<p>
  External XML entities have no inherent trustworthiness and are subject
  to all the attacks that are endemic to any HTTP GET request. Furthermore,
  it is possible for an external XML entity to modify the DTD, and hence
  affect the final form of an XML document, in the worst case significantly
  modifying its semantics, or exposing the XML processor to the security
  risks discussed in <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Makoto, M., St.Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a>. Therefore, implementers must be aware that
  external XML entities should be treated as untrustworthy.

</p>
<p>
  There is also the scalability risk that would accompany a widely deployed
  application which made use of external XML entities. In this situation,
  it is possible that there would be significant numbers of requests for
  one external XML entity, potentially overloading any server which fields
  requests for the resource containing the external XML entity.

</p>
<a name="anchor65"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Scalability</h3>

<p>
  Query grammars are identified by URIs. Applications SHOULD not attempt
  to retrieve these URIs even if they appear to be retrievable (for example,
  those that begin with "http://")

</p>
<a name="anchor66"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>
  This document uses the namespace defined in Section 21 of <a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a> for XML
  elements.

</p>
<a name="anchor67"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
HTTP Headers</h3>

<p>
  This document specifies the HTTP header listed below, to be added to the
  HTTP header registry defined in <a class='info' href='#RFC3864'>[RFC3864]<span> (</span><span class='info'>Klyne, G., Nottingham, M., and J. Mogul, &ldquo;Registration Procedures for Message Header Fields,&rdquo; September&nbsp;2004.</span><span>)</span></a>.

</p>
<a name="anchor68"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1.1"></a><h3>9.1.1.&nbsp;
DASL</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>Header field name:</dt>
<dd>DASL
</dd>
<dt>Applicable protocol:</dt>
<dd>http
</dd>
<dt>Status:</dt>
<dd>Experimental
</dd>
<dt>Author/Change controller:</dt>
<dd>IETF
</dd>
<dt>Specification document:</dt>
<dd>this specification (<a class='info' href='#header.dasl'>Section&nbsp;3.2<span> (</span><span class='info'>The DASL Response Header</span><span>)</span></a>)
</dd>
</dl></blockquote><p>

</p>
<a name="anchor69"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Contributors</h3>

<p>
  This document is based on prior work on the DASL protocol done by the WebDAV
  DASL working group until the year 2000 -- namely by Alan Babich, Jim Davis,
  Rick Henderson, Dale Lowry, Saveen Reddy and Surendra Reddy.

</p>
<a name="anchor70"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Acknowledgements</h3>

<p>
  This document has benefited from thoughtful discussion by Lisa Dusseault,
  Javier Godoy, 
  Sung Kim, Chris Newman, Elias Sinderson, Martin Wallmer, Keith Wannamaker, Jim Whitehead
  and Kevin Wiggen.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Nielsen, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3023">[RFC3023]</a></td>
<td class="author-text"><a href="mailto:mmurata@trl.ibm.co.jp">Makoto, M.</a>, <a href="mailto:simonstl@simonstl.com">St.Laurent, S.</a>, and <a href="mailto:dan@dankohn.com">D. Kohn</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3023">XML Media Types</a>,&rdquo; RFC&nbsp;3023, January&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3253">[RFC3253]</a></td>
<td class="author-text"><a href="mailto:geoffrey.clemm@rational.com">Clemm, G.</a>, <a href="mailto:jamsden@us.ibm.com">Amsden, J.</a>, <a href="mailto:tim_ellison@uk.ibm.com">Ellison, T.</a>, <a href="mailto:ckaler@microsoft.com">Kaler, C.</a>, and <a href="mailto:ejw@cse.ucsc.edu">J. Whitehead</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3253">Versioning Extensions to WebDAV</a>,&rdquo; RFC&nbsp;3253, March&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3744">[RFC3744]</a></td>
<td class="author-text"><a href="mailto:geoffrey.clemm@us.ibm.com">Clemm, G.</a>, <a href="mailto:julian.reschke@greenbytes.de">Reschke, J.</a>, <a href="mailto:eric.sedlar@oracle.com">Sedlar, E.</a>, and <a href="mailto:ejw@cse.ucsc.edu">J. Whitehead</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3744">Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol</a>,&rdquo; RFC&nbsp;3744, May&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4918">[RFC4918]</a></td>
<td class="author-text"><a href="mailto:ldusseault@commerce.net">Dusseault, L., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4918">HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)</a>,&rdquo; RFC&nbsp;4918, June&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text"><a href="mailto:dcrocker@bbiw.net">Crocker, D., Ed.</a> and <a href="mailto:paul.overell@thus.net">P. Overell</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="XML">[XML]</a></td>
<td class="author-text"><a href="mailto:tbray@textuality.com">Bray, T.</a>, <a href="mailto:jeanpa@microsoft.com">Paoli, J.</a>, <a href="mailto:cmsmcq@uic.edu">Sperberg-McQueen, C.</a>, <a href="mailto:eve.maler@east.sun.com">Maler, E.</a>, and <a href="mailto:francois@yergeau.com">F. Yergeau</a>, &ldquo;<a href="http://www.w3.org/TR/2006/REC-xml-20060816">Extensible Markup Language (XML) 1.0 (Fourth Edition)</a>,&rdquo; W3C&nbsp;REC-xml-20060816, August&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="XPATH">[XPATH]</a></td>
<td class="author-text"><a href="mailto:jjc@jclark.com">Clark, J.</a> and <a href="mailto:Steven_DeRose@Brown.edu">S. DeRose</a>, &ldquo;<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">XML Path Language (XPath) Version 1.0</a>,&rdquo; W3C&nbsp;REC-xpath-19991116, November&nbsp;1999.</td></tr>
<tr><td class="author-text" valign="top"><a name="XPATHFUNC">[XPATHFUNC]</a></td>
<td class="author-text"><a href="mailto:ashok.malhotra@alum.mit.edu">Malhotra, A.</a>, <a href="mailto:jim.melton@acm.org">Melton, J.</a>, and <a href="mailto:Norman.Walsh@Sun.COM">N. Walsh</a>, &ldquo;<a href="http://www.w3.org/TR/2007/REC-xpath-functions-20070123/">XQuery 1.0 and XPath 2.0 Functions and Operators</a>,&rdquo; W3C&nbsp;REC-xpath-functions-20070123, January&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="XS1">[XS1]</a></td>
<td class="author-text"><a href="mailto:ht@cogsci.ed.ac.uk">Thompson, H.</a>, <a href="mailto:David.Beech@oracle.com">Beech, D.</a>, <a href="mailto:murray@muzmo.com">Maloney, M.</a>, <a href="mailto:Noah_Mendelsohn@lotus.com">Mendelsohn, N.</a>, and <a href="http://www.w3c.org">World Wide Web Consortium</a>, &ldquo;<a href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/">XML Schema Part 1: Structures</a>,&rdquo; W3C&nbsp;REC-xmlschema-1-20041028, October&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="XS2">[XS2]</a></td>
<td class="author-text"><a href="mailto:Paul.V.Biron@kp.org">Biron, P.</a>, <a href="mailto:ashokma@microsoft.com">Malhotra, A.</a>, and <a href="http://www.w3c.org">World Wide Web Consortium</a>, &ldquo;<a href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/">XML Schema Part 2: Datatypes Second Edition</a>,&rdquo; W3C&nbsp;REC-xmlschema-2-20041028, October&nbsp;2004.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>12.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="BCP47">[BCP47]</a></td>
<td class="author-text">Phillips, A. and M. Davis, &ldquo;<a href="http://tools.ietf.org/html/rfc4647">Matching of Language Tags</a>,&rdquo; BCP&nbsp;47, RFC&nbsp;4647, September&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="DASL">[DASL]</a></td>
<td class="author-text"><a href="mailto:saveenr@microsoft.com">Reddy, S.</a>, <a href="mailto:dlowry@novell.com">Lowry, D.</a>, <a href="mailto:skreddy@us.oracle.com">Reddy, S.</a>, <a href="mailto:rickh@netscape.com">Henderson, R.</a>, <a href="mailto:jrd3@alum.mit.edu">Davis, J.</a>, and <a href="mailto:ababich@filenet.com">A. Babich</a>, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dasl-protocol-00.txt">DAV Searching &amp; Locating</a>,&rdquo; draft-ietf-dasl-protocol-00 (work in progress), July&nbsp;1999.</td></tr>
<tr><td class="author-text" valign="top"><a name="DASLREQ">[DASLREQ]</a></td>
<td class="author-text"><a href="mailto:jrd3@alum.mit.edu">Davis, J.</a>, <a href="mailto:saveenr@microsoft.com">Reddy, S.</a>, and <a href="mailto:slein@wrc.xerox.com">J. Slein</a>, &ldquo;<a href="http://www.webdav.org/dasl/requirements/draft-dasl-requirements-01.html">Requirements for DAV Searching and Locating</a>,&rdquo; February&nbsp;1999.<p>
This is an updated version of the Internet Draft "draft-ietf-dasl-requirements-00",
    but obviously never was submitted to the IETF.
</p>
</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3864">[RFC3864]</a></td>
<td class="author-text">Klyne, G., Nottingham, M., and J. Mogul, &ldquo;<a href="http://tools.ietf.org/html/rfc3864">Registration Procedures for Message Header Fields</a>,&rdquo; BCP&nbsp;90, RFC&nbsp;3864, September&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4437">[RFC4437]</a></td>
<td class="author-text"><a href="mailto:ejw@cse.ucsc.edu">Whitehead, J.</a>, <a href="mailto:geoffrey.clemm@us.ibm.com">Clemm, G.</a>, and <a href="mailto:julian.reschke@greenbytes.de">J. Reschke, Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4437">Web Distributed Authoring and Versioning (WebDAV) RedirectReferenceResources</a>,&rdquo; RFC&nbsp;4437, March&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4790">[RFC4790]</a></td>
<td class="author-text"><a href="mailto:chris.newman@sun.com">Newman, C.</a>, <a href="mailto:duerst@it.aoyama.ac.jp">Duerst, M.</a>, and <a href="mailto:arnt@oryx.com">A. Gulbrandsen</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4790">Internet Application Protocol Collation Registry</a>,&rdquo; RFC&nbsp;4790, March&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="SQL99">[SQL99]</a></td>
<td class="author-text">Milton, J., &ldquo;Database Language SQL Part 2: Foundation (SQL/Foundation),&rdquo; ISO&nbsp;ISO/IEC 9075-2:1999 (E), July&nbsp;1999.</td></tr>
<tr><td class="author-text" valign="top"><a name="UNICODE5">[UNICODE5]</a></td>
<td class="author-text">The Unicode Consortium, &ldquo;<a href="http://www.unicode.org/versions/Unicode5.0.0/">The Unicode Standard - Version 5.0</a>,&rdquo; Addison-Wesley&nbsp;, November&nbsp;2006.<p>
<a href='urn:isbn:0321480910'>ISBN 0321480910</a>
</p>
</td></tr>
<tr><td class="author-text" valign="top"><a name="draft-ietf-webdav-bind">[draft-ietf-webdav-bind]</a></td>
<td class="author-text"><a href="mailto:geoffrey.clemm@us.ibm.com">Clemm, G.</a>, <a href="mailto:ccjason@us.ibm.com">Crawford, J.</a>, <a href="mailto:julian.reschke@greenbytes.de">Reschke, J., Ed.</a>, and <a href="mailto:ejw@cse.ucsc.edu">J. Whitehead</a>, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-webdav-bind-20.txt">Binding Extensions to Web Distributed Authoring and Versioning (WebDAV)</a>,&rdquo; draft-ietf-webdav-bind-20 (work in progress), November&nbsp;2007.</td></tr>
</table>

<a name="three-valued-logic"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Three-Valued Logic in DAV:basicsearch</h3>

<p>
  ANSI standard three valued logic is used when evaluating the search condition
  (as defined in the ANSI standard SQL specifications, for example in ANSI
  X3.135-1992, section 8.12, pp. 188-189, section 8.2, p. 169, General Rule
  1)a), etc.).

</p>
<p>
  ANSI standard three valued logic is undoubtedly the most widely practiced
  method of dealing with the issues of properties in the search condition
  not having a value (e.g., being null or not defined) for the resource under
  scan, and with undefined expressions in the search condition (e.g., division
  by zero, etc.). Three valued logic works as follows.

</p>
<p>
  Undefined expressions are expressions for which the value of the expression
  is not defined. Undefined expressions are a completely separate concept
  from the truth value UNKNOWN, which is, in fact, well defined. Property
  names and literal constants are considered expressions for purposes of
  this section. If a property in the current resource under scan has not
  been set to a value, then
  the value of that property is undefined for the resource under scan. DASL
  1.0 has no arithmetic division operator, but if it did, division by zero
  would be an undefined arithmetic expression.

</p>
<p>
  If any subpart of an arithmetic, string, or datetime subexpression is
  undefined, the whole arithmetic, string, or datetime subexpression is undefined.

</p>
<p>
  There are no manifest constants to explicitly represent undefined number,
  string, or datetime values.

</p>
<p>
  Since a Boolean value is ultimately returned by the search condition,
  arithmetic, string, and datetime expressions are always arguments to other
  operators. Examples of operators that convert arithmetic, string, and datetime
  expressions to Boolean values are the six relational operators ("greater
  than", "less than", "equals", etc.). If either or both operands of a relational
  operator have undefined values, then the relational operator evaluates
  to UNKNOWN. Otherwise, the relational operator evaluates to TRUE or FALSE,
  depending upon the outcome of the comparison.

</p>
<p>
  The Boolean operators DAV:and, DAV:or and DAV:not
  are evaluated according to the following rules:

</p>
<p>
  not UNKNOWN = UNKNOWN

</p>
<p>
  UNKNOWN and TRUE = UNKNOWN

</p>
<p>
  UNKNOWN and FALSE = FALSE

</p>
<p>
  UNKNOWN and UNKNOWN = UNKNOWN

</p>
<p>
  UNKNOWN or TRUE = TRUE

</p>
<p>
  UNKNOWN or FALSE = UNKNOWN

</p>
<p>
  UNKNOWN or UNKNOWN = UNKNOWN

</p>
<a name="future.protocol.extensions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Candidates for Future Protocol Extensions</h3>

<p>
    This Section summarizes issues which have been raised during the development
    of this specification, but for which no resolution could be found with the
    constraints in place. Future revisions of this specification should revisit
    these issues, though.
  
</p>
<a name="extensions.collations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
Collation Support</h3>

<p>
    Matching and sorting of textual data relies on collations. With respect
    to WebDAV SEARCH, a combination of various design approaches could be used:
    </p>
<ul class="text">
<li>
        Require server support for specific collations.
      
</li>
<li>
        Require that the server can advertise which collations it supports.
      
</li>
<li>
        Allow a client to select the collation to be used.
      
</li>
</ul><p>
  
</p>
<p>
    In practice, the current implementations of WebDAV SEARCH usually rely
    on backends they do not control, and for which collation information may
    not be available. To make things worse, implementations of the DAV:basicsearch grammar
    frequently need to combine data from multiple underlying stores (such as
    properties and full text content), and thus collation support may vary based
    on the operator or property.
  
</p>
<p>
    Another open issue is what collation formalism to support. At the time of
    this writing, the two specifications below seem to provide the
    necessary framework and thus may be the base for future work on collation
    support in WebDAV SEARCH:
    </p>
<ol class="text">
<li>
        "Internet Application Protocol Collation Registry" (<a class='info' href='#RFC4790'>[RFC4790]<span> (</span><span class='info'>Newman, C., Duerst, M., and A. Gulbrandsen, &ldquo;Internet Application Protocol Collation Registry,&rdquo; March&nbsp;2007.</span><span>)</span></a>). 
      
</li>
<li>
        "XQuery 1.0 and XPath 2.0 Functions and Operators" (<a class='info' href='#XPATHFUNC'>[XPATHFUNC]<span> (</span><span class='info'>Malhotra, A., Melton, J., and N. Walsh, &ldquo;XQuery 1.0 and XPath 2.0 Functions and Operators,&rdquo; January&nbsp;2007.</span><span>)</span></a>, Section 7.3.1). 
      
</li>
</ol><p>
  
</p>
<a name="extensions.count"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2"></a><h3>B.2.&nbsp;
Count</h3>

<p>
  DAV:basicsearch does not allow a request that returns the count of matching
  resources.

</p>
<p>
  A protocol extension would need to extend DAV:select, and also modify the
  DAV:multistatus response format.

</p>
<a name="extensions.diagnostics"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.3"></a><h3>B.3.&nbsp;
Diagnostics for Unsupported Queries</h3>

<p>
  There are many reasons why a given query may not be supported by a server.
  Query Schema Discovery (<a class='info' href='#QSD'>Section&nbsp;4<span> (</span><span class='info'>Query Schema Discovery: QSD</span><span>)</span></a>) can be used to discover some
  constraints, but not all.

</p>
<p>
  Future revisions should consider the introduction of specific condition
  codes (<a class='info' href='#RFC4918'>[RFC4918]<span> (</span><span class='info'>Dusseault, L., Ed., &ldquo;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV),&rdquo; June&nbsp;2007.</span><span>)</span></a>, Section 16) to these situations.

</p>
<a name="extensions.language.matching"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.4"></a><h3>B.4.&nbsp;
Language Matching</h3>

<p>
  <a class='info' href='#operator.language-matches'>Section&nbsp;5.12.2<span> (</span><span class='info'>DAV:language-matches (optional)</span><span>)</span></a> defines language matching in
  terms of the XPath "lang" function (<a class='info' href='#XPATH'>[XPATH]<span> (</span><span class='info'>Clark, J. and S. DeRose, &ldquo;XML Path Language (XPath) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a>, Section 4.3).
  Future revisions should consider building on <a class='info' href='#BCP47'>[BCP47]<span> (</span><span class='info'>Phillips, A. and M. Davis, &ldquo;Matching of Language Tags,&rdquo; September&nbsp;2006.</span><span>)</span></a> instead.

</p>
<a name="extensions.mediatype-match"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.5"></a><h3>B.5.&nbsp;
Matching Media Types</h3>

<p>
  Matching media types using the DAV:getcontenttype property and the DAV:like
  operator is hard due to DAV:getcontenttype also allowing parameters.
  A new operator specifically designed for the purpose of matching media types
  probably would simplify things a lot. See <a href='http://lists.w3.org/Archives/Public/www-webdav-dasl/2003OctDec/0109.html'>http://lists.w3.org/Archives/Public/www-webdav-dasl/2003OctDec/0109.html</a>
  for a specific proposal.

</p>
<a name="extensions.query-by-name"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.6"></a><h3>B.6.&nbsp;
Query by Name</h3>

<p>
  DAV:basicsearch operates on the properties (and optionally the contents)
  of resources, and thus doesn't really allow matching on parts of the
  resource's URI. See <a href='http://lists.w3.org/Archives/Public/www-webdav-dasl/2003OctDec/0100.html'>http://lists.w3.org/Archives/Public/www-webdav-dasl/2003OctDec/0100.html</a>
  for a proposed extension covering this use case.

</p>
<a name="extensions.result-paging"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.7"></a><h3>B.7.&nbsp;
Result Paging</h3>

<p>
  A frequently discussed feature is the ability to specifically request
  the "next" set of results, when either the server decided to truncate
  the result, or the client explicitly asked for a limited set (for
  instance, using the DAV:limit element defined in <a class='info' href='#limiting.the.result.set'>Section&nbsp;5.17<span> (</span><span class='info'>Limiting the Result Set</span><span>)</span></a>).

</p>
<p>
  In this case, it would be desirable if the server could keep the full
  query result, and provide a new URI identifying a separate result resource,
  allowing the client to retrieve additional data through GET requests,
  and remove the result through a DELETE request.

</p>
<a name="extensions.search.scope.discovery"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.8"></a><h3>B.8.&nbsp;
Search Scope Discovery</h3>

<p>
  Given a Search Arbiter resource, there's currently no way to discover
  programmatically the supported sets of search scopes. Future revisions
  of this specification could specify a scope discovery mechanism, similar
  to the Query Schema Discovery defined in <a class='info' href='#QSD'>Section&nbsp;4<span> (</span><span class='info'>Query Schema Discovery: QSD</span><span>)</span></a>. 

</p>
<a name="anchor73"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Change Log (to be removed by RFC Editor before publication)</h3>

<a name="anchor74"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.1"></a><h3>C.1.&nbsp;
From draft-davis-dasl-protocol-xxx</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>Feb 14, 1998</dt>
<dd>Initial Draft
</dd>
<dt>Feb 28, 1998</dt>
<dd>
    Referring to DASL as an extension to HTTP/1.1 rather than DAV.
    Added new sections "Notational Conventions", "Protocol Model", "Security
    Considerations".<br />

    Changed section 3 to "Elements of Protocol".<br />

    Added some stuff to introduction.<br />

    Added "result set" terminology.<br />

    Added "IANA Considerations".
  
</dd>
<dt>Mar 9, 1998</dt>
<dd>
    Moved sub-headings of "Elements of Protocol" to first level and removed
    "Elements of Protocol" Heading.
    Added an sentence in introduction explaining that this is a "sketch"
    of a protocol.
  
</dd>
<dt>Mar 11, 1998</dt>
<dd>
    Added orderby, data typing, three valued logic, query schema property,
    and element definitions for schema for basicsearch.
</dd>
<dt>April 8, 1998</dt>
<dd>
    - made changes based on last week's DASL BOF.
</dd>
<dt>May 8, 1998</dt>
<dd>
    Removed most of DAV:searcherror; converted to DAV:searchredirect
    Altered DAV:basicsearch grammar to use avoid use of ANY in DTD
</dd>
<dt>June 17, 1998</dt>
<dd>
    -Added details on Query Schema Discovery
    -Shortened list of data types
</dd>
<dt>June 23, 1998</dt>
<dd>
    moved data types before change history
    rewrote the data types section
    <br />
removed the casesensitive element and replace with the casesensitive
    attribute
    <br />
added the casesensitive attribute to the DTD for all operations that
    might work on a string
  
</dd>
<dt>Jul 20, 1998</dt>
<dd>
    A series of changes. See Author's meeting minutes for details.
</dd>
<dt>July 28, 1998</dt>
<dd>
    Changes as per author's meeting. QSD uses SEARCH, not PROPFIND.
    Moved text around to keep concepts nearby.
    <br />
Boolean literals are 1 and 0, not T and F.
    <br />
contains changed to contentspassthrough.
    <br />
Renamed rank to score.
</dd>
<dt>July 28, 1998</dt>
<dd>
    Added Dale Lowry as Author
</dd>
<dt>September 4, 1998</dt>
<dd>
    Added 422 as response when query lists unimplemented operators.
    DAV:literal declares a default value for xml:space, 'preserve'
    (see XML spec, section 2.10)
    <br />
moved to new XML namespace syntax
  
</dd>
<dt>September 22, 1998</dt>
<dd>
    Changed "simplesearch" to "basicsearch"
    Changed isnull to isdefined
    <br />
Defined NULLness as having a 404 or 403 response
    <br />
used ENTITY syntax in DTD
    <br />
Added redirect
  
</dd>
<dt>October 9, 1998</dt>
<dd>
    Fixed a series of typographical and formatting errors.
    Modified the section of three-valued logic to use a table rather than
    a text description of the role of UNKNOWN in expressions.
  
</dd>
<dt>November 2, 1998</dt>
<dd>
    Added the DAV:contains operator.
    Removed the DAV:contentpassthrough operator.
  
</dd>
<dt>November 18, 1998</dt>
<dd>
    Various author comments for submission
</dd>
<dt>June 3, 1999</dt>
<dd>
    Cosmetic and minor editorial changes only. Fix nits reported by Jim Whitehead
    in email of April 26, 1999. Converted to HTML from Word 97, manually.
</dd>
<dt>April 20, 2000</dt>
<dd>
    Removed redirection feature, since 301/302 suffices. Removed Query Schema Discovery (former chapter 4). Everyone agrees this is a useful feature, but it is apparently too difficult to define at this time, and it is not essential for DASL. 
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor75"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.2"></a><h3>C.2.&nbsp;
since start of draft-reschke-webdav-search</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>October 09, 2001</dt>
<dd>
    Added Julian Reschke as author.
    Chapter about QSD re-added.<br />

    Formatted into RFC2629-compliant XML document.<br />

    Added first comments.<br />

    ID version number kicked up to draft-dasl-protocol-03.
  
</dd>
<dt>October 17, 2001</dt>
<dd>
    Updated address information for Jim Davis.
    Added issue of datatype vocabularies.<br />

    Updated issue descriptions for grammar discovery,
    added issues on query schema DTD.<br />

    Fixed typos in XML examples.
  
</dd>
<dt>December 17, 2001</dt>
<dd>
    Re-introduced split between normative and non-normative references.
  
</dd>
<dt>January 05, 2002</dt>
<dd>
    Version bumped up to 04. Started work on resolving the issues identified
    in the previous version.
  
</dd>
<dt>January 14, 2002</dt>
<dd>
    Fixed some XML typos.
  
</dd>
<dt>January 22, 2002</dt>
<dd>
    Closed issues naming-of-elements. Fixed query search DTD and added option
    to discover properties of "other" (non-listed) properties.
  
</dd>
<dt>January 25, 2002</dt>
<dd>
    Changed into private submission and added reference to historic DASL draft.
    Marked reference to DASL requirements non-normative.
    Updated reference to latest deltav spec. 
  
</dd>
<dt>January 29, 2002</dt>
<dd>
    Added feedback from and updated contact info for Alan Babich.
    Included open issues collected in <a href='http://www.webdav.org/dasl/protocol/issues.html'>http://www.webdav.org/dasl/protocol/issues.html</a>.
  
</dd>
<dt>February 8, 2002</dt>
<dd>
    Made sure that all artwork fits into 72 characters wide text.
  
</dd>
<dt>February 18, 2002</dt>
<dd>
    Changed Insufficient storage handling (multistatus). Moved is-collection to
    operators and added to DTD. Made scope/depth mandatory.
  
</dd>
<dt>February 20, 2002</dt>
<dd>
    Updated reference to SQL99.
  
</dd>
<dt>February 28, 2002</dt>
<dd>
    "Non-normative References" -&gt; "Informative References". Abstract updated.
    Consistently specify a charset when using text/xml (no change bars). Do
    not attempt to define PROPFIND's entity encoding (take out specific references
    to text/xml). Remove irrelevant headers (Connection:) from examples (no
    change bars). Added issue on querying based on DAV:href. Updated introduction
    to indicate relationship to DASL draft. Updated HTTP reference from
    RFC2068 to RFC2616. Updated XML reference to XML 1.0 2nd edition.
  
</dd>
<dt>March 1, 2002</dt>
<dd>
    Removed superfluous namespace decl in 2.4.2. Reopened JW14 and suggest
    to drop xml:space support.
  
</dd>
<dt>March 3, 2002</dt>
<dd>
    Removed "xml:space" feature on DAV:literal. Added issue about string
    comparison vs. collations vs. xml:lang. Updated some of the open issues
    with details from JimW's original mail in April 1999. Resolved scope vs
    relative URI references. Resolved issues about DAV:ascending (added to
    index) and the BNF for DAV:like (changed "octets" to "characters").
  
</dd>
<dt>March 8, 2002</dt>
<dd>
    Updated reference to DeltaV (now RFC3253). Added Martin Wallmer's comments,
    moved JW5 into DAV:basicsearch section.
  
</dd>
<dt>March 11, 2002</dt>
<dd>
    Closed open issues regaring the type of search arbiters (JW3) and their
    discovery (JW9). Rephrased requirements on multistatus response bodies
    (propstat only if properties were selected, removed requirement for
    responsedescription).
  
</dd>
<dt>March 23, 2002</dt>
<dd>
    RFC2376 -&gt; RFC3023. Added missing first names of authors. OPTIONS added
    to example for DAV:supported-method-set.
  
</dd>
</dl></blockquote>

<a name="anchor76"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.3"></a><h3>C.3.&nbsp;
since draft-reschke-webdav-search-00</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>March 29, 2002</dt>
<dd>
    Abstract doesn't refer to DASL WG anymore.
  
</dd>
<dt>April 7, 2002</dt>
<dd>
    Fixed section title (wrong property name supported-search-grammar-set.
    Changed DAV:casesensitve to "casesensitive" (it wasn't in the DAV:
    namespace after all).
  
</dd>
<dt>May 28, 2002</dt>
<dd>
    Updated some issues with Jim Davis's comments.
  
</dd>
<dt>June 10, 2002</dt>
<dd>
    Added proposal for different method for query schema discovery, not
    using pseudo-properties.
  
</dd>
<dt>June 25, 2002</dt>
<dd>
    QSD marshalling rewritten. Added issue "isdefined-optional".
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor77"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.4"></a><h3>C.4.&nbsp;
since draft-reschke-webdav-search-01</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>July 04, 2002</dt>
<dd>
    Added issue "scope-collection".
  
</dd>
<dt>July 08, 2002</dt>
<dd>
    Closed issue "scope-collection".
  
</dd>
<dt>August 12, 2002</dt>
<dd>
    Added issues "results-vs-binds" and "select-allprop".
  
</dd>
<dt>October 22, 2002</dt>
<dd>
    Added issue "undefined-expressions".
  
</dd>
<dt>November 18, 2002</dt>
<dd>
    Changed example host names (no change tracking).
  
</dd>
<dt>November 25, 2002</dt>
<dd>
    Updated issue "DB2/DB7". Closed issues "undefined expressions",
    "isdefined-optional" and "select-allprop".
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor78"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.5"></a><h3>C.5.&nbsp;
since draft-reschke-webdav-search-02</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>November 27, 2002</dt>
<dd>
    Added issues "undefined-properties", "like-exactlyone" and "like-wildcard-adjacent".
    Closed issue "query-on-href". Added acknowledgments section.
  
</dd>
<dt>November 28, 2002</dt>
<dd>
    Closed issue "like-exactlyone". Added issue "mixed-content-properties".
  
</dd>
<dt>December 14, 2002</dt>
<dd>
    Closed issues "undefined-properties", "results-vs-binds",
    "mixed-content-properties".
    Updated issue "like-wildcard-adjacent".
    Added informative reference to BIND draft. Updated reference to ACL
    draft.
  
</dd>
<dt>January 9, 2003</dt>
<dd>
    Removed duplicate section on invalid scopes. Added comments to some 
    open issues. Closed issues JW25/26, score-pseudo-property and null-ordering. 
  
</dd>
<dt>January 10, 2003</dt>
<dd>
    Issue limit-vs-ordering plus resolution. Closed issue JW17/JW24b.
  
</dd>
<dt>January 14, 2003</dt>
<dd>
    New issue order-precedence. Started resolution of DB2/DB7.
  
</dd>
<dt>January 15, 2003</dt>
<dd>
    Started spec of DAV:typed-literal.
  
</dd>
<dt>January 17, 2003</dt>
<dd>
    Fix one DAV:like/DAV:getcontenttype example (add / to like expression,
    make case-insensitive).
  
</dd>
<dt>January 28, 2003</dt>
<dd>
    Update issue(s) result-truncation, JW24d.
    Fixed response headers in OPTIONS example.
    Added issue qsd-optional.
    Closed issue(s) order-precedence, case-insensitivity-name.
  
</dd>
<dt>February 07, 2003</dt>
<dd>
    Added issue scope-vs-versions. score-pseudo-property: allow DAV:orderby
    to explicitly specify DAV:score.
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor79"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.6"></a><h3>C.6.&nbsp;
since draft-reschke-webdav-search-03</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>April 24, 2003</dt>
<dd>
    Fixed two "?" vs "_" issues (not updated in last draft).
  
</dd>
<dt>June 13, 2003</dt>
<dd>
    Improve index.
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor80"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.7"></a><h3>C.7.&nbsp;
since draft-reschke-webdav-search-04</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>July 7, 2003</dt>
<dd>
    Typo fixed (propstat without status element).
  
</dd>
<dt>August 11, 2003</dt>
<dd>
    Remove superfluous IP and copyright sections.
  
</dd>
<dt>September 09, 2003</dt>
<dd>
    Added issues "2.4-multiple-uris" and "5.1-name-filtering".
  
</dd>
<dt>October 06, 2003</dt>
<dd>
    Fix misplaced section end in 5.11, add table formatting. Enhance table
    formatting in 5.18.3. Updated ACL and BIND references. Added XPATH
    reference. Closed issue JW24d by adding new optional operators. Updated more
    open issues, added issues from January meeting. Add K. Wiggen to Acknowledgements.
    Add Contributors section for the authors of the original draft.
    Close issue "scope-vs-versions" (optional feature added). Close (new)
    issue "1.3-import-DTD-terminology". Add issue "1.3-import-requirements-terminology".
  
</dd>
<dt>October 07, 2003</dt>
<dd>
    Typos fixed. Moved statement about DAV: namespace usage into separate
    (sub-)section. Closed "1.3-import-requirements-terminology". Update
    I18N Considerations with new xml:lang support info (see issue JW24d).
    Close issue "DB2/DB7" (remaining typing issues are now summarized
    in issue "typed-literal"). Fix misplaced section end in section 7.
    Started change to use RFC3253-style method definitions and error
    marshalling.
  
</dd>
<dt>October 08, 2003</dt>
<dd>
    Remove obsolete language that allowed reporting invalid scopes and such
    inside multistatus. Add new issue "5.4.2-scope-vs-redirects".
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor81"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.8"></a><h3>C.8.&nbsp;
since draft-reschke-webdav-search-05</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>October 11, 2003</dt>
<dd>
    Separate DAV:basicsearch DTD into separate figures for better maintainability.
    Update DTD with language-* operators and typed-literal element (optional).
  
</dd>
<dt>October 14, 2003</dt>
<dd>
    Close issue "5.4.2-multiple-scope".
  
</dd>
<dt>November 04, 2003</dt>
<dd>
    Update reference from CaseMap to UNICODE4, section 5.18.
  
</dd>
<dt>November 16, 2003</dt>
<dd>
    Updated issue "5.1-name-filtering".
  
</dd>
<dt>November 24, 2003</dt>
<dd>
    Reformatted scope description (collection vs. non-collection).
  
</dd>
<dt>November 30, 2003</dt>
<dd>
    Add issue "5_media_type_match".
  
</dd>
<dt>February 6, 2004</dt>
<dd>
    Updated all references.
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor82"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.9"></a><h3>C.9.&nbsp;
since draft-reschke-webdav-search-06</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>July 05, 2004</dt>
<dd>
    Fix table in Appendix "Three-Valued Logic in DAV:basicsearch".
  
</dd>
<dt>September 14, 2004</dt>
<dd>
    Fix inconsistent DTD in section 5.2 and 5.4 for scope element.
  
</dd>
<dt>September 30, 2004</dt>
<dd>
    Rewrite editorial note and abstract.  Update references (remove unneeded
    XMLNS, update ref to ACL and BIND specs).
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor83"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.10"></a><h3>C.10.&nbsp;
since draft-reschke-webdav-search-07</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>October 01, 2004</dt>
<dd>
    Fix previous section heading (no change tracking).
  
</dd>
<dt>October 13, 2004</dt>
<dd>
    Fix DTD entry for is-collection.
  
</dd>
<dt>November 1, 2004</dt>
<dd>
    Fix DTD fragment query-schema-discovery.
  
</dd>
<dt>December 11, 2004</dt>
<dd>
    Update BIND reference.
  
</dd>
<dt>January 01, 2005</dt>
<dd>
    Fix DASL and DASLREQ references.
  
</dd>
<dt>February 06, 2005</dt>
<dd>
    Update XS2 reference.
  
</dd>
<dt>February 11, 2005</dt>
<dd>
    Rewrite "like" and "DASL" (response header) grammar in ABNF.
  
</dd>
<dt>May 5, 2005</dt>
<dd>
    Update references. Close issue "abnf" (only use ABNF when applicable).
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor84"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.11"></a><h3>C.11.&nbsp;
since draft-reschke-webdav-search-08</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>May 06, 2005</dt>
<dd>
    Fix document title.
  
</dd>
<dt>September 25, 2005</dt>
<dd>
    Update BIND reference.
  
</dd>
<dt>October 05, 2005</dt>
<dd>
    Update RFC4234 reference.
  
</dd>
<dt>October 22, 2005</dt>
<dd>
    Author's address update.
  
</dd>
<dt>February 12, 2006</dt>
<dd>
    Update BIND reference.
  
</dd>
<dt>March 16, 2006</dt>
<dd>
    Add typed literals to QSD.
  
</dd>
<dt>August 20, 2006</dt>
<dd>
  Update XML reference.
  
</dd>
<dt>August 28, 2006</dt>
<dd>
  Add issues "5.3-select-count" (open) and "5.4-clarify-depth" (resolved).
  Update BIND reference (again).
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor85"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.12"></a><h3>C.12.&nbsp;
since draft-reschke-webdav-search-09</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>December 1, 2006</dt>
<dd>
  Fix ABNF for DASL header.
  
</dd>
<dt>December 16, 2006</dt>
<dd>
  Close issue "qsd-optional", leave QSD optional. Close issue "2.4-multiple-uris",
  suggesting that servers should only return one response element per resource in
  case of multiple bindings.
  Add and resolve issues "authentication" and "cleanup-iana" (adding the header registration for
  "DASL").
  Re-write rational for using the DAV: namespace, although this is a non-WG
  submission.
  
</dd>
<dt>January 4, 2007</dt>
<dd>
  Close issue "JW16b/JW24a", being related to "language-comparison".
  Add <a class='info' href='#future.protocol.extensions'>Appendix&nbsp;B<span> (</span><span class='info'>Candidates for Future Protocol Extensions</span><span>)</span></a>.
  Close issues "language-comparison", "5_media_type_match",
  "5.1-name-filtering" and "5.3-select-count" as "won't fix", and add appendices accordingly.
  
</dd>
<dt>January 24, 2007</dt>
<dd>
  Update BIND reference. Close issue "5.4.2-scope-vs-redirects".
  Close issue "typed-literal": specify in terms of the XPATH 2.9 casting mechanism.
  Close issue "1.3-apply-condition-code-terminology" (no changes).
  
</dd>
</dl></blockquote>

<a name="anchor86"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.13"></a><h3>C.13.&nbsp;
since draft-reschke-webdav-search-10</h3>

<p>
</p>
<blockquote class="text"><dl>
<dt>January 29, 2007</dt>
<dd>
    Issue "result-truncation": Add appendix describing the open issue of
    Result Paging. Describe the mechanism of marshalling truncated results
    in a new normative subsection (leave the actual example where it was).
    Add and resolve issues "rfc2606-compliance" and "response-format".
    Update contact information for Alan Babich, Jim Davis and Surendra Reddy (no change tracking).
  
</dd>
<dt>February 8, 2007</dt>
<dd>
    Update BIND reference.
  
</dd>
</dl></blockquote><p>

</p>
<a name="anchor87"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.14"></a><h3>C.14.&nbsp;
since draft-reschke-webdav-search-11</h3>

<p>
  Update: draft-newman-i18n-comparator-14 is RFC4790.
  Update: RFC2518 replaced by draft-ietf-webdav-rfc2518bis.
  Updated BIND reference.
  Minor tweaks to intro (document organization and relation to DASL).

</p>
<a name="anchor88"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.15"></a><h3>C.15.&nbsp;
since draft-reschke-webdav-search-12</h3>

<p>
  Update: draft-ietf-webdav-rfc2518bis replaced by RFC4918.
  Updated BIND reference.

</p>
<a name="anchor89"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.16"></a><h3>C.16.&nbsp;
since draft-reschke-webdav-search-13</h3>

<p>
  Open and close issue "qsd-req-validity".
  Updated BIND reference.

</p>
<a name="anchor90"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.17"></a><h3>C.17.&nbsp;
since draft-reschke-webdav-search-14</h3>

<p>
  RFC4234 obsoleted by RFC5234.

</p>
<p>
  Add and resolve issues "5.19.8-opdesc-vs-contains" and "dtd".

</p>
<p>
  Add clarifications about the behaviour when literal values are not compatible
  with the type of a comparison.

</p>
<a name="anchor91"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.18"></a><h3>C.18.&nbsp;
since draft-reschke-webdav-search-15</h3>

<p>
  Minor editorial improvements.

</p>
<p>
  Fix description of DAV:scope/DAV:href to use proper URI terminology, add reference
  to RFC 3986.

</p>
<p>
  Clarify list nature of DASL header.

</p>
<p>
  Clarify that the DAV:like pattern ABNF is defined in terms of Unicode code points.

</p>
<p>
  Update to UNICODE5.

</p>
<p>
  Aim for standards track (affects introduction to <a class='info' href='#future.protocol.extensions'>Appendix&nbsp;B<span> (</span><span class='info'>Candidates for Future Protocol Extensions</span><span>)</span></a>).
  Thus, make the dependency on <a class='info' href='#RFC4437'>[RFC4437]<span> (</span><span class='info'>Whitehead, J., Clemm, G., and J. Reschke, Ed., &ldquo;Web Distributed Authoring and Versioning (WebDAV) RedirectReferenceResources,&rdquo; March&nbsp;2006.</span><span>)</span></a> clearly optional,
  and make the reference informative.
  Also, mention BCP 47 as candidate for future changes to language matching.

</p>
<p>
  Mention definition of additional condition codes as candidate for future changes.

</p>
<p>
  Consider DAV:contains in Security Considerations.

</p>
<p>
  Update Surendra's and Alan's contact information.

</p>
<p>
  Mention search scope discovery as future extensions. Add a SHOULD level
  requirement for DAV:basicsearch search arbiters to support their own
  URI as search scope.

</p>
<a name="anchor92"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D"></a><h3>Appendix D.&nbsp;
Resolved issues (to be removed by RFC Editor before publication)</h3>

<p>
          Issues that were either rejected or resolved in this version of this
          document.
        
</p>
<a name="anchor93"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1"></a><h3>D.1.&nbsp;
standardstrack</h3>

<p>
      Type: change
</p>
<p>julian.reschke@greenbytes.de (2008-06-27): 
    Umbrella issue for changes making this a candidate for the Standards Track.
  
</p>
<a name="anchor94"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.2"></a><h3>D.2.&nbsp;
acls</h3>

<p>
      Type: edit
</p>
<p>julian.reschke@greenbytes.de (2008-06-29): 
    Clarify security considerations with respect to access rights.
  
</p>
<a name="anchor95"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.3"></a><h3>D.3.&nbsp;
scope-discovery</h3>

<p>
      Type: change
</p>
<p>julian.reschke@greenbytes.de (2008-07-02): 
    State that there's no way to discover supported scopes, but also add
    a SHOULD requirement for a scope to be supported by DAV:basicsearch.
  
</p>
<a name="anchor96"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.4"></a><h3>D.4.&nbsp;
3.2-listsyntax</h3>

<p>
        In Section 3.2:
      
</p>
<p>
      Type: edit
</p>
<p>julian.reschke@greenbytes.de (2008-06-25): 
    Clarify what HTTP-style list syntax in headers means; adjust examples.
  
</p>
<p>Resolution: 
    Done.
  
</p>
<a name="anchor97"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E"></a><h3>Appendix E.&nbsp;
Open issues (to be removed by RFC Editor prior to publication)</h3>

<a name="anchor98"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.E.1"></a><h3>E.1.&nbsp;
edit</h3>

<p>
      Type: edit
</p>
<p>julian.reschke@greenbytes.de (2004-07-05): 
    Umbrella issue for editorial fixes/enhancements.
  
</p><a name="rfc.index"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Index</h3>
<table>
<tr><td><strong>C</strong></td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td>caseless attribute  <a href="#anchor138">1</a>, <a href="#anchor144">2</a>, <a href="#anchor149">3</a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor162"><b></b></a></td></tr>
<tr><td>&nbsp;</td><td>Condition Names</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor114"><b>DAV:search-grammar-discovery-supported (pre)</b></a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor116"><b>DAV:search-grammar-supported (pre)</b></a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor118"><b>DAV:search-multiple-scope-supported (pre)</b></a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor120"><b>DAV:search-scope-valid (pre)</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor99"><b>Criteria</b></a></td></tr>
<tr><td><strong>D</strong></td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor139"><b>DAV:and</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor136"><b>DAV:ascending</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor157"><b>DAV:contains</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor132"><b>DAV:depth</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor137"><b>DAV:descending</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor142"><b>DAV:eq</b></a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor143">caseless attribute</a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor130"><b>DAV:from</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor147"><b>DAV:gt</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor148"><b>DAV:gte</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor133"><b>DAV:include-versions</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor154"><b>DAV:is-collection</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor155"><b>DAV:is-defined</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor152"><b>DAV:language-defined</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor153"><b>DAV:language-matches</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor156"><b>DAV:like</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor159"><b>DAV:limit</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor150"><b>DAV:literal</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor145"><b>DAV:lt</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor146"><b>DAV:lte</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor141"><b>DAV:not</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor160"><b>DAV:nresults</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor140"><b>DAV:or</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor135"><b>DAV:orderby</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor131"><b>DAV:scope</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor158"><b>DAV:score</b></a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor161"><b>relationship to DAV:orderby</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor113"><b>DAV:search-grammar-discovery-supported precondition</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor115"><b>DAV:search-grammar-supported precondition</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor117"><b>DAV:search-multiple-scope-supported precondition</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor119"><b>DAV:search-scope-valid precondition</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor129"><b>DAV:select</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor126"><b>DAV:supported-query-grammar-set property</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor151"><b>DAV:typed-literal</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor134"><b>DAV:where</b></a></td></tr>
<tr><td><strong>M</strong></td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td>Methods</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor112"><b>SEARCH</b></a></td></tr>
<tr><td><strong>O</strong></td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor124"><b>OPTIONS method</b></a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor125"><b>DASL response header</b></a></td></tr>
<tr><td><strong>P</strong></td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td>Properties</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor127"><b>DAV:supported-query-grammar-set</b></a></td></tr>
<tr><td><strong>Q</strong></td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor100"><b>Query</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor101"><b>Query Grammar</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor122"><b>Query Grammar Discovery</b></a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor128"><b>using live property</b></a></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor123"><b>using OPTIONS</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor102"><b>Query Schema</b></a></td></tr>
<tr><td><strong>R</strong></td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor103"><b>Result</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor104"><b>Result Record</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor105"><b>Result Record Definition</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor106"><b>Result Set</b></a></td></tr>
<tr><td>&nbsp;</td><td>Result Set Truncation</td></tr>
<tr><td>&nbsp;</td><td>&nbsp;&nbsp;<a href="#anchor121"><b>Example</b></a></td></tr>
<tr><td><strong>S</strong></td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor107"><b>Scope</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor108"><b>Search Arbiter</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor111"><b>SEARCH method</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor109"><b>Search Modifier</b></a></td></tr>
<tr><td>&nbsp;</td><td><a href="#anchor110"><b>Sort Specification</b></a></td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Julian F. Reschke (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">greenbytes GmbH</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hafenweg 16</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Muenster, NW  48155</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 251 2807760</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:julian.reschke@greenbytes.de">julian.reschke@greenbytes.de</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://greenbytes.de/tech/webdav/">http://greenbytes.de/tech/webdav/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Surendra Reddy</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mitrix, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">303 Twin Dolphin Drive, Suite 600-37</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Redwood City, CA  94065</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">U.S.A.</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 408 500 1135</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Surendra.Reddy@mitrix.com">Surendra.Reddy@mitrix.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jim Davis</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">27 Borden Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Toronto, Ontario  M5S 2M8</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Canada</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 416 929 5854</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jrd3@alum.mit.edu">jrd3@alum.mit.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.econetwork.net/~jdavis">http://www.econetwork.net/~jdavis</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Babich</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">IBM Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3565 Harbor Blvd.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Costa Mesa, CA  92626</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">U.S.A.</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 714 327 3403</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ababich@us.ibm.com">ababich@us.ibm.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
