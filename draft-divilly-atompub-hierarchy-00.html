<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Hierarchy Extensions to Atom Feeds</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Hierarchy Extensions to Atom Feeds">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">C. Divilly</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">N. Mehta</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Oracle Corp.</td></tr>
<tr><td class="header">Expires: November 6, 2009</td><td class="header">May 05, 2009</td></tr>
</table></td></tr></table>
<h1><br />Hierarchy Extensions to Atom Feeds<br />draft-divilly-atompub-hierarchy-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on November 6, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
			This specification defines a mechanism to create and remove 
			AtomPub collections using the AtomPub protocol as well as
			to express hierarchies of feeds within the Atom Syndication 
			Format.
			
</p>
<h3>Editorial Note</h3>

<p>
			To provide feedback on this Internet-Draft, join the
			<a href='http://www.imc.org/atom-protocol/'>atom-protocol mailing
			list (http://www.imc.org/atom-protocol/)</a>.
			
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.1.</a>&nbsp;
Namespace<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.2.</a>&nbsp;
Notational Conventions<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#protocol-model">3.</a>&nbsp;
Protocol Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#feed-classification">3.1.</a>&nbsp;
Feed Classification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#protocol-operations">3.2.</a>&nbsp;
Protocol Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.2.1.</a>&nbsp;
Creating a Collection<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.2.2.</a>&nbsp;
Editing a Master Entry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.3.</a>&nbsp;
Removing a Master Entry<br />
<a href="#backing-collection">4.</a>&nbsp;
Backing Collection<br />
<a href="#master-detail-feeds">5.</a>&nbsp;
Master Detail Relations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#child-feeds">5.1.</a>&nbsp;
Child feeds<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#detail-link">5.1.1.</a>&nbsp;
The &quot;detail&quot; Link<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#count-attribute">5.1.2.</a>&nbsp;
The &quot;h:count&quot; Extension Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#detail-examples">5.1.3.</a>&nbsp;
Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#master-entries">5.2.</a>&nbsp;
Master entries<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#master-link">5.2.1.</a>&nbsp;
The &quot;master&quot; Link<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#master-examples">5.2.2.</a>&nbsp;
Example<br />
<a href="#h-role">6.</a>&nbsp;
The 'h:role' Extension Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#type-master">6.1.</a>&nbsp;
The 'master' role<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#type-detail">6.2.</a>&nbsp;
The 'detail' role<br />
<a href="#examples">7.</a>&nbsp;
Working With Master-Detail Feeds<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#fetch-master">7.1.</a>&nbsp;
Retrieving Master Feeds<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">7.2.</a>&nbsp;
Creating A Master Entry<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">7.3.</a>&nbsp;
Creating A Detail Entry<br />
<a href="#anchor8">8.</a>&nbsp;
Security Considerations<br />
<a href="#iana">9.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">10.</a>&nbsp;
Normative References<br />
<a href="#anchor10">Appendix&nbsp;A.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor11">Appendix&nbsp;B.</a>&nbsp;
Revision History<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
			Many applications provide their data in the form of syndicated Web 
			feeds using formats such as Atom <a class='info' href='#RFC4287'>[RFC4287]<span> (</span><span class='info'>Nottingham, M., Ed. and R. Sayre, Ed., &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a> in order to enable 
			application integration. Applications may also manipulate the contents of 
			these data feeds using protocols such as AtomPub <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>. 
		    
</p>
<p>
			A key requirement for application data feeds is the ability to 
			dynamically create new Collections and identify relationships 
			among such feeds and Collections. This specification defines a 
			mechanism for identifying hierarchical master-detail relations 
			among data feeds so that consumer applications can perfrom 
			standard AtomPub operations on them.
		    
</p>
<p>
			A hierarchical master-detail relation of an Entry to a Feed implies 
			the detail Feed is created when the master Entry is 
			created and the Feed is removed when the Entry is removed. The Entry is called
			the "master entry" and the Feed is called "detail feed". This relationship allows a 
			client to use AtomPub <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a> to create a new Collection
			by posting an Entry to an existing Collection. 
			
</p>
<p>
			This specification proposes optional and compatible extensions to 
			Atom and AtomPub to ease the process of creating and manipulating 
			collections and feeds based on those collections.
			
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Namespace</h3>

<p> The XML Namespaces URI for the XML data format described in this specification is: 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    http://purl.org/atom/hierarchy/</pre></div>
<p> This specification uses the prefix "h:" for the namespace name.  The
       prefix "atom:" is used for "http://www.w3.org/2005/Atom", the namespace name of
       the Atom Syndication Format <a class='info' href='#RFC4287'>[RFC4287]<span> (</span><span class='info'>Nottingham, M., Ed. and R. Sayre, Ed., &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a>.
       The prefix "app:" is used for "http://www.w3.org/2007/app", the namespace name of
       the Atom Publishing Protocol <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>.
       These namespace prefixes are not semantically significant.
       
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Notational Conventions</h3>

<p>
				The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
				"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" 
				in this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
				
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
			A "detail Feed" is a "logical Feed" as defined in Feed History 
			and Paging  <a class='info' href='#RFC5005'>[RFC5005]<span> (</span><span class='info'>Nottingham, M., &ldquo;Feed Paging and Archiving,&rdquo; September&nbsp;2007.</span><span>)</span></a> that does not contain a master Entry.
		    
</p>
<p>
		    A "master Entry" is an Entry that contains a child Feed. 
			
</p>
<p>
			A "child Feed" is a "logical Feed" as defined in Feed History 
			and Paging  <a class='info' href='#RFC5005'>[RFC5005]<span> (</span><span class='info'>Nottingham, M., &ldquo;Feed Paging and Archiving,&rdquo; September&nbsp;2007.</span><span>)</span></a> that is contained in a master Entry.
		    
</p>
<p>
			  A "master Feed" is a "logical Feed" as defined in Feed History 
			  and Paging <a class='info' href='#RFC5005'>[RFC5005]<span> (</span><span class='info'>Nottingham, M., &ldquo;Feed Paging and Archiving,&rdquo; September&nbsp;2007.</span><span>)</span></a> that contains only master Entries.
		   
</p>
<p>
		    This specification also uses Atom link relations to identify
		    different types of links; see the Atom specification <a class='info' href='#RFC4287'>[RFC4287]<span> (</span><span class='info'>Nottingham, M., Ed. and R. Sayre, Ed., &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a> for
		    information about their syntax, and the IANA link relation registry
		    for more information about specific values.
		   
</p>
<p>
		    Note that URI references in link relation values MAY be relative, and
		    used in conjunction with the xml:base attribute <a class='info' href='#W3C.REC-xmlbase-20010627'>[W3C.REC&#8209;xmlbase&#8209;20010627]<span> (</span><span class='info'>Marsh, J., &ldquo;XML Base,&rdquo; June&nbsp;2001.</span><span>)</span></a>. Such
		    a relative URI (or IRI) is resolved as described in Section 5.1 of <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
		    
</p>
<a name="protocol-model"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Protocol Model</h3>

<p>
			Hierarchy extensions to Atom specify operations for creating, updating, and removing
			AtomPub Collections using existing AtomPub methods and extensions to Atom syntax.
			
</p>
<a name="feed-classification"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Feed Classification</h3>

<p>
				AtomPub <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a> defines	Feed, Entry, and Collection resources in 
				the Atom syntax <a class='info' href='#RFC4287'>[RFC4287]<span> (</span><span class='info'>Nottingham, M., Ed. and R. Sayre, Ed., &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a>. The hierarchy extensions to 
				Atom are designed for use with unmodifiable Atom Feeds as well as with 
				AtomPub Collections.
				
</p>
<p>
				The extensions in this specification define two specialized kinds of Feeds --
				master Feed and detail Feed. Both are represented as Atom Feed Documents 
				<a class='info' href='#RFC4287'>[RFC4287]<span> (</span><span class='info'>Nottingham, M., Ed. and R. Sayre, Ed., &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a>. 
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                 logical Feed
                       |
        -------------------------------
       |               |               |
  detail Feed     master Feed        Feed
       |               |               |
     Entry        master Entry    master Entry
      ...             ...             ...
     Entry        master Entry       Entry
</pre></div>
<p>
				A master Feed is a container for master Entires. Each master
				Entry contains a child Feed, which can be any logical Feed. The kind 
				child Feed's metadata identifies the kind of new Entries that it can 
				accept. The child Feed is created when the master Entry is created 
				and the child Feed is removed when the master Entry is removed. 
				A master Feed MAY itself be a child of another master Feed.
				
</p>
<p>
					A master Feed can only accept a new master Entry.
					Each of its Entry contains a "detail" atom:link for a logical Feed. 
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   atom:feed
        |
        o- atom:link@rel="next" (0..1)
        o- atom:link@rel="prev" (0..1)
        o- atom:link@rel="first" (0..1)
        o- atom:link@rel="last" (0..1)
        o- atom:link@rel="self" (1..1)
        o- atom:link@rel="master" (0..1)
        o- app:collection (1..1)
        |    |
        |    o- app:accept@h:role="master" (1..1)
        |
        o- atom:entry (0..n)
             |
             o- atom:link@rel="self" (1..1)
             o- atom:link@rel="edit" (1..1)
             o- atom:link@rel="detail" (1..1)
</pre></div>
<p>
				A detail Feed MUST be a child of a master Entry.
				
</p>
<p>
					A detail Feed can only accept a new detail Entry. It provides
					an atom:link back to its "master" Entry. None of its Entries 
					contain a "detail" atom:link. 
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   atom:feed
        |
        o- atom:link@rel="next" (0..1)
        o- atom:link@rel="prev" (0..1)
        o- atom:link@rel="first" (0..1)
        o- atom:link@rel="last" (0..1)
        o- atom:link@rel="master" (1..1)
        o- atom:link@rel="self" (1..1)
        o- app:collection (1..1)
        |    |
        |    o- app:accept@h:role="detail" (1..1)
        |
        o- atom:entry (0..n)
             |
             o- atom:link@rel="self" (1..1)
             o- atom:link@rel="edit" (1..1)
</pre></div>
<a name="protocol-operations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Protocol Operations</h3>

<p>
				AtomPub protocol governs the server behavior for operations involving
				master-detail feeds. This section illustrates how additional behavior
				results from the semantics of master-detail relations among feeds.
				
</p>
<p>
				No special importance should be attached to the status codes shown 
				in the illustrations below, and a server is entitled to using any HTTP
				status code that adequately represents the result of the requested
				operation.
				
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Creating a Collection</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  Client                                   Server
     |                                       |
     |   1.) POST to master Collection URI   |
     |--------------------------------------&gt;|
     |                                       |
     |   2.) 201 Created                     |
     |        Master Entry Document          |
     |&lt;--------------------------------------|
     |                                       |
</pre></div>
<p>
						</p>
<ol class="text">
<li>
								The client sends a POST request containing an Atom Entry 
								to the URI of the master Collection.
							
</li>
<li>
								The server responds with an Atom Entry Document containing
								the IRIs of the newly created master Entry and the child Feed.
							
</li>
</ol><p>
					
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Editing a Master Entry</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  Client                                   Server
     |                                       |
     |   1.) PUT to master Entry URI         |
     |        Master Entry Document           |
     |--------------------------------------&gt;|
     |                                       |
     |   2.) 200 OK                          |
     |        Master Entry Document          |
     |&lt;--------------------------------------|
     |                                       |
</pre></div>
<p>
						</p>
<ol class="text">
<li>
								The client sends a PUT request containing an Atom Entry 
								to the URI of the master Entry.
							
</li>
<li>
								If the request is successful, the server responds with a 
								200 status code without removing the child Feed from
								the master Entry Document.
							
</li>
</ol><p>
					
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.3"></a><h3>3.2.3.&nbsp;
Removing a Master Entry</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  Client                                   Server
     |                                       |
     |   1.) DELETE to master Entry URI      |
     |--------------------------------------&gt;|
     |                                       |
     |   2.) 204 No Content                  |
     |&lt;--------------------------------------|
     |                                       |
</pre></div>
<p>
						</p>
<ol class="text">
<li>
								The client sends a DELETE request 
								to the URI of the master Entry.
							
</li>
<li>
								If the request is successful, the server responds with a 
								204 status code and removes the master Entry and detail Feed.
								Future requests to the URI of the master Entry or the child
								Feed or any of its entries MAY produce responses with 
								410 Gone status code. 
							
</li>
</ol><p>
					
</p>
<a name="backing-collection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Backing Collection</h3>

<p>
			Often applications need to advertise that a Feed is modifiable, or in other words that
			new entries can be added to a Feed. If a syndicated feed document is backed by an
			AtomPub Collection resource, then clients may be able to augment the Feed by
			interacting with its backing Collection. 
			
</p>
<p>
		    Section 8.3.5 of <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a> specifies the semantics of an app:collection
		    element appearing as a child of atom:feed element. Along those lines, if a Feed is 
		    backed by a Collection, the server SHOULD identify the backing Collection 
		    using the app:collection element as a child of the atom:feed element. 
		    
</p>
<p>If the href attribute of this app:collection element is identical to that of the 
		    parent atom:feed element's self link relation, then the client SHOULD treat 
		    the feed to be the Collection feed.
		    
</p>
<p>Example: Writable Collection backing a Feed
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;atom:feed&gt;
  &lt;atom:link rel="self" href="http://example.org/feed"/&gt;
  &lt;app:collection href="http://example.org/collection"&gt;
    &lt;atom:title type="text"&gt;Writable Feed&lt;/atom:title&gt;
    &lt;app:accept&gt;application/atom+xml;type=entry&lt;/app:accept&gt;
  &lt;/app:collection&gt;
  ...
&lt;/atom:feed&gt;
</pre></div>
<p>
				Example: Read-only Collection backing a Feed
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;atom:feed&gt;
  &lt;atom:link rel="self" href="http://example.org/feed"/&gt;
  &lt;app:collection href="http://example.org/collection"&gt;
    &lt;atom:title type="text"&gt;Read-only Feed&lt;/atom:title&gt;
    &lt;app:accept/&gt;
  &lt;/app:collection&gt;
  ...
&lt;/atom:feed&gt;
</pre></div>
<p>
				Example: Writable Collection Feed
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;atom:feed&gt;
  &lt;atom:link rel="self" href="http://example.org/collection"/&gt;
  &lt;app:collection href="http://example.org/collection"&gt;
    &lt;atom:title type="text"&gt;Collection Feed&lt;/atom:title&gt;
  &lt;/app:collection&gt;
  ...
&lt;/atom:feed&gt;
</pre></div>
<a name="master-detail-feeds"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Master Detail Relations</h3>

<p>
			Master detail relations among entries and feeds are indicated using 
			link relations. 
			
</p>
<a name="child-feeds"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Child feeds</h3>

<p>
				Every master Entry has a child Feed and vice versa. The 
				contents of a child Feed can be supplied in the following ways:
					</p>
<ol class="text">
<li>
						Out-of-line reference: The client can retrieve the child Feed by 
						following a URL specified in the master Entry. This URL is specified 
						via an atom:link element as detailed below.
						
</li>
<li>
						Inline content with out-of-line reference: The client can use the 
						embedded content and expect the server to provide the same feed 
						document at the URL referenced in the master Entry. The server MAY 
						embed the atom:feed directly inside the atom:link element in the 
						master entry document, in which case the client MAY safely use 
						the embedded feed document as the representation of the child Feed.
						
</li>
</ol><p>
				
</p>
<a name="detail-link"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1"></a><h3>5.1.1.&nbsp;
The &quot;detail&quot; Link</h3>

<p>
					Master Entries identify the URLs of their child Feed in their own metadata. 
					A master entry MUST contain an atom:link element with link relation of 
					"detail" to indicate the child Feed URL. The type attribute of this link 
					element (if present), MUST be the Atom Feed content type, i.e., 
					application/atom+xml;type=feed.
					
</p>
<a name="count-attribute"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2"></a><h3>5.1.2.&nbsp;
The &quot;h:count&quot; Extension Attribute</h3>

<p>
					A master Entry MAY include an optional h:count attribute with a positive 
					integral value identifying an approximate count of the number of entries in 
					the detail Feed. 
					
</p>
<a name="detail-examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.3"></a><h3>5.1.3.&nbsp;
Example</h3>

<p>
						Example: Entry with out-of-line reference to child Feed
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;atom:entry&gt;
     &lt;atom:title type="text"&gt;My Portfolio&lt;/atom:title&gt;
     &lt;atom:link rel="detail" h:count="4"
       href="/finance/feeds/default/portfolios/1/positions"/&gt;
     &lt;atom:link rel="edit"
       href="/finance/feeds/default/portfolios/1"/&gt;
      ...
   &lt;/atom:entry&gt;
</pre></div>
<p>
						Example: Entry with inline child Feed 
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;atom:entry&gt;
 &lt;atom:link rel="detail"
   href="/finance/feeds/default/portfolios/1/positions"&gt;
   &lt;atom:feed&gt;
     &lt;atom:link rel="master"
       href="/finance/feeds/default/portfolios/1"/&gt;
       &lt;app:collection href="/finance/feeds/default/portfolios/1/
        positions"&gt;
          &lt;atom:title&gt;Oracle Corp&lt;/atom:title&gt;
       &lt;/app:collection&gt;
       &lt;atom:link rel="self"
       href="/finance/feeds/default/portfolios/1/positions"&gt;
		 ...
	   &lt;/atom:feed&gt;
 &lt;/atom:link&gt;
 &lt;atom:link rel="edit"
   href="/finance/feeds/default/portfolios/1"/&gt;
	  ...
&lt;/atom:entry&gt;
</pre></div>
<a name="master-entries"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Master entries</h3>

<p>
					The contents of a master Entry can be supplied in the following ways:
					</p>
<ol class="text">
<li>
						Out-of-line reference: The client can retrieve the master Entry by 
						following a URL specified in the child Feed. This URL is specified 
						via an atom:link element as detailed below.
						
</li>
<li>
						Inline content with out-of-line reference: The client can use the 
						embedded content and expect the server to provide the same entry 
						document at the URL referenced in the child Feed. The server MAY 
						embed the atom:entry directly inside the atom:link element in the 
						child feed document, in which case the client MAY safely use 
						the embedded entry document as the representation of the master Entry.
						
</li>
</ol><p>			
				
</p>
<a name="master-link"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
The &quot;master&quot; Link</h3>

<p>
					Child Feeds identify the URLs of their master Entry in their own metadata. 
					A detail Feed MUST contain an atom:link element with link relation of 
					"master" to indicate the master Entry URL. The type attribute of this link 
					element (if present), MUST be the Atom Entry content type, i.e., 
					application/atom+xml;type=entry.
					
</p>
<a name="master-examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
Example</h3>

<p>
						Example: Feed with out-of-line reference to master Entry
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;atom:feed&gt;
     &lt;atom:title type="text"&gt;Positions&lt;/atom:title&gt;
     &lt;atom:link rel="master"
       href="/finance/feeds/default/portfolios/1"/&gt;
     &lt;atom:link rel="self"
       href="/finance/feeds/default/portfolios/1/positions"/&gt;
      ...
   &lt;/atom:feed&gt;
</pre></div>
<p>
						Example: Feed with inline master Entry
						
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;atom:feed&gt;
  &lt;atom:title type="text"&gt;Positions&lt;/atom:title&gt;
  &lt;atom:link rel="master"
    href="/finance/feeds/default/portfolios/1"/&gt;
     &lt;atom:entry&gt;
     &lt;atom:link rel="detail"
       href="/finance/feeds/default/portfolios/1/positions"/&gt;
       &lt;atom:link rel="edit"
       href="/finance/feeds/default/portfolios/1"&gt;
		 ...
	   &lt;/atom:entry&gt;
 &lt;/atom:link&gt;
 &lt;atom:link rel="self"
   href="/finance/feeds/default/portfolios/1/positions"/&gt;
	  ...
&lt;/atom:feed&gt;
</pre></div>
<a name="h-role"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
The 'h:role' Extension Attribute</h3>

<p>
			This specification defines additional metadata for AtomPub Service documents and 
		    collection-backed Feed documents for the purpose of identifying master and detail feeds.
			
</p>
<p>
		    The "h:role" attribute MAY be added to the app:accept element of an 
		    app:collection declaration. When present, the value MUST be one of 
		    "master" or "detail".  If the "h:role" attribute is present then the 
		    content type of the accept element MUST be "application/atom+xml;type=entry". 
		    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
hierarchyType =
  attribute h:role { "master" | "detail" }
</pre></div>
<a name="type-master"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
The 'master' role</h3>

<p>
				If the "h:role" value is "master" then POSTing an Atom entry 
				document to that collection MUST cause the server to do both of the
				following: 
				</p>
<ul class="text">
<li>
						create a new Atom Entry resource whose location is provided as 
						defined in Section 9.2.1 of <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>
						
</li>
<li>
						create a new AtomPub Collection resource whose location is 
						provided in the master entry document 
						
</li>
</ul><p>
				
</p>
<p>
					Example: Hierarchy metadata for collections
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;app:collection href="http://example.org/collection"&gt;
  &lt;title type="text"&gt;Master Feed&lt;/title&gt;
  &lt;app:accept
	  h:role="master"&gt;application/atom+xml;type=entry
 &lt;/app:accept&gt;
&lt;/app:collection&gt;
</pre></div>
<p>
					A POST to that collection would be as per <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>:
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
POST /collection HTTP/1.1
Host: example.org
Content-Type: application/atom+xml;type=entry
Content-Length: nnn

&lt;?xml version="1.0"?&gt;
&lt;entry xmlns="http://www.w3.org/2005/Atom"&gt;
 &lt;title&gt;A master entry&lt;/title&gt;
 &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aaaa-8003ffefa6a&lt;/id&gt;
 &lt;updated&gt;2003-12-13T18:30:02Z&lt;/updated&gt;
 &lt;author&gt;&lt;name&gt;John Doe&lt;/name&gt;&lt;/author&gt;
 &lt;content&gt;Some text.&lt;/content&gt;
&lt;/entry&gt;
</pre></div>
<p>
					The server produces the following response:
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
201 Created
Location:  http://example.org/collection/master1

&lt;?xml version="1.0"?&gt;
&lt;entry xmlns="http://www.w3.org/2005/Atom"
  xmlns:h="http://purl.org/atom/hierarchy/"&gt;
 &lt;title&gt;A master entry&lt;/title&gt;
 &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aaaa-8003ffefa6a&lt;/id&gt;
 &lt;updated&gt;2003-12-13T18:30:02Z&lt;/updated&gt;
 &lt;author&gt;&lt;name&gt;John Doe&lt;/name&gt;&lt;/author&gt;
 &lt;content&gt;Some text.&lt;/content&gt;
 &lt;link rel="self" href="/collection/master1"/&gt;
 &lt;link rel="edit" href="/collection/master1"/&gt;
 &lt;link rel="detail" h:count="0"
    href="/collection/master1/collection"&gt;
    &lt;feed xmlns:app="http://www.w3.org/2007/app"&gt;
       &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-a33a-8003ffefa6a&lt;/id&gt;
       &lt;app:collection href="/collection/master1/collection"&gt;
          &lt;app:accept h:role="detail"&gt;
            application/atom+xml;type=entry
          &lt;/app:accept&gt;
       &lt;/app:collection&gt;
       &lt;link rel="self" href=""/collection/master1/collection"/&gt;
    &lt;/feed&gt;
 &lt;/link&gt;
&lt;/entry&gt;
</pre></div>
<a name="type-detail"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
The 'detail' role</h3>

<p>
				If the "h:role" value is "detail" then the server behaves as specified
				in Section 9.2.1 of <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a> when a client POSTs an Atom entry 
				document to the Collection.
				
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Working With Master-Detail Feeds</h3>

<a name="fetch-master"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Retrieving Master Feeds</h3>

<p>
					Below is a feed for a finance portfolio tracker application. 
					Each user has a Collection of portfolios.
					Each portfolio is a Collection of positions.
					
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;feed xmlns='http://www.w3.org/2005/Atom'
 xmlns:app='http://www.w3.org/2007/app'
 xmlns:h='http://purl.org/atom/hierarchy#'
 xmlns:f='http://example.com/finance'
 xml:base='http://example.com'&gt;
 &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344cba6a&lt;/id&gt;
 &lt;updated&gt;2008-10-01T13:05:30.000Z&lt;/updated&gt;
 &lt;title type='text'&gt;Portfolio Feed&lt;/title&gt;
 &lt;link rel='service'
  href='/finance/feeds/default/service'/&gt;
 &lt;app:collection href='/finance/feeds/default/portfolios'&gt;
  &lt;title type='text'&gt;Portfolio Feed&lt;/title&gt;
  &lt;app:accept h:role='container'&gt;application/atom+xml&lt;/app:accept&gt;
 &lt;/app:collection&gt;
 &lt;entry&gt;
  &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aada-80da344efa6a&lt;/id&gt;
  &lt;updated&gt;2008-06-10T01:29:49.000Z&lt;/updated&gt;
  &lt;title type='text'&gt;My Portfolio&lt;/title&gt;
  &lt;link rel='detail'
    type='application/atom+xml;type=feed' title='positions'
    href='/finance/feeds/default/portfolios/1/positions'/&gt;
  &lt;link rel='edit'
    href='/finance/feeds/default/portfolios/1'/&gt;
  &lt;summary&gt;Default portfolio&lt;/summary&gt;
  &lt;f:portfolioData currencyCode='USD' gainPercentage='0.0'
    return1w='0.0' return1y='0.0' return3m='0.0' return3y='0.0'
    return4w='0.0' return5y='0.0' returnOverall='0.0' returnYTD='0.0'/&gt;
 &lt;/entry&gt;
&lt;/feed&gt;
</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Creating A Master Entry</h3>

<p>
				If a user wishes to add a new portfolio, they can do so by making an AtomPub 
				POST request to the portofolio Collection identified above in the 
				app:collection element of the master portfolio feed:
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
POST /finance/feeds/default/portfolios HTTP/1.1
Host: example.com
Content-Type: application/atom+xml; type=entry
Content-Length: nnn

&lt;entry xmlns='http://www.w3.org/2005/Atom'
 xmlns:f='http://example.com/finance'&gt;
 &lt;id/&gt;
 &lt;updated&gt;2008-06-10T23:38:01.000Z&lt;/updated&gt;
 &lt;title type='text'&gt;Hanky Panky&lt;/title&gt;
 &lt;f:portfolioData currency='USD'/&gt;
&lt;/entry&gt;
</pre></div>
<p>
				The server generates the following response after creating the master entry
				and the detail feed.
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
201 Created
Location: /finance/feeds/default/portfolios/2
Content-Type: application/atom+xml; type=entry
Content-Length: nnn

&lt;entry xmlns='http://www.w3.org/2005/Atom'
 xmlns:f='http://example.com/finance'
 xml:base='http://example.com'&gt;
 &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aada-80da344efa6a&lt;/id&gt;
 &lt;updated&gt;2008-06-10T23:38:01.000Z&lt;/updated&gt;
 &lt;title type='text'&gt;Hanky Panky&lt;/title&gt;
 &lt;link rel='detail'
  type='application/atom+xml;type=feed' title='positions'
  href='/finance/feeds/default/portfolios/2/positions'/&gt;
 &lt;link rel='detail'
  type='text/html'
  href='http://finance.example.com/portfolio/2'/&gt;
 &lt;link rel='edit'
  href='/finance/feeds/default/portfolios/2'/&gt;
 &lt;summary&gt;Default portfolio&lt;/summary&gt;
 &lt;f:portfolioData currencyCode='USD' gainPercentage='0.0'
  return1w='0.0' return1y='0.0' return3m='0.0' return3y='0.0'
  return4w='0.0' return5y='0.0' returnOverall='0.0' returnYTD='0.0'/&gt;
&lt;/entry&gt;</pre></div>
<p>
			This entry identifies a newly created Holdings Collection in 
			the link with the "detail" relation.
		    
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Creating A Detail Entry</h3>

<p>
				If a user wishes to add a new position, they can do so by making an AtomPub 
				POST request to the portfolio's Collection identified above in the 
				app:collection element of the detail positions feed:
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
POST /finance/feeds/default/portfolios1/positions HTTP/1.1
Host: example.com
Content-Type: application/atom+xml; type=entry
Content-Length: nnn

&lt;entry xmlns='http://www.w3.org/2005/Atom'&gt;
  &lt;symbol xmlns='http://api.example.com/finance'
	exchange='NASDAQ' fullName='Siebel Systems' symbol='SEBL'/&gt;
&lt;/entry&gt;
</pre></div>
<p>
				The server generates the following response after creating the detail entry.
				
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
201 Created
Location: /finance/feeds/default/portfolios/1/positions/NASD:SEBL
Content-Type: application/atom+xml; type=entry
Content-Length: nnn

&lt;entry xmlns='http://www.w3.org/2005/Atom'
  xmlns:f='http://api.example.com/finance'&gt;
  &lt;id&gt;urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa9b&lt;/id&gt;
  &lt;updated&gt;2008-10-01T23:28:01.000Z&lt;/updated&gt;
  &lt;category scheme='http://api.example.com/cat/2008#kind'
    term='http://api.example.com/finance/2008#position'/&gt;
  &lt;title type='text'&gt;Siebel Systems&lt;/title&gt;
  &lt;link rel='edit'
    href='/finance/feeds/default/portfolios/1/positions/NASD:SEBL'/&gt;
  &lt;f:portfolioData currencyCode='USD' gainPercentage='0.0'
    return1w='0.0' return1y='0.0' return3m='0.0' return3y='0.0'
    return4w='0.0' return5y='0.0' returnOverall='0.0' returnYTD='0.0'/&gt;
  &lt;f:symbol exchange='NASDAQ' fullName='Google Inc'
    symbol='SEBL'/&gt;
&lt;/entry&gt;</pre></div>
<p>
			This entry identifies a newly created SEBL position.
		    
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
			Atom Publishing Protocol Hierarchy Extensions is subject to the 
			security considerations found in Section 8 of <a class='info' href='#RFC4287'>[RFC4287]<span> (</span><span class='info'>Nottingham, M., Ed. and R. Sayre, Ed., &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a> and Section 15 of <a class='info' href='#RFC5023'>[RFC5023]<span> (</span><span class='info'>Gregorio, J. and B. de hOra, &ldquo;The Atom Publishing Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>.
			
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>
		    This specification defines the following new relations that have been
		    added to the Link Relations registry:
				</p>
<ul class="text">
<li>Attribute Value: detail
</li>
<li>Description: A URI that refers to the child feed for a master entry.
</li>
<li>Expected display characteristics: none
</li>
<li>Security considerations: See this draft
</li>
</ul><p>
				</p>
<ul class="text">
<li>Attribute Value: master
</li>
<li>Description: A URI that refers to the master entry for a child feed.
</li>
<li>Expected display characteristics: none
</li>
<li>Security considerations: See this draft
</li>
</ul><p>
			
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4287">[RFC4287]</a></td>
<td class="author-text"><a href="mailto:mnot@pobox.com">Nottingham, M., Ed.</a> and <a href="mailto:rfsayre@boswijck.com">R. Sayre, Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4287">The Atom Syndication Format</a>,&rdquo; RFC&nbsp;4287, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4287.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc4287.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc4287.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5005">[RFC5005]</a></td>
<td class="author-text">Nottingham, M., &ldquo;<a href="http://tools.ietf.org/html/rfc5005">Feed Paging and Archiving</a>,&rdquo; RFC&nbsp;5005, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5005.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5023">[RFC5023]</a></td>
<td class="author-text">Gregorio, J. and B. de hOra, &ldquo;<a href="http://tools.ietf.org/html/rfc5023">The Atom Publishing Protocol</a>,&rdquo; RFC&nbsp;5023, October&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5023.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xmlbase-20010627">[W3C.REC-xmlbase-20010627]</a></td>
<td class="author-text">Marsh, J., &ldquo;<a href="http://www.w3.org/TR/2001/REC-xmlbase-20010627">XML Base</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-xmlbase-20010627, June&nbsp;2001 (<a href="http://www.w3.org/TR/2001/REC-xmlbase-20010627">HTML</a>).</td></tr>
</table>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Acknowledgements</h3>

<p>
			Bill de hra and Ashish Motivala reviewed early drafts of this I-D and helped
			strengthen the text and make it easier to read.
			
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Revision History</h3>

<p>
			00 - Initial Revision.
            
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Colm Divilly</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Oracle Corp.</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:colm.divilly@oracle.com">colm.divilly@oracle.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://cdivilly.wordpress.com">http://cdivilly.wordpress.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nikunj Mehta</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Oracle Corp.</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:nikunj.mehta@oracle.com">nikunj.mehta@oracle.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://o-micron.blogspot.com/">http://o-micron.blogspot.com/</a></td></tr>
</table>
</body></html>
