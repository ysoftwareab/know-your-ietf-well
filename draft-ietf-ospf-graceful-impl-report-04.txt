
Network Working Group                     Acee Lindem (Redback Networks)
Internet Draft                   
Expiration Date: September 2004           Proposed Status: Informational
File name: draft-ietf-ospf-graceful-impl-report-04.txt          Apr 2004

               Graceful OSPF Restart Implementation Report
               draft-ietf-ospf-graceful-impl-report-04.txt


Status of this Memo

    This document is an Internet-Draft and is in full conformance with
    all provisions of Section 10 of RFC2026.

    Internet-Drafts are working documents of the Internet Engineering
    Task Force (IETF), its areas, and its working groups.  Note that
    other groups may also distribute working documents as Internet-
    Drafts.

    Internet-Drafts are draft documents valid for a maximum of six
    months and may be updated, replaced, or obsoleted by other documents
    at any time.  It is inappropriate to use Internet- Drafts as
    reference material or to cite them other than as "work in progress."

    The list of current Internet-Drafts can be accessed at
    http://www.ietf.org/ietf/1id-abstracts.txt

    The list of Internet-Draft Shadow Directories can be accessed at
    http://www.ietf.org/shadow.html.

Abstract

    Graceful OSPF Restart as specified in RFC 3623 provides a mechanism 
    whereby an OSPF router can stay on the forwarding path even as its 
    OSPF software is restarted. This document provides an 
    implementation report for this extension to the base OSPF protocol.

Table of Contents

    1        Overview ............................................... 2
    2        Implementation Experience .............................. 3
    2.1      Implementation Differences ............................. 3
    3        MIB Reference .......................................... 4
    4        Authentication Mechanisms .............................. 4
    5        List of Implementations ................................ 4
    6        Test Scenarios ......................................... 4
    7        Operational Experience ................................. 4
    8        Security Considerations ................................ 5
    9        Intellectual Property .................................. 5
    10       Normative References ................................... 5
    11       Informative References ................................. 6
    12       Acknowledgments ........................................ 6
    13       Author's Address ....................................... 6


Lindem                                                          [Page 1]

Internet Draft  Graceful OSPF Restart Implementation Report     Apr 2004


1.  Overview

    Today many Internet routers implement a separation of control and
    forwarding functions. Certain processors are dedicated to control
    and management tasks such as OSPF routing, while other processors
    perform the data forwarding tasks. This separation creates the
    possibility of maintaining a router's data forwarding capability
    while the router's control software is restarted/reloaded. For the
    OSPF protocol [1], this protocol mechanisms necessary to accomplish
    this are described in Graceful OSPF Restart [GRACE]. 

    This document satisfies the RFC 1264 [CRITERIA] requirement for a 
    report on implementation experience for Graceful OSPF Restart. 
    Section 2 of this document contains the results of an 
    implementation survey.  It also documents implementation differences
    between the vendors responding to the survey. Section 3 contains a
    MIB reference. Sections 4 provide an authentication reference. 
    Section 5 simply refers to the implementations listed in section 2. 
    Section 6 includes a minimal set of test scenarios. Finally, 
    section 7 includes a disclaimer with respect to operational 
    experience.


Lindem                                                          [Page 2]

Internet Draft    Graceful OSPF Restart Implementation Report   Apr 2004


2.  Implementation Experience 

    Ten vendors have implemented graceful OSPF and have completed the 
    implementation survey. These include Redback, Juniper, Motorola 
    Computer Group (formerly Netplane Systems), Mahi Networks, 
    Nexthop technologies, Force10 Networks, Procket, Alcatel, Laurel
    Networks, and DCL (Data Connection Limited). All have implemented 
    restart from the perspective of both a restarting and helper router.
    All but one vendor implemented both planned and unplanned restart. 
    All implementations are original. Six successfully tested 
    interoperability with Juniper. Juniper successfully tested 
    interoperability with Force10 Networks. One vendor tested with John
    Moy's GNU Public License implementation [OSPFD]. Two vendors 
    hadn't tested interoperability at the time of the survey.

2.1  Implementation Differences 

    The first difference was whether or not strict LSA checking was 
    implemented and, if so, whether it was configurable. In the context
    of graceful OSPF restart, strict LSA checking indicates whether or
    not a changed LSA will result in termination of graceful restart
    by a helping router. Four vendors made it configurable (three  
    defaulted it to enabled and one disabled), another made it 
    a compile option (shipping with strict LSA checking disabled), 
    another didn't implement it at all, and four implemented strict 
    LSA checking with no configuration option to disable it. 

    The second was whether a received grace LSA would be taken to apply
    only to the adjacency on which it was received or all adjacencies
    with the restarting router. This is a rather subtle difference 
    since it only applies to helping and restarting routers with more 
    than one full adjacency at the time or restart. Seven vendors 
    implemented the option of received grace LSA only applying to the 
    adjacency on which it was received.  Three vendors applied the grace
    LSA to all adjacencies with the grace LSA originator (i.e., the
    restarting router). 

    The final difference was in whether or not additional extensions
    were implemented to accommodate other features such as protocol 
    redistribution or interaction with MPLS VPNs [VPN]. Five vendors
    implemented extensions and five did not. It should be noted that
    such extensions are beyond the scope of Graceful OSPF 
    Restart [GRACE].



Lindem                                                          [Page 3]

Internet Draft    Graceful OSPF Restart Implementation Report   Apr 2004



3. MIB Reference

   MIB objects for the Graceful OSPF Restart have been added to the 
   OSPF Version 2 Management Information Base [OSPFMIB]. Additions 
   include:

     - Objects ospfRestartSupport, ospfRestartInterval, ospfRestartAge,
       ospfRestartExitReason, and ospfRestartStrictLsaChecking to 
       ospfGeneralGroup.
 
     - Objects ospfNbrRestartHelperStatus, ospfNbrRestartHelperAge, 
       and ospfNbrRestartHelperExitReason to ospfNbrEntry. 

     - Objects ospfVirtNbrRestartHelperStatus, 
       ospfVirtNbrRestartHelperAge, and 
       ospfVirtNbrRestartHelperExitReason to ospfVirtNbrEntry. 
 
4. Authentication Mechanisms 

   The authentication mechanisms are the same as those implemented
   by the base OSPF protocol [OSPF].

5. List of Implementations

   Refer to section 2. 

6. Test Scenarios 

   A router implementing graceful restart should test, at a minimum,
   the following scenarios as both a restarting and helping 
   router. For all scenarios, monitoring data plane traffic may be 
   used to assure the restart is non-disruptive: 

    1. Operation over a broadcast network. 
    2. Operation over a P2P network. 
    3. Operation over a virtual link.
    4. Operation using OSPF MD5 authentication. 
    5. Early graceful restart termination when an LSA consistency
       is detected. 
    6. Early graceful restart termination when a flooded LSA 
       changes (if implemented).

7. Operational Experience   

   Since the feature is configurable it is difficult to evaluate 
   operational experience at this juncture. However, service providers
   have tested and evaluated the feature. 



Lindem                                                          [Page 4]

Internet Draft    Graceful OSPF Restart Implementation Report   Apr 2004

8. Security Considerations

   This document does not address any security issues other a reference
   to the RFC 2328 [OSPF]. Security considerations for the OSPF protocol
   are included in RFC2328 [OSPF]. Security considerations for Graceful
   OSPF Restart are included in [GRACE]. 

9. Intellectual Property


   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.



10. Normative References

    [OSPF]      Moy, J., "OSPF Version 2", RFC 2328, April 1998.

    [GRACE]     Moy, J., Pillay-Esnault, P., Lindem, A.,  
                "Graceful OSPF Restart", RFC 3623, July 2003.

    [OSPFMIB]   Joyal, D., et al, "OSPF Version 2 Management Information
                Base", draft-ietf-ospf-mib-update-08.txt, December 2003,
                work in progress.

    [CRITERIA]  Hinden, R., "Routing Protocol Criteria", RFC 1264, 
                October 1991.


Lindem                                                          [Page 5]

Internet Draft    Graceful OSPF Restart Implementation Report   Apr 2004


11. Informative References

    [VPN]       Rosen, E., Rekhter, Y. "BGP/MPLS IP VPNs", 
                draft-ietf-l3vpn-rfc2547bis-01.txt,
                September 2003, work in progress.
    [OSPFD]     Moy, J., "OSPF Complete Implementation", 
                Addison-Wesley, 1991, ISBN 0-201-30966-1

12. Acknowledgments 

    The author wishes to acknowledge the individuals/vendors who have 
    completed the implementation survey.

        - Anand Oswal (Redback Networks)
        - Padma Pillay-Esnault (Juniper Networks)
        - Vishwas Manral (Motorola Computer Group, formerly Netplane
          System).
        - Sriganesh Kini (Mahi Networks)
        - Jason Chen (Force10 Networks)
        - Daniel Gryniewicz (NextHop Technologies)
        - Hasmit Grover (Procket Networks)
        - Pramoda Nallur (Alcatel)
        - Ardas Cilingiroglu (Laurel Networks)
        - Philip Crocker (Data Connection Limited)

13. Author's Address

    Acee Lindem
    Redback Networks
    102 Carric Bend Court
    Cary, NC 27519
    Email: acee@redback.com


Lindem                                                          [Page 6]

