



PCP Working Group                                           M. Boucadair
Internet-Draft                                            France Telecom
Intended status: Standards Track                                R. Penno
Expires: October 16, 2014                                        D. Wing
                                                                   Cisco
                                                          April 14, 2014


            DHCP Options for the Port Control Protocol (PCP)
                         draft-ietf-pcp-dhcp-13

Abstract

   This document specifies DHCP (IPv4 and IPv6) options to configure
   hosts with Port Control Protocol (PCP) server IP addresses.  The use
   of DHCPv4 or DHCPv6 depends on the PCP deployment scenarios.  The set
   of deployment scenarios to which use of DHCPv4 or DHCPv6 apply are
   outside the scope of this document.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 16, 2014.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Boucadair, et al.       Expires October 16, 2014                [Page 1]

Internet-Draft              PCP DHCP Options                  April 2014


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  DHCPv6 PCP Server Option  . . . . . . . . . . . . . . . . . .   3
     3.1.  Format  . . . . . . . . . . . . . . . . . . . . . . . . .   3
     3.2.  DHCPv6 Client Behavior  . . . . . . . . . . . . . . . . .   4
   4.  DHCPv4 PCP Option . . . . . . . . . . . . . . . . . . . . . .   5
     4.1.  Format  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     4.2.  DHCPv4 Client Behavior  . . . . . . . . . . . . . . . . .   6
   5.  DHCP Server Configuration Guidelines  . . . . . . . . . . . .   6
   6.  Dual-Stack Hosts  . . . . . . . . . . . . . . . . . . . . . .   8
   7.  Hosts with Multiple Interfaces  . . . . . . . . . . . . . . .   8
   8.  Security Considerations . . . . . . . . . . . . . . . . . . .   8
   9.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   8
     9.1.  DHCPv6 Option . . . . . . . . . . . . . . . . . . . . . .   8
     9.2.  DHCPv4 Option . . . . . . . . . . . . . . . . . . . . . .   8
   10. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   9
   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .   9
     11.1.  Normative References . . . . . . . . . . . . . . . . . .   9
     11.2.  Informative References . . . . . . . . . . . . . . . . .  10
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  10

1.  Introduction

   This document defines DHCPv4 [RFC2131] and DHCPv6 [RFC3315] options
   that can be used to configure hosts with PCP server [RFC6887] IP
   addresses.

   This specification assumes a PCP server is reachable with one or
   multiple IP addresses.  As such, a list of IP addresses can be
   returned in the DHCP PCP server option.

   This specification allows returning one or multiple lists of PCP
   server IP addresses.  This is used as a hint to guide the PCP client
   when determining whether to send PCP requests to one or multiple PCP
   servers.  Concretely, the PCP client needs an indication to decide
   whether entries need to be instantiated in all PCP servers (e.g.,



Boucadair, et al.       Expires October 16, 2014                [Page 2]

Internet-Draft              PCP DHCP Options                  April 2014


   multi-homing, multiple PCP-controlled devices providing distinct
   services , etc.) or using one IP address from the list (e.g.,
   redundancy group scenario, proxy-based model, etc.).  Refer to
   [I-D.boucadair-pcp-deployment-cases] for a discussion on PCP
   deployment scenarios.

   For guidelines on how a PCP client can use multiple IP addresses and
   multiple PCP servers, see [I-D.ietf-pcp-server-selection].

2.  Terminology

   This document makes use of the following terms:

   o  PCP server denotes a functional element that receives and
      processes PCP requests from a PCP client.  A PCP server can be co-
      located with or be separated from the function (e.g., NAT,
      Firewall) it controls.  Refer to [RFC6887].
   o  PCP client denotes a PCP software instance responsible for issuing
      PCP requests to a PCP server.  Refer to [RFC6887].
   o  DHCP refers to both DHCPv4 [RFC2131] and DHCPv6 [RFC3315].
   o  DHCP client denotes a node that initiates requests to obtain
      configuration parameters from one or more DHCP servers.
   o  DHCP server refers to a node that responds to requests from DHCP
      clients.

3.  DHCPv6 PCP Server Option

3.1.  Format

   The DHCPv6 PCP server option can be used to configure a list of IPv6
   addresses of a PCP server.

   The format of this option is shown in Figure 1.


















Boucadair, et al.       Expires October 16, 2014                [Page 3]

Internet-Draft              PCP DHCP Options                  April 2014


       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     OPTION_V6_PCP_SERVER      |         Option-length         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                         ipv6-address                          |
      |                                                               |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                         ipv6-address                          |
      |                                                               |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                    Figure 1: DHCPv6 PCP server option

   The fields of the option shown in Figure 1 are as follows:

   o  Option-code: OPTION_V6_PCP_SERVER (TBA, see Section 9.1)
   o  Option-length: Length of the 'PCP server IP Address(es)' field in
      octets.  MUST be a multiple of 16.
   o  PCP server IPv6 Addresses: Includes one or more IPv6 addresses
      [RFC4291] of the PCP server to be used by the PCP client.  Note,
      IPv4-mapped IPv6 addresses (Section 2.5.5.2 of [RFC4291]) are
      allowed to be included in this option.

   To return more than one PCP server to the DHCPv6 client (as opposed
   to more than one address for a single PCP server), the DHCPv6 server
   returns multiple instances of OPTION_V6_PCP_SERVER.

3.2.  DHCPv6 Client Behavior

   To discover one or more PCP servers, the DHCPv6 client requests PCP
   server IP addresses by including OPTION_V6_PCP_SERVER in an Option
   Request Option (ORO), as described in Section 22.7 of [RFC3315].

   The DHCPv6 client MUST be prepared to receive multiple instances of
   OPTION_V6_PCP_SERVER; each instance is to be treated as a separate
   PCP server.

   If an IPv4-mapped IPv6 address is received in OPTION_V6_PCP_SERVER,
   it indicates that the PCP server has the corresponding IPv4 address.





Boucadair, et al.       Expires October 16, 2014                [Page 4]

Internet-Draft              PCP DHCP Options                  April 2014


      Note: When presented with the IPv4-mapped prefix, current versions
      of Windows and Mac OS generate IPv4 packets, but will not send
      IPv6 packets [RFC6052].  Representing IPv4 addresses as
      IPv4-mapped IPv6 addresses follows the same logic as in section 5
      of [RFC6887].

   The DHCPv6 client MUST silently discard multicast and host loopback
   addresses [RFC6890] conveyed in OPTION_V6_PCP_SERVER.

4.  DHCPv4 PCP Option

4.1.  Format

   The DHCPv4 PCP server option can be used to configure a list of IPv4
   addresses of a PCP server.  The format of this option is illustrated
   in Figure 2.

       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  Code         |     Length    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | List-Length   |   List of     |
      +-+-+-+-+-+-+-+-+  PCP server   |
      /              IPv4 Addresses   /
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   ---
      | List-Length   |   List of     |    |
      +-+-+-+-+-+-+-+-+  PCP server   |    |
      /              IPv4 Addresses   /    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    |
      .             ...               . optional
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    |
      | List-Length   |   List of     |    |
      +-+-+-+-+-+-+-+-+  PCP server   |    |
      /              IPv4 Addresses   /    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   ---


                    Figure 2: DHCPv4 PCP server option

   The description of the fields is as follows:

   o  Code: OPTION_V4_PCP_SERVER (TBA, see Section 9.2);
   o  Length: Length of all included data in octets.  The minimum length
      is 5.
   o  List-Length: Length of the "List of PCP server IPv4 Addresses"
      field in octets; MUST be a multiple of 4.





Boucadair, et al.       Expires October 16, 2014                [Page 5]

Internet-Draft              PCP DHCP Options                  April 2014


   o  List of PCP server IPv4 Addresses: Contains one or more IPv4
      addresses of the PCP server to be used by the PCP client.  The
      format of this field is shown in Figure 3.
   o  OPTION_V4_PCP_SERVER can include multiple lists of PCP server IPv4
      addresses; each list is treated as a separate PCP server.  When
      several lists of PCP server IPv4 addresses are to be included,
      "List-Length" and "PCP server IPv4 Addresses" fields are repeated.

      0     8     16    24    32    40    48
      +-----+-----+-----+-----+-----+-----+--
      |  a1 |  a2 |  a3 |  a4 |  a1 |  a2 | ...
      +-----+-----+-----+-----+-----+-----+--
           IPv4 Address 1          IPv4 Address 2 ...

   This format assumes that an IPv4 address is encoded as a1.a2.a3.a4.

         Figure 3: Format of the List of PCP server IPv4 Addresses

   OPTION_V4_PCP_SERVER is a concatenation-requiring option.  As such,
   the mechanism specified in [RFC3396] MUST be used if
   OPTION_V4_PCP_SERVER exceeds the maximum DHCPv4 option size of 255
   octets.

4.2.  DHCPv4 Client Behavior

   To discover one or more PCP servers, the DHCPv4 client requests PCP
   server IP addresses by including OPTION_V4_PCP_SERVER in a Parameter
   Request List Option [RFC2132].

   The DHCPv4 client MUST be prepared to receive multiple lists of PCP
   server IPv4 addresses in the same DHCPv4 PCP server option; each list
   is to be treated as a separate PCP server.

   The DHCPv4 client MUST silently discard multicast and host loopback
   addresses [RFC6890] conveyed in OPTION_V4_PCP_SERVER.

5.  DHCP Server Configuration Guidelines

   DHCP servers supporting the DHCP PCP server option can be configured
   with a list of IP addresses of the PCP server(s).  If multiple IP
   addresses are configured, the DHCP server MUST be explicitly
   configured whether all or some of these addresses refer to:

   1.  the same PCP server: the DHCP server returns multiple addresses
       in the same instance of the DHCP PCP server option.

   2.  distinct PCP servers: the DHCP server returns multiple lists of
       PCP server IP addresses to the requesting DHCP client (encoded as



Boucadair, et al.       Expires October 16, 2014                [Page 6]

Internet-Draft              PCP DHCP Options                  April 2014


       multiple OPTION_V6_PCP_SERVER or in the same
       OPTION_V4_PCP_SERVER); each list is referring to a distinct PCP
       server.  For example, multiple PCP servers may be configured to a
       PCP client in some deployment contexts such as multi-homing.  It
       is out of scope of this document to enumerate all deployment
       scenarios that require multiple PCP servers to be returned.

   Precisely how DHCP servers are configured to separate lists of IP
   addresses according to which PCP server they address is out of scope
   for this document.  However, DHCP servers MUST NOT combine the IP
   addresses of multiple PCP servers and return them to the DHCP client
   as if they belong to a single PCP server, and DHCP servers MUST NOT
   separate the addresses of a single PCP server and return them as if
   they belonged to distinct PCP servers.  For example, if an
   administrator configures the DHCP server by providing a Fully
   Qualified Domain Name (FQDN) for a PCP server, even if that FQDN
   resolves to multiple addresses, the DHCP server MUST deliver them
   within a single server address block.

   DHCPv6 servers that implement this option and that can populate the
   option by resolving FQDNs will need a mechanism for indicating
   whether to query for A records or only AAAA records.  When a query
   returns A records, the IP addresses in those records are returned in
   the DHCPv6 response as IPv4-mapped IPv6 addresses.

      Discussion: The motivation for this design is to accommodate
      deployment cases where an IPv4 connectivity service is provided
      while only DHCPv6 is in use (e.g., an IPv4-only PCP server in a
      DS-Lite context [RFC6333]).

   Since this option requires support for IPv4-mapped IPv6 addresses, a
   DHCPv6 server implementation will not be complete if it does not
   query for A records and represent any that are returned as
   IPv4-mapped IPv6 addresses in DHCPv6 responses.  This behavior is
   neither required nor suggested for DHCPv6 options in general: it is
   specific to OPTION_V6_PCP_SERVER.  The mechanism whereby DHCPv6
   implementations provide this functionality is beyond the scope of
   this document.

   For guidelines on providing context-specific configuration
   information (e.g., returning a regional-based configuration), and
   information on how a DHCP server might be configured with FQDNs that
   get resolved on demand, see [I-D.ietf-dhc-topo-conf].








Boucadair, et al.       Expires October 16, 2014                [Page 7]

Internet-Draft              PCP DHCP Options                  April 2014


6.  Dual-Stack Hosts

   A Dual-Stack host might receive PCP server option via both DHCPv4 and
   DHCPv6.  For guidance on how a DHCP client can handle PCP server IP
   lists for the same network but obtained via different mechanisms, see
   [I-D.ietf-pcp-server-selection].

7.  Hosts with Multiple Interfaces

   A host may have multiple network interfaces (e.g, 3G, IEEE 802.11,
   etc.); each configured differently.  Each PCP server learned MUST be
   associated with the interface via which it was learned.

   Refer to [I-D.ietf-pcp-server-selection] and Section 8.4 of [RFC6887]
   for more discussion on multi-interface considerations.

8.  Security Considerations

   The security considerations in [RFC2131] and [RFC3315] are to be
   considered.  PCP-related security considerations are discussed in
   [RFC6887].

   The PCP Server option targets mainly the simple threat model
   (Section 18.1 of [RFC6887]).  It is out of scope of this document to
   discuss potential implications of the use of this option in the
   advanced threat model (Section 18.2 of [RFC6887]).

9.  IANA Considerations

9.1.  DHCPv6 Option

   IANA is requested to assign the following new DHCPv6 Option Code in
   the registry maintained in http://www.iana.org/assignments/
   dhcpv6-parameters:

                                 Option Name Value
                        -------------------- -----
                        OPTION_V6_PCP_SERVER TBA

9.2.  DHCPv4 Option

   IANA is requested to assign the following new DHCPv4 Option Code in
   the registry maintained in http://www.iana.org/assignments/bootp-
   dhcp-parameters/:







Boucadair, et al.       Expires October 16, 2014                [Page 8]

Internet-Draft              PCP DHCP Options                  April 2014


            Option Name Value Data length Meaning
   -------------------- ----- ----------- ------------------------------
   OPTION_V4_PCP_SERVER TBA   Variable;   Includes one or multiple lists
                              the minimum of PCP server IP addresses;
                              length is   each list is treated as a
                              5.          separate PCP server.

10.  Acknowledgements

   Many thanks to C. Jacquenet, R. Maglione, D. Thaler, T. Mrugalski, T.
   Reddy, S. Cheshire, M. Wasserman, C. Holmberg, A. Farrel, S. Farrel,
   B. Haberman, and P. Resnick for their review and comments.

   Special thanks to T. Lemon and B. Volz for the review and their
   effort to enhance this specification.

11.  References

11.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol", RFC
              2131, March 1997.

   [RFC2132]  Alexander, S. and R. Droms, "DHCP Options and BOOTP Vendor
              Extensions", RFC 2132, March 1997.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", RFC 3315, July 2003.

   [RFC3396]  Lemon, T. and S. Cheshire, "Encoding Long Options in the
              Dynamic Host Configuration Protocol (DHCPv4)", RFC 3396,
              November 2002.

   [RFC4291]  Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", RFC 4291, February 2006.

   [RFC6887]  Wing, D., Cheshire, S., Boucadair, M., Penno, R., and P.
              Selkirk, "Port Control Protocol (PCP)", RFC 6887, April
              2013.

   [RFC6890]  Cotton, M., Vegoda, L., Bonica, R., and B. Haberman,
              "Special-Purpose IP Address Registries", BCP 153, RFC
              6890, April 2013.




Boucadair, et al.       Expires October 16, 2014                [Page 9]

Internet-Draft              PCP DHCP Options                  April 2014


11.2.  Informative References

   [I-D.boucadair-pcp-deployment-cases]
              Boucadair, M., "PCP Deployment Models", draft-boucadair-
              pcp-deployment-cases-01 (work in progress), December 2013.

   [I-D.ietf-dhc-topo-conf]
              Lemon, T. and T. Mrugalski, "Customizing DHCP
              Configuration on the Basis of Network Topology", draft-
              ietf-dhc-topo-conf-01 (work in progress), February 2014.

   [I-D.ietf-pcp-server-selection]
              Boucadair, M., Penno, R., Wing, D., Patil, P., and T.
              Reddy, "PCP Server Selection", draft-ietf-pcp-server-
              selection-02 (work in progress), January 2014.

   [RFC6052]  Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and X.
              Li, "IPv6 Addressing of IPv4/IPv6 Translators", RFC 6052,
              October 2010.

   [RFC6333]  Durand, A., Droms, R., Woodyatt, J., and Y. Lee, "Dual-
              Stack Lite Broadband Deployments Following IPv4
              Exhaustion", RFC 6333, August 2011.

Authors' Addresses

   Mohamed Boucadair
   France Telecom
   Rennes  35000
   France

   Email: mohamed.boucadair@orange.com


   Reinaldo Penno
   Cisco
   USA

   Email: repenno@cisco.com


   Dan Wing
   Cisco Systems, Inc.
   170 West Tasman Drive
   San Jose, California  95134
   USA

   Email: dwing@cisco.com



Boucadair, et al.       Expires October 16, 2014               [Page 10]
