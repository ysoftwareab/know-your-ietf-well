<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>An Extension to Session
    Initiation Protocol (SIP) Events for Conditional Event
    Notification</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="An Extension to Session
    Initiation Protocol (SIP) Events for Conditional Event
    Notification">
<meta name="keywords" content="I-D, RFC, Internet-Draft, Request For Comments, SIP events, subnot-etags, optimization">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Session Initiation Protocol</td><td class="header">A. Niemi</td></tr>
<tr><td class="header">Working Group</td><td class="header">Nokia</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">D. Willis, Ed.</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Softarmor Systems</td></tr>
<tr><td class="header">Expires: May 30, 2010</td><td class="header">November 26, 2009</td></tr>
</table></td></tr></table>
<h1><br />An Extension to Session
    Initiation Protocol (SIP) Events for Conditional Event
    Notification<br />draft-ietf-sipcore-subnot-etags-03</h1>

<h3>Abstract</h3>

<p>The Session Initiation Protocol (SIP) events framework enables
      receiving asynchronous notification of various events from other SIP
      user agents. This framework defines the procedures for creating,
      refreshing and terminating subscriptions, as well as fetching and
      periodic polling of resource state. These procedures provide no tools to
      avoid replaying event notifications that have already been received by a
      user agent. This memo defines an extension to SIP events that allows the
      subscriber to condition the subscription request to whether the state
      has changed since the previous notification was received. When such a
      condition is true, either the body of a resulting event notification or
      the entire notification message is suppressed.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 30, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.1.</a>&nbsp;
Document Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.2.</a>&nbsp;
Terminology<br />
<a href="#motivations">2.</a>&nbsp;
Motivations and Background<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#overview">2.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.2.</a>&nbsp;
Problem Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.3.</a>&nbsp;
Requirements<br />
<a href="#operation">3.</a>&nbsp;
Overview of Operation<br />
<a href="#model">4.</a>&nbsp;
Resource Model for Entity-Tags<br />
<a href="#subscriber">5.</a>&nbsp;
Subscriber Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subs_support">5.1.</a>&nbsp;
Detecting Support for Conditional Notification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subs_gen">5.2.</a>&nbsp;
Generating SUBSCRIBE Requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">5.3.</a>&nbsp;
Receiving NOTIFY Requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">5.4.</a>&nbsp;
Polling or Fetching Resource State<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subs_resume">5.5.</a>&nbsp;
Resuming a Subscription<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subs_refresh">5.6.</a>&nbsp;
Refreshing a Subscription<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#subs_terminate">5.7.</a>&nbsp;
Terminating a Subscription<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#error_conditions">5.8.</a>&nbsp;
Handling Transient Errors<br />
<a href="#notifier">6.</a>&nbsp;
Notifier Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#generating">6.1.</a>&nbsp;
Generating Entity-tags<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#suppressing">6.2.</a>&nbsp;
Suppressing NOTIFY Bodies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#suppressing_request">6.3.</a>&nbsp;
Suppressing NOTIFY Requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#differentials">6.4.</a>&nbsp;
State Differentials<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rls">6.5.</a>&nbsp;
List Subscriptions<br />
<a href="#proto">7.</a>&nbsp;
Protocol Element Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#proto_resp">7.1.</a>&nbsp;
204 (No Notification) Response Code<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#proto_header">7.2.</a>&nbsp;
Suppress-If-Match Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#proto_grammar">7.3.</a>&nbsp;
Grammar<br />
<a href="#iana">8.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">8.1.</a>&nbsp;
204 (No Notification) Response Code<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">8.2.</a>&nbsp;
Suppress-If-Match Header Field<br />
<a href="#security">9.</a>&nbsp;
Security Considerations<br />
<a href="#anchor9">10.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The Session Initiation Protocol (SIP) events framework provides an
      extensible facility for requesting notification of certain events from
      other SIP user agents. This framework includes procedures for creating,
      refreshing and terminating of subscriptions, as well as the possibility
      to fetch or periodically poll the event resource.
</p>
<p>Several instantiations of this framework, called event packages have
      been defined, e.g., for <a class='info' href='#RFC3856'>presence<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Presence Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3856], <a class='info' href='#RFC3842'>message waiting indications<span> (</span><span class='info'>Mahy, R., &ldquo;A Message Summary and Message Waiting Indication Event Package for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3842] and <a class='info' href='#RFC3680'>registrations<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Session Initiation Protocol (SIP) Event Package for Registrations,&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3680].
</p>
<p>By default, every SUBSCRIBE request generates a NOTIFY request
      containing the latest event state. Typically, a SUBSCRIBE request is
      issued by the subscriber whenever it needs a subscription to be
      installed, periodically refreshed or terminated. Once the subscription
      has been installed, the majority of the NOTIFYs generated by the
      subscription refreshes are superfluous; the subscriber usually is in
      possession of the event state already, except in the unlikely case where
      a state change exactly coincides with the periodic subscription refresh.
      In most cases, the final event state generated upon terminating the
      subscription similarly contains resource state that the subscriber
      already has.
</p>
<p>Fetching or polling of resource state behaves in a similarly
      suboptimal way in cases where the state has not changed since the
      previous poll occurred. In general, the problem lies in with the
      inability to persist state across a SUBSCRIBE request.
</p>
<p>This memo defines an extension to optimize the SIP events framework.
      This extension allows a notifier to tag notifications (called
      entity-tags hereafter), and the subscriber to condition its subsequent
      SUBSCRIBE requests for actual changes since a notification carrying that
      entity-tag was issued. The solution is similar to conditional
      requests defined in the <a class='info' href='#RFC2616'>Hypertext Transfer
      Protocol (HTTP)<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616], and follows the mechanism already defined for
      the <a class='info' href='#RFC3903'>PUBLISH<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] method for issuing conditional
      event publications.
</p>
<p>This memo is structured as follows. <a class='info' href='#motivations'>Section&nbsp;2<span> (</span><span class='info'>Motivations and Background</span><span>)</span></a> explains the background, motivations and
      requirements for the work; <a class='info' href='#operation'>Section&nbsp;3<span> (</span><span class='info'>Overview of Operation</span><span>)</span></a> gives a
      general overview of the mechanism; <a class='info' href='#model'>Section&nbsp;4<span> (</span><span class='info'>Resource Model for Entity-Tags</span><span>)</span></a> explains
      the underlying model for resources and entities as they apply to
      conditional notification; <a class='info' href='#subscriber'>Section&nbsp;5<span> (</span><span class='info'>Subscriber Behavior</span><span>)</span></a> defines the
      subscriber behavior; <a class='info' href='#notifier'>Section&nbsp;6<span> (</span><span class='info'>Notifier Behavior</span><span>)</span></a> defines the
      notifier behavior; <a class='info' href='#proto'>Section&nbsp;7<span> (</span><span class='info'>Protocol Element Definitions</span><span>)</span></a> includes the protocol
      element definitions; <a class='info' href='#iana'>Section&nbsp;8<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a> includes the IANA
      considerations; and <a class='info' href='#security'>Section&nbsp;9<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> includes the
      security considerations.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Document Conventions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in BCP 14, <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119] and indicate requirement levels for
        compliant implementations.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p>In addition to the terminology introduced in <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> and <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a>, this specification uses these additional
        terms to describe the objects of conditional notification: </p>
<blockquote class="text"><dl>
<dt>resource</dt>
<dd>An object
            identified by a URI, whose resource state can be accessed using
            the SIP Event Notification framework. There is a single
            authoritative notifier responsible for communicating the resource
            state.
</dd>
<dt>entity</dt>
<dd>The representation
            of resource state. An entity consists of the state data carried in
            the body of a NOTIFY message, as well as related meta-data in the
            message header. There may be many versions of an entity, one
            current and the others stale. Each version of an entity is
            identified by an entity-tag, which is guaranteed to be unique
            across all versions of all entities for a resource and event
            package.
</dd>
</dl></blockquote>

<a name="motivations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Motivations and Background</h3>

<a name="overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Overview</h3>

<p>A SUBSCRIBE request creates a subscription with a finite lifetime.
        This lifetime is negotiated using the Expires header field, and unless
        the subscription is refreshed by the subscriber before the expiration
        is met, the subscription is terminated. The frequency of these
        subscription refreshes depends on the event package, and typically
        ranges from minutes to hours.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Problem Description</h3>

<p>The SIP events
        framework does not include different protocol methods for initiating
        and terminating of subscriptions, subscription refreshes and fetches
        inside and outside of the SIP dialog. The SUBSCRIBE method is
        overloaded to perform all of these functions
        The difference between a fetch that does not create a
        (lasting) subscription, and a SUBSCRIBE that creates one is in the
        Expires header field value of the SUBSCRIBE; a zero-expiry SUBSCRIBE
        only generates a single NOTIFY, after which the subscription
        immediately terminates. Lasting subscriptions typically have relatively 
		short expiry periods, requiring periodic sending of new SUBSCRIBE
		requests in order to refresh the subscription.
</p>
<p>Each new SUBSCRIBE request generates a NOTIFY request containing the 
		latest resource state. Even if the state has not changed, it is sent again
		in response to each poll or subscription refresh. This is very similar to 
		the <a class='info' href='#RFC2616'>HTTP<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] problem of repeated GET operations
		on a resource. HTTP solves the problem using conditional requests. The server
		versions each entity with an entity tag that identifies a specific instance of
		that entity. Clients making GET requests can then include the entity tag for 
		the version of the entity that they currently to be current in an 
		"If-None-Match" header field, and the server can compare this entity tag 
		to the entity it believes to be current and 
		suppress resending the entity in the response if the server believes the
		client's version matches. In other words, the server doesn't re-send 
		information that the client has already received. 
</p>
<p>The <a class='info' href='#RFC3903'>SIP PUBLISH<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] method uses
        a similar mechanism, where a refresh of a publication is done by
        reference to its assigned entity-tag, instead of retransmitting the
        event state each time the publication expiration is extended.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Requirements</h3>

<p>As a summary, here is the required functionality to solve the
        presented issues: </p>
<blockquote class="text"><dl>
<dt>REQ1: </dt>
<dd>It must be possible to suppress the NOTIFY request (or at a
            minimum the event body therein) if the subscriber is already in
            possession of (or has previously received and discarded) the latest 
			event state of the resource.
</dd>
<dt>REQ2: </dt>
<dd>This mechanism must apply to initial subscriptions, in which
            the subscriber is attempting to resume an earlier
            subscription that has been paused. 
</dd>
<dt>REQ3: </dt>
<dd>This mechanism must apply to refreshing a subscription.
</dd>
<dt>REQ4: </dt>
<dd>This mechanism must apply to terminating a subscription (i.e.,
            an unsubscribe).
</dd>
<dt>REQ5: </dt>
<dd>This mechanism must apply to fetching or polling of resource
            state.
</dd>
</dl></blockquote>

<a name="operation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Overview of Operation</h3>

<p>Whenever a subscriber initiates a subscription, it issues a SUBSCRIBE
      request. The SUBSCRIBE request is sent, routed and processed by the
      notifier normally, i.e., according to <a class='info' href='#RFC3261'>The Session Initiation Protocol<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261], and <a class='info' href='#RFC3265'>SIP Specific Event Notification<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265].
</p>
<p>If the notifier receiving the SUBSCRIBE request supports conditional
      subscriptions, it generates an entity tag for the current entity,
      and includes it in a SIP-ETag header field of the NOTIFY
      request. The entity tag is unique across all versions of all entities
      for a resource and event package. More on this in <a class='info' href='#model'>Section&nbsp;4<span> (</span><span class='info'>Resource Model for Entity-Tags</span><span>)</span></a>.
</p>
<p>Entity-tags are independent of subscriptions. This
      allows notifications generated to a fetch or a poll to have valid
      entity-tags even across subsequent fetches or polls.
</p>
<p>The subscriber will store the entity-tag received in the notification
      along with the resource state. It can then later use this entity-tag to
      make a SUBSCRIBE contain a condition in the form of a
      "Suppress-If-Match" header field. Unlike the "If-Match" condition in a
      <a class='info' href='#RFC3903'>PUBLISH<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] request, which applies to whether
      the PUBLISH succeeds or returns an error, this condition applies to the
      stream of notifications that are sent after the SUBSCRIBE request has
      been processed.
</p>
<p>The "Suppress-If-Match" header field contains the last entity-tag
      seen by the subscriber. This condition, if true, instructs the notifier
      to suppress either the body of a subsequent notification, or the entire
      notification.
</p>
<p>The condition is evaluated by matching the value of the header field
      against the entity-tag of the entity that would normally be sent in
      the associated NOTIFY message.  There is also a
      wildcard entity-tag with a special value of "*" that always matches.
</p><br /><hr class="insert" />
<a name="ov"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

     Subscriber                               Notifier
     ----------                               --------

     (1) SUBSCRIBE       --------&gt;
         Expires: 3600
                         &lt;--------       (2) 200 (or 202)

                         &lt;--------       (3) NOTIFY
                                             Subscription-State: active
                                             SIP-ETag: ffee2
     (4) 200             --------&gt;

          ... time passes ...

     (5) SUBSCRIBE       --------&gt;                \ if "ffee2"
         Suppress-If-Match: ffee2                 |   matches
         Expires: 3600                            |   local
                                                  |   entity-tag
                                                  |
                         &lt;--------       (6) 204  / then

        ... time passes and resource state (entity) changes...


                         &lt;--------       (7) NOTIFY
                                             Subscription-State: active
                                             SIP-ETag: ca89a
     (8) 200             --------&gt;


        ... time passes ...


     (9) SUBSCRIBE       --------&gt;                \ if "ca89"
         Suppress-If-Match: ca89a                 |   matches
         Expires: 0                               |   local
                                                  |   entity-tag
                                                  |
                         &lt;--------      (10) 204  / then

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Example Message Flow&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p><a class='info' href='#ov'>Figure&nbsp;1<span> (</span><span class='info'>Example Message Flow</span><span>)</span></a> describes a typical message flow for
      conditional notification: </p>
<ol class="text">
<li>The subscriber initiates a subscription by sending a SUBSCRIBE
          request for a resource.
</li>
<li>After proper authentication and authorization, the notifier
          accepts the subscription.
</li>
<li>The notifier then immediately sends the initial event
          notification, including a unique entity-tag in a SIP-ETag header
          field.
</li>
<li>The subscriber accepts the notification and stores the entity-tag
          value along with the resource state.
</li>
<li>Later, the subscriber refreshes the subscription, and includes an
          entity-tag in a Suppress-If-Match header field.
</li>
<li>The notifier evaluates the condition by matching its local
          entity-tag value for the resource against the value of the
          Suppress-If-Match header field. If the condition evaluates to true,
          the notifier informs the subscriber that the notification will not
          be sent.
</li>
<li>At some point, the state of the resource changes, e.g., the
          presence status of a user changes from online to busy. This triggers
          an event notification with a new value in the SIP-ETag header
          field.
</li>
<li>The subscriber accepts the notification and stores the new
          entity-tag along with the resource state.
</li>
<li>After a while, the subscriber decides to terminate the
          subscription. It adds a condition for Suppress-If-Match, and
          includes the entity-tag it received in the previous NOTIFY.
</li>
<li>The notifier evaluates the condition by matching its entity-tag
          for the resource against the value of the Suppress-If-Match header
          field. If the condition evaluates to true, the notifier informs the
          subscriber that no notification will be sent. This concludes the
          subscription.
</li>
</ol><p> The benefit of using conditional notification in this example
      is in the reduction of the number of NOTIFY requests the subscriber can
      expect to receive. Each event notification that the subscriber has
      already seen is suppressed by the notifier. This example illustrates
      only one use case for the mechanism; the same principles can be used to
      optimize the flow of messages related to other event notification use
      cases.
</p>
<a name="model"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Resource Model for Entity-Tags</h3>

<p>The key to understanding how conditional notification works is
      understanding the underlying resource model of event notification. In
      general, this model is similar to the resource model of HTTP with some
      key differences. This section explains in detail the model as it applies
      to SIP events. <a class='info' href='#diagram'>Figure&nbsp;2<span> (</span><span class='info'>Resource Model Diagram</span><span>)</span></a> illustrates the model.
</p><br /><hr class="insert" />
<a name="diagram"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                  +-----+
  ............    |     |
  .          .    | URI |
  . Represen .    |     |
  . tation   .    +-----+
  .          .       |*
  ............       |
       .             |
       .             V
       .        +----------+            +---------+
    composition |          |*           |  Event  |
       +------&lt;&gt;| Resource |-----------&gt;| Package |&lt;----.
       |        |          |            |         |     |
       |        +----------+            +----.----+     |
       |                                    /_\         |
       |*                                    | classification
   +--------+                                |          |
   |        |        .----------------.------'          |
   | Entity |        |                |                 |
   |        |        |                |                 |*
   +--------+   +----------+    +------------+     +----------+
       ^        |          |    |            |     |          |
       |        | Presence |    | Conference |     | Template |
       |        |          |    |            |     |          |
       |1..*    +----------+    +------------+     +----.-----+
  +---------+                                          /_\
  |         |                                           |
  | Version |                                           |
  |         |                                      +---------+
  +---------+                                      | Watcher |
       |1                                          |  Info   |
       |                                           |         |
       |                                           +---------+
       V
  +---------+
  | Entity- |
  |   Tag   |
  |         |
  +---------+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Resource Model Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>For a given event package, there is a single authoritative agent
      responsible for zero or more resources. That is, even for a distributed
      agent, the resource state is uniform across all instances. The resource
      itself can be a <a class='info' href='#RFC4662'>list of resources<span> (</span><span class='info'>Roach, A., Campbell, B., and J. Rosenberg, &ldquo;A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4662].
      Conditional notification for list subscriptions is addressed in <a class='info' href='#rls'>Section&nbsp;6.5<span> (</span><span class='info'>List Subscriptions</span><span>)</span></a>.
</p>
<p>A resource is identified by zero or more URIs, which can be SIP URIs,
      <a class='info' href='#RFC3859'>pres URIs<span> (</span><span class='info'>Peterson, J., &ldquo;Common Profile for Presence (CPP),&rdquo; August&nbsp;2004.</span><span>)</span></a> [RFC3859] or similar. Subscribers use this
      URI to subscribe to the resource for certain types of events, identified
      by the event package.
</p>
<p>With a successful subscription, a subscriber receives event
      notifications that communicate the resource state and the changes
      thereto. Each event notification carries a representation of the current
      resource state. This representation is influenced by many factors, e.g.,
      authorization and filtering rules, and the event composition rules of
      the notifier.
</p>
<p>This representation is realized in an "entity". Each
      resource may be associated with zero or more entities. For example, there may 
	  be multiple subscribers to the presence information of a single user (a resource),
	  and each subscriber may have a different filtered view of that resource, 
	  producing one entity per subscriber. However, each entity is associated with 
	  one and only one resource; there is no "compositing" of resources at the entity level. 
	  Resources may themselves be made up of information from other resources (be
	  "composite resources"), but this does not change the one-resource-per-entity rule.
</p>
<p>An entity consists of the data carried in the body of a NOTIFY
      message, and related meta-data in the message header. Whenever the data in 
	  the body or any of the meta-data changes, the notifier MUST produce a 
	  new entity-tag. This meta-data MUST
      include, but is not limited to the following SIP header fields defined in <a class='info' href='#RFC3261'>The Session Initiation Protocol<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] and <a class='info' href='#RFC3265'>SIP Specific Event Notification<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265]:

        </p>
<ol class="text">
<li>Content-Disposition
</li>
<li>Content-Encoding
</li>
<li>Content-Language
</li>
<li>Content-Length
</li>
<li>Content-Type
</li>
<li>Event
</li>
</ol><p>
      
</p>
<p>Note that the Subscription-State is explicitly not part of the
      entity. Event packages may in the future define additional fields that
      implementations need to consider as part of the entity.
</p>
<p>An entity has one or more versions of which only one is current and
      all others stale. Each version has an entity-tag, which uniquely
      identifies it across all versions of all entities pertaining to a single
      resource and event package.
</p>
<p>Note that two entity-tags for different resources being equal does not 
	  indicate identical
      entities. In other words, if an entity-tag received for a subscription to 
	  a first resource  matches an entity-tag received for a subscription to a 
	  second resource, the subscriber cannot assume that the two entity values 
	  are equal.
</p>
<p>With partial event notification, the NOTIFY message only carries the
      delta state, or the set of changes to the previous version of the
      entity. In that case, implementations MUST consider the full event state
      as the version of the entity to which the entity-tag in the NOTIFY
      message applies.
</p>
<p>The conditional notification mechanism is independent of the way in
      which subscriptions are installed. In other words, the mechanism
      supports implicit subscriptions, such as those associated with the <a class='info' href='#RFC3515'>REFER method<span> (</span><span class='info'>Sparks, R., &ldquo;The Session Initiation Protocol (SIP) Refer Method,&rdquo; April&nbsp;2003.</span><span>)</span></a> [RFC3515].
</p>
<p>It is possible that the same resource is in some shape or form
      accessible through another mechanism in addition to SIP Event
      Notification, e.g., HTTP or the SIP PUBLISH method. In general,
      implementations MUST NOT expect the entity-tags to be shared between the
      mechanisms, unless event packages or specific applications of SIP Events
      explicitly define such dependencies.
</p>
<a name="subscriber"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Subscriber Behavior</h3>

<p>This section augments the subscriber behavior defined in <a class='info' href='#RFC3265'>RFC3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265]. It first discusses general issues
      related to <a class='info' href='#subs_support'>indicating support for the
      mechanism<span> (</span><span class='info'>Detecting Support for Conditional Notification</span><span>)</span></a> and <a class='info' href='#subs_gen'>creating conditions in
      SUBSCRIBE requests<span> (</span><span class='info'>Generating SUBSCRIBE Requests</span><span>)</span></a>; it then describes the workflows for the main
      three use cases for making the subscription conditional.
</p>
<a name="subs_support"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Detecting Support for Conditional Notification</h3>

<p>The mechanism defined in this memo is backwards compatible with
        <a class='info' href='#RFC3265'>SIP events<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] in that a notifier supporting
        this mechanism will insert a SIP entity-tag in its NOTIFY requests,
        and a subscriber that understands this mechanism will know how to use
        it in creating a conditional request.
</p>
<p>Unaware subscribers will simply ignore the entity-tag, make
        requests without conditions and receive the default treatment from the
        notifier. Unaware notifiers will simply ignore the conditional header
        fields, and continue normal operation.
</p>
<a name="subs_gen"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Generating SUBSCRIBE Requests</h3>

<p>When creating a conditional SUBSCRIBE request, the subscriber MUST
        include a single conditional header field including an entity-tag in
        the request. The condition is evaluated by comparing the entity-tag of
        the subscribed resource with the entity-tag carried in the conditional
        header field. If they match, the condition evaluates to true.
</p>
<p>Unlike the condition introduced for the <a class='info' href='#RFC3903'>SIP
        PUBLISH<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903] method, these conditions do not apply to the SUBSCRIBE
        request itself, but to the resulting NOTIFY requests. When true, the
        condition drives the notifier to change its behavior with regards to
        sending the notifications after the SUBSCRIBE.
</p>
<p>This specification defines a new header field called
        "Suppress-If-Match". This header field introduces a condition to the
        SUBSCRIBE request. If true, it instructs the notifier to either omit
        the body of the resulting NOTIFY message (if the SUBSCRIBE is not sent
        within an existing dialog), or suppress (i.e., block) the NOTIFY
        request that would otherwise be triggered the SUBSCRIBE (for an
        established dialog). In the latter case, the SUBSCRIBE message will be
        answered with a 204 (No Notification) response. As long as the
        condition remains true, it also instructs the notifier to either
        suppress any subsequent NOTIFY request, or if there are reportable
        changes in the NOTIFY header, e.g., the Subscription-State has
        changed, suppress the body of any subsequent NOTIFY request.
</p>
<p>If the condition is false, the notifier follows its default
        behaviour.
</p>
<p>If the subscriber receives a 204 (No Notification) to an in-dialog
        SUBSCRIBE, the subscriber can clear handle that it may have had
        pending on a NOTIFY in response the SUBSCRIBE message.
</p>
<p>The value of the "Suppress-If-Match" header field is an entity-tag,
        which is an opaque token that the subscriber simply copies (bytewise) 
		from a
        previously received NOTIFY request.
</p>
<p>Example: </p>
<blockquote class="text">
<p>Suppress-If-Match: b4cf7
</p>
</blockquote>

<p>The header field can also be wildcarded using the special "*"
        entity-tag value. Such a condition always evaluates to true regardless
        of the value of the current entity-tag for the resource.
</p>
<p>Example: </p>
<blockquote class="text">
<p>Suppress-If-Match: *
</p>
</blockquote>

<p>Such a wildcard condition effectively quenches a subscription; the
        only notifications received are those reporting changes to the
        subscription state and those in response to a SUBSCRIBE message sent
        outside of an existing dialog. In both cases, the notifications will
        not contain a body. </p>
<blockquote class="text">
<p>A subscription with a wildcard "Suppress-If-Match" condition is
            useful in scenarios where the subscriber wants to temporarily put
            a subscription in dormant mode. For example, a host may want to
            conserve bandwidth and power when it detects from screen or input
            device inactivity that the user isn't actively monitoring the
            presence statuses of contacts.
</p>
</blockquote>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Receiving NOTIFY Requests</h3>

<p>When a subscriber receives a NOTIFY request that contains a
        SIP-ETag header field, it MUST store the entity-tag if it wishes to
        make use of the conditional notification mechanism. The subscriber
        MUST be prepared to receive a NOTIFY with any entity-tag value,
        including a value that matches any previous value that the subscriber
        might have seen.
</p>
<p>The subscriber MUST NOT infer any meaning from the value of an
        entity-tag; specifically, the subscriber MUST NOT assume identical
        entities (i.e., event state) for NOTIFYs with identical entity-tag
        values when those NOTIFYs result from subscription to different 
		resources.
		  </p>
<blockquote class="text">
<p>Note that there are valid cases for which identical entity-tag
              values on different resources may occur. For example, it is  
              possible to generate entity-tag values using a one-way hash
              function, resulting in the possibility that two different resources 
			  having the same entity-value will also have the same entity tag. 
			  Clients however MUST NOT assume that this is the case, as the algorithm 
			  for the generation of entity tags is notifier-dependent and not 
			  negotiated with the subscriber. Consequently, the subscriber cannot 
			  differentiate between two entity tags that have the same value because 
			  they are similar hashes of identical entities, or because two notifiers
			  happen to have used the same sequential number as an entity tag. Entity 
			  tags are only required to be unique for a given resource, not globally
			  unique.
</p>
</blockquote><p>
		  
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Polling or Fetching Resource State</h3>

<p>Polling with conditional notification allows a user agent to
        efficiently poll resource state. This is accomplished using the
        Suppress-If-Match condition:
</p><br /><hr class="insert" />
<a name="fig_poll"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   Subscriber                               Notifier
   ----------                               --------

  (1) SUBSCRIBE       --------&gt;
      Expires: 0
                      &lt;--------       (2) 202

                      &lt;--------       (3) NOTIFY
                                          Subscription-State: terminated
                                          SIP-ETag: f2e45
                                          Content-Length: 17539

  (4) 200             --------&gt;


  ... poll interval elapses ...


  (5) SUBSCRIBE       --------&gt;
      Suppress-If-Match: f2e45
      Expires: 0
                      &lt;--------       (6) 202

                      &lt;--------       (7) NOTIFY
                                          Subscription-State: terminated
                                          SIP-ETag: f2e45
                                          Content-Length: 0

  (8) 200             --------&gt;



</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Polling Resource State&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<ol class="text">
<li>The subscriber polls for resource state by sending a SUBSCRIBE
            with zero expiry (expires immediately).
</li>
<li>The notifier accepts the SUBSCRIBE with a 202 (Accepted)
            response.
</li>
<li>The notifier then immediately sends a first (and last) NOTIFY
            request with the current resource state, and the current
            entity-tag in the SIP-ETag header field.
</li>
<li>The subscriber accepts the notification with a 200 (OK)
            response.
</li>
<li>After some arbitrary poll interval, the subscriber sends
            another SUBSCRIBE with a Suppress-If-Match header field that
            includes the entity-tag received in the previous NOTIFY.
</li>
<li>The notifier accepts the SUBSCRIBE with a 202 (Accepted)
            response. (202 would be used to indicate that the subscription
			request was understood without also indicating that it was 
			authorized, as per section 3.1.6.1 of <a class='info' href='#RFC3265'>SIP Specific Event Notification"<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265].)
</li>
<li>Since the resource state has not changed since the previous
            poll occurred, the notifier sends a NOTIFY message with no body.
            It also mirrors the current entity-tag of the resource in the
            SIP-ETag header field.
</li>
<li>The subscriber accepts the notification with a 200 (OK)
            response.
</li>
</ol>

<a name="subs_resume"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Resuming a Subscription</h3>

<p>Resuming a subscription means the ability to continue an earlier
        subscription that either closed abruptly, or was explicitly
        terminated. When resuming, the subscription is established without
        transmitting the resource state. This is accomplished with conditional
        notification and the Suppress-If-Match header field:
</p><br /><hr class="insert" />
<a name="fig_resume"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       Subscriber                               Notifier
       ----------                               --------

   (1) SUBSCRIBE       --------&gt;
       Suppress-If-Match: ega23
       Expires: 3600
                       &lt;--------       (2) 202

                       &lt;--------       (3) NOTIFY
                                           Subscription-State: active
                                           SIP-ETag: ega23
                                           Content-Length: 0
   (4) 200             --------&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Resuming a Subscription&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<ol class="text">
<li>The subscriber attempts to resume an earlier subscription by
            including a Suppress-If-Match header field with the entity-tag it
            last received.
</li>
<li>The notifier accepts the subscription after proper
            authentication and authorization, by sending a 202 (Accepted)
            response.
</li>
<li>Since the condition is true, the notifier then immediately
            sends an initial NOTIFY request that has no body. It also mirrors
            the current entity-tag of the resource in the SIP-ETag header
            field.
</li>
<li>The subscriber accepts the NOTIFY and sends a 200 (OK)
            response.
</li>
</ol>

<p>Had the entity-tag not been valid any longer, the condition would
        have evaluated to false, and the NOTIFY would have had a body
        containing the latest resource state.
</p>
<a name="subs_refresh"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Refreshing a Subscription</h3>

<p>To refresh a subscription using conditional notification, the
        subscriber creates a subscription refresh before the subscription
        expires, and uses the Suppress-If-Match header field:
</p><br /><hr class="insert" />
<a name="fig_refresh"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       Subscriber                               Notifier
       ----------                               --------

       (1) SUBSCRIBE       --------&gt;
           Suppress-If-Match: aba91
           Expires: 3600

                           &lt;--------       (2) 204
                                               Expires: 3600

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Refreshing a Subscription&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<ol class="text">
<li>Before the subscription expires, the subscriber
            sends a SUBSCRIBE request that includes the Suppress-If-Match
            header field with the latest entity-tag it has seen.
</li>
<li>If the condition evaluates to true, the notifier sends a 204
            (No Notification) response and sends no NOTIFY request. The
            Expires header field of the 204 (No Notification) indicates the
            new expiry time.
</li>
</ol>

<a name="subs_terminate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7"></a><h3>5.7.&nbsp;
Terminating a Subscription</h3>

<p>To terminate a subscription using conditional notification, the
        subscriber creates a SUBSCRIBE request with a Suppress-If-Match
        condition:
</p><br /><hr class="insert" />
<a name="fig_terminate"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       Subscriber                               Notifier
       ----------                               --------

       (1) SUBSCRIBE       --------&gt;
           Suppress-If-Match: ega23
           Expires: 0

                           &lt;--------       (2) 204

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Terminating a Subscription&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<ol class="text">
<li>The subscriber decides to terminate the subscription and sends
            a SUBSCRIBE request with the Suppress-If-Match condition with the
            entity-tag it has last seen.
</li>
<li>If the condition evaluates to true, the notifier sends a 204
            (No Notification) response, which concludes the subscription, and
            the subscriber can clear all state related to the
            subscription.
</li>
</ol>

<a name="error_conditions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.8"></a><h3>5.8.&nbsp;
Handling Transient Errors</h3>

<p>This section is non-normative.
</p>
<p>In some deployments, there may be Back-to-Back User Agent (B2BUA)
        devices that track SIP dialogs such as subscription dialogs. These
        devices may be unaware of the conditional notification mechanism.
</p>
<p>It is possible that some B2BUA devices may treat a NOTIFY with
        suppressed body as an error, or may expect all SUBSCRIBE messages to
        have an associated NOTIFY message.
</p>
<p>In general, there is very little that an endpoint can do to recover
        from such transient errors. The most that can be done is to try to
        detect such errors, and define a fall back behavior.
</p>
<p>If subscribers encounter transient errors in conditional
        notification, they should disable the feature and fall back to normal
        subscription behavior.
</p>
<a name="notifier"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Notifier Behavior</h3>

<p>This section augments the notifier behavior as specified in <a class='info' href='#RFC3265'>RFC3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265].
</p>
<a name="generating"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Generating Entity-tags</h3>

<p>An entity-tag is a token carried in the SIP-ETag header field, and
        it is opaque to the client. The notifier is free to decide on any
        means for generating the entity-tag. It can have any value, except for
        "*". For example, one possible method is to implement the entity-tag
        as a simple counter, incrementing it by one for each generated
        notification per resource.
</p>
<p>A notifier MUST generate entity-tags for event notifications of all
        resources it is responsible for. The entity-tag MUST be unique across
        all versions of all entities for each state of a resource as reported 
		by a given event package. Otherwise said, for any subscription or 
		sequence of subscriptions to a specific resource using a singular event 
		package, each entity tag produced MUST map to one and only one 
		presentation of resource state (entity). Two identical entities for 
		a specific resource might or might not have identical entity tags; this
		decision is left to the notifier.
</p>
<p>An entity-tag is considered valid for as long as the entity
        exits. An entity becomes stale when its version is no longer the
        current one. The notifier MUST remember (or be able to recalculate)
		the entity-tag of an entity as long as the version of the entity 
		is current. The notifier MAY
        remember the entity-tag longer than this, e.g., for implementing <a class='info' href='#differentials'>journaled state differentials<span> (</span><span class='info'>State Differentials</span><span>)</span></a>.
</p>
<p>The entity tag values used in publications are not necessarily
        shared with the entity tag values used in subscriptions. This is
        because there may not always be a one-to-one mapping between a
        publication and a notification of state change; there may be several 
		sources to the
        event composition process, and a publication into a resource may 
		not affect the resulting entity.
</p>
<a name="suppressing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Suppressing NOTIFY Bodies</h3>

<p>When a condition in a SUBSCRIBE request for suppressing
        notifications is true (i.e., the local entity-tag for the resource
        state and the entity-tag in a Suppress-If-Match header field 
		are byte-wise identical)
        but there are reportable changes in the NOTIFY header (e.g., the
        Subscription-State has changed), the notifier MUST suppress the body
        of the NOTIFY request. That is, the resulting NOTIFY contains no
        Content-Type header field, the Content-Length is set to zero, and no
        payload is attached to the message.
</p>
<p>Additionally, when a condition in a SUBSCRIBE request for
        suppressing notifications is true and the SUBSCRIBE message is not
        sent within an established dialog, the notifier MUST send a NOTIFY
        request with a suppressed entity body.
</p>
<p>Suppressing the entity body of a NOTIFY does not change the current
        entity-tag of the resource. Hence, the NOTIFY MUST contain a SIP-Etag
        header field that contains the unchanged entity-tag of the resource
        state.
</p>
<p>A Suppress-If-Match header field that includes an entity-tag with
        the value of "*" MUST always evaluate to true.
</p>
<a name="suppressing_request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Suppressing NOTIFY Requests</h3>

<p>When a condition in a SUBSCRIBE request to suppress notifications
        is true (i.e., the local entity-tag of the resource and the entity-tag
        in a Suppress-If-Match header field match), and the SUBSCRIBE is sent
        within an established dialog, then the notifier MUST suppress the
        resulting NOTIFY request, and generate a 204 (No Notification)
        response. As long as the condition remains true, and there are no
        reportable changes in the NOTIFY header, all subsequent NOTIFY
        requests MUST also be suppressed.
</p>
<p>Notifiers MUST NOT suppress a NOTIFY unless the corresponding
        SUBSCRIBE message was sent in an established dialog.
</p>
<p>A successful conditional SUBSCRIBE request MUST extend the
        subscription expiry time.
</p>
<p>Suppressing the entire NOTIFY has no effect on the entity-tag of
        the resource. In other words, it remains unchanged.
</p>
<p>A Suppress-If-Match header field that includes an entity-tag with
        the value of "*" MUST always evaluate to true.
</p>
<a name="differentials"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
State Differentials</h3>

<p>Some event packages may support a scheme where notifications
        contain state differentials, or <a class='info' href='#RFC3265'>state
        deltas<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265] instead of complete resource state.
</p>
<p>An event package definition MAY allow a  notifier to keep track 
		of the state changes of a
        resource, e.g., storing the changes in a journal. If a condition
        fails, the notifier MAY then send a state differential in the NOTIFY rather
        than the full state of the event resource. This is only possible if
        the event package and the subscriber both support a payload format
        that has this capability.
</p>
<p>When state differentials are sent, the SIP-ETag header field MUST
        contain an entity-tag that corresponds to the full resource state.
</p>
<a name="rls"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5"></a><h3>6.5.&nbsp;
List Subscriptions</h3>

<p>The <a class='info' href='#RFC4662'>Event Notification Extension for
        Resource Lists<span> (</span><span class='info'>Roach, A., Campbell, B., and J. Rosenberg, &ldquo;A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists,&rdquo; August&nbsp;2006.</span><span>)</span></a> [RFC4662] defines a mechanism for subscribing to a
        homogeneous list of resources using the SIP events framework.
</p>
<p>A list subscription delivers event notifications that contain both
        Resource List Meta-Information (RLMI) documents as well as the
        resource state of the individual resources on the list.
</p>
<p>Implementations MUST consider the full resource state of a resource
        list including RLMI and the entity-header as the entity to which the
        entity-tag applies.
</p>
<a name="proto"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Protocol Element Definitions</h3>

<p>This section describes the protocol extensions required for
      conditional notification.
</p>
<a name="proto_resp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
204 (No Notification) Response Code</h3>

<p>The 204 (No Notification) response code indicates that the request
        was successful, but the notification associated with the request will
        not be sent. It is valid only in response to a SUBSCRIBE message sent
        within an established dialog.
</p>
<p>The response code is added to the "Success" production rule in the
        <a class='info' href='#RFC3261'>SIP<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] message grammar.
</p>
<a name="proto_header"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Suppress-If-Match Header Field</h3>

<p>The Suppress-If-Match header field is added to the definition of
        the "message-header" rule in the <a class='info' href='#RFC3261'>SIP<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261]
        grammar. Its use is described in <a class='info' href='#subscriber'>Section&nbsp;5<span> (</span><span class='info'>Subscriber Behavior</span><span>)</span></a>,
        <a class='info' href='#suppressing_request'>Section&nbsp;6.3<span> (</span><span class='info'>Suppressing NOTIFY Requests</span><span>)</span></a> and <a class='info' href='#suppressing'>Section&nbsp;6.2<span> (</span><span class='info'>Suppressing NOTIFY Bodies</span><span>)</span></a>.
</p>
<p>This header field is allowed to appear in any request, but its
        behavior is only defined for the SUBSCRIBE request.
</p>
<a name="proto_grammar"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Grammar</h3>

<p>This section defines the formal syntax for extensions described in
        this memo in <a class='info' href='#RFC5234'>Augmented BNF (ABNF)<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> [RFC5234]. The
        rules defined here augment and reference the syntax defined in <a class='info' href='#RFC3261'>RFC3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] and <a class='info' href='#RFC3903'>RFC3903<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3903].
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
<dfn>Success</dfn>             =/ "<span class='str'>204</span>"  <em>;  No Notification</em>

      <em>; Success is defined in RFC3261.</em>

<dfn>message-header</dfn>      =/ <cite class='id'>Suppress-If-Match</cite>

      <em>; message-header is defined in RFC3261.</em>

<dfn>Suppress-If-Match</dfn>   =  "<span class='str'>Suppress-If-Match</span>" <cite class='id'>HCOLON</cite> ( <cite class='id'>entity-tag</cite> / "<span class='str'>*</span>" )

      <em>; entity-tag is defined in RFC3903.</em>

</pre></div>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>This document registers a new response code and a new header field
      name.
</p>
<p></p>
<blockquote class="text">
<p>Note to IANA and the RFC editor: please replace all occurrences
          of RFCXYZ in this section with the RFC number of this specification
          upon publication.
</p>
</blockquote>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
204 (No Notification) Response Code</h3>

<p>This document registers a new response code. This response code is
        defined by the following information, which has been added to the
        methods and response-codes sub-registry under
        http://www.iana.org/assignments/sip-parameters. 
</p>
<p style='text-align: center'>This information is to be added under "Successful 2xx"
          category.
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Response Code</th><th align="left">Reference</th></tr>
<tr>
<td align="left">204 No Notification</td>
<td align="left">[RFCXYZ]</td>
</tr>
</table>
<br clear="all" />

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Suppress-If-Match Header Field</h3>

<p>This document registers a new SIP header field called
        Suppress-If-Match. This header field is defined by the following
        information, which has been added to the header fields sub-registry
        under http://www.iana.org/assignments/sip-parameters. 
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Header Name</th><th align="left">Compact</th><th align="left">Reference</th></tr>
<tr>
<td align="left">Suppress-If-Match</td>
<td align="left">&nbsp;</td>
<td align="left">[RFCXYZ]</td>
</tr>
</table>
<br clear="all" />

<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>The security considerations for SIP event notification are
      extensively discussed in <a class='info' href='#RFC3265'>RFC 3265<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3265]. This
      specification introduces an optimization to SIP event notification,
      which in itself does not alter the security properties of the
      protocol.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgments</h3>

<p>The following people have contributed corrections and suggestions to
      this document: Adam Roach, Sean Olson, Johnny Vrancken, Pekka Pessi, Eva
      Leppanen, Krisztian Kiss, Peili Xu, Avshalom Houri, David Viamonte,
      Jonathan Rosenberg, Qian Sun, Dale Worley, Tolga Asveren, Brian Stucker,
      Eric Rescorla, Arun Arunachalam and the SIP and SIMPLE working
      groups.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3903">[RFC3903]</a></td>
<td class="author-text">Niemi, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3903">Session Initiation Protocol (SIP) Extension for Event State Publication</a>,&rdquo; RFC&nbsp;3903, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3903.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3515">[RFC3515]</a></td>
<td class="author-text">Sparks, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3515">The Session Initiation Protocol (SIP) Refer Method</a>,&rdquo; RFC&nbsp;3515, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3515.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3680">[RFC3680]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3680">A Session Initiation Protocol (SIP) Event Package for Registrations</a>,&rdquo; RFC&nbsp;3680, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3680.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3842">[RFC3842]</a></td>
<td class="author-text">Mahy, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3842">A Message Summary and Message Waiting Indication Event Package for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3842, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3842.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3856">[RFC3856]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3856">A Presence Event Package for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3856, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3856.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3859">[RFC3859]</a></td>
<td class="author-text">Peterson, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3859">Common Profile for Presence (CPP)</a>,&rdquo; RFC&nbsp;3859, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3859.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4662">[RFC4662]</a></td>
<td class="author-text">Roach, A., Campbell, B., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4662">A Session Initiation Protocol (SIP) Event Notification Extension for Resource Lists</a>,&rdquo; RFC&nbsp;4662, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4662.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Aki Niemi</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NOKIA GROUP, FIN  00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 389 1644</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:aki.niemi@nokia.com">aki.niemi@nokia.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dean Willis (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Softarmor Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3100 Independence Pkwy #311-164</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Plano, TX  75075</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 214 504 1987</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dean.willis@softarmor.com">dean.willis@softarmor.com</a></td></tr>
</table>
</body></html>
